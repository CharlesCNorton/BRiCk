<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> `theories/` </a>
      <a href="../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.lang.cpp.logic.destroy</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2020-2023&nbsp;BedRock&nbsp;Systems,&nbsp;Inc.<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">elpi.apps.locker</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.proofmode.html#"><span class="id" title="library">iris.proofmode.proofmode</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.errors.html#"><span class="id" title="library">bedrock.lang.bi.errors</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.ast.html#"><span class="id" title="library">bedrock.lang.cpp.ast</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.semantics.html#"><span class="id" title="library">bedrock.lang.cpp.semantics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">bedrock.lang.cpp.logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.pred.html#"><span class="id" title="library">pred</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#"><span class="id" title="library">wp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#"><span class="id" title="library">path_pred</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#"><span class="id" title="library">heap_pred</span></a> <a class="idref" href="bedrock.lang.cpp.logic.const.html#"><span class="id" title="library">const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.dispatch.html#"><span class="id" title="library">dispatch</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Set</span> <span class="id" title="keyword">Printing</span> <span class="id" title="var">Coercions</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Infix</span> "|--" := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> "|={ E }=&gt; P" := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><span class="id" title="var">E</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <span class="id" title="var">P</span>)%<span class="id" title="var">I</span> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "solve_fupd_shift" <span class="id" title="var">open_constr</span>(<span class="id" title="var">lem</span>) :=<br/>
&nbsp;&nbsp;</div>

<div class="doc">
This assumes <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a></span> instances 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">lem</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_elim"><span class="id" title="lemma">fupd_elim</span></a>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_intro"><span class="id" title="lemma">fupd_intro</span></a>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Tactic</span> <span class="id" title="keyword">Notation</span> "solve_shift_fupd" <span class="id" title="var">open_constr</span>(<span class="id" title="var">lem</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">lem</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_intro"><span class="id" title="lemma">fupd_intro</span></a>.<br/>

<br/>
</div>

<div class="doc">
Overview:

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.func.html#with_cpp.tu"><span class="id" title="variable">tu</span></a></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><a class="idref" href="bedrock.noimport.doc.cpp.logic.html#with_Sigma.this"><span class="id" title="variable">this</span></a></span> <span class="inlinecode"><span class="id" title="var">Q</span></span> destructs <span class="inlinecode"><a class="idref" href="bedrock.noimport.doc.cpp.logic.html#with_Sigma.this"><span class="id" title="variable">this</span></a></span> (which has <span class="inlinecode"><span class="id" title="var">ty</span></span> as its

</li>
</ul>
most specific type). The memory is returned to the C++ abstract
machine and the continuation <span class="inlinecode"><span class="id" title="var">Q</span></span> is invoked. If <span class="inlinecode"><a class="idref" href="bedrock.noimport.doc.cpp.logic.html#with_Sigma.this"><span class="id" title="variable">this</span></a></span> is a structure
or union, <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span> invokes <span class="inlinecode"><span class="id" title="var">ty</span></span>'s destructor (leaving any virtual
lookup to the caller).

<div class="paragraph"> </div>

NOTE in our semantics (unlike the standard) all structures and unions
are destroyed via destructors. This is justified because the only
objects that do not have destructors according to the standard have
no-op destructors. Thus, we can model the "not having a destructor" as
an optimization. This choice makes the semantics more uniform.

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.func.html#interp"><span class="id" title="abbreviation">interp</span></a></span> <span class="inlinecode"><span class="id" title="var">free</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span> destroys temporaries described by <span class="inlinecode"><span class="id" title="var">free</span></span> <span class="inlinecode">:</span>
<span class="inlinecode"><span class="id" title="var">FreeTemps.t</span></span> using <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span>

</li>
</ul>

<div class="paragraph"> </div>

TODO: Consider cutting down on the boilerplate in this file by making

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="module">wp_destroy_array</span></a></span> notation for <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="section">wp_gen</span></a></span>, <span class="inlinecode"><span class="id" title="var">mlock</span></span>ing the latter and

</li>
</ul>
using (say) type classes for the side-conditions arising in its theory

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span> notation for <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="module">wp_destroy_val</span></a></span>

</li>
</ul>

<div class="paragraph"> </div>

 <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="section">wp_gen</span></a></span> 
<div class="paragraph"> </div>

<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="section">wp_gen</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP"><span class="id" title="abbreviation">WP</span></a></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span> "runs" <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP"><span class="id" title="abbreviation">WP</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span></span> for <span class="inlinecode">0</span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">i</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode"><span class="id" title="var">n</span></span> (in order). It satisfies
<pre>
  wp_gen WP n Q =
    letI* := WP 0 in
    letI* := WP 1 in
    ..
    letI* := WP (n - 1) in
    Q
</pre>
and is compatible with fancy updates (see rule <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen_shift"><span class="id" title="lemma">wp_gen_shift</span></a></span>).

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="wp_gen" class="idref" href="#wp_gen"><span class="id" title="definition">wp_gen</span></a> `{<a id="H:2" class="idref" href="#H:2"><span class="id" title="binder">!</span></a><a id="H:2" class="idref" href="#H:2"><span class="id" title="binder">updates.BiFUpd</span></a> <a id="H:2" class="idref" href="#H:2"><span class="id" title="binder">PROP</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="WP:3" class="idref" href="#WP:3"><span class="id" title="binder">WP</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROP:1"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROP:1"><span class="id" title="variable">PROP</span></a>) (<a id="n:4" class="idref" href="#n:4"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>) (<a id="Q:5" class="idref" href="#Q:5"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROP:1"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROP:1"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldl"><span class="id" title="definition">foldl</span></a> (<span class="id" title="keyword">fun</span> <a id="acc:6" class="idref" href="#acc:6"><span class="id" title="binder">acc</span></a> <a id="i:7" class="idref" href="#i:7"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:3"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:7"><span class="id" title="variable">i</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#acc:6"><span class="id" title="variable">acc</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#90ba3c2d7eb93891194f73e4a6b3bc91"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#90ba3c2d7eb93891194f73e4a6b3bc91"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:5"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="bedrock.prelude.list_numbers.html#seqN"><span class="id" title="definition">seqN</span></a> 0 <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:4"><span class="id" title="variable">n</span></a>).<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="wp_gen" class="idref" href="#wp_gen"><span class="id" title="section">wp_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="PROP:8" class="idref" href="#PROP:8"><span class="id" title="binder">PROP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi"><span class="id" title="record">bi</span></a>} `{<a id="H:9" class="idref" href="#H:9"><span class="id" title="binder">!</span></a><a id="H:9" class="idref" href="#H:9"><span class="id" title="binder">updates.BiFUpd</span></a> <a id="H:9" class="idref" href="#H:9"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">WP</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen.PROP"><span class="id" title="variable">PROP</span></a>).<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="FRAME" class="idref" href="#FRAME"><span class="id" title="abbreviation">FRAME</span></a> <span class="id" title="var">WP</span> <span class="id" title="var">WP'</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="i:10" class="idref" href="#i:10"><span class="id" title="binder">i</span></a> <a id="Q:11" class="idref" href="#Q:11"><span class="id" title="binder">Q</span></a> <a id="Q':12" class="idref" href="#Q':12"><span class="id" title="binder">Q'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:11"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':12"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <span class="id" title="var">WP</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:10"><span class="id" title="variable">i</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:11"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <span class="id" title="var">WP'</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:10"><span class="id" title="variable">i</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':12"><span class="id" title="variable">Q'</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_gen_frame" class="idref" href="#wp_gen_frame"><span class="id" title="lemma">wp_gen_frame</span></a> <a id="WP:13" class="idref" href="#WP:13"><span class="id" title="binder">WP</span></a> <a id="WP':14" class="idref" href="#WP':14"><span class="id" title="binder">WP'</span></a> <a id="n:15" class="idref" href="#n:15"><span class="id" title="binder">n</span></a> <a id="Q:16" class="idref" href="#Q:16"><span class="id" title="binder">Q</span></a> <a id="Q':17" class="idref" href="#Q':17"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#FRAME"><span class="id" title="abbreviation">FRAME</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:13"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP':14"><span class="id" title="variable">WP'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:16"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':17"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:13"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:15"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:16"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP':14"><span class="id" title="variable">WP'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:15"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':17"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wp_frame</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> -!<a class="idref" href="bedrock.prelude.list.html#foldr_rev"><span class="id" title="lemma">foldr_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.NArith.BinNat.html#N.peano_ind"><span class="id" title="definition">N.peano_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.prelude.list_numbers.html#seqN_0"><span class="id" title="lemma">seqN_0</span></a>/=. <span class="id" title="var">iIntros</span> "HQ &gt;Q !&gt;". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HQ". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {}<span class="id" title="var">IHn</span> <a class="idref" href="bedrock.prelude.list_numbers.html#seqN_S_end_app"><span class="id" title="lemma">seqN_S_end_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id_L"><span class="id" title="lemma">left_id_L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">wp_frame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="SHIFT" class="idref" href="#SHIFT"><span class="id" title="abbreviation">SHIFT</span></a> <span class="id" title="var">WP</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="i:18" class="idref" href="#i:18"><span class="id" title="binder">i</span></a> <a id="Q:19" class="idref" href="#Q:19"><span class="id" title="binder">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <span class="id" title="var">WP</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:18"><span class="id" title="variable">i</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#90ba3c2d7eb93891194f73e4a6b3bc91"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#90ba3c2d7eb93891194f73e4a6b3bc91"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:19"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <span class="id" title="var">WP</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:18"><span class="id" title="variable">i</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:19"><span class="id" title="variable">Q</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_gen_shift" class="idref" href="#wp_gen_shift"><span class="id" title="lemma">wp_gen_shift</span></a> <a id="WP:20" class="idref" href="#WP:20"><span class="id" title="binder">WP</span></a> <a id="n:21" class="idref" href="#n:21"><span class="id" title="binder">n</span></a> <a id="Q:22" class="idref" href="#Q:22"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#FRAME"><span class="id" title="abbreviation">FRAME</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:20"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:20"><span class="id" title="variable">WP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#SHIFT"><span class="id" title="abbreviation">SHIFT</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:20"><span class="id" title="variable">WP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:20"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:21"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:22"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:20"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:21"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:22"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wp_frame</span> <span class="id" title="var">wp_shift</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> -!<a class="idref" href="bedrock.prelude.list.html#foldr_rev"><span class="id" title="lemma">foldr_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.NArith.BinNat.html#N.peano_ind"><span class="id" title="definition">N.peano_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.prelude.list_numbers.html#seqN_0"><span class="id" title="lemma">seqN_0</span></a> /=. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_elim"><span class="id" title="lemma">fupd_elim</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.prelude.list_numbers.html#seqN_S_end_app"><span class="id" title="lemma">seqN_S_end_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id_L"><span class="id" title="lemma">left_id_L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "tail".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="var">wp_shift</span>. <span class="id" title="var">iMod</span> "tail". <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">wp_frame</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] tail"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "tail !&gt;". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">IHn</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$tail]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_gen_intro" class="idref" href="#wp_gen_intro"><span class="id" title="lemma">wp_gen_intro</span></a> <a id="WP:23" class="idref" href="#WP:23"><span class="id" title="binder">WP</span></a> <a id="n:24" class="idref" href="#n:24"><span class="id" title="binder">n</span></a> <a id="Q:25" class="idref" href="#Q:25"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#FRAME"><span class="id" title="abbreviation">FRAME</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:23"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:23"><span class="id" title="variable">WP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldl"><span class="id" title="definition">foldl</span></a> (<span class="id" title="keyword">fun</span> <a id="acc:26" class="idref" href="#acc:26"><span class="id" title="binder">acc</span></a> <a id="i:27" class="idref" href="#i:27"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:23"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:27"><span class="id" title="variable">i</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#acc:26"><span class="id" title="variable">acc</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:25"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.prelude.list_numbers.html#seqN"><span class="id" title="definition">seqN</span></a> 0 <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:24"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP:23"><span class="id" title="variable">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:24"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:25"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wp_frame</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> -!<a class="idref" href="bedrock.prelude.list.html#foldr_rev"><span class="id" title="lemma">foldr_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.NArith.BinNat.html#N.peano_ind"><span class="id" title="definition">N.peano_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.prelude.list_numbers.html#seqN_0"><span class="id" title="lemma">seqN_0</span></a>/=. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "$". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.prelude.list_numbers.html#seqN_S_end_app"><span class="id" title="lemma">seqN_S_end_app</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id_L"><span class="id" title="lemma">left_id_L</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a> /=. <span class="id" title="var">iIntros</span> "wp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">wp_frame</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">rewrite</span> {}<span class="id" title="var">IHn</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "$".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="section">wp_gen</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab174"></a><h2 class="section">Destroying primitives</h2>

</div>
<div class="code">

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="wp_destroy_prim_body" class="idref" href="#wp_destroy_prim_body"><span class="id" title="definition">wp_destroy_prim_body</span></a> `{<a id="b45015ea779d7a6908b541de791ac941" class="idref" href="#b45015ea779d7a6908b541de791ac941"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="c3ce5c4004a9652c410f50daf35ade0f" class="idref" href="#c3ce5c4004a9652c410f50daf35ade0f"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>} (<a id="tu:31" class="idref" href="#tu:31"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ty:32" class="idref" href="#ty:32"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="this:33" class="idref" href="#this:33"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="q:34" class="idref" href="#q:34"><span class="id" title="binder">q</span></a> : <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.t"><span class="id" title="record">cQp.t</span></a>) (<a id="Q:35" class="idref" href="#Q:35"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:33"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#anyR"><span class="id" title="axiom">anyR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:32"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:34"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:35"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
<a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">mlock</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">Definition</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">wp_destroy_prim</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">`{</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">Σ</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">cpp_logic</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">,</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">σ</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">genv</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">}</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">translation_unit</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">ty</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">type</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">this</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">ptr</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">q</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">cQp.t</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">Q</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">epred</span></a><a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">mpred</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">wp_destroy_prim_body</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">ty</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">this</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">q</span></a> <a id="wp_destroy_prim_unlock_subterm" class="idref" href="#wp_destroy_prim_unlock_subterm"><span class="id" title="definition">Q</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="axiom">wp_destroy_prim</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>. <span class="comment">(*&nbsp;mlock&nbsp;bug&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="unfold" class="idref" href="#unfold"><span class="id" title="section">unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="20d7c0ecc86fe88fa924e57d0c585b54" class="idref" href="#20d7c0ecc86fe88fa924e57d0c585b54"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a> <a id="thread_info:52" class="idref" href="#thread_info:52"><span class="id" title="binder">thread_info</span></a>, <a id="a28929961f9d6db5798eaa85407a7306" class="idref" href="#a28929961f9d6db5798eaa85407a7306"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_prim_unfold" class="idref" href="#wp_destroy_prim_unfold"><span class="id" title="lemma">wp_destroy_prim_unfold</span></a> <a id="ty:55" class="idref" href="#ty:55"><span class="id" title="binder">ty</span></a> <a id="tu:56" class="idref" href="#tu:56"><span class="id" title="binder">tu</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:56"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:55"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim_body"><span class="id" title="definition">wp_destroy_prim_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:56"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:55"><span class="id" title="variable">ty</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_prim.unlock</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unfold"><span class="id" title="section">unfold</span></a>.<br/>

<br/>
</div>

<div class="doc">
Unfold for one type, failing if there's nothing to do.

</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_destroy_prim_unfold</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">ty</span>] =&gt; <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim_unfold"><span class="id" title="lemma">wp_destroy_prim_unfold</span></a> <span class="id" title="var">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span> "[wp_destroy_prim] not found"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="prim" class="idref" href="#prim"><span class="id" title="section">prim</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="fe1b904099dfeab72f9743c2bf233c57" class="idref" href="#fe1b904099dfeab72f9743c2bf233c57"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a> <a id="thread_info:57" class="idref" href="#thread_info:57"><span class="id" title="binder">thread_info</span></a>, <a id="5a9b0098afca755e8cd9d7504a2c357d" class="idref" href="#5a9b0098afca755e8cd9d7504a2c357d"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_prim_intro" class="idref" href="#wp_destroy_prim_intro"><span class="id" title="lemma">wp_destroy_prim_intro</span></a> <a id="tu:60" class="idref" href="#tu:60"><span class="id" title="binder">tu</span></a> <a id="ty:61" class="idref" href="#ty:61"><span class="id" title="binder">ty</span></a> (<a id="this:62" class="idref" href="#this:62"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) <a id="q:63" class="idref" href="#q:63"><span class="id" title="binder">q</span></a> <a id="Q:64" class="idref" href="#Q:64"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:62"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#anyR"><span class="id" title="axiom">anyR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:61"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:63"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:64"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:60"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:61"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:62"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:63"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:64"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">wp_destroy_prim_unfold</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "[$$]". <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_prim_elim" class="idref" href="#wp_destroy_prim_elim"><span class="id" title="lemma">wp_destroy_prim_elim</span></a> <a id="tu:65" class="idref" href="#tu:65"><span class="id" title="binder">tu</span></a> <a id="ty:66" class="idref" href="#ty:66"><span class="id" title="binder">ty</span></a> <a id="this:67" class="idref" href="#this:67"><span class="id" title="binder">this</span></a> <a id="q:68" class="idref" href="#q:68"><span class="id" title="binder">q</span></a> <a id="Q:69" class="idref" href="#Q:69"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:65"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:66"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:67"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:68"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:69"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:67"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#anyR"><span class="id" title="axiom">anyR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:66"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:68"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:69"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">wp_destroy_prim_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  We skip <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.semantics.sub_module.html#sub_module"><span class="id" title="section">sub_module</span></a></span> in the <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a></span> instances in this file because
  that relation interferes with tactics like <span class="inlinecode"><span class="id" title="var">f_equiv</span></span>; specifically,
  <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a></span> instances mentioning <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.semantics.sub_module.html#sub_module"><span class="id" title="section">sub_module</span></a></span> cause goals that ought to
  reduce to entailments after <span class="inlinecode"><span class="id" title="var">f_equiv</span></span> to instead reduce to
  equalities.
  
</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a>) 7 := {}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="PROPER" class="idref" href="#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <span class="id" title="var">R</span> := (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:70" class="idref" href="#tu:70"><span class="id" title="binder">tu</span></a> <a id="ty:71" class="idref" href="#ty:71"><span class="id" title="binder">ty</span></a> <a id="p:72" class="idref" href="#p:72"><span class="id" title="binder">p</span></a> <a id="q:73" class="idref" href="#q:73"><span class="id" title="binder">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:70"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:71"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:72"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:73"><span class="id" title="variable">q</span></a>)<br/>
&nbsp;&nbsp;) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_prim_mono" class="idref" href="#wp_destroy_prim_mono"><span class="id" title="instance">wp_destroy_prim_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_prim.unlock</span></a>. <span class="id" title="var">solve_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_prim_flip_mono" class="idref" href="#wp_destroy_prim_flip_mono"><span class="id" title="instance">wp_destroy_prim_flip_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim_mono"><span class="id" title="instance">wp_destroy_prim_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_prim_proper" class="idref" href="#wp_destroy_prim_proper"><span class="id" title="instance">wp_destroy_prim_proper</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="var">split'</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim_mono"><span class="id" title="instance">wp_destroy_prim_mono</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_prim_frame" class="idref" href="#wp_destroy_prim_frame"><span class="id" title="lemma">wp_destroy_prim_frame</span></a> <a id="tu:74" class="idref" href="#tu:74"><span class="id" title="binder">tu</span></a> <a id="tu':75" class="idref" href="#tu':75"><span class="id" title="binder">tu'</span></a> <a id="ty:76" class="idref" href="#ty:76"><span class="id" title="binder">ty</span></a> <a id="this:77" class="idref" href="#this:77"><span class="id" title="binder">this</span></a> <a id="q:78" class="idref" href="#q:78"><span class="id" title="binder">q</span></a> (<a id="Q:79" class="idref" href="#Q:79"><span class="id" title="binder">Q</span></a> <a id="Q':80" class="idref" href="#Q':80"><span class="id" title="binder">Q'</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:79"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':80"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:74"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:76"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:77"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:78"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:79"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':75"><span class="id" title="variable">tu'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:76"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:77"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:78"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':80"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">wp_destroy_prim_unfold</span>. <span class="id" title="var">iIntros</span> "HQ &gt;[$ Q]". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HQ". <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_prim_shift" class="idref" href="#wp_destroy_prim_shift"><span class="id" title="lemma">wp_destroy_prim_shift</span></a> <a id="tu:81" class="idref" href="#tu:81"><span class="id" title="binder">tu</span></a> <a id="ty:82" class="idref" href="#ty:82"><span class="id" title="binder">ty</span></a> <a id="this:83" class="idref" href="#this:83"><span class="id" title="binder">this</span></a> <a id="q:84" class="idref" href="#q:84"><span class="id" title="binder">q</span></a> <a id="Q:85" class="idref" href="#Q:85"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:81"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:82"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:83"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:84"><span class="id" title="variable">q</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:85"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:81"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:82"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:83"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:84"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:85"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">wp_destroy_prim_unfold</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "&gt;&gt;[$ &gt;$]". <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fupd_wp_destroy_prim" class="idref" href="#fupd_wp_destroy_prim"><span class="id" title="lemma">fupd_wp_destroy_prim</span></a> <a id="tu:86" class="idref" href="#tu:86"><span class="id" title="binder">tu</span></a> <a id="ty:87" class="idref" href="#ty:87"><span class="id" title="binder">ty</span></a> <a id="this:88" class="idref" href="#this:88"><span class="id" title="binder">this</span></a> <a id="q:89" class="idref" href="#q:89"><span class="id" title="binder">q</span></a> <a id="Q:90" class="idref" href="#Q:90"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:86"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:87"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:88"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:89"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:90"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:86"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:87"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:88"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:89"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:90"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_fupd_shift</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim_shift"><span class="id" title="lemma">wp_destroy_prim_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_prim_fupd" class="idref" href="#wp_destroy_prim_fupd"><span class="id" title="lemma">wp_destroy_prim_fupd</span></a> <a id="tu:91" class="idref" href="#tu:91"><span class="id" title="binder">tu</span></a> <a id="ty:92" class="idref" href="#ty:92"><span class="id" title="binder">ty</span></a> <a id="this:93" class="idref" href="#this:93"><span class="id" title="binder">this</span></a> <a id="q:94" class="idref" href="#q:94"><span class="id" title="binder">q</span></a> <a id="Q:95" class="idref" href="#Q:95"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:91"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:92"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:93"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:94"><span class="id" title="variable">q</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:95"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:91"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:92"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:93"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:94"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:95"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_shift_fupd</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim_shift"><span class="id" title="lemma">wp_destroy_prim_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#prim"><span class="id" title="section">prim</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab175"></a><h2 class="section">Invoking destructors</h2>

</div>
<div class="code">
<span class="comment">(*<br/>
<span class="inlinecode"><span class="id" title="var">wp_destructor</span></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><span class="id" title="var">dtor</span></span> <span class="inlinecode"><span class="id" title="var">this</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span>&nbsp;is&nbsp;the&nbsp;weakest&nbsp;pre-condition&nbsp;of<br/>
invoking&nbsp;the&nbsp;destructor&nbsp;<span class="inlinecode"><span class="id" title="var">dtor</span></span>&nbsp;for&nbsp;type&nbsp;<span class="inlinecode"><span class="id" title="var">ty</span></span>&nbsp;on&nbsp;<span class="inlinecode"><span class="id" title="var">this</span></span>.<br/>
*)</span><br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="wp_destructor_body" class="idref" href="#wp_destructor_body"><span class="id" title="definition">wp_destructor_body</span></a> `{<a id="146fe60f75f8b5ac2765dd1c25c12d7e" class="idref" href="#146fe60f75f8b5ac2765dd1c25c12d7e"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="cc6b043719e4d47de25e406f4c2e0c05" class="idref" href="#cc6b043719e4d47de25e406f4c2e0c05"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>} (<a id="tu:99" class="idref" href="#tu:99"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ty:100" class="idref" href="#ty:100"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="dtor:101" class="idref" href="#dtor:101"><span class="id" title="binder">dtor</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="this:102" class="idref" href="#this:102"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:103" class="idref" href="#Q:103"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;NOTE:&nbsp;Using&nbsp;<span class="inlinecode"><span class="id" title="var">Tfunction</span></span> <span class="inlinecode"><span class="id" title="var">Tvoid</span></span> <span class="inlinecode"><span class="id" title="var">nil</span></span>&nbsp;implicitly&nbsp;requires&nbsp;all<br/>
&nbsp;&nbsp;destructors&nbsp;to&nbsp;have&nbsp;C&nbsp;calling&nbsp;convention.&nbsp;Arguments&nbsp;<span class="inlinecode"><span class="id" title="var">this</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">nil</span></span>&nbsp;is<br/>
&nbsp;&nbsp;correct&nbsp;for&nbsp;member&nbsp;functions&nbsp;taking&nbsp;no&nbsp;arguments.<br/>
&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="p:104" class="idref" href="#p:104"><span class="id" title="binder">p</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.mspec"><span class="id" title="definition">mspec</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:99"><span class="id" title="variable">tu</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#globals"><span class="id" title="projection">globals</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:100"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:101"><span class="id" title="variable">dtor</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:102"><span class="id" title="variable">this</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;</div>

<div class="doc">
  We inline <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.call.html#operand_receive"><span class="id" title="definition">operand_receive</span></a></span> (which could be hoisted and shared).
  
</div>
<div class="code">
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="v:105" class="idref" href="#v:105"><span class="id" title="binder">v</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:104"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="definition">primR</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#v:105"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:102"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#tblockR"><span class="id" title="definition">tblockR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:100"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:103"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
<a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">mlock</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">Definition</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">wp_destructor</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">`{</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">Σ</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">cpp_logic</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">,</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">σ</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">genv</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">}</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">translation_unit</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">ty</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">type</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">dtor</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">ptr</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">this</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">ptr</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">Q</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">epred</span></a><a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">mpred</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">wp_destructor_body</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">ty</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">dtor</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">this</span></a> <a id="wp_destructor_unlock_subterm" class="idref" href="#wp_destructor_unlock_subterm"><span class="id" title="definition">Q</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="axiom">wp_destructor</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>. <span class="comment">(*&nbsp;mlock&nbsp;bug&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Note: All we need in this file is <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.semantics.sub_module.html#type_table_le"><span class="id" title="definition">type_table_le</span></a></span>. 
</div>
<div class="code">
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="TULE" class="idref" href="#TULE"><span class="id" title="abbreviation">TULE</span></a> <span class="id" title="var">tu</span> <span class="id" title="var">tu'</span> := (<a class="idref" href="bedrock.lang.cpp.semantics.sub_module.html#sub_module"><span class="id" title="record">sub_module</span></a> <span class="id" title="var">tu</span> <span class="id" title="var">tu'</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">types_compat</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="unfold" class="idref" href="#unfold"><span class="id" title="section">unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="1fae2405502733773daa9dd3939f6e35" class="idref" href="#1fae2405502733773daa9dd3939f6e35"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a> <a id="thread_info:122" class="idref" href="#thread_info:122"><span class="id" title="binder">thread_info</span></a>, <a id="95270db9d09194b606d8cb9477013c9d" class="idref" href="#95270db9d09194b606d8cb9477013c9d"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destructor_unfold" class="idref" href="#wp_destructor_unfold"><span class="id" title="lemma">wp_destructor_unfold</span></a> <a id="ty:125" class="idref" href="#ty:125"><span class="id" title="binder">ty</span></a> <a id="tu:126" class="idref" href="#tu:126"><span class="id" title="binder">tu</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:126"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:125"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_body"><span class="id" title="definition">wp_destructor_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:126"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:125"><span class="id" title="variable">ty</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destructor.unlock</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unfold"><span class="id" title="section">unfold</span></a>.<br/>

<br/>
</div>

<div class="doc">
Unfold for one type, failing if there's nothing to do.

</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_destructor_unfold</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">ty</span>] =&gt; <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_unfold"><span class="id" title="lemma">wp_destructor_unfold</span></a> <span class="id" title="var">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span> "[wp_destructor] not found"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="dtor" class="idref" href="#dtor"><span class="id" title="section">dtor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="4cf90600e8413682f73ea298d1219fe2" class="idref" href="#4cf90600e8413682f73ea298d1219fe2"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a> <a id="thread_info:127" class="idref" href="#thread_info:127"><span class="id" title="binder">thread_info</span></a>, <a id="be7d724cef42ede231da03c6b84e5996" class="idref" href="#be7d724cef42ede231da03c6b84e5996"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destructor_intro" class="idref" href="#wp_destructor_intro"><span class="id" title="lemma">wp_destructor_intro</span></a> <a id="tu:130" class="idref" href="#tu:130"><span class="id" title="binder">tu</span></a> <a id="ty:131" class="idref" href="#ty:131"><span class="id" title="binder">ty</span></a> <a id="dtor:132" class="idref" href="#dtor:132"><span class="id" title="binder">dtor</span></a> <a id="this:133" class="idref" href="#this:133"><span class="id" title="binder">this</span></a> <a id="Q:134" class="idref" href="#Q:134"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_body"><span class="id" title="definition">wp_destructor_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:130"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:131"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:132"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:133"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:134"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:130"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:131"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:132"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:133"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:134"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">wp_destructor_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destructor_elim" class="idref" href="#wp_destructor_elim"><span class="id" title="lemma">wp_destructor_elim</span></a> <a id="tu:135" class="idref" href="#tu:135"><span class="id" title="binder">tu</span></a> <a id="ty:136" class="idref" href="#ty:136"><span class="id" title="binder">ty</span></a> <a id="dtor:137" class="idref" href="#dtor:137"><span class="id" title="binder">dtor</span></a> <a id="this:138" class="idref" href="#this:138"><span class="id" title="binder">this</span></a> <a id="Q:139" class="idref" href="#Q:139"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:135"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:136"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:137"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:138"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:139"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_body"><span class="id" title="definition">wp_destructor_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:135"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:136"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:137"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:138"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:139"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">wp_destructor_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a>) 7 := {}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="PROPER" class="idref" href="#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <span class="id" title="var">R</span> := (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:140" class="idref" href="#tu:140"><span class="id" title="binder">tu</span></a> <a id="ty:141" class="idref" href="#ty:141"><span class="id" title="binder">ty</span></a> <a id="dtor:142" class="idref" href="#dtor:142"><span class="id" title="binder">dtor</span></a> <a id="this:143" class="idref" href="#this:143"><span class="id" title="binder">this</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:140"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:141"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:142"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:143"><span class="id" title="variable">this</span></a>)<br/>
&nbsp;&nbsp;) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destructor_mono" class="idref" href="#wp_destructor_mono"><span class="id" title="instance">wp_destructor_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destructor.unlock</span></a>. <span class="id" title="var">solve_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destructor_flip_mono" class="idref" href="#wp_destructor_flip_mono"><span class="id" title="instance">wp_destructor_flip_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_mono"><span class="id" title="instance">wp_destructor_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destructor_proper" class="idref" href="#wp_destructor_proper"><span class="id" title="instance">wp_destructor_proper</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="var">split'</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_mono"><span class="id" title="instance">wp_destructor_mono</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destructor_frame" class="idref" href="#wp_destructor_frame"><span class="id" title="lemma">wp_destructor_frame</span></a> <a id="tu:144" class="idref" href="#tu:144"><span class="id" title="binder">tu</span></a> <a id="tu':145" class="idref" href="#tu':145"><span class="id" title="binder">tu'</span></a> <a id="ty:146" class="idref" href="#ty:146"><span class="id" title="binder">ty</span></a> <a id="dtor:147" class="idref" href="#dtor:147"><span class="id" title="binder">dtor</span></a> <a id="this:148" class="idref" href="#this:148"><span class="id" title="binder">this</span></a> <a id="Q:149" class="idref" href="#Q:149"><span class="id" title="binder">Q</span></a> <a id="Q':150" class="idref" href="#Q':150"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#TULE"><span class="id" title="abbreviation">TULE</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:144"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':145"><span class="id" title="variable">tu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:149"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':150"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:144"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:146"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:147"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:148"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:149"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':145"><span class="id" title="variable">tu'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:146"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:147"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:148"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':150"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">wp_destructor_unfold</span>. <span class="id" title="var">iIntros</span> "HQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.mspec_frame_fupd_strong"><span class="id" title="lemma">mspec_frame_fupd_strong</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%p (%v &amp; V &amp; B &amp; Q)". <span class="id" title="var">iExists</span> <span class="id" title="var">v</span>. <span class="id" title="var">iFrame</span> "V B". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HQ".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destructor_shift" class="idref" href="#wp_destructor_shift"><span class="id" title="lemma">wp_destructor_shift</span></a> <a id="tu:151" class="idref" href="#tu:151"><span class="id" title="binder">tu</span></a> <a id="ty:152" class="idref" href="#ty:152"><span class="id" title="binder">ty</span></a> <a id="dtor:153" class="idref" href="#dtor:153"><span class="id" title="binder">dtor</span></a> <a id="this:154" class="idref" href="#this:154"><span class="id" title="binder">this</span></a> <a id="Q:155" class="idref" href="#Q:155"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:151"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:152"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:153"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:154"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:155"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:151"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:152"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:153"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:154"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:155"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_destructor_unfold</span>. <span class="id" title="var">iIntros</span> "wp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.mspec_shift"><span class="id" title="lemma">mspec_shift</span></a>. <span class="id" title="var">iMod</span> "wp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.mspec_frame"><span class="id" title="lemma">mspec_frame</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">p</span>). <span class="id" title="var">iIntros</span> "(%v &amp; V &amp; B &amp; &gt;Q) !&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">v</span>. <span class="id" title="var">iFrame</span> "V B Q".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fupd_wp_destructor" class="idref" href="#fupd_wp_destructor"><span class="id" title="lemma">fupd_wp_destructor</span></a> <a id="tu:156" class="idref" href="#tu:156"><span class="id" title="binder">tu</span></a> <a id="ty:157" class="idref" href="#ty:157"><span class="id" title="binder">ty</span></a> <a id="dtor:158" class="idref" href="#dtor:158"><span class="id" title="binder">dtor</span></a> <a id="this:159" class="idref" href="#this:159"><span class="id" title="binder">this</span></a> <a id="Q:160" class="idref" href="#Q:160"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:156"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:157"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:158"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:159"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:160"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:156"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:157"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:158"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:159"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:160"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_fupd_shift</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_shift"><span class="id" title="lemma">wp_destructor_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destructor_fupd" class="idref" href="#wp_destructor_fupd"><span class="id" title="lemma">wp_destructor_fupd</span></a> <a id="tu:161" class="idref" href="#tu:161"><span class="id" title="binder">tu</span></a> <a id="ty:162" class="idref" href="#ty:162"><span class="id" title="binder">ty</span></a> <a id="dtor:163" class="idref" href="#dtor:163"><span class="id" title="binder">dtor</span></a> <a id="this:164" class="idref" href="#this:164"><span class="id" title="binder">this</span></a> <a id="Q:165" class="idref" href="#Q:165"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:161"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:162"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:163"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:164"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:165"><span class="id" title="variable">Q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:161"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:162"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor:163"><span class="id" title="variable">dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:164"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:165"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_shift_fupd</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_shift"><span class="id" title="lemma">wp_destructor_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#dtor"><span class="id" title="section">dtor</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab176"></a><h2 class="section">Destroying structures and unions</h2>

</div>
<div class="code">

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="wp_destroy_named_body" class="idref" href="#wp_destroy_named_body"><span class="id" title="definition">wp_destroy_named_body</span></a> `{<a id="def0ae1d6f53f9edf7fdc46f0ff85f41" class="idref" href="#def0ae1d6f53f9edf7fdc46f0ff85f41"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="762c89d0f50a34a6e84e6186c1a7fab4" class="idref" href="#762c89d0f50a34a6e84e6186c1a7fab4"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>} (<a id="tu:169" class="idref" href="#tu:169"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cls:170" class="idref" href="#cls:170"><span class="id" title="binder">cls</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.names.html#globname"><span class="id" title="definition">globname</span></a>) (<a id="this:171" class="idref" href="#this:171"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:172" class="idref" href="#Q:172"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#globals"><span class="id" title="projection">globals</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:169"><span class="id" title="variable">tu</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:170"><span class="id" title="variable">cls</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gstruct"><span class="id" title="constructor">Gstruct</span></a> <span class="id" title="var">s</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;current&nbsp;implementation,&nbsp;we&nbsp;generate&nbsp;destructors&nbsp;even&nbsp;when<br/>
&nbsp;&nbsp;&nbsp;&nbsp;they&nbsp;are&nbsp;implicit&nbsp;to&nbsp;make&nbsp;the&nbsp;framework&nbsp;a&nbsp;bit&nbsp;more&nbsp;uniform&nbsp;(all<br/>
&nbsp;&nbsp;&nbsp;&nbsp;types&nbsp;have&nbsp;destructors)&nbsp;and&nbsp;allow&nbsp;for&nbsp;direct&nbsp;destructor&nbsp;calls,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;e.g.&nbsp;<span class="inlinecode"><span class="id" title="var">c</span>.~<span class="id" title="var">C</span>()</span>,&nbsp;which&nbsp;are&nbsp;encoded&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Emember_call</span></span> <span class="inlinecode">...</span> <span class="inlinecode">&quot;~<span class="id" title="var">C</span>&quot;</span> <span class="inlinecode">..</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;NOTE&nbsp;the&nbsp;setup&nbsp;with&nbsp;explicit&nbsp;destructors&nbsp;(even&nbsp;when&nbsp;those<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destructors&nbsp;are&nbsp;trivial)&nbsp;abstracts&nbsp;away&nbsp;some&nbsp;of&nbsp;the&nbsp;complexities<br/>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;underlying&nbsp;C++&nbsp;semantics&nbsp;that&nbsp;the&nbsp;semantics&nbsp;itself&nbsp;seems<br/>
&nbsp;&nbsp;&nbsp;&nbsp;less&nbsp;than&nbsp;clear&nbsp;about.&nbsp;<span class="inlinecode"><span class="id" title="var">CITATION</span></span> <span class="inlinecode"><span class="id" title="var">NEEDED</span></span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;TODO&nbsp;let's&nbsp;find&nbsp;some&nbsp;justification&nbsp;in&nbsp;the&nbsp;standard.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:169"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:170"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <span class="id" title="var">s</span>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#s_dtor"><span class="id" title="projection">s_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:171"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:172"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gunion"><span class="id" title="constructor">Gunion</span></a> <span class="id" title="var">u</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Unions&nbsp;cannot&nbsp;have&nbsp;<span class="inlinecode"><span class="id" title="var">virtual</span></span>&nbsp;destructors:&nbsp;we&nbsp;directly&nbsp;invoke&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destructor.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:169"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:170"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <span class="id" title="var">u</span>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#u_dtor"><span class="id" title="projection">u_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:171"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:172"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.errors.html#Errors.ERROR"><span class="id" title="axiom">ERROR</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"wp_destroy_named: cannot resolve"<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:170"><span class="id" title="variable">cls</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">mlock</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">Definition</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">wp_destroy_named</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">`{</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">Σ</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">cpp_logic</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">,</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">σ</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">genv</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">}</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">translation_unit</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">cls</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">globname</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">this</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">ptr</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">Q</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">epred</span></a><a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">mpred</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">wp_destroy_named_body</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">cls</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">this</span></a> <a id="wp_destroy_named_unlock_subterm" class="idref" href="#wp_destroy_named_unlock_subterm"><span class="id" title="definition">Q</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="axiom">wp_destroy_named</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>. <span class="comment">(*&nbsp;mlock&nbsp;bug&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="unfold" class="idref" href="#unfold"><span class="id" title="section">unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="714880f5627db3426d84fcf8ef7a9648" class="idref" href="#714880f5627db3426d84fcf8ef7a9648"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a> <a id="thread_info:187" class="idref" href="#thread_info:187"><span class="id" title="binder">thread_info</span></a>, <a id="5f0c308148843d82eda723a5f1795efa" class="idref" href="#5f0c308148843d82eda723a5f1795efa"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_unfold" class="idref" href="#wp_destroy_named_unfold"><span class="id" title="lemma">wp_destroy_named_unfold</span></a> <a id="cls:190" class="idref" href="#cls:190"><span class="id" title="binder">cls</span></a> <a id="tu:191" class="idref" href="#tu:191"><span class="id" title="binder">tu</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:191"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:190"><span class="id" title="variable">cls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_body"><span class="id" title="definition">wp_destroy_named_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:191"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:190"><span class="id" title="variable">cls</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_named.unlock</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unfold"><span class="id" title="section">unfold</span></a>.<br/>

<br/>
</div>

<div class="doc">
Unfold for one class, failing if there's nothing to do.

</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_destroy_named_unfold</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">cls</span>] =&gt; <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_unfold"><span class="id" title="lemma">wp_destroy_named_unfold</span></a> <span class="id" title="var">cls</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span> "[wp_destroy_named] not found"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">ERROR_elim</span> <span class="id" title="var">UNSUPPORTED_elim</span> : <span class="id" title="var">core</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="destroy_error_shift" class="idref" href="#destroy_error_shift"><span class="id" title="lemma">destroy_error_shift</span></a> `{<a id="BiFUpd0:193" class="idref" href="#BiFUpd0:193"><span class="id" title="binder">!</span></a><a id="BiFUpd0:193" class="idref" href="#BiFUpd0:193"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:193" class="idref" href="#BiFUpd0:193"><span class="id" title="binder">PROP</span></a>} (<a id="E:194" class="idref" href="#E:194"><span class="id" title="binder">E</span></a> <a id="P:195" class="idref" href="#P:195"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROP:192"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#E:194"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'False'"><span class="id" title="notation">False</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#E:194"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:195"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "&gt;&gt;?". <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">destroy_error_shift</span> : <span class="id" title="var">core</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="destroy_error_frame_shift" class="idref" href="#destroy_error_frame_shift"><span class="id" title="lemma">destroy_error_frame_shift</span></a> `{<a id="BiFUpd0:197" class="idref" href="#BiFUpd0:197"><span class="id" title="binder">!</span></a><a id="BiFUpd0:197" class="idref" href="#BiFUpd0:197"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:197" class="idref" href="#BiFUpd0:197"><span class="id" title="binder">PROP</span></a>} (<a id="E:198" class="idref" href="#E:198"><span class="id" title="binder">E</span></a> <a id="P:199" class="idref" href="#P:199"><span class="id" title="binder">P</span></a> <a id="Q:200" class="idref" href="#Q:200"><span class="id" title="binder">Q</span></a> <a id="R:201" class="idref" href="#R:201"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROP:196"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#E:198"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'False'"><span class="id" title="notation">False</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#R:201"><span class="id" title="variable">R</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:200"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:199"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#E:198"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:200"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> -&gt;&lt;-. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "? &gt;?". <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">destroy_error_frame_shift</span> : <span class="id" title="var">core</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">bi.False_elim</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="named" class="idref" href="#named"><span class="id" title="section">named</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="30db74763ad87d5244435f39e6f9e473" class="idref" href="#30db74763ad87d5244435f39e6f9e473"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a> <a id="thread_info:202" class="idref" href="#thread_info:202"><span class="id" title="binder">thread_info</span></a>, <a id="019a176b853a03971213611fa9d8fc1e" class="idref" href="#019a176b853a03971213611fa9d8fc1e"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="named.wp_destroy_named_intro_body" class="idref" href="#named.wp_destroy_named_intro_body"><span class="id" title="variable">wp_destroy_named_intro_body</span></a> (<a id="tu:205" class="idref" href="#tu:205"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cls:206" class="idref" href="#cls:206"><span class="id" title="binder">cls</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.names.html#globname"><span class="id" title="definition">globname</span></a>) (<a id="this:207" class="idref" href="#this:207"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:208" class="idref" href="#Q:208"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#globals"><span class="id" title="projection">globals</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:205"><span class="id" title="variable">tu</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:206"><span class="id" title="variable">cls</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gstruct"><span class="id" title="constructor">Gstruct</span></a> <span class="id" title="var">s</span>) =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:205"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:206"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <span class="id" title="var">s</span>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#s_dtor"><span class="id" title="projection">s_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:207"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:208"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gunion"><span class="id" title="constructor">Gunion</span></a> <span class="id" title="var">u</span>) =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:205"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:206"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <span class="id" title="var">u</span>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#u_dtor"><span class="id" title="projection">u_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:207"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:208"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'False'"><span class="id" title="notation">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_intro" class="idref" href="#wp_destroy_named_intro"><span class="id" title="lemma">wp_destroy_named_intro</span></a> <a id="tu:209" class="idref" href="#tu:209"><span class="id" title="binder">tu</span></a> <a id="cls:210" class="idref" href="#cls:210"><span class="id" title="binder">cls</span></a> <a id="this:211" class="idref" href="#this:211"><span class="id" title="binder">this</span></a> <a id="Q:212" class="idref" href="#Q:212"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#named.wp_destroy_named_intro_body"><span class="id" title="variable">wp_destroy_named_intro_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:209"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:210"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:211"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:212"><span class="id" title="variable">Q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:209"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:210"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:211"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:212"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">wp_destroy_named_unfold</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [[] |]; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_intro_struct" class="idref" href="#wp_destroy_named_intro_struct"><span class="id" title="lemma">wp_destroy_named_intro_struct</span></a> <a id="tu:213" class="idref" href="#tu:213"><span class="id" title="binder">tu</span></a> <a id="cls:214" class="idref" href="#cls:214"><span class="id" title="binder">cls</span></a> <a id="s:215" class="idref" href="#s:215"><span class="id" title="binder">s</span></a> <a id="this:216" class="idref" href="#this:216"><span class="id" title="binder">this</span></a> <a id="Q:217" class="idref" href="#Q:217"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#globals"><span class="id" title="projection">globals</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:213"><span class="id" title="variable">tu</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:214"><span class="id" title="variable">cls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gstruct"><span class="id" title="constructor">Gstruct</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#s:215"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:213"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:214"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#s:215"><span class="id" title="variable">s</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#s_dtor"><span class="id" title="projection">s_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:216"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:217"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:213"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:214"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:216"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:217"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_intro"><span class="id" title="lemma">wp_destroy_named_intro</span></a>=&gt;-&gt;. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_intro_union" class="idref" href="#wp_destroy_named_intro_union"><span class="id" title="lemma">wp_destroy_named_intro_union</span></a> <a id="tu:218" class="idref" href="#tu:218"><span class="id" title="binder">tu</span></a> <a id="cls:219" class="idref" href="#cls:219"><span class="id" title="binder">cls</span></a> <a id="u:220" class="idref" href="#u:220"><span class="id" title="binder">u</span></a> <a id="this:221" class="idref" href="#this:221"><span class="id" title="binder">this</span></a> <a id="Q:222" class="idref" href="#Q:222"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#globals"><span class="id" title="projection">globals</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:218"><span class="id" title="variable">tu</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:219"><span class="id" title="variable">cls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gunion"><span class="id" title="constructor">Gunion</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#u:220"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:218"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:219"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#u:220"><span class="id" title="variable">u</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#u_dtor"><span class="id" title="projection">u_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:221"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:222"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:218"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:219"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:221"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:222"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_intro"><span class="id" title="lemma">wp_destroy_named_intro</span></a>=&gt;-&gt;. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_elim" class="idref" href="#wp_destroy_named_elim"><span class="id" title="lemma">wp_destroy_named_elim</span></a> <a id="tu:223" class="idref" href="#tu:223"><span class="id" title="binder">tu</span></a> <a id="cls:224" class="idref" href="#cls:224"><span class="id" title="binder">cls</span></a> <a id="this:225" class="idref" href="#this:225"><span class="id" title="binder">this</span></a> <a id="Q:226" class="idref" href="#Q:226"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:223"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:224"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:225"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:226"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_body"><span class="id" title="definition">wp_destroy_named_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:223"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:224"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:225"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:226"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">wp_destroy_named_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_elim_struct" class="idref" href="#wp_destroy_named_elim_struct"><span class="id" title="lemma">wp_destroy_named_elim_struct</span></a> <a id="tu:227" class="idref" href="#tu:227"><span class="id" title="binder">tu</span></a> <a id="cls:228" class="idref" href="#cls:228"><span class="id" title="binder">cls</span></a> <a id="s:229" class="idref" href="#s:229"><span class="id" title="binder">s</span></a> <a id="this:230" class="idref" href="#this:230"><span class="id" title="binder">this</span></a> <a id="Q:231" class="idref" href="#Q:231"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#globals"><span class="id" title="projection">globals</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:227"><span class="id" title="variable">tu</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:228"><span class="id" title="variable">cls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gstruct"><span class="id" title="constructor">Gstruct</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#s:229"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:227"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:228"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:230"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:231"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:227"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:228"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#s:229"><span class="id" title="variable">s</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#s_dtor"><span class="id" title="projection">s_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:230"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:231"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_elim"><span class="id" title="lemma">wp_destroy_named_elim</span></a>=&gt;-&gt;. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_elim_union" class="idref" href="#wp_destroy_named_elim_union"><span class="id" title="lemma">wp_destroy_named_elim_union</span></a> <a id="tu:232" class="idref" href="#tu:232"><span class="id" title="binder">tu</span></a> <a id="cls:233" class="idref" href="#cls:233"><span class="id" title="binder">cls</span></a> <a id="u:234" class="idref" href="#u:234"><span class="id" title="binder">u</span></a> <a id="this:235" class="idref" href="#this:235"><span class="id" title="binder">this</span></a> <a id="Q:236" class="idref" href="#Q:236"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#globals"><span class="id" title="projection">globals</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:232"><span class="id" title="variable">tu</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:233"><span class="id" title="variable">cls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gunion"><span class="id" title="constructor">Gunion</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#u:234"><span class="id" title="variable">u</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:232"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:233"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:235"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:236"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor"><span class="id" title="abbreviation">wp_destructor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:232"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:233"><span class="id" title="variable">cls</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#u:234"><span class="id" title="variable">u</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#u_dtor"><span class="id" title="projection">u_dtor</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:235"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:236"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_elim"><span class="id" title="lemma">wp_destroy_named_elim</span></a>=&gt;-&gt;. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a>) 6 := {}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="PROPER" class="idref" href="#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <span class="id" title="var">R</span> := (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:237" class="idref" href="#tu:237"><span class="id" title="binder">tu</span></a> <a id="cls:238" class="idref" href="#cls:238"><span class="id" title="binder">cls</span></a> <a id="this:239" class="idref" href="#this:239"><span class="id" title="binder">this</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:237"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:238"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:239"><span class="id" title="variable">this</span></a>)<br/>
&nbsp;&nbsp;) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_named_mono" class="idref" href="#wp_destroy_named_mono"><span class="id" title="instance">wp_destroy_named_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_named.unlock</span></a>. <span class="id" title="var">solve_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_named_flip_mono" class="idref" href="#wp_destroy_named_flip_mono"><span class="id" title="instance">wp_destroy_named_flip_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_mono"><span class="id" title="instance">wp_destroy_named_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_named_proper" class="idref" href="#wp_destroy_named_proper"><span class="id" title="instance">wp_destroy_named_proper</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="var">split'</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_mono"><span class="id" title="instance">wp_destroy_named_mono</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_frame" class="idref" href="#wp_destroy_named_frame"><span class="id" title="lemma">wp_destroy_named_frame</span></a> <a id="tu:240" class="idref" href="#tu:240"><span class="id" title="binder">tu</span></a> <a id="tu':241" class="idref" href="#tu':241"><span class="id" title="binder">tu'</span></a> <a id="cls:242" class="idref" href="#cls:242"><span class="id" title="binder">cls</span></a> <a id="this:243" class="idref" href="#this:243"><span class="id" title="binder">this</span></a> <a id="Q:244" class="idref" href="#Q:244"><span class="id" title="binder">Q</span></a> <a id="Q':245" class="idref" href="#Q':245"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#TULE"><span class="id" title="abbreviation">TULE</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:240"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':241"><span class="id" title="variable">tu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:244"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':245"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:240"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:242"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:243"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:244"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':241"><span class="id" title="variable">tu'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:242"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:243"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':245"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Htu</span>. <span class="id" title="tactic">move</span>: (<span class="id" title="var">Htu</span>)=&gt;/<a class="idref" href="bedrock.lang.cpp.semantics.sub_module.html#types_compat"><span class="id" title="projection">types_compat</span></a> <span class="id" title="var">Htt</span>. <span class="id" title="var">wp_destroy_named_unfold</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v1</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hv1</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">case_match</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">case_match</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#fupd_wp_destructor"><span class="id" title="lemma">fupd_wp_destructor</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Htt</span> <span class="id" title="var">cls</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv1</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">v2</span> &amp; -&gt; &amp; <span class="id" title="var">Hle</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">v1</span>, <span class="id" title="var">v2</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#fupd_wp_destructor"><span class="id" title="lemma">fupd_wp_destructor</span></a> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hle</span>; <span class="id" title="var">case_bool_decide</span>; [<span class="id" title="tactic">subst</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_frame"><span class="id" title="lemma">wp_destructor_frame</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_shift" class="idref" href="#wp_destroy_named_shift"><span class="id" title="lemma">wp_destroy_named_shift</span></a> <a id="tu:246" class="idref" href="#tu:246"><span class="id" title="binder">tu</span></a> <a id="cls:247" class="idref" href="#cls:247"><span class="id" title="binder">cls</span></a> <a id="this:248" class="idref" href="#this:248"><span class="id" title="binder">this</span></a> <a id="Q:249" class="idref" href="#Q:249"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:246"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:247"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:248"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:249"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:246"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:247"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:248"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:249"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_destroy_named_unfold</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [[] |]; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destructor_shift"><span class="id" title="lemma">wp_destructor_shift</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fupd_wp_destroy_named" class="idref" href="#fupd_wp_destroy_named"><span class="id" title="lemma">fupd_wp_destroy_named</span></a> <a id="tu:250" class="idref" href="#tu:250"><span class="id" title="binder">tu</span></a> <a id="cls:251" class="idref" href="#cls:251"><span class="id" title="binder">cls</span></a> <a id="this:252" class="idref" href="#this:252"><span class="id" title="binder">this</span></a> <a id="Q:253" class="idref" href="#Q:253"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:250"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:251"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:252"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:253"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:250"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:251"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:252"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:253"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_fupd_shift</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_shift"><span class="id" title="lemma">wp_destroy_named_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_named_fupd" class="idref" href="#wp_destroy_named_fupd"><span class="id" title="lemma">wp_destroy_named_fupd</span></a> <a id="tu:254" class="idref" href="#tu:254"><span class="id" title="binder">tu</span></a> <a id="cls:255" class="idref" href="#cls:255"><span class="id" title="binder">cls</span></a> <a id="this:256" class="idref" href="#this:256"><span class="id" title="binder">this</span></a> <a id="Q:257" class="idref" href="#Q:257"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:254"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:255"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:256"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:257"><span class="id" title="variable">Q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:254"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cls:255"><span class="id" title="variable">cls</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:256"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:257"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_shift_fupd</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_shift"><span class="id" title="lemma">wp_destroy_named_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#named"><span class="id" title="section">named</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab177"></a><h2 class="section">Arrays and values</h2>

<div class="paragraph"> </div>

<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="module">wp_destroy_val</span></a></span> generalizes <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span>, baking in qualifier
normalization (i.e., <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span> <span class="inlinecode"><span class="id" title="var">tm</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="module">wp_destroy_val</span></a></span> <span class="inlinecode"><span class="id" title="var">tm</span></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#QM"><span class="id" title="constructor">QM</span></a></span>).

<div class="paragraph"> </div>

The following simpler alternatives don't seem to work.

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode">'(<span class="id" title="var">cv</span>,</span> <span class="inlinecode"><span class="id" title="var">rty</span>)</span> <span class="inlinecode">:=</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#decompose_type"><span class="id" title="definition">decompose_type</span></a></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode">⋯</span>: This

</li>
</ul>
definition does not satisfy Coq's termination checker.

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="module">destroy_val</span></a></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#qual_norm"><span class="id" title="section">qual_norm</span></a></span> <span class="inlinecode">(<span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">cv</span></span> <span class="inlinecode"><span class="id" title="var">rty</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode">⋯)</span>: Coq accepts this

</li>
</ul>
definition, but we could not get the theory to go through.

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="body" class="idref" href="#body"><span class="id" title="section">body</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="94d0c84ed07cc9827b73907d01f025a5" class="idref" href="#94d0c84ed07cc9827b73907d01f025a5"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="0865461f591460e51baf464f6e00f06e" class="idref" href="#0865461f591460e51baf464f6e00f06e"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="wp_destroy_val:261" class="idref" href="#wp_destroy_val:261"><span class="id" title="binder">wp_destroy_val</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_qualifiers"><span class="id" title="inductive">type_qualifiers</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="destroy_val:262" class="idref" href="#destroy_val:262"><span class="id" title="binder">destroy_val</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="wp_destroy_array:263" class="idref" href="#wp_destroy_array:263"><span class="id" title="binder">wp_destroy_array</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a>).<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="destroy_val_body" class="idref" href="#destroy_val_body"><span class="id" title="definition">destroy_val_body</span></a> (<a id="tu:264" class="idref" href="#tu:264"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ty:265" class="idref" href="#ty:265"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="this:266" class="idref" href="#this:266"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:267" class="idref" href="#Q:267"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body.wp_destroy_val"><span class="id" title="variable">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:264"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#QM"><span class="id" title="constructor">QM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:265"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:266"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:267"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="wp_destroy_array_body" class="idref" href="#wp_destroy_array_body"><span class="id" title="definition">wp_destroy_array_body</span></a> (<a id="tu:268" class="idref" href="#tu:268"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ety:269" class="idref" href="#ety:269"><span class="id" title="binder">ety</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="sz:270" class="idref" href="#sz:270"><span class="id" title="binder">sz</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>) (<a id="this:271" class="idref" href="#this:271"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:272" class="idref" href="#Q:272"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
    NOTE array elements are destroyed left-to-right with non-virtual
    dispatch.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen"><span class="id" title="definition">wp_gen</span></a> (<span class="id" title="keyword">fun</span> <a id="i:273" class="idref" href="#i:273"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body.destroy_val"><span class="id" title="variable">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:268"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:269"><span class="id" title="variable">ety</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:271"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">.[</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:269"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">!</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:273"><span class="id" title="variable">i</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">]</span></a>)) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#sz:270"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:272"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="wp_destroy_val_body" class="idref" href="#wp_destroy_val_body"><span class="id" title="definition">wp_destroy_val_body</span></a> (<a id="tu:274" class="idref" href="#tu:274"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cv:275" class="idref" href="#cv:275"><span class="id" title="binder">cv</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_qualifiers"><span class="id" title="inductive">type_qualifiers</span></a>) (<a id="rty:276" class="idref" href="#rty:276"><span class="id" title="binder">rty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="this:277" class="idref" href="#this:277"><span class="id" title="binder">this</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:278" class="idref" href="#Q:278"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:276"><span class="id" title="variable">rty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tqualified"><span class="id" title="constructor">Tqualified</span></a> <span class="id" title="var">q</span> <span class="id" title="var">ty</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body.wp_destroy_val"><span class="id" title="variable">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:274"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#merge_tq"><span class="id" title="definition">merge_tq</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:275"><span class="id" title="variable">cv</span></a> <span class="id" title="var">q</span>) <span class="id" title="var">ty</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:277"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:278"><span class="id" title="variable">Q</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <span class="id" title="var">cls</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:275"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.logic.const.html#wp_make_mutable"><span class="id" title="abbreviation">wp_make_mutable</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:274"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:277"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:276"><span class="id" title="variable">rty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:274"><span class="id" title="variable">tu</span></a> <span class="id" title="var">cls</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:277"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:278"><span class="id" title="variable">Q</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">ety</span> <span class="id" title="var">sz</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:275"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.logic.const.html#wp_make_mutable"><span class="id" title="abbreviation">wp_make_mutable</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:274"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:277"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:276"><span class="id" title="variable">rty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body.wp_destroy_array"><span class="id" title="variable">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:274"><span class="id" title="variable">tu</span></a> <span class="id" title="var">ety</span> <span class="id" title="var">sz</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:277"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:278"><span class="id" title="variable">Q</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <span class="id" title="var">r_ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> <span class="id" title="var">r_ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NOTE&nbsp;rvalue&nbsp;references&nbsp;<span class="inlinecode"><span class="id" title="var">Trv_ref</span></span>&nbsp;are&nbsp;represented&nbsp;as&nbsp;references<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">Tref</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="q:281" class="idref" href="#q:281"><span class="id" title="binder">q</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:275"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.c"><span class="id" title="abbreviation">cQp.c</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:274"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <span class="id" title="var">r_ty</span>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:277"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:280"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:278"><span class="id" title="variable">Q</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tchar_"><span class="id" title="constructor">Tchar_</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfloat_"><span class="id" title="constructor">Tfloat_</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tenum"><span class="id" title="constructor">Tenum</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tbool"><span class="id" title="constructor">Tbool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnullptr"><span class="id" title="constructor">Tnullptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tmember_pointer"><span class="id" title="constructor">Tmember_pointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="q:290" class="idref" href="#q:290"><span class="id" title="binder">q</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:275"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.c"><span class="id" title="abbreviation">cQp.c</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:274"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:276"><span class="id" title="variable">rty</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:277"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:282"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:278"><span class="id" title="variable">Q</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.errors.html#Errors.UNSUPPORTED"><span class="id" title="axiom">UNSUPPORTED</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"wp_destroy_val: function type"<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:276"><span class="id" title="variable">rty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarch"><span class="id" title="constructor">Tarch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.errors.html#Errors.UNSUPPORTED"><span class="id" title="axiom">UNSUPPORTED</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"wp_destroy_val: arch type"<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:276"><span class="id" title="variable">rty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="section">body</span></a>.<br/>

<br/>
<a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">mlock</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">Definition</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_val</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">`{</span></a><a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">Σ</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">cpp_logic</span></a><a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">,</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">σ</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">genv</span></a><a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">translation_unit</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">type_qualifiers</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">type</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">ptr</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">epred</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">mpred</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Written&nbsp;this&nbsp;way&nbsp;because&nbsp;<span class="inlinecode"><span class="id" title="var">mlock</span></span> <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span> <span class="inlinecode">⋯</span>&nbsp;fails.&nbsp;*)</span><br/>
&nbsp;&nbsp;<a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">fix</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_val</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">q</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">ty</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">let</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">destroy_val</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">:=</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">destroy_val_body</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_val</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">let</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_array</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">:=</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_array_body</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">destroy_val</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_val_body</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_val</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_array</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">q</span></a> <a id="wp_destroy_val_unlock_subterm" class="idref" href="#wp_destroy_val_unlock_subterm"><span class="id" title="definition">ty</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="axiom">wp_destroy_val</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">tu</span> <span class="id" title="var">cv</span> <span class="id" title="var">ty</span> <span class="id" title="var">p</span> <span class="id" title="var">Q</span> : <span class="id" title="tactic">assert</span>. <span class="comment">(*&nbsp;set&nbsp;names&nbsp;*)</span><br/>

<br/>
<a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">mlock</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">Definition</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">destroy_val</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">`{</span></a><a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">Σ</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">cpp_logic</span></a><a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">,</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">σ</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">genv</span></a><a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">translation_unit</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">type</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">ptr</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">epred</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">mpred</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">destroy_val_body</span></a> <a id="destroy_val_unlock_subterm" class="idref" href="#destroy_val_unlock_subterm"><span class="id" title="definition">wp_destroy_val</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="axiom">destroy_val</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">tu</span> <span class="id" title="var">ty</span> <span class="id" title="var">p</span> <span class="id" title="var">Q</span> : <span class="id" title="tactic">assert</span>. <span class="comment">(*&nbsp;set&nbsp;names&nbsp;*)</span><br/>

<br/>
<a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">mlock</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">Definition</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">wp_destroy_array</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">`{</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">Σ</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">cpp_logic</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">,</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">σ</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">genv</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">translation_unit</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">ety</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">type</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">sz</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">N</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">base</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">ptr</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">(</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">Q</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">epred</span></a><a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">)</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">mpred</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">wp_destroy_array_body</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">destroy_val</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">ety</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">sz</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">base</span></a> <a id="wp_destroy_array_unlock_subterm" class="idref" href="#wp_destroy_array_unlock_subterm"><span class="id" title="definition">Q</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="axiom">wp_destroy_array</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>. <span class="comment">(*&nbsp;mlock&nbsp;bug&nbsp;*)</span><br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="V" class="idref" href="#V"><span class="id" title="abbreviation">V</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_body"><span class="id" title="definition">wp_destroy_val_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="A" class="idref" href="#A"><span class="id" title="abbreviation">A</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array_body"><span class="id" title="definition">wp_destroy_array_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="unfold" class="idref" href="#unfold"><span class="id" title="section">unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="4a71d8014be45b8930cc05a0c5ed961a" class="idref" href="#4a71d8014be45b8930cc05a0c5ed961a"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="b82d4293b07cd0a577e6aa100e996178" class="idref" href="#b82d4293b07cd0a577e6aa100e996178"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_unfold" class="idref" href="#wp_destroy_val_unfold"><span class="id" title="lemma">wp_destroy_val_unfold</span></a> <a id="ty:328" class="idref" href="#ty:328"><span class="id" title="binder">ty</span></a> <a id="tu:329" class="idref" href="#tu:329"><span class="id" title="binder">tu</span></a> <a id="cv:330" class="idref" href="#cv:330"><span class="id" title="binder">cv</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:329"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:330"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:328"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V"><span class="id" title="abbreviation">V</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:329"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:330"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:328"><span class="id" title="variable">ty</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trans</span> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V"><span class="id" title="abbreviation">V</span></a> <span class="id" title="var">tu</span> <span class="id" title="var">cv</span> <span class="id" title="var">ty</span>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_array.unlock</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">destroy_val.unlock</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_val.unlock</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">ty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_unfold" class="idref" href="#destroy_val_unfold"><span class="id" title="lemma">destroy_val_unfold</span></a> <a id="ty:331" class="idref" href="#ty:331"><span class="id" title="binder">ty</span></a> <a id="tu:332" class="idref" href="#tu:332"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:332"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:331"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.base.html#Cbn"><span class="id" title="abbreviation">Cbn</span></a> (<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V"><span class="id" title="abbreviation">V</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:332"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#QM"><span class="id" title="constructor">QM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:331"><span class="id" title="variable">ty</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">destroy_val.unlock</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_unfold"><span class="id" title="lemma">wp_destroy_val_unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_array_unfold" class="idref" href="#wp_destroy_array_unfold"><span class="id" title="lemma">wp_destroy_array_unfold</span></a> <a id="ety:333" class="idref" href="#ety:333"><span class="id" title="binder">ety</span></a> <a id="tu:334" class="idref" href="#tu:334"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:334"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:333"><span class="id" title="variable">ety</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#A"><span class="id" title="abbreviation">A</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:334"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:333"><span class="id" title="variable">ety</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_array.unlock</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unfold"><span class="id" title="section">unfold</span></a>.<br/>

<br/>
</div>

<div class="doc">
These tactics unfold for one type, failing if there's nothing to do.

</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_destroy_val_unfold</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">ty</span>] =&gt; <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_unfold"><span class="id" title="lemma">wp_destroy_val_unfold</span></a> <span class="id" title="var">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span> "[wp_destroy_val] not found"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destroy_val_unfold</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">ty</span>] =&gt; <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_unfold"><span class="id" title="lemma">destroy_val_unfold</span></a> <span class="id" title="var">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span> "[destroy_val] not found"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wp_destroy_array_unfold</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">ty</span>] =&gt; <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array_unfold"><span class="id" title="lemma">wp_destroy_array_unfold</span></a> <span class="id" title="var">ty</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span> "[wp_destroy_array] not found"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="val_array" class="idref" href="#val_array"><span class="id" title="section">val_array</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="85ea6b86346d1ebf33501d8cfcb67403" class="idref" href="#85ea6b86346d1ebf33501d8cfcb67403"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="f04ea84bccbe95c44e500b5c8a15394e" class="idref" href="#f04ea84bccbe95c44e500b5c8a15394e"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_wp_destroy_val" class="idref" href="#destroy_val_wp_destroy_val"><span class="id" title="lemma">destroy_val_wp_destroy_val</span></a> <a id="ty:338" class="idref" href="#ty:338"><span class="id" title="binder">ty</span></a> <a id="tu:339" class="idref" href="#tu:339"><span class="id" title="binder">tu</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:339"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:338"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:339"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#QM"><span class="id" title="constructor">QM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:338"><span class="id" title="variable">ty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">destroy_val.unlock</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Qualifier normalization 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_qual_norm'" class="idref" href="#wp_destroy_val_qual_norm'"><span class="id" title="lemma">wp_destroy_val_qual_norm'</span></a> <a id="tu:340" class="idref" href="#tu:340"><span class="id" title="binder">tu</span></a> <a id="cv:341" class="idref" href="#cv:341"><span class="id" title="binder">cv</span></a> <a id="ty:342" class="idref" href="#ty:342"><span class="id" title="binder">ty</span></a> <a id="this:343" class="idref" href="#this:343"><span class="id" title="binder">this</span></a> <a id="Q:344" class="idref" href="#Q:344"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:340"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:341"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:342"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:343"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:344"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.types.html#qual_norm'"><span class="id" title="definition">qual_norm'</span></a> (<span class="id" title="keyword">fun</span> <a id="cv':345" class="idref" href="#cv':345"><span class="id" title="binder">cv'</span></a> <a id="ty':346" class="idref" href="#ty':346"><span class="id" title="binder">ty'</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:340"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv':345"><span class="id" title="variable">cv'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty':346"><span class="id" title="variable">ty'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:343"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:344"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:341"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:342"><span class="id" title="variable">ty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">wp_destroy_val.unlock</span></a>. <span class="id" title="tactic">move</span>: <span class="id" title="var">cv</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_qual_norm" class="idref" href="#destroy_val_qual_norm"><span class="id" title="lemma">destroy_val_qual_norm</span></a> <a id="tu:347" class="idref" href="#tu:347"><span class="id" title="binder">tu</span></a> <a id="ty:348" class="idref" href="#ty:348"><span class="id" title="binder">ty</span></a> <a id="this:349" class="idref" href="#this:349"><span class="id" title="binder">this</span></a> <a id="Q:350" class="idref" href="#Q:350"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:347"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:348"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:349"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:350"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.types.html#qual_norm"><span class="id" title="definition">qual_norm</span></a> (<span class="id" title="keyword">fun</span> <a id="cv:351" class="idref" href="#cv:351"><span class="id" title="binder">cv</span></a> <a id="ty':352" class="idref" href="#ty':352"><span class="id" title="binder">ty'</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:347"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:351"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty':352"><span class="id" title="variable">ty'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:349"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:350"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:348"><span class="id" title="variable">ty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">destroy_val.unlock</span></a> /<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_body"><span class="id" title="definition">destroy_val_body</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_qual_norm'"><span class="id" title="lemma">wp_destroy_val_qual_norm'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_decompose_type" class="idref" href="#wp_destroy_val_decompose_type"><span class="id" title="lemma">wp_destroy_val_decompose_type</span></a> <a id="tu:353" class="idref" href="#tu:353"><span class="id" title="binder">tu</span></a> <a id="cv:354" class="idref" href="#cv:354"><span class="id" title="binder">cv</span></a> <a id="ty:355" class="idref" href="#ty:355"><span class="id" title="binder">ty</span></a> <a id="this:356" class="idref" href="#this:356"><span class="id" title="binder">this</span></a> <a id="Q:357" class="idref" href="#Q:357"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:353"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:354"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:355"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:356"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:357"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p:358" class="idref" href="#p:358"><span class="id" title="binder">p</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decompose_type"><span class="id" title="definition">decompose_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:355"><span class="id" title="variable">ty</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:353"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#merge_tq"><span class="id" title="definition">merge_tq</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:354"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:358"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:358"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:356"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:357"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_qual_norm'"><span class="id" title="lemma">wp_destroy_val_qual_norm'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#qual_norm'_decompose_type"><span class="id" title="lemma">qual_norm'_decompose_type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_decompose_type" class="idref" href="#destroy_val_decompose_type"><span class="id" title="lemma">destroy_val_decompose_type</span></a> <a id="tu:359" class="idref" href="#tu:359"><span class="id" title="binder">tu</span></a> <a id="ty:360" class="idref" href="#ty:360"><span class="id" title="binder">ty</span></a> <a id="this:361" class="idref" href="#this:361"><span class="id" title="binder">this</span></a> <a id="Q:362" class="idref" href="#Q:362"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:359"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:360"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:361"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:362"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p:363" class="idref" href="#p:363"><span class="id" title="binder">p</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decompose_type"><span class="id" title="definition">decompose_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:360"><span class="id" title="variable">ty</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:359"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:363"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:363"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:361"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:362"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_qual_norm"><span class="id" title="lemma">destroy_val_qual_norm</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#qual_norm_decompose_type"><span class="id" title="lemma">qual_norm_decompose_type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Structural properties 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_destroy_prim_frame</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_destroy_named_frame</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_gen_frame</span><br/>
&nbsp;&nbsp;: <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_frame" class="idref" href="#wp_destroy_val_frame"><span class="id" title="lemma">wp_destroy_val_frame</span></a> <a id="tu:364" class="idref" href="#tu:364"><span class="id" title="binder">tu</span></a> <a id="tu':365" class="idref" href="#tu':365"><span class="id" title="binder">tu'</span></a> <a id="cv:366" class="idref" href="#cv:366"><span class="id" title="binder">cv</span></a> <a id="ty:367" class="idref" href="#ty:367"><span class="id" title="binder">ty</span></a> <a id="this:368" class="idref" href="#this:368"><span class="id" title="binder">this</span></a> <a id="Q:369" class="idref" href="#Q:369"><span class="id" title="binder">Q</span></a> <a id="Q':370" class="idref" href="#Q':370"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#TULE"><span class="id" title="abbreviation">TULE</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:364"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':365"><span class="id" title="variable">tu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:369"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':370"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:364"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:366"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:367"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:368"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:369"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':365"><span class="id" title="variable">tu'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:366"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:367"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:368"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':370"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">tu</span> <span class="id" title="var">tu'</span> <span class="id" title="var">cv</span> <span class="id" title="var">this</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>=&gt;<span class="id" title="var">tu</span> <span class="id" title="var">tu'</span> <span class="id" title="var">cv</span> <span class="id" title="var">this</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span> <span class="id" title="var">Htu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">wp_destroy_val_unfold</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">iIntros</span> "? &gt;wp !&gt; !&gt;"; <span class="id" title="var">iRevert</span> "wp"; <span class="id" title="var">iStopProof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <span class="id" title="var">cv</span>); [<span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.const.html#wp_const_frame"><span class="id" title="axiom">wp_const_frame</span></a>|<span class="id" title="var">cbn</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">wp_destroy_array_unfold</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_wp_destroy_val"><span class="id" title="lemma">destroy_val_wp_destroy_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen_frame"><span class="id" title="lemma">wp_gen_frame</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_frame" class="idref" href="#destroy_val_frame"><span class="id" title="lemma">destroy_val_frame</span></a> <a id="tu:371" class="idref" href="#tu:371"><span class="id" title="binder">tu</span></a> <a id="tu':372" class="idref" href="#tu':372"><span class="id" title="binder">tu'</span></a> <a id="ty:373" class="idref" href="#ty:373"><span class="id" title="binder">ty</span></a> <a id="this:374" class="idref" href="#this:374"><span class="id" title="binder">this</span></a> <a id="Q:375" class="idref" href="#Q:375"><span class="id" title="binder">Q</span></a> <a id="Q':376" class="idref" href="#Q':376"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#TULE"><span class="id" title="abbreviation">TULE</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:371"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':372"><span class="id" title="variable">tu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:375"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':376"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:371"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:373"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:374"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:375"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':372"><span class="id" title="variable">tu'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:373"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:374"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':376"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_wp_destroy_val"><span class="id" title="lemma">destroy_val_wp_destroy_val</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_frame"><span class="id" title="lemma">wp_destroy_val_frame</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_array_frame" class="idref" href="#wp_destroy_array_frame"><span class="id" title="lemma">wp_destroy_array_frame</span></a> <a id="tu:377" class="idref" href="#tu:377"><span class="id" title="binder">tu</span></a> <a id="tu':378" class="idref" href="#tu':378"><span class="id" title="binder">tu'</span></a> <a id="ety:379" class="idref" href="#ety:379"><span class="id" title="binder">ety</span></a> <a id="n:380" class="idref" href="#n:380"><span class="id" title="binder">n</span></a> <a id="p:381" class="idref" href="#p:381"><span class="id" title="binder">p</span></a> <a id="Q:382" class="idref" href="#Q:382"><span class="id" title="binder">Q</span></a> <a id="Q':383" class="idref" href="#Q':383"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#TULE"><span class="id" title="abbreviation">TULE</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:377"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':378"><span class="id" title="variable">tu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:382"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':383"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:377"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:379"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:380"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:381"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:382"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':378"><span class="id" title="variable">tu'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:379"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:380"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:381"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':383"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">wp_destroy_array_unfold</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen_frame"><span class="id" title="lemma">wp_gen_frame</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_frame"><span class="id" title="lemma">destroy_val_frame</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_shift" class="idref" href="#wp_destroy_val_shift"><span class="id" title="lemma">wp_destroy_val_shift</span></a> <a id="tu:384" class="idref" href="#tu:384"><span class="id" title="binder">tu</span></a> <a id="cv:385" class="idref" href="#cv:385"><span class="id" title="binder">cv</span></a> <a id="ty:386" class="idref" href="#ty:386"><span class="id" title="binder">ty</span></a> <a id="this:387" class="idref" href="#this:387"><span class="id" title="binder">this</span></a> <a id="Q:388" class="idref" href="#Q:388"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:384"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:385"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:386"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:387"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:388"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:384"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:385"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:386"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:387"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:388"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">tu</span> <span class="id" title="var">cv</span> <span class="id" title="var">this</span> <span class="id" title="var">Q</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">ty</span>=&gt;<span class="id" title="var">tu</span> <span class="id" title="var">cv</span> <span class="id" title="var">this</span> <span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">wp_destroy_val_unfold</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim_shift"><span class="id" title="lemma">wp_destroy_prim_shift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Laters&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">iIntros</span> "&gt;&gt;wp !&gt; !&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <span class="id" title="var">cv</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.const.html#wp_const_shift"><span class="id" title="axiom">wp_const_shift</span></a>; <span class="id" title="var">iIntros</span> "!&gt;"; <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.const.html#wp_const_frame"><span class="id" title="axiom">wp_const_frame</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>; <span class="id" title="var">iIntros</span> "wp !&gt;"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">cbn</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named_shift"><span class="id" title="lemma">wp_destroy_named_shift</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">wp_destroy_array_unfold</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_wp_destroy_val"><span class="id" title="lemma">destroy_val_wp_destroy_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen_shift"><span class="id" title="lemma">wp_gen_shift</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_frame"><span class="id" title="lemma">wp_destroy_val_frame</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_shift" class="idref" href="#destroy_val_shift"><span class="id" title="lemma">destroy_val_shift</span></a> <a id="tu:389" class="idref" href="#tu:389"><span class="id" title="binder">tu</span></a> <a id="ty:390" class="idref" href="#ty:390"><span class="id" title="binder">ty</span></a> <a id="this:391" class="idref" href="#this:391"><span class="id" title="binder">this</span></a> <a id="Q:392" class="idref" href="#Q:392"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:389"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:390"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:391"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:392"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:389"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:390"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:391"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:392"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_wp_destroy_val"><span class="id" title="lemma">destroy_val_wp_destroy_val</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_shift"><span class="id" title="lemma">wp_destroy_val_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_array_shift" class="idref" href="#wp_destroy_array_shift"><span class="id" title="lemma">wp_destroy_array_shift</span></a> <a id="tu:393" class="idref" href="#tu:393"><span class="id" title="binder">tu</span></a> <a id="ety:394" class="idref" href="#ety:394"><span class="id" title="binder">ety</span></a> <a id="n:395" class="idref" href="#n:395"><span class="id" title="binder">n</span></a> <a id="p:396" class="idref" href="#p:396"><span class="id" title="binder">p</span></a> <a id="Q:397" class="idref" href="#Q:397"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:393"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:394"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:395"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:396"><span class="id" title="variable">p</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:397"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:393"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:394"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:395"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:396"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:397"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_destroy_array_unfold</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen_shift"><span class="id" title="lemma">wp_gen_shift</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_frame"><span class="id" title="lemma">destroy_val_frame</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_shift"><span class="id" title="lemma">destroy_val_shift</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Setoids 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a>) 7 := {}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="V'PROPER" class="idref" href="#V'PROPER"><span class="id" title="abbreviation">V'PROPER</span></a> <span class="id" title="var">R</span> := (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:398" class="idref" href="#tu:398"><span class="id" title="binder">tu</span></a> <a id="cv:399" class="idref" href="#cv:399"><span class="id" title="binder">cv</span></a> <a id="ty:400" class="idref" href="#ty:400"><span class="id" title="binder">ty</span></a> <a id="this:401" class="idref" href="#this:401"><span class="id" title="binder">this</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:398"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:399"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:400"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:401"><span class="id" title="variable">this</span></a>)<br/>
&nbsp;&nbsp;) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_val_mono" class="idref" href="#wp_destroy_val_mono"><span class="id" title="instance">wp_destroy_val_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V'PROPER"><span class="id" title="abbreviation">V'PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "wp". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_frame"><span class="id" title="lemma">wp_destroy_val_frame</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_val_flip_mono" class="idref" href="#wp_destroy_val_flip_mono"><span class="id" title="instance">wp_destroy_val_flip_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V'PROPER"><span class="id" title="abbreviation">V'PROPER</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_mono"><span class="id" title="instance">wp_destroy_val_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_val_proper" class="idref" href="#wp_destroy_val_proper"><span class="id" title="instance">wp_destroy_val_proper</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V'PROPER"><span class="id" title="abbreviation">V'PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">split'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_mono"><span class="id" title="instance">wp_destroy_val_mono</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a>) 6 := {}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="VPROPER" class="idref" href="#VPROPER"><span class="id" title="abbreviation">VPROPER</span></a> <span class="id" title="var">R</span> := (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:402" class="idref" href="#tu:402"><span class="id" title="binder">tu</span></a> <a id="ty:403" class="idref" href="#ty:403"><span class="id" title="binder">ty</span></a> <a id="this:404" class="idref" href="#this:404"><span class="id" title="binder">this</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:402"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:403"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:404"><span class="id" title="variable">this</span></a>)<br/>
&nbsp;&nbsp;) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="destroy_val_mono" class="idref" href="#destroy_val_mono"><span class="id" title="instance">destroy_val_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#VPROPER"><span class="id" title="abbreviation">VPROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">destroy_val.unlock</span></a>. <span class="id" title="var">solve_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="destroy_val_flip_mono" class="idref" href="#destroy_val_flip_mono"><span class="id" title="instance">destroy_val_flip_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#VPROPER"><span class="id" title="abbreviation">VPROPER</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_mono"><span class="id" title="instance">destroy_val_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="destroy_val_proper" class="idref" href="#destroy_val_proper"><span class="id" title="instance">destroy_val_proper</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#VPROPER"><span class="id" title="abbreviation">VPROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">split'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_mono"><span class="id" title="instance">destroy_val_mono</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a>) 7 := {}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="APROPER" class="idref" href="#APROPER"><span class="id" title="abbreviation">APROPER</span></a> <span class="id" title="var">R</span> := (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:405" class="idref" href="#tu:405"><span class="id" title="binder">tu</span></a> <a id="ety:406" class="idref" href="#ety:406"><span class="id" title="binder">ety</span></a> <a id="n:407" class="idref" href="#n:407"><span class="id" title="binder">n</span></a> <a id="p:408" class="idref" href="#p:408"><span class="id" title="binder">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:405"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:406"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:407"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:408"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_array_mono" class="idref" href="#wp_destroy_array_mono"><span class="id" title="instance">wp_destroy_array_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#APROPER"><span class="id" title="abbreviation">APROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "wp". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array_frame"><span class="id" title="lemma">wp_destroy_array_frame</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_array_flip_mono" class="idref" href="#wp_destroy_array_flip_mono"><span class="id" title="instance">wp_destroy_array_flip_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#APROPER"><span class="id" title="abbreviation">APROPER</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array_mono"><span class="id" title="instance">wp_destroy_array_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_destroy_array_proper" class="idref" href="#wp_destroy_array_proper"><span class="id" title="instance">wp_destroy_array_proper</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#APROPER"><span class="id" title="abbreviation">APROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">split'</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array_mono"><span class="id" title="instance">wp_destroy_array_mono</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fupd_wp_destroy_val" class="idref" href="#fupd_wp_destroy_val"><span class="id" title="lemma">fupd_wp_destroy_val</span></a> <a id="tu:409" class="idref" href="#tu:409"><span class="id" title="binder">tu</span></a> <a id="cv:410" class="idref" href="#cv:410"><span class="id" title="binder">cv</span></a> <a id="ty:411" class="idref" href="#ty:411"><span class="id" title="binder">ty</span></a> <a id="this:412" class="idref" href="#this:412"><span class="id" title="binder">this</span></a> <a id="Q:413" class="idref" href="#Q:413"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:409"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:410"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:411"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:412"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:413"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:409"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:410"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:411"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:412"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:413"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_fupd_shift</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_shift"><span class="id" title="lemma">wp_destroy_val_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fupd_destroy_val" class="idref" href="#fupd_destroy_val"><span class="id" title="lemma">fupd_destroy_val</span></a> <a id="tu:414" class="idref" href="#tu:414"><span class="id" title="binder">tu</span></a> <a id="ty:415" class="idref" href="#ty:415"><span class="id" title="binder">ty</span></a> <a id="this:416" class="idref" href="#this:416"><span class="id" title="binder">this</span></a> <a id="Q:417" class="idref" href="#Q:417"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:414"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:415"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:416"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:417"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:414"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:415"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:416"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:417"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_fupd_shift</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_shift"><span class="id" title="lemma">destroy_val_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_fupd" class="idref" href="#wp_destroy_val_fupd"><span class="id" title="lemma">wp_destroy_val_fupd</span></a> <a id="tu:418" class="idref" href="#tu:418"><span class="id" title="binder">tu</span></a> <a id="cv:419" class="idref" href="#cv:419"><span class="id" title="binder">cv</span></a> <a id="ty:420" class="idref" href="#ty:420"><span class="id" title="binder">ty</span></a> <a id="this:421" class="idref" href="#this:421"><span class="id" title="binder">this</span></a> <a id="Q:422" class="idref" href="#Q:422"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:418"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:419"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:420"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:421"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:422"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:418"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:419"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:420"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:421"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:422"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_shift_fupd</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_shift"><span class="id" title="lemma">wp_destroy_val_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_fupd" class="idref" href="#destroy_val_fupd"><span class="id" title="lemma">destroy_val_fupd</span></a> <a id="tu:423" class="idref" href="#tu:423"><span class="id" title="binder">tu</span></a> <a id="ty:424" class="idref" href="#ty:424"><span class="id" title="binder">ty</span></a> <a id="this:425" class="idref" href="#this:425"><span class="id" title="binder">this</span></a> <a id="Q:426" class="idref" href="#Q:426"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:423"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:424"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:425"><span class="id" title="variable">this</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:426"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:423"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:424"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:425"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:426"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_shift_fupd</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_shift"><span class="id" title="lemma">destroy_val_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fupd_wp_destroy_array" class="idref" href="#fupd_wp_destroy_array"><span class="id" title="lemma">fupd_wp_destroy_array</span></a> <a id="tu:427" class="idref" href="#tu:427"><span class="id" title="binder">tu</span></a> <a id="ety:428" class="idref" href="#ety:428"><span class="id" title="binder">ety</span></a> <a id="n:429" class="idref" href="#n:429"><span class="id" title="binder">n</span></a> <a id="p:430" class="idref" href="#p:430"><span class="id" title="binder">p</span></a> <a id="Q:431" class="idref" href="#Q:431"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:427"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:428"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:429"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:430"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:431"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:427"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:428"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:429"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:430"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:431"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_fupd_shift</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array_shift"><span class="id" title="lemma">wp_destroy_array_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_array_fupd" class="idref" href="#wp_destroy_array_fupd"><span class="id" title="lemma">wp_destroy_array_fupd</span></a> <a id="tu:432" class="idref" href="#tu:432"><span class="id" title="binder">tu</span></a> <a id="ety:433" class="idref" href="#ety:433"><span class="id" title="binder">ety</span></a> <a id="n:434" class="idref" href="#n:434"><span class="id" title="binder">n</span></a> <a id="p:435" class="idref" href="#p:435"><span class="id" title="binder">p</span></a> <a id="Q:436" class="idref" href="#Q:436"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:432"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:433"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:434"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:435"><span class="id" title="variable">p</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:436"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:432"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:433"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:434"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:435"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:436"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_shift_fupd</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array_shift"><span class="id" title="lemma">wp_destroy_array_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Introduction rules 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="val_array.intro" class="idref" href="#val_array.intro"><span class="id" title="section">intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="val_array.intro.intro_body" class="idref" href="#val_array.intro.intro_body"><span class="id" title="variable">intro_body</span></a> <a id="tu:437" class="idref" href="#tu:437"><span class="id" title="binder">tu</span></a> <a id="cv:438" class="idref" href="#cv:438"><span class="id" title="binder">cv</span></a> <a id="rty:439" class="idref" href="#rty:439"><span class="id" title="binder">rty</span></a> <a id="this:440" class="idref" href="#this:440"><span class="id" title="binder">this</span></a> <a id="Q:441" class="idref" href="#Q:441"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:439"><span class="id" title="variable">rty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tqualified"><span class="id" title="constructor">Tqualified</span></a> <span class="id" title="var">q</span> <span class="id" title="var">ty</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:437"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#merge_tq"><span class="id" title="definition">merge_tq</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:438"><span class="id" title="variable">cv</span></a> <span class="id" title="var">q</span>) <span class="id" title="var">ty</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:440"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:441"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <span class="id" title="var">cls</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:438"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.logic.const.html#wp_make_mutable"><span class="id" title="abbreviation">wp_make_mutable</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:437"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:440"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:439"><span class="id" title="variable">rty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_named"><span class="id" title="abbreviation">wp_destroy_named</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:437"><span class="id" title="variable">tu</span></a> <span class="id" title="var">cls</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:440"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:441"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">ety</span> <span class="id" title="var">sz</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:438"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.logic.const.html#wp_make_mutable"><span class="id" title="abbreviation">wp_make_mutable</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:437"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:440"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:439"><span class="id" title="variable">rty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:437"><span class="id" title="variable">tu</span></a> <span class="id" title="var">ety</span> <span class="id" title="var">sz</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:440"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:441"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <span class="id" title="var">r_ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> <span class="id" title="var">r_ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="q:444" class="idref" href="#q:444"><span class="id" title="binder">q</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:438"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.c"><span class="id" title="abbreviation">cQp.c</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:437"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <span class="id" title="var">r_ty</span>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:440"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:443"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:441"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tchar_"><span class="id" title="constructor">Tchar_</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfloat_"><span class="id" title="constructor">Tfloat_</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tenum"><span class="id" title="constructor">Tenum</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tbool"><span class="id" title="constructor">Tbool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnullptr"><span class="id" title="constructor">Tnullptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tmember_pointer"><span class="id" title="constructor">Tmember_pointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="q:453" class="idref" href="#q:453"><span class="id" title="binder">q</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:438"><span class="id" title="variable">cv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.c"><span class="id" title="abbreviation">cQp.c</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_prim"><span class="id" title="abbreviation">wp_destroy_prim</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:437"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:439"><span class="id" title="variable">rty</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:440"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#q:445"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:441"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarch"><span class="id" title="constructor">Tarch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'False'"><span class="id" title="notation">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_intro" class="idref" href="#wp_destroy_val_intro"><span class="id" title="lemma">wp_destroy_val_intro</span></a> <a id="rty:454" class="idref" href="#rty:454"><span class="id" title="binder">rty</span></a> <a id="tu:455" class="idref" href="#tu:455"><span class="id" title="binder">tu</span></a> <a id="cv:456" class="idref" href="#cv:456"><span class="id" title="binder">cv</span></a> <a id="this:457" class="idref" href="#this:457"><span class="id" title="binder">this</span></a> <a id="Q:458" class="idref" href="#Q:458"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#val_array.intro.intro_body"><span class="id" title="variable">intro_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:455"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:456"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:454"><span class="id" title="variable">rty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:457"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:458"><span class="id" title="variable">Q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:455"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:456"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:454"><span class="id" title="variable">rty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:457"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:458"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">wp_destroy_val_unfold</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">rty</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_intro" class="idref" href="#destroy_val_intro"><span class="id" title="lemma">destroy_val_intro</span></a> <a id="ty:459" class="idref" href="#ty:459"><span class="id" title="binder">ty</span></a> <a id="tu:460" class="idref" href="#tu:460"><span class="id" title="binder">tu</span></a> <a id="this:461" class="idref" href="#this:461"><span class="id" title="binder">this</span></a> <a id="Q:462" class="idref" href="#Q:462"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.base.html#Cbn"><span class="id" title="abbreviation">Cbn</span></a> (<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#val_array.intro.intro_body"><span class="id" title="variable">intro_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:460"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#QM"><span class="id" title="constructor">QM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:459"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:461"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:462"><span class="id" title="variable">Q</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:460"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:459"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:461"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:462"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_wp_destroy_val"><span class="id" title="lemma">destroy_val_wp_destroy_val</span></a> -<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val_intro"><span class="id" title="lemma">wp_destroy_val_intro</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_array_intro" class="idref" href="#wp_destroy_array_intro"><span class="id" title="lemma">wp_destroy_array_intro</span></a> <a id="tu:463" class="idref" href="#tu:463"><span class="id" title="binder">tu</span></a> <a id="ety:464" class="idref" href="#ety:464"><span class="id" title="binder">ety</span></a> <a id="n:465" class="idref" href="#n:465"><span class="id" title="binder">n</span></a> <a id="p:466" class="idref" href="#p:466"><span class="id" title="binder">p</span></a> <a id="Q:467" class="idref" href="#Q:467"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldl"><span class="id" title="definition">foldl</span></a> (<span class="id" title="keyword">fun</span> <a id="Q:468" class="idref" href="#Q:468"><span class="id" title="binder">Q</span></a> <a id="i:469" class="idref" href="#i:469"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:463"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:464"><span class="id" title="variable">ety</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:466"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">.[</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:464"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">!</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.ZArith.BinInt.html#Z.of_N"><span class="id" title="definition">Z.of_N</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#i:469"><span class="id" title="variable">i</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">]</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:468"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:467"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.prelude.list_numbers.html#seqN"><span class="id" title="definition">seqN</span></a> 0 <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:465"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:463"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:464"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:465"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:466"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:467"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_destroy_array_unfold</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_gen_intro"><span class="id" title="lemma">wp_gen_intro</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_frame"><span class="id" title="lemma">destroy_val_frame</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#val_array.intro"><span class="id" title="section">intro</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_val_elim" class="idref" href="#wp_destroy_val_elim"><span class="id" title="lemma">wp_destroy_val_elim</span></a> <a id="tu:470" class="idref" href="#tu:470"><span class="id" title="binder">tu</span></a> <a id="cv:471" class="idref" href="#cv:471"><span class="id" title="binder">cv</span></a> <a id="rty:472" class="idref" href="#rty:472"><span class="id" title="binder">rty</span></a> <a id="this:473" class="idref" href="#this:473"><span class="id" title="binder">this</span></a> <a id="Q:474" class="idref" href="#Q:474"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_val"><span class="id" title="abbreviation">wp_destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:470"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:471"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:472"><span class="id" title="variable">rty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:473"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:474"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V"><span class="id" title="abbreviation">V</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:470"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#cv:471"><span class="id" title="variable">cv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#rty:472"><span class="id" title="variable">rty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:473"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:474"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">wp_destroy_val_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="destroy_val_elim" class="idref" href="#destroy_val_elim"><span class="id" title="lemma">destroy_val_elim</span></a> <a id="tu:475" class="idref" href="#tu:475"><span class="id" title="binder">tu</span></a> <a id="ty:476" class="idref" href="#ty:476"><span class="id" title="binder">ty</span></a> <a id="this:477" class="idref" href="#this:477"><span class="id" title="binder">this</span></a> <a id="Q:478" class="idref" href="#Q:478"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:475"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:476"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:477"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:478"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.prelude.base.html#Cbn"><span class="id" title="abbreviation">Cbn</span></a> (<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#V"><span class="id" title="abbreviation">V</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:475"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#QM"><span class="id" title="constructor">QM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:476"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#this:477"><span class="id" title="variable">this</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:478"><span class="id" title="variable">Q</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">destroy_val_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_destroy_array_elim" class="idref" href="#wp_destroy_array_elim"><span class="id" title="lemma">wp_destroy_array_elim</span></a> <a id="tu:479" class="idref" href="#tu:479"><span class="id" title="binder">tu</span></a> <a id="ety:480" class="idref" href="#ety:480"><span class="id" title="binder">ety</span></a> <a id="n:481" class="idref" href="#n:481"><span class="id" title="binder">n</span></a> <a id="p:482" class="idref" href="#p:482"><span class="id" title="binder">p</span></a> <a id="Q:483" class="idref" href="#Q:483"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#wp_destroy_array"><span class="id" title="abbreviation">wp_destroy_array</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:479"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:480"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:481"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:482"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:483"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#A"><span class="id" title="abbreviation">A</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:479"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ety:480"><span class="id" title="variable">ety</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#n:481"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:482"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:483"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">wp_destroy_array_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#val_array"><span class="id" title="section">val_array</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab178"></a><h2 class="section">Destroying temporaries</h2>

<div class="paragraph"> </div>

<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.func.html#interp"><span class="id" title="abbreviation">interp</span></a></span> <span class="inlinecode"><span class="id" title="var">free</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span> "runs" <span class="inlinecode"><span class="id" title="var">free</span></span> and then acts like <span class="inlinecode"><span class="id" title="var">Q</span></span>.

<div class="paragraph"> </div>

NOTE why not just destroy each object with <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">emp</span></span>?

<div class="paragraph"> </div>

Consider destroying 2 objects using destructors that return resources,
i.e. suppose specifications such as <span class="inlinecode">\<span class="id" title="var">post</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span>.

<div class="paragraph"> </div>

<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.func.html#interp"><span class="id" title="abbreviation">interp</span></a></span> <span class="inlinecode">(<a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.par"><span class="id" title="constructor">par</span></a></span> <span class="inlinecode">(<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_resolve.delete"><span class="id" title="section">delete</span></a></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span> <span class="inlinecode">(<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_resolve.delete"><span class="id" title="section">delete</span></a></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><a class="idref" href="bedrock.noimport.doc.cpp.logic.html#with_Sigma.b"><span class="id" title="variable">b</span></a>))</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> will reduce to

<div class="paragraph"> </div>

<pre>
  Exists Q1 Q2,
    (... ** (Q -* Q1)) **
    (... ** (Q -* Q2)) **
    (Q1 -* Q2 -* ..)
</pre>

<div class="paragraph"> </div>

With the trivial instantiation, this becomes unprovable because <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">-*</span>
<span class="inlinecode"><span class="id" title="var">emp</span></span> is not provable unless <span class="inlinecode"><span class="id" title="var">Q</span></span> is affine.

</div>
<div class="code">
<span class="comment">(*&nbsp;BEGIN&nbsp;interp&nbsp;*)</span><br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="interp_body" class="idref" href="#interp_body"><span class="id" title="definition">interp_body</span></a> `{<a id="30faadfd0c5d635e8fdc9dc629b68006" class="idref" href="#30faadfd0c5d635e8fdc9dc629b68006"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="8e83250b33c1b00fedc38f672a1d6cad" class="idref" href="#8e83250b33c1b00fedc38f672a1d6cad"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="interp:487" class="idref" href="#interp:487"><span class="id" title="binder">interp</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps"><span class="id" title="abbreviation">FreeTemps</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tu:488" class="idref" href="#tu:488"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>) (<a id="free:489" class="idref" href="#free:489"><span class="id" title="binder">free</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps"><span class="id" title="abbreviation">FreeTemps</span></a>) (<a id="Q:490" class="idref" href="#Q:490"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>) : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:489"><span class="id" title="variable">free</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.id"><span class="id" title="constructor">FreeTemps.id</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:490"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.seq"><span class="id" title="constructor">FreeTemps.seq</span></a> <span class="id" title="var">f</span> <span class="id" title="var">g</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp:487"><span class="id" title="variable">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:488"><span class="id" title="variable">tu</span></a> <span class="id" title="var">f</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp:487"><span class="id" title="variable">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:488"><span class="id" title="variable">tu</span></a> <span class="id" title="var">g</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:490"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.par"><span class="id" title="constructor">FreeTemps.par</span></a> <span class="id" title="var">f</span> <span class="id" title="var">g</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="Qf:492" class="idref" href="#Qf:492"><span class="id" title="binder">Qf</span></a> <a id="Qg:493" class="idref" href="#Qg:493"><span class="id" title="binder">Qg</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp:487"><span class="id" title="variable">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:488"><span class="id" title="variable">tu</span></a> <span class="id" title="var">f</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:492"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp:487"><span class="id" title="variable">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:488"><span class="id" title="variable">tu</span></a> <span class="id" title="var">g</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:493"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:492"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:493"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:490"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete"><span class="id" title="constructor">FreeTemps.delete</span></a> <span class="id" title="var">ty</span> <span class="id" title="var">addr</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:488"><span class="id" title="variable">tu</span></a> <span class="id" title="var">ty</span> <span class="id" title="var">addr</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:490"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete_va"><span class="id" title="constructor">FreeTemps.delete_va</span></a> <span class="id" title="var">va</span> <span class="id" title="var">addr</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <span class="id" title="var">addr</span> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#varargsR"><span class="id" title="axiom">varargsR</span></a> <span class="id" title="var">va</span> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:490"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">mlock</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">Definition</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">interp</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">`{</span></a><a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">Σ</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">cpp_logic</span></a><a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">,</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">σ</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">genv</span></a><a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">:</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">translation_unit</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">FreeTemps</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">epred</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">-&gt;</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">mpred</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">fix</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">interp</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">free</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">:=</span></a><br/>
&nbsp;&nbsp;<a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">interp_body</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">interp</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">tu</span></a> <a id="interp_unlock_subterm" class="idref" href="#interp_unlock_subterm"><span class="id" title="definition">free</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#body"><span class="id" title="axiom">interp</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">free</span> <span class="id" title="var">Q</span> : <span class="id" title="tactic">assert</span>. <span class="comment">(*&nbsp;set&nbsp;names&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;END&nbsp;interp&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;^^&nbsp;These&nbsp;BEGIN/END&nbsp;markers&nbsp;matter&nbsp;to&nbsp;our&nbsp;documentation&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="unfold" class="idref" href="#unfold"><span class="id" title="section">unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="bfb7c008f1ea8999b96ecf175882a4b7" class="idref" href="#bfb7c008f1ea8999b96ecf175882a4b7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="fb976235be791d08fdd874c3f9756cfc" class="idref" href="#fb976235be791d08fdd874c3f9756cfc"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_unfold" class="idref" href="#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> <a id="free:506" class="idref" href="#free:506"><span class="id" title="binder">free</span></a> <a id="tu:507" class="idref" href="#tu:507"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:507"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:506"><span class="id" title="variable">free</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_body"><span class="id" title="definition">interp_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:507"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:506"><span class="id" title="variable">free</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unlock"><span class="id" title="axiom">interp.unlock</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">free</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#unfold"><span class="id" title="section">unfold</span></a>.<br/>

<br/>
</div>

<div class="doc">
Unfold for one inhabitant of <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps"><span class="id" title="abbreviation">FreeTemps</span></a></span>, failing if there's nothing
to do.

</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">interp_unfold</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">f</span>] =&gt; <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span> "[interp] not found"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="temps" class="idref" href="#temps"><span class="id" title="section">temps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="8221839a5a2665b59a952ed21e6784c0" class="idref" href="#8221839a5a2665b59a952ed21e6784c0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>, <a id="e4ad4ab85fd39efdd5791dc706ab33af" class="idref" href="#e4ad4ab85fd39efdd5791dc706ab33af"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_intro" class="idref" href="#interp_intro"><span class="id" title="lemma">interp_intro</span></a> <a id="free:511" class="idref" href="#free:511"><span class="id" title="binder">free</span></a> <a id="tu:512" class="idref" href="#tu:512"><span class="id" title="binder">tu</span></a> <a id="Q:513" class="idref" href="#Q:513"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:511"><span class="id" title="variable">free</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.id"><span class="id" title="constructor">FreeTemps.id</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:513"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.seq"><span class="id" title="constructor">FreeTemps.seq</span></a> <span class="id" title="var">f</span> <span class="id" title="var">g</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:512"><span class="id" title="variable">tu</span></a> <span class="id" title="var">f</span> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:512"><span class="id" title="variable">tu</span></a> <span class="id" title="var">g</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:513"><span class="id" title="variable">Q</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.par"><span class="id" title="constructor">FreeTemps.par</span></a> <span class="id" title="var">f</span> <span class="id" title="var">g</span> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="Qf:515" class="idref" href="#Qf:515"><span class="id" title="binder">Qf</span></a> <a id="Qg:516" class="idref" href="#Qg:516"><span class="id" title="binder">Qg</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:512"><span class="id" title="variable">tu</span></a> <span class="id" title="var">f</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:515"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:512"><span class="id" title="variable">tu</span></a> <span class="id" title="var">g</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:516"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:515"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:516"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:513"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete"><span class="id" title="constructor">FreeTemps.delete</span></a> <span class="id" title="var">ty</span> <span class="id" title="var">addr</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:512"><span class="id" title="variable">tu</span></a> <span class="id" title="var">ty</span> <span class="id" title="var">addr</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:513"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete_va"><span class="id" title="constructor">FreeTemps.delete_va</span></a> <span class="id" title="var">va</span> <span class="id" title="var">addr</span> =&gt; <span class="id" title="var">addr</span> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#varargsR"><span class="id" title="axiom">varargsR</span></a> <span class="id" title="var">va</span> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:513"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:512"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:511"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:513"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">interp_unfold</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">free</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_elim"><span class="id" title="lemma">fupd_elim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;par&nbsp;*)</span> <span class="id" title="var">iIntros</span> "(%Qf &amp; %Qg &amp; Qf &amp; Qg &amp; HQ)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">Qf</span>, <span class="id" title="var">Qg</span>. <span class="id" title="var">iFrame</span> "Qf Qg". <span class="id" title="var">iIntros</span> "!&gt; Qf Qg".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HQ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qf Qg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_intro_id" class="idref" href="#interp_intro_id"><span class="id" title="lemma">interp_intro_id</span></a> <a id="tu:517" class="idref" href="#tu:517"><span class="id" title="binder">tu</span></a> <a id="Q:518" class="idref" href="#Q:518"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:518"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:517"><span class="id" title="variable">tu</span></a> 1 <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:518"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_intro"><span class="id" title="lemma">interp_intro</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_intro_seq" class="idref" href="#interp_intro_seq"><span class="id" title="lemma">interp_intro_seq</span></a> <a id="tu:519" class="idref" href="#tu:519"><span class="id" title="binder">tu</span></a> <a id="f:520" class="idref" href="#f:520"><span class="id" title="binder">f</span></a> <a id="g:521" class="idref" href="#g:521"><span class="id" title="binder">g</span></a> <a id="Q:522" class="idref" href="#Q:522"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:519"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:520"><span class="id" title="variable">f</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:519"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:521"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:522"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:519"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:520"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:521"><span class="id" title="variable">g</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:522"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_intro"><span class="id" title="lemma">interp_intro</span></a> (<span class="id" title="var">f</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <span class="id" title="var">g</span>)). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_intro_par" class="idref" href="#interp_intro_par"><span class="id" title="lemma">interp_intro_par</span></a> <a id="tu:523" class="idref" href="#tu:523"><span class="id" title="binder">tu</span></a> <a id="f:524" class="idref" href="#f:524"><span class="id" title="binder">f</span></a> <a id="g:525" class="idref" href="#g:525"><span class="id" title="binder">g</span></a> <a id="Q:526" class="idref" href="#Q:526"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="Qf:527" class="idref" href="#Qf:527"><span class="id" title="binder">Qf</span></a> <a id="Qg:528" class="idref" href="#Qg:528"><span class="id" title="binder">Qg</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:523"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:524"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:527"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:523"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:525"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:528"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:527"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:528"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:526"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:523"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:524"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#185d3ade71f962ba979a15b86bd37653"><span class="id" title="notation">|*|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:525"><span class="id" title="variable">g</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:526"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_intro"><span class="id" title="lemma">interp_intro</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_intro_delete" class="idref" href="#interp_intro_delete"><span class="id" title="lemma">interp_intro_delete</span></a> <a id="tu:529" class="idref" href="#tu:529"><span class="id" title="binder">tu</span></a> <a id="ty:530" class="idref" href="#ty:530"><span class="id" title="binder">ty</span></a> <a id="addr:531" class="idref" href="#addr:531"><span class="id" title="binder">addr</span></a> <a id="Q:532" class="idref" href="#Q:532"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:529"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:530"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:531"><span class="id" title="variable">addr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:532"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:529"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete"><span class="id" title="constructor">FreeTemps.delete</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:530"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:531"><span class="id" title="variable">addr</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:532"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_intro"><span class="id" title="lemma">interp_intro</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_intro_delete_va" class="idref" href="#interp_intro_delete_va"><span class="id" title="lemma">interp_intro_delete_va</span></a> <a id="tu:533" class="idref" href="#tu:533"><span class="id" title="binder">tu</span></a> <a id="va:534" class="idref" href="#va:534"><span class="id" title="binder">va</span></a> (<a id="addr:535" class="idref" href="#addr:535"><span class="id" title="binder">addr</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) <a id="Q:536" class="idref" href="#Q:536"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:535"><span class="id" title="variable">addr</span></a> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#varargsR"><span class="id" title="axiom">varargsR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#va:534"><span class="id" title="variable">va</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:536"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:533"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete_va"><span class="id" title="constructor">FreeTemps.delete_va</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#va:534"><span class="id" title="variable">va</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:535"><span class="id" title="variable">addr</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:536"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_intro"><span class="id" title="lemma">interp_intro</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Elimination rules 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_elim" class="idref" href="#interp_elim"><span class="id" title="lemma">interp_elim</span></a> <a id="free:537" class="idref" href="#free:537"><span class="id" title="binder">free</span></a> <a id="tu:538" class="idref" href="#tu:538"><span class="id" title="binder">tu</span></a> <a id="Q:539" class="idref" href="#Q:539"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:538"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:537"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:539"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.base.html#Reduce"><span class="id" title="abbreviation">Reduce</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_body"><span class="id" title="definition">interp_body</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:538"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:537"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:539"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">interp_unfold</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_elim_id" class="idref" href="#interp_elim_id"><span class="id" title="lemma">interp_elim_id</span></a> <a id="tu:540" class="idref" href="#tu:540"><span class="id" title="binder">tu</span></a> <a id="Q:541" class="idref" href="#Q:541"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:540"><span class="id" title="variable">tu</span></a> 1 <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:541"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:541"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_elim"><span class="id" title="lemma">interp_elim</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_elim_seq" class="idref" href="#interp_elim_seq"><span class="id" title="lemma">interp_elim_seq</span></a> <a id="tu:542" class="idref" href="#tu:542"><span class="id" title="binder">tu</span></a> <a id="f:543" class="idref" href="#f:543"><span class="id" title="binder">f</span></a> <a id="g:544" class="idref" href="#g:544"><span class="id" title="binder">g</span></a> <a id="Q:545" class="idref" href="#Q:545"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:542"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:543"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:544"><span class="id" title="variable">g</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:545"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:542"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:543"><span class="id" title="variable">f</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:542"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:544"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:545"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_elim"><span class="id" title="lemma">interp_elim</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_elim_par" class="idref" href="#interp_elim_par"><span class="id" title="lemma">interp_elim_par</span></a> <a id="tu:546" class="idref" href="#tu:546"><span class="id" title="binder">tu</span></a> <a id="f:547" class="idref" href="#f:547"><span class="id" title="binder">f</span></a> <a id="g:548" class="idref" href="#g:548"><span class="id" title="binder">g</span></a> <a id="Q:549" class="idref" href="#Q:549"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:546"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:547"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#185d3ade71f962ba979a15b86bd37653"><span class="id" title="notation">|*|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:548"><span class="id" title="variable">g</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:549"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="Qf:550" class="idref" href="#Qf:550"><span class="id" title="binder">Qf</span></a> <a id="Qg:551" class="idref" href="#Qg:551"><span class="id" title="binder">Qg</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:546"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#f:547"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:550"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:546"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#g:548"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:551"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qf:550"><span class="id" title="variable">Qf</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Qg:551"><span class="id" title="variable">Qg</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:549"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_elim"><span class="id" title="lemma">interp_elim</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_elim_delete" class="idref" href="#interp_elim_delete"><span class="id" title="lemma">interp_elim_delete</span></a> <a id="tu:552" class="idref" href="#tu:552"><span class="id" title="binder">tu</span></a> <a id="ty:553" class="idref" href="#ty:553"><span class="id" title="binder">ty</span></a> <a id="addr:554" class="idref" href="#addr:554"><span class="id" title="binder">addr</span></a> <a id="Q:555" class="idref" href="#Q:555"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:552"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete"><span class="id" title="constructor">FreeTemps.delete</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:553"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:554"><span class="id" title="variable">addr</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:555"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val"><span class="id" title="abbreviation">destroy_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:552"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#ty:553"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:554"><span class="id" title="variable">addr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:555"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_elim"><span class="id" title="lemma">interp_elim</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_elim_delete_va" class="idref" href="#interp_elim_delete_va"><span class="id" title="lemma">interp_elim_delete_va</span></a> <a id="tu:556" class="idref" href="#tu:556"><span class="id" title="binder">tu</span></a> <a id="va:557" class="idref" href="#va:557"><span class="id" title="binder">va</span></a> <a id="addr:558" class="idref" href="#addr:558"><span class="id" title="binder">addr</span></a> <a id="Q:559" class="idref" href="#Q:559"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:556"><span class="id" title="variable">tu</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete_va"><span class="id" title="constructor">FreeTemps.delete_va</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#va:557"><span class="id" title="variable">va</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:558"><span class="id" title="variable">addr</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:559"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#addr:558"><span class="id" title="variable">addr</span></a> <a class="idref" href="bedrock.lang.cpp.heap_notations.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#varargsR"><span class="id" title="axiom">varargsR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#va:557"><span class="id" title="variable">va</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:559"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_elim"><span class="id" title="lemma">interp_elim</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Structural rules 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_frame_strong" class="idref" href="#interp_frame_strong"><span class="id" title="lemma">interp_frame_strong</span></a> <a id="tu:560" class="idref" href="#tu:560"><span class="id" title="binder">tu</span></a> <a id="tu':561" class="idref" href="#tu':561"><span class="id" title="binder">tu'</span></a> <a id="free:562" class="idref" href="#free:562"><span class="id" title="binder">free</span></a> <a id="Q:563" class="idref" href="#Q:563"><span class="id" title="binder">Q</span></a> <a id="Q':564" class="idref" href="#Q':564"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#TULE"><span class="id" title="abbreviation">TULE</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:560"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':561"><span class="id" title="variable">tu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:563"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':564"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:560"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:562"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:563"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu':561"><span class="id" title="variable">tu'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:562"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':564"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">free</span>=&gt;<span class="id" title="var">Q</span> <span class="id" title="var">Q'</span>; <span class="id" title="var">interp_unfold</span>; <span class="id" title="var">iIntros</span> "HQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "&gt;Q". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_frame"><span class="id" title="lemma">destroy_val_frame</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "&gt;($ &amp; Q)". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <span class="id" title="var">IHfree1</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="var">IHfree2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "&gt;(%Qf &amp; %Qg &amp; (Qf &amp; Qg &amp; Hfg))". <span class="id" title="var">iExists</span> <span class="id" title="var">Qf</span>, <span class="id" title="var">Qg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">IHfree1</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] Qf"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">IHfree2</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[] Qg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$"; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; Qf Qg". <span class="id" title="var">iApply</span> "HQ". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hfg" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qf Qg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The name is historic 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_frame" class="idref" href="#interp_frame"><span class="id" title="lemma">interp_frame</span></a> <a id="tu:565" class="idref" href="#tu:565"><span class="id" title="binder">tu</span></a> <a id="free:566" class="idref" href="#free:566"><span class="id" title="binder">free</span></a> <a id="Q:567" class="idref" href="#Q:567"><span class="id" title="binder">Q</span></a> <a id="Q':568" class="idref" href="#Q':568"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:567"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':568"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:565"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:566"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:567"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:565"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:566"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':568"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_frame_strong"><span class="id" title="lemma">interp_frame_strong</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_wand" class="idref" href="#interp_wand"><span class="id" title="lemma">interp_wand</span></a> <a id="tu:569" class="idref" href="#tu:569"><span class="id" title="binder">tu</span></a> <a id="free:570" class="idref" href="#free:570"><span class="id" title="binder">free</span></a> <a id="Q:571" class="idref" href="#Q:571"><span class="id" title="binder">Q</span></a> <a id="Q':572" class="idref" href="#Q':572"><span class="id" title="binder">Q'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:569"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:570"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:571"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:571"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':572"><span class="id" title="variable">Q'</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:569"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:570"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q':572"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "wp HQ". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_frame"><span class="id" title="lemma">interp_frame</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HQ wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_shift" class="idref" href="#interp_shift"><span class="id" title="lemma">interp_shift</span></a> <a id="tu:573" class="idref" href="#tu:573"><span class="id" title="binder">tu</span></a> <a id="free:574" class="idref" href="#free:574"><span class="id" title="binder">free</span></a> <a id="Q:575" class="idref" href="#Q:575"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:573"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:574"><span class="id" title="variable">free</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:575"><span class="id" title="variable">Q</span></a>)<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:573"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:574"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:575"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Q</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">free</span>=&gt;<span class="id" title="var">Q</span>; <span class="id" title="var">interp_unfold</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "&gt;&gt;&gt;Q".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_shift"><span class="id" title="lemma">destroy_val_shift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "&gt;&gt;($ &amp; $)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "HQ". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">IHfree1</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HQ]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_wand"><span class="id" title="lemma">interp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HQ"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HQ". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><span class="id" title="var">IHfree2</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[HQ]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "&gt;&gt;(%Qf &amp; %Qg &amp; (Qf &amp; Qg &amp; Hfg))". <span class="id" title="var">iExists</span> <span class="id" title="var">Qf</span>, <span class="id" title="var">Qg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Qf Qg". <span class="id" title="var">iIntros</span> "!&gt; Qf Qg". <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hfg" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qf Qg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fupd_interp" class="idref" href="#fupd_interp"><span class="id" title="lemma">fupd_interp</span></a> <a id="tu:576" class="idref" href="#tu:576"><span class="id" title="binder">tu</span></a> <a id="free:577" class="idref" href="#free:577"><span class="id" title="binder">free</span></a> <a id="Q:578" class="idref" href="#Q:578"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:576"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:577"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:578"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:576"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:577"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:578"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "wp". <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_shift"><span class="id" title="lemma">interp_shift</span></a>. <span class="id" title="var">iMod</span> "wp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_wand"><span class="id" title="lemma">interp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "!&gt; $".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_fupd" class="idref" href="#interp_fupd"><span class="id" title="lemma">interp_fupd</span></a> <a id="tu:579" class="idref" href="#tu:579"><span class="id" title="binder">tu</span></a> <a id="free:580" class="idref" href="#free:580"><span class="id" title="binder">free</span></a> <a id="Q:581" class="idref" href="#Q:581"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:579"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:580"><span class="id" title="variable">free</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:581"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#241f3523556174329a653ac5c2e2a9bf"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:579"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:580"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:581"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_shift_fupd</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_shift"><span class="id" title="lemma">interp_shift</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="interp_free" class="idref" href="#interp_free"><span class="id" title="lemma">interp_free</span></a> <a id="tu:582" class="idref" href="#tu:582"><span class="id" title="binder">tu</span></a> <a id="free:583" class="idref" href="#free:583"><span class="id" title="binder">free</span></a> <a id="free':584" class="idref" href="#free':584"><span class="id" title="binder">free'</span></a> <a id="Q:585" class="idref" href="#Q:585"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:583"><span class="id" title="variable">free</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free':584"><span class="id" title="variable">free'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:582"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:583"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:585"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#a08e735368df29af501a6e158e3c5730"><span class="id" title="notation">-|-</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:582"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free':584"><span class="id" title="variable">free'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:585"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="WEAK_PROPER" class="idref" href="#WEAK_PROPER"><span class="id" title="abbreviation">WEAK_PROPER</span></a> <span class="id" title="var">R</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:594" class="idref" href="#tu:594"><span class="id" title="binder">tu</span></a> <a id="free:595" class="idref" href="#free:595"><span class="id" title="binder">free</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:586"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:587"><span class="id" title="variable">free</span></a>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">weak_mono</span> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WEAK_PROPER"><span class="id" title="abbreviation">WEAK_PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="var">iIntros</span> "wp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_wand"><span class="id" title="lemma">interp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="var">HQ</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> {<span class="id" title="var">weak_mono</span>} <span class="id" title="var">weak_proper</span> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WEAK_PROPER"><span class="id" title="abbreviation">WEAK_PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">weak_mono</span>. <span class="id" title="tactic">intros</span> * <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">weak_mono</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fupd_interp</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:588" class="idref" href="#tu:588"><span class="id" title="binder">tu</span></a> <a id="free:589" class="idref" href="#free:589"><span class="id" title="binder">free</span></a> <a id="Q:590" class="idref" href="#Q:590"><span class="id" title="binder">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#a08e735368df29af501a6e158e3c5730"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:588"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:589"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:590"><span class="id" title="variable">Q</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#a08e735368df29af501a6e158e3c5730"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#a08e735368df29af501a6e158e3c5730"><span class="id" title="notation">-|-</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:588"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:589"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:590"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span>. <span class="id" title="var">split'</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#fupd_interp"><span class="id" title="lemma">fupd_interp</span></a>, <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_elim"><span class="id" title="lemma">fupd_elim</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">interp_fupd</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:591" class="idref" href="#tu:591"><span class="id" title="binder">tu</span></a> <a id="free:592" class="idref" href="#free:592"><span class="id" title="binder">free</span></a> <a id="Q:593" class="idref" href="#Q:593"><span class="id" title="binder">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:591"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:592"><span class="id" title="variable">free</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:593"><span class="id" title="variable">Q</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#a08e735368df29af501a6e158e3c5730"><span class="id" title="notation">-|-</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:591"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#free:592"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:593"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span>. <span class="id" title="var">split'</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_fupd"><span class="id" title="lemma">interp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "wp". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_wand"><span class="id" title="lemma">interp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "$". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">Q</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>=&gt;<span class="id" title="var">Q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">done</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHi</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHi</span> <span class="id" title="var">IHi0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <span class="id" title="var">_</span>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <span class="id" title="var">_</span>)) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">fupd_interp</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <span class="id" title="var">_</span>)) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">interp_fupd</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <span class="id" title="var">_</span>)). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHi</span> <span class="id" title="var">IHi0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#185d3ade71f962ba979a15b86bd37653"><span class="id" title="notation">|*|</span></a> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.exist_exist"><span class="id" title="lemma">bi.exist_exist</span></a>. <span class="id" title="var">f_equiv</span>=&gt;<span class="id" title="var">Qf</span>. <span class="id" title="var">f_equiv</span>=&gt;<span class="id" title="var">Qg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">split'</span>; <span class="id" title="var">iIntros</span> "($ &amp; $ &amp; F) A B"; <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"F" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "B A"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#185d3ade71f962ba979a15b86bd37653"><span class="id" title="notation">|*|</span></a> <span class="id" title="var">_</span>)). <span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "&gt;(%Qx &amp; %Qyz &amp; wpx &amp; Hyz &amp; HQ)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Hyz" <span class="id" title="keyword">as</span> "(%Qy &amp; %Qz &amp; wpy &amp; wpz &amp; Hyz)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="var">Qx</span> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <span class="id" title="var">Qy</span>), <span class="id" title="var">Qz</span>. <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi.exist_intro"><span class="id" title="lemma">bi.exist_intro</span></a> <span class="id" title="var">Qx</span>) -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi.exist_intro"><span class="id" title="lemma">bi.exist_intro</span></a> <span class="id" title="var">Qy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "wpz wpx wpy". <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "!&gt; $ $". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[Qx Qy] Qz". <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hyz" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qy Qz"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Qyz".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HQ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qx Qyz"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "&gt;(%Qxy &amp; %Qz &amp; Hxy &amp; wpz &amp; HQ)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "Hxy" <span class="id" title="keyword">as</span> "(%Qx &amp; %Qy &amp; wpx &amp; wpy &amp; Hxy)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">Qx</span>, (<span class="id" title="var">Qy</span> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <span class="id" title="var">Qz</span>). <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi.exist_intro"><span class="id" title="lemma">bi.exist_intro</span></a> <span class="id" title="var">Qy</span>) -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi.exist_intro"><span class="id" title="lemma">bi.exist_intro</span></a> <span class="id" title="var">Qz</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "wpz wpx wpy". <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "!&gt; $ $". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Qx [Qy Qz]". <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hxy" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qx Qy"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Qxy".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HQ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qxy Qz"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#185d3ade71f962ba979a15b86bd37653"><span class="id" title="notation">|*|</span></a> <span class="id" title="var">_</span>)) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> 1). <span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "X". <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_shift"><span class="id" title="lemma">interp_shift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "X" <span class="id" title="keyword">as</span> "(%Qf &amp; %Qg &amp; &gt;Qf &amp; wp &amp; HQ)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_wand"><span class="id" title="lemma">interp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> "!&gt; Qg".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HQ" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Qf Qg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "wp". <span class="id" title="var">iExists</span> <a class="idref" href="bedrock.lang.bi.prelude.html#::stdpp_scope:'emp'"><span class="id" title="notation">emp</span></a>, <span class="id" title="var">Q</span>. <span class="id" title="var">iFrame</span> "wp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iSplitL</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_unfold"><span class="id" title="lemma">interp_unfold</span></a> (<span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#185d3ade71f962ba979a15b86bd37653"><span class="id" title="notation">|*|</span></a> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">IHi</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">IHi0</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a>) 4 := {}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="PROPER" class="idref" href="#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <span class="id" title="var">R</span> := (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="tu:596" class="idref" href="#tu:596"><span class="id" title="binder">tu</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="var">R</span>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#tu:596"><span class="id" title="variable">tu</span></a>)<br/>
&nbsp;&nbsp;) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_mono" class="idref" href="#interp_mono"><span class="id" title="instance">interp_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">Hf</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>. <span class="id" title="var">iIntros</span> "wp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_free"><span class="id" title="lemma">interp_free</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_wand"><span class="id" title="lemma">interp_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "wp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_flip_mono" class="idref" href="#interp_flip_mono"><span class="id" title="instance">interp_flip_mono</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_entails"><span class="id" title="projection">bi_entails</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_mono"><span class="id" title="instance">interp_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="interp_proper" class="idref" href="#interp_proper"><span class="id" title="instance">interp_proper</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#PROPER"><span class="id" title="abbreviation">PROPER</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">HF</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>; (<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_mono"><span class="id" title="instance">interp_mono</span></a>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HF</span>|<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HQ</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="temps.proofmode" class="idref" href="#temps.proofmode"><span class="id" title="section">proofmode</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="tu:597" class="idref" href="#tu:597"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>) (<a id="free:598" class="idref" href="#free:598"><span class="id" title="binder">free</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps"><span class="id" title="abbreviation">FreeTemps</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">P</span> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.mpred"><span class="id" title="definition">mpred</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="WP" class="idref" href="#WP"><span class="id" title="abbreviation">WP</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#temps.proofmode.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#temps.proofmode.free"><span class="id" title="variable">free</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="elim_modal_fupd_interp" class="idref" href="#elim_modal_fupd_interp"><span class="id" title="instance">elim_modal_fupd_interp</span></a> <a id="p:599" class="idref" href="#p:599"><span class="id" title="binder">p</span></a> <a id="P:600" class="idref" href="#P:600"><span class="id" title="binder">P</span></a> <a id="Q:601" class="idref" href="#Q:601"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:599"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:600"><span class="id" title="variable">P</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:600"><span class="id" title="variable">P</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP"><span class="id" title="abbreviation">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:601"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP"><span class="id" title="abbreviation">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:601"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.intuitionistically_if_elim"><span class="id" title="lemma">bi.intuitionistically_if_elim</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_elim_r"><span class="id" title="lemma">bi.wand_elim_r</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#fupd_interp"><span class="id" title="lemma">fupd_interp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="elim_modal_bupd_interp" class="idref" href="#elim_modal_bupd_interp"><span class="id" title="instance">elim_modal_bupd_interp</span></a> <a id="p:602" class="idref" href="#p:602"><span class="id" title="binder">p</span></a> <a id="P:603" class="idref" href="#P:603"><span class="id" title="binder">P</span></a> <a id="Q:604" class="idref" href="#Q:604"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#p:602"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.17.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#be9a2343da4fe37e3ed47c88e1c47b1e"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:603"><span class="id" title="variable">P</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:603"><span class="id" title="variable">P</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP"><span class="id" title="abbreviation">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:604"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP"><span class="id" title="abbreviation">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:604"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#bupd_fupd"><span class="id" title="definition">bupd_fupd</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a>). <span class="id" title="tactic">exact</span>: <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#elim_modal_fupd_interp"><span class="id" title="instance">elim_modal_fupd_interp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_modal_fupd_interp" class="idref" href="#add_modal_fupd_interp"><span class="id" title="instance">add_modal_fupd_interp</span></a> <a id="P:605" class="idref" href="#P:605"><span class="id" title="binder">P</span></a> <a id="Q:606" class="idref" href="#Q:606"><span class="id" title="binder">Q</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.classes.html#AddModal"><span class="id" title="class">AddModal</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:605"><span class="id" title="variable">P</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#P:605"><span class="id" title="variable">P</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#WP"><span class="id" title="abbreviation">WP</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#Q:606"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>/<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.classes.html#AddModal"><span class="id" title="class">AddModal</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_elim_r"><span class="id" title="lemma">bi.wand_elim_r</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#fupd_interp"><span class="id" title="lemma">fupd_interp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#temps.proofmode"><span class="id" title="section">proofmode</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#temps"><span class="id" title="section">temps</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">interp_intro_id</span> : <span class="id" title="var">core</span>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
