<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> `theories/` </a>
      <a href="../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.lang.cpp.specs.wp_spec_compat</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2022&nbsp;BedRock&nbsp;Systems,&nbsp;Inc.<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">iris.proofmode.tactics</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.algebra.telescopes.html#"><span class="id" title="library">bedrock.lang.algebra.telescopes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.telescopes.html#"><span class="id" title="library">bedrock.lang.bi.telescopes</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.logic.entailsN.html#"><span class="id" title="library">bedrock.lang.cpp.logic.entailsN</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.specs.classy.html#"><span class="id" title="library">bedrock.lang.cpp.specs.classy</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ex_eq" class="idref" href="#ex_eq"><span class="id" title="lemma">ex_eq</span></a> {<a id="PROP:1" class="idref" href="#PROP:1"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="T:2" class="idref" href="#T:2"><span class="id" title="binder">T</span></a>} (<a id="a:3" class="idref" href="#a:3"><span class="id" title="binder">a</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:2"><span class="id" title="variable">T</span></a>) (<a id="P:4" class="idref" href="#P:4"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:2"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:1"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:2"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#a:3"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:4"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:5"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:4"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#a:3"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (?) "[-&gt; $]".<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplitR</span>; [ | <span class="id" title="var">iAssumption</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ex_eq'" class="idref" href="#ex_eq'"><span class="id" title="lemma">ex_eq'</span></a> {<a id="PROP:6" class="idref" href="#PROP:6"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="T:7" class="idref" href="#T:7"><span class="id" title="binder">T</span></a>} (<a id="a:8" class="idref" href="#a:8"><span class="id" title="binder">a</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:7"><span class="id" title="variable">T</span></a>) (<a id="P:9" class="idref" href="#P:9"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:7"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:6"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="x:10" class="idref" href="#x:10"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:7"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#a:8"><span class="id" title="variable">a</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:9"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:10"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:9"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#a:8"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (?) "[-&gt; $]".<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplitR</span>; [ | <span class="id" title="var">iAssumption</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="with_prop" class="idref" href="#with_prop"><span class="id" title="section">with_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="PROP:11" class="idref" href="#PROP:11"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:12" class="idref" href="#ARG:12"><span class="id" title="binder">ARG</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:13" class="idref" href="#RESULT:13"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
</div>

<div class="doc">
The canonical type of function specifications.
      These are written in weakest pre-condition style which leads to a
      natural shallow encoding.

<div class="paragraph"> </div>

      Note that this file goes through some length to maintain backwards
      compatibility with previous definitions.

<div class="paragraph"> </div>

      Universes:
      The universe constraints here are very important note that the universe
      of the entire type is <span class="inlinecode"><span class="id" title="var">bi.u0</span></span> which is the universe of the logic. Since
      the logic is able to quantify over itself, e.g. <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.iprop_own.html#PROP"><span class="id" title="abbreviation">PROP</span></a>,</span> <span class="inlinecode"><a class="idref" href="bedrock.noimport.doc.cpp.logic.html#with_Sigma.x"><span class="id" title="variable">x</span></a></span>, we are
      free to quantify over specifications without any universe issues. Deeper
      embeddings of this type do not enjoy this property and can introduce
      universe subtle universe issues that can be very difficult to debug.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="WpSpec" class="idref" href="#WpSpec"><span class="id" title="record">WpSpec</span></a> : <span class="id" title="var">Type@</span>{<span class="id" title="var">universes.Logic</span>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;The&nbsp;first&nbsp;three&nbsp;arguments&nbsp;are&nbsp;accumulators&nbsp;that&nbsp;are&nbsp;interpreted&nbsp;away<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">wp_specD</span></span>&nbsp;function&nbsp;below.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">acc_arg</span></span>&nbsp;is&nbsp;the&nbsp;*reversed*&nbsp;list&nbsp;of&nbsp;arguments&nbsp;that&nbsp;we&nbsp;have&nbsp;seen&nbsp;already<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;accumulate&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;so&nbsp;that&nbsp;we&nbsp;can&nbsp;assert&nbsp;a&nbsp;*single*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;equality&nbsp;on&nbsp;all&nbsp;of&nbsp;the&nbsp;arguments.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">acc_pre</span></span>&nbsp;is&nbsp;the&nbsp;reversed&nbsp;list&nbsp;of&nbsp;separating&nbsp;conjunctions&nbsp;that&nbsp;have&nbsp;been<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;added&nbsp;to&nbsp;the&nbsp;pre-condition.&nbsp;These&nbsp;are&nbsp;maintained&nbsp;so&nbsp;that&nbsp;they&nbsp;can&nbsp;be<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placed&nbsp;in&nbsp;the&nbsp;right&nbsp;order&nbsp;and&nbsp;after&nbsp;the&nbsp;equality&nbsp;on&nbsp;the&nbsp;arguments.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="inlinecode"><span class="id" title="var">acc_post</span></span>&nbsp;is&nbsp;the&nbsp;separating&nbsp;conjunction&nbsp;of&nbsp;propositions&nbsp;that&nbsp;have<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;been&nbsp;added&nbsp;to&nbsp;the&nbsp;post&nbsp;condition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;of&nbsp;these&nbsp;use&nbsp;a&nbsp;deep&nbsp;embedding&nbsp;of&nbsp;a&nbsp;monoid&nbsp;to&nbsp;avoid&nbsp;introducing&nbsp;trivial<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertions&nbsp;such&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">emp</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="spec_internal" class="idref" href="#spec_internal"><span class="id" title="projection">spec_internal</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="acc_arg:15" class="idref" href="#acc_arg:15"><span class="id" title="binder">acc_arg</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.ARG"><span class="id" title="variable">ARG</span></a>) (<a id="acc_pre:16" class="idref" href="#acc_pre:16"><span class="id" title="binder">acc_pre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.PROP"><span class="id" title="variable">PROP</span></a>) (<a id="acc_post:17" class="idref" href="#acc_post:17"><span class="id" title="binder">acc_post</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.RESULT"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.PROP"><span class="id" title="variable">PROP</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.ARG"><span class="id" title="variable">ARG</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.RESULT"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.PROP"><span class="id" title="variable">PROP</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="spec_internal_frame" class="idref" href="#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a> : <span class="id" title="notation">forall</span> <a id="args':19" class="idref" href="#args':19"><span class="id" title="binder">args'</span></a> <a id="P:20" class="idref" href="#P:20"><span class="id" title="binder">P</span></a> <a id="Q:21" class="idref" href="#Q:21"><span class="id" title="binder">Q</span></a> <a id="args:22" class="idref" href="#args:22"><span class="id" title="binder">args</span></a> <a id="K:23" class="idref" href="#K:23"><span class="id" title="binder">K</span></a> <a id="K':24" class="idref" href="#K':24"><span class="id" title="binder">K'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="r:25" class="idref" href="#r:25"><span class="id" title="binder">r</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:23"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#r:25"><span class="id" title="variable">r</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':24"><span class="id" title="variable">K'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#r:25"><span class="id" title="variable">r</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':19"><span class="id" title="variable">args'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:20"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:21"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:22"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:23"><span class="id" title="variable">K</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':19"><span class="id" title="variable">args'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:20"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:21"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:22"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':24"><span class="id" title="variable">K'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;following&nbsp;three&nbsp;fields&nbsp;formally&nbsp;capture&nbsp;the&nbsp;meaning&nbsp;of&nbsp;the&nbsp;accumulators<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="arg_ok" class="idref" href="#arg_ok"><span class="id" title="projection">arg_ok</span></a> : <span class="id" title="notation">forall</span> <a id="acc_args:27" class="idref" href="#acc_args:27"><span class="id" title="binder">acc_args</span></a> <a id="acc_pre:28" class="idref" href="#acc_pre:28"><span class="id" title="binder">acc_pre</span></a> <a id="acc_post:29" class="idref" href="#acc_post:29"><span class="id" title="binder">acc_post</span></a> <a id="A:30" class="idref" href="#A:30"><span class="id" title="binder">A</span></a> <a id="args:31" class="idref" href="#args:31"><span class="id" title="binder">args</span></a> <a id="K:32" class="idref" href="#K:32"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:27"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:30"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:28"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:29"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:31"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:32"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="aa:33" class="idref" href="#aa:33"><span class="id" title="binder">aa</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:31"><span class="id" title="variable">args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:30"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aa:33"><span class="id" title="variable">aa</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:27"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:28"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:29"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aa:33"><span class="id" title="variable">aa</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:32"><span class="id" title="variable">K</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="pre_ok" class="idref" href="#pre_ok"><span class="id" title="projection">pre_ok</span></a> : <span class="id" title="notation">forall</span> <a id="acc_args:35" class="idref" href="#acc_args:35"><span class="id" title="binder">acc_args</span></a> <a id="acc_pre:36" class="idref" href="#acc_pre:36"><span class="id" title="binder">acc_pre</span></a> <a id="acc_post:37" class="idref" href="#acc_post:37"><span class="id" title="binder">acc_post</span></a> <a id="P:38" class="idref" href="#P:38"><span class="id" title="binder">P</span></a> <a id="args:39" class="idref" href="#args:39"><span class="id" title="binder">args</span></a> <a id="K:40" class="idref" href="#K:40"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:35"><span class="id" title="variable">acc_args</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:38"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:36"><span class="id" title="variable">acc_pre</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:37"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:39"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:40"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:38"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:35"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:36"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:37"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:39"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:40"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="post_ok" class="idref" href="#post_ok"><span class="id" title="projection">post_ok</span></a> : <span class="id" title="notation">forall</span> <a id="acc_args:42" class="idref" href="#acc_args:42"><span class="id" title="binder">acc_args</span></a> <a id="acc_pre:43" class="idref" href="#acc_pre:43"><span class="id" title="binder">acc_pre</span></a> <a id="acc_post:44" class="idref" href="#acc_post:44"><span class="id" title="binder">acc_post</span></a> <a id="P:45" class="idref" href="#P:45"><span class="id" title="binder">P</span></a> <a id="args:46" class="idref" href="#args:46"><span class="id" title="binder">args</span></a> <a id="K:47" class="idref" href="#K:47"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:42"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:43"><span class="id" title="variable">acc_pre</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:44"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:45"><span class="id" title="variable">P</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:46"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:47"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal:18"><span class="id" title="method">spec_internal</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:42"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:43"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:44"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:46"><span class="id" title="variable">args</span></a> (<span class="id" title="keyword">fun</span> <a id="x:48" class="idref" href="#x:48"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:45"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:48"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:47"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:48"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_internal_proper" class="idref" href="#spec_internal_proper"><span class="id" title="lemma">spec_internal_proper</span></a> <a id="wp:50" class="idref" href="#wp:50"><span class="id" title="binder">wp</span></a> (<a id="K:51" class="idref" href="#K:51"><span class="id" title="binder">K</span></a> <a id="K':52" class="idref" href="#K':52"><span class="id" title="binder">K'</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.PROP"><span class="id" title="variable">PROP</span></a>) (<a id="a:53" class="idref" href="#a:53"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">_</span>) <a id="x:54" class="idref" href="#x:54"><span class="id" title="binder">x</span></a> <a id="y:55" class="idref" href="#y:55"><span class="id" title="binder">y</span></a> <a id="z:56" class="idref" href="#z:56"><span class="id" title="binder">z</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:57" class="idref" href="#x:57"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:51"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:57"><span class="id" title="variable">x</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':52"><span class="id" title="variable">K'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:57"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:50"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:54"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#y:55"><span class="id" title="variable">y</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#z:56"><span class="id" title="variable">z</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#a:53"><span class="id" title="variable">a</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:51"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:50"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:54"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#y:55"><span class="id" title="variable">y</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#z:56"><span class="id" title="variable">z</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#a:53"><span class="id" title="variable">a</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':52"><span class="id" title="variable">K'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "X"; <span class="id" title="var">iRevert</span> "X"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "X"; <span class="id" title="var">iRevert</span> "X"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="args_ok" class="idref" href="#args_ok"><span class="id" title="lemma">args_ok</span></a> : <span class="id" title="notation">forall</span> <a id="wp:58" class="idref" href="#wp:58"><span class="id" title="binder">wp</span></a> <a id="A:59" class="idref" href="#A:59"><span class="id" title="binder">A</span></a> <a id="acc_args:60" class="idref" href="#acc_args:60"><span class="id" title="binder">acc_args</span></a> <a id="acc_pre:61" class="idref" href="#acc_pre:61"><span class="id" title="binder">acc_pre</span></a> <a id="acc_post:62" class="idref" href="#acc_post:62"><span class="id" title="binder">acc_post</span></a> <a id="args:63" class="idref" href="#args:63"><span class="id" title="binder">args</span></a> <a id="K:64" class="idref" href="#K:64"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:58"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:60"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:59"><span class="id" title="variable">A</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:61"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:62"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:63"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:64"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="aa:65" class="idref" href="#aa:65"><span class="id" title="binder">aa</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:63"><span class="id" title="variable">args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:59"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aa:65"><span class="id" title="variable">aa</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:58"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:60"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:61"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:62"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aa:65"><span class="id" title="variable">aa</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:64"><span class="id" title="variable">K</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">A</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ex_eq"><span class="id" title="lemma">ex_eq</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">have</span> -&gt;:(<span class="id" title="var">acc_args</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">acc_args</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">A</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="definition">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHA</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (<span class="id" title="var">aa</span>) "[-&gt; A]"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (<span class="id" title="var">aa0</span>) "[-&gt; A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="definition">assoc</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (<span class="id" title="var">aa</span>) "[-&gt; A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="definition">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iPureIntro</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pres_ok" class="idref" href="#pres_ok"><span class="id" title="lemma">pres_ok</span></a> : <span class="id" title="notation">forall</span> <a id="wp:66" class="idref" href="#wp:66"><span class="id" title="binder">wp</span></a> <a id="acc_args:67" class="idref" href="#acc_args:67"><span class="id" title="binder">acc_args</span></a> <a id="acc_pre:68" class="idref" href="#acc_pre:68"><span class="id" title="binder">acc_pre</span></a> <a id="acc_post:69" class="idref" href="#acc_post:69"><span class="id" title="binder">acc_post</span></a> <a id="P:70" class="idref" href="#P:70"><span class="id" title="binder">P</span></a> <a id="args:71" class="idref" href="#args:71"><span class="id" title="binder">args</span></a> <a id="K:72" class="idref" href="#K:72"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:66"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:67"><span class="id" title="variable">acc_args</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:70"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:68"><span class="id" title="variable">acc_pre</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:69"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:71"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:72"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <span class="id" title="notation">(</span><span class="id" title="notation">[∗]</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:70"><span class="id" title="variable">P</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:66"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:67"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:68"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:69"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:71"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:72"><span class="id" title="variable">K</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">left_id</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a> -<span class="id" title="definition">assoc</span> <span class="id" title="var">IHP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="posts_ok" class="idref" href="#posts_ok"><span class="id" title="lemma">posts_ok</span></a> : <span class="id" title="notation">forall</span> <a id="wp:73" class="idref" href="#wp:73"><span class="id" title="binder">wp</span></a> <a id="P:74" class="idref" href="#P:74"><span class="id" title="binder">P</span></a> <a id="acc_args:75" class="idref" href="#acc_args:75"><span class="id" title="binder">acc_args</span></a> <a id="acc_pre:76" class="idref" href="#acc_pre:76"><span class="id" title="binder">acc_pre</span></a> <a id="acc_post:77" class="idref" href="#acc_post:77"><span class="id" title="binder">acc_post</span></a> <a id="args:78" class="idref" href="#args:78"><span class="id" title="binder">args</span></a> <a id="K:79" class="idref" href="#K:79"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:73"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:75"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:76"><span class="id" title="variable">acc_pre</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:77"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:74"><span class="id" title="variable">P</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:78"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:79"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:73"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_args:75"><span class="id" title="variable">acc_args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:76"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:77"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:78"><span class="id" title="variable">args</span></a> (<span class="id" title="keyword">fun</span> <a id="x:80" class="idref" href="#x:80"><span class="id" title="binder">x</span></a> =&gt; <span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="p:81" class="idref" href="#p:81"><span class="id" title="binder"><span id="p:82" class="id">p</span></span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:74"><span class="id" title="variable">P</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:81"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:80"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:79"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:80"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_proper"><span class="id" title="lemma">spec_internal_proper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="instance">bi.emp_wand</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">have</span> -&gt;: (<span class="id" title="var">acc_post</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">P</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">acc_post</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="definition">assoc</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_proper"><span class="id" title="lemma">spec_internal_proper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bi.wand_curry</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spec_internal_denote" class="idref" href="#spec_internal_denote"><span class="id" title="lemma">spec_internal_denote</span></a> <a id="wp:83" class="idref" href="#wp:83"><span class="id" title="binder">wp</span></a> <a id="acc_arg:84" class="idref" href="#acc_arg:84"><span class="id" title="binder">acc_arg</span></a> <a id="acc_pre:85" class="idref" href="#acc_pre:85"><span class="id" title="binder">acc_pre</span></a> <a id="acc_post:86" class="idref" href="#acc_post:86"><span class="id" title="binder">acc_post</span></a> <a id="args:87" class="idref" href="#args:87"><span class="id" title="binder">args</span></a> <a id="K:88" class="idref" href="#K:88"><span class="id" title="binder">K</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:83"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_arg:84"><span class="id" title="variable">acc_arg</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:85"><span class="id" title="variable">acc_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:86"><span class="id" title="variable">acc_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:87"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:88"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="P:89" class="idref" href="#P:89"><span class="id" title="binder"><span id="P:90" class="id">P</span></span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_pre:85"><span class="id" title="variable">acc_pre</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:89"><span class="id" title="variable">P</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="aa:91" class="idref" href="#aa:91"><span class="id" title="binder">aa</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:87"><span class="id" title="variable">args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_arg:84"><span class="id" title="variable">acc_arg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aa:91"><span class="id" title="variable">aa</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:83"><span class="id" title="variable">wp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aa:91"><span class="id" title="variable">aa</span></a> (<span class="id" title="keyword">fun</span> <a id="x:92" class="idref" href="#x:92"><span class="id" title="binder">x</span></a> =&gt; <span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="P:93" class="idref" href="#P:93"><span class="id" title="binder"><span id="P:94" class="id">P</span></span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#acc_post:86"><span class="id" title="variable">acc_post</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:93"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:92"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:88"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:92"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> {1}-&gt;: (<span class="id" title="var">acc_pre</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">acc_pre</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pres_ok"><span class="id" title="lemma">pres_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> {1}-&gt;: (<span class="id" title="var">acc_post</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">acc_post</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#posts_ok"><span class="id" title="lemma">posts_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> {1}-&gt;: (<span class="id" title="var">acc_arg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">acc_arg</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args_ok"><span class="id" title="lemma">args_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The meaning of a <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a></span> as a weakest pre-condition. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_specD" class="idref" href="#wp_specD"><span class="id" title="definition">wp_specD</span></a> (<a id="wpp:95" class="idref" href="#wpp:95"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.ARG"><span class="id" title="variable">ARG</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.RESULT"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:95"><span class="id" title="variable">wpp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="wp_specD_frame" class="idref" href="#wp_specD_frame"><span class="id" title="lemma">wp_specD_frame</span></a> (<a id="wpp:96" class="idref" href="#wpp:96"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a>) : <span class="id" title="notation">forall</span> <a id="args:97" class="idref" href="#args:97"><span class="id" title="binder">args</span></a> <a id="Q:98" class="idref" href="#Q:98"><span class="id" title="binder">Q</span></a> <a id="Q':99" class="idref" href="#Q':99"><span class="id" title="binder">Q'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="r:100" class="idref" href="#r:100"><span class="id" title="binder">r</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:98"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#r:100"><span class="id" title="variable">r</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q':99"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#r:100"><span class="id" title="variable">r</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:96"><span class="id" title="variable">wpp</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:97"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:98"><span class="id" title="variable">Q</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:96"><span class="id" title="variable">wpp</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:97"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q':99"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_prop"><span class="id" title="section">with_prop</span></a>.<br/>
#[<span class="id" title="var">global</span>,<span class="id" title="var">deprecated</span>(<span class="id" title="var">since</span>="2022-02-28",<span class="id" title="var">note</span>="use [wp_specD_frame]")]<br/>
<span class="id" title="keyword">Notation</span> <a id="wpp_frame" class="idref" href="#wpp_frame"><span class="id" title="abbreviation">wpp_frame</span></a> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD_frame"><span class="id" title="lemma">wp_specD_frame</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">:</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">Funclass</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Export</span> <a id="wpspec_ofe" class="idref" href="#wpspec_ofe"><span class="id" title="module">wpspec_ofe</span></a>.<br/>
<span class="id" title="keyword">Section</span> <a id="wpspec_ofe.wpspec_ofe" class="idref" href="#wpspec_ofe.wpspec_ofe"><span class="id" title="section">wpspec_ofe</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="PROP:101" class="idref" href="#PROP:101"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARGS:102" class="idref" href="#ARGS:102"><span class="id" title="binder">ARGS</span></a> <a id="RESULT:103" class="idref" href="#RESULT:103"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="wpspec_ofe.WPP" class="idref" href="#wpspec_ofe.WPP"><span class="id" title="abbreviation">WPP</span></a> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe.ARGS"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe.RESULT"><span class="id" title="variable">RESULT</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="wpspec_ofe.wpspec_equiv" class="idref" href="#wpspec_ofe.wpspec_equiv"><span class="id" title="instance">wpspec_equiv</span></a> : <span class="id" title="class">Equiv</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.WPP"><span class="id" title="abbreviation">WPP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="wpp1:104" class="idref" href="#wpp1:104"><span class="id" title="binder">wpp1</span></a> <a id="wpp2:105" class="idref" href="#wpp2:105"><span class="id" title="binder">wpp2</span></a> =&gt; <span class="id" title="notation">forall</span> <a id="x:106" class="idref" href="#x:106"><span class="id" title="binder">x</span></a> <a id="Q:107" class="idref" href="#Q:107"><span class="id" title="binder">Q</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:104"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:106"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:107"><span class="id" title="variable">Q</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:105"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:106"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:107"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="wpspec_ofe.wpspec_dist" class="idref" href="#wpspec_ofe.wpspec_dist"><span class="id" title="instance">wpspec_dist</span></a> : <span class="id" title="class">Dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.WPP"><span class="id" title="abbreviation">WPP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="n:108" class="idref" href="#n:108"><span class="id" title="binder">n</span></a> <a id="wpp1:109" class="idref" href="#wpp1:109"><span class="id" title="binder">wpp1</span></a> <a id="wpp2:110" class="idref" href="#wpp2:110"><span class="id" title="binder">wpp2</span></a> =&gt; <span class="id" title="notation">forall</span> <a id="x:111" class="idref" href="#x:111"><span class="id" title="binder">x</span></a> <a id="Q:112" class="idref" href="#Q:112"><span class="id" title="binder">Q</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:109"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:111"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:112"><span class="id" title="variable">Q</span></a> <span class="id" title="notation">≡{</span><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:108"><span class="id" title="variable">n</span></a><span class="id" title="notation">}≡</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:110"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:111"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:112"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wpspec_ofe.wpspec_ofe_mixin" class="idref" href="#wpspec_ofe.wpspec_ofe_mixin"><span class="id" title="lemma">wpspec_ofe_mixin</span></a> : <span class="id" title="record">OfeMixin</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.WPP"><span class="id" title="abbreviation">WPP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">iso_ofe_mixin</span> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe.ARGS"><span class="id" title="variable">ARGS</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">d</span><span class="id" title="notation">&gt;</span> <span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe.RESULT"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe.PROP"><span class="id" title="variable">PROP</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-</span><span class="id" title="notation">d</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe.PROP"><span class="id" title="variable">PROP</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a>). <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="wpspec_ofe.WpSpecO" class="idref" href="#wpspec_ofe.WpSpecO"><span class="id" title="definition">WpSpecO</span></a> := <span class="id" title="constructor">Ofe</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.WPP"><span class="id" title="abbreviation">WPP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe_mixin"><span class="id" title="lemma">wpspec_ofe_mixin</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe.wpspec_ofe"><span class="id" title="section">wpspec_ofe</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_ofe"><span class="id" title="module">wpspec_ofe</span></a>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpecO"><span class="id" title="definition">WpSpecO</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
Relations between WPPs. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="wpspec_relation" class="idref" href="#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> {<a id="PROP:113" class="idref" href="#PROP:113"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} (<a id="R:114" class="idref" href="#R:114"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:113"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="ARGS:115" class="idref" href="#ARGS:115"><span class="id" title="binder">ARGS</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:116" class="idref" href="#RESULT:116"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wpp2:117" class="idref" href="#wpp2:117"><span class="id" title="binder">wpp2</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:113"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:115"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:116"><span class="id" title="variable">RESULT</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wpp1:118" class="idref" href="#wpp1:118"><span class="id" title="binder">wpp1</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:113"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:115"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:116"><span class="id" title="variable">RESULT</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;</div>

<div class="doc">
We use a single <span class="inlinecode"><span class="id" title="var">K</span></span> rather than pointwise equal <span class="inlinecode"><span class="id" title="var">K1</span></span>, <span class="inlinecode"><span class="id" title="var">K2</span></span> for
      compatibility with <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.cptr.html#fs_entails"><span class="id" title="definition">fs_entails</span></a></span>, <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.cptr.html#fs_impl"><span class="id" title="definition">fs_impl</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="xs:119" class="idref" href="#xs:119"><span class="id" title="binder">xs</span></a> <a id="K:120" class="idref" href="#K:120"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:114"><span class="id" title="variable">R</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:118"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#xs:119"><span class="id" title="variable">xs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:120"><span class="id" title="variable">K</span></a>) (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:117"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#xs:119"><span class="id" title="variable">xs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:120"><span class="id" title="variable">K</span></a>).<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a>) 4 := {}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="wpspec_entailsN" class="idref" href="#wpspec_entailsN"><span class="id" title="abbreviation">wpspec_entailsN</span></a> <span class="id" title="var">n</span> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> (<a class="idref" href="bedrock.lang.bi.entailsN.html#entailsN"><span class="id" title="definition">entailsN</span></a> <span class="id" title="var">n</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="wpspec_entails" class="idref" href="#wpspec_entails"><span class="id" title="abbreviation">wpspec_entails</span></a> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <span class="id" title="projection">bi_entails</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="wpspec_dist" class="idref" href="#wpspec_dist"><span class="id" title="abbreviation">wpspec_dist</span></a> <span class="id" title="var">n</span> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<span class="id" title="definition">dist</span> <span class="id" title="var">n</span>))) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="wpspec_equiv" class="idref" href="#wpspec_equiv"><span class="id" title="abbreviation">wpspec_equiv</span></a> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="definition">equiv</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="wpspec_relation_fupd" class="idref" href="#wpspec_relation_fupd"><span class="id" title="definition">wpspec_relation_fupd</span></a> {<a id="PROP:121" class="idref" href="#PROP:121"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} `{<a id="H:122" class="idref" href="#H:122"><span class="id" title="binder">BiFUpd</span></a> <a id="H:122" class="idref" href="#H:122"><span class="id" title="binder">PROP</span></a>} (<a id="R:123" class="idref" href="#R:123"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:121"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="ARGS:124" class="idref" href="#ARGS:124"><span class="id" title="binder">ARGS</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:125" class="idref" href="#RESULT:125"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wpp2:126" class="idref" href="#wpp2:126"><span class="id" title="binder">wpp2</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:121"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:124"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:125"><span class="id" title="variable">RESULT</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wpp1:127" class="idref" href="#wpp1:127"><span class="id" title="binder">wpp1</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:121"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:124"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:125"><span class="id" title="variable">RESULT</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;</div>

<div class="doc">
We use a single <span class="inlinecode"><span class="id" title="var">K</span></span> rather than pointwise equal <span class="inlinecode"><span class="id" title="var">K1</span></span>, <span class="inlinecode"><span class="id" title="var">K2</span></span> for
      compatibility with <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.cptr.html#fs_entails_fupd"><span class="id" title="definition">fs_entails_fupd</span></a></span>, <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.cptr.html#fs_impl_fupd"><span class="id" title="definition">fs_impl_fupd</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="xs:128" class="idref" href="#xs:128"><span class="id" title="binder">xs</span></a> <a id="K:129" class="idref" href="#K:129"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:123"><span class="id" title="variable">R</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:127"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#xs:128"><span class="id" title="variable">xs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:129"><span class="id" title="variable">K</span></a>) (<span class="id" title="notation">|={</span><span class="id" title="definition">top</span><span class="id" title="notation">}=&gt;</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:126"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#xs:128"><span class="id" title="variable">xs</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:130" class="idref" href="#v:130"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><span class="id" title="definition">top</span><span class="id" title="notation">}=&gt;</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:129"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:130"><span class="id" title="variable">v</span></a>))%<span class="id" title="var">I</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation_fupd"><span class="id" title="definition">wpspec_relation_fupd</span></a>) 4 := {}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="wpspec_entails_fupd" class="idref" href="#wpspec_entails_fupd"><span class="id" title="abbreviation">wpspec_entails_fupd</span></a> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation_fupd"><span class="id" title="definition">wpspec_relation_fupd</span></a> <span class="id" title="projection">bi_entails</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="wpspec_relationI" class="idref" href="#wpspec_relationI"><span class="id" title="definition">wpspec_relationI</span></a> {<a id="PROP:131" class="idref" href="#PROP:131"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R:132" class="idref" href="#R:132"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="ARGS:133" class="idref" href="#ARGS:133"><span class="id" title="binder">ARGS</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:134" class="idref" href="#RESULT:134"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R':135" class="idref" href="#R':135"><span class="id" title="binder">R'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:134"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:134"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wpp2:136" class="idref" href="#wpp2:136"><span class="id" title="binder">wpp2</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:133"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:134"><span class="id" title="variable">RESULT</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wpp1:137" class="idref" href="#wpp1:137"><span class="id" title="binder">wpp1</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:133"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:134"><span class="id" title="variable">RESULT</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:131"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">∀</span> <a id="xs:138" class="idref" href="#xs:138"><span class="id" title="binder">xs</span></a> <a id="K:139" class="idref" href="#K:139"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:132"><span class="id" title="variable">R</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:137"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#xs:138"><span class="id" title="variable">xs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:139"><span class="id" title="variable">K</span></a>) (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:136"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#xs:138"><span class="id" title="variable">xs</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R':135"><span class="id" title="variable">R'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:139"><span class="id" title="variable">K</span></a>)).<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relationI"><span class="id" title="definition">wpspec_relationI</span></a>) 5 := {}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="wpspec_wand" class="idref" href="#wpspec_wand"><span class="id" title="abbreviation">wpspec_wand</span></a> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relationI"><span class="id" title="definition">wpspec_relationI</span></a> <span class="id" title="projection">bi_wand</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="wpspec_wand_fupd" class="idref" href="#wpspec_wand_fupd"><span class="id" title="abbreviation">wpspec_wand_fupd</span></a> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relationI"><span class="id" title="definition">wpspec_relationI</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="P1:142" class="idref" href="#P1:142"><span class="id" title="binder">P1</span></a> <a id="P2:143" class="idref" href="#P2:143"><span class="id" title="binder">P2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P1:142"><span class="id" title="variable">P1</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">|={</span><span class="id" title="notation">⊤</span><span class="id" title="notation">}=&gt;</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P2:143"><span class="id" title="variable">P2</span></a>)%<span class="id" title="var">I</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="K:140" class="idref" href="#K:140"><span class="id" title="binder">K</span></a> <a id="v:141" class="idref" href="#v:141"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><span class="id" title="notation">⊤</span><span class="id" title="notation">}=&gt;</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:140"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:141"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">I</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="wpspec_relations" class="idref" href="#wpspec_relations"><span class="id" title="section">wpspec_relations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="BiEntailsN0:145" class="idref" href="#BiEntailsN0:145"><span class="id" title="binder">!</span></a><a id="BiEntailsN0:145" class="idref" href="#BiEntailsN0:145"><span class="id" title="binder">BiEntailsN</span></a> <a id="PROP:144" class="idref" href="#PROP:144"><span class="id" title="binder"><span id="BiEntailsN0:145" class="id">PROP</span></span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wpspec_equiv_spec" class="idref" href="#wpspec_equiv_spec"><span class="id" title="lemma">wpspec_equiv_spec</span></a> {<a id="ARGS:146" class="idref" href="#ARGS:146"><span class="id" title="binder">ARGS</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:147" class="idref" href="#RESULT:147"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} <a id="wpp1:148" class="idref" href="#wpp1:148"><span class="id" title="binder">wpp1</span></a> <a id="wpp2:149" class="idref" href="#wpp2:149"><span class="id" title="binder">wpp2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations.PROP"><span class="id" title="variable">PROP</span></a> <span class="id" title="notation">(≡)</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:146"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:147"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:148"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:149"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations.PROP"><span class="id" title="variable">PROP</span></a> <span class="id" title="notation">(⊢)</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:146"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:147"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:148"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:149"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations.PROP"><span class="id" title="variable">PROP</span></a> <span class="id" title="notation">(⊢)</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:146"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:147"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:149"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:148"><span class="id" title="variable">wpp1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hwpp</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>=&gt;<span class="id" title="var">vs</span> <span class="id" title="var">K</span>; <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hwpp</span> <span class="id" title="var">vs</span> <span class="id" title="var">K</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [] <span class="id" title="var">vs</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wpspec_equiv_dist" class="idref" href="#wpspec_equiv_dist"><span class="id" title="lemma">wpspec_equiv_dist</span></a> {<a id="ARGS:150" class="idref" href="#ARGS:150"><span class="id" title="binder">ARGS</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:151" class="idref" href="#RESULT:151"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} <a id="wpp1:152" class="idref" href="#wpp1:152"><span class="id" title="binder">wpp1</span></a> <a id="wpp2:153" class="idref" href="#wpp2:153"><span class="id" title="binder">wpp2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations.PROP"><span class="id" title="variable">PROP</span></a> <span class="id" title="notation">(≡)</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:150"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:151"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:152"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:153"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:154" class="idref" href="#n:154"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations.PROP"><span class="id" title="variable">PROP</span></a> (<span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:154"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:150"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:151"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:152"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:153"><span class="id" title="variable">wpp2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hwpp</span> <span class="id" title="var">n</span> <span class="id" title="var">vs</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">equiv_dist</span>, <span class="id" title="var">Hwpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hwpp</span> <span class="id" title="var">vs</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">equiv_dist</span>=&gt;<span class="id" title="var">n</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwpp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="entailsN" class="idref" href="#entailsN"><span class="id" title="abbreviation">entailsN</span></a> := (@<a class="idref" href="bedrock.lang.bi.entailsN.html#entailsN"><span class="id" title="definition">entailsN</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations.PROP"><span class="id" title="variable">PROP</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wpspec_dist_entailsN" class="idref" href="#wpspec_dist_entailsN"><span class="id" title="lemma">wpspec_dist_entailsN</span></a> {<a id="ARGS:155" class="idref" href="#ARGS:155"><span class="id" title="binder">ARGS</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:156" class="idref" href="#RESULT:156"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} <a id="wpp1:157" class="idref" href="#wpp1:157"><span class="id" title="binder">wpp1</span></a> <a id="wpp2:158" class="idref" href="#wpp2:158"><span class="id" title="binder">wpp2</span></a> <a id="n:159" class="idref" href="#n:159"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:159"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:155"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:156"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:157"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:158"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#entailsN"><span class="id" title="abbreviation">entailsN</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:159"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:155"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:156"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:157"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:158"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#entailsN"><span class="id" title="abbreviation">entailsN</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:159"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:155"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:156"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:158"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:157"><span class="id" title="variable">wpp1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hwpp</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>=&gt;<span class="id" title="var">vs</span> <span class="id" title="var">K</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.bi.entailsN.html#dist_entailsN"><span class="id" title="lemma">dist_entailsN</span></a>; <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hwpp</span> <span class="id" title="var">vs</span> <span class="id" title="var">K</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [] <span class="id" title="var">vs</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.bi.entailsN.html#dist_entailsN"><span class="id" title="lemma">dist_entailsN</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wpspec_entails_entails_fupd" class="idref" href="#wpspec_entails_entails_fupd"><span class="id" title="lemma">wpspec_entails_entails_fupd</span></a> `{<a id="H:160" class="idref" href="#H:160"><span class="id" title="binder">BiFUpd</span></a> <a id="H:160" class="idref" href="#H:160"><span class="id" title="binder">PROP</span></a>} {<a id="ARGS:161" class="idref" href="#ARGS:161"><span class="id" title="binder">ARGS</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="RESULT:162" class="idref" href="#RESULT:162"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} (<a id="wpp1:163" class="idref" href="#wpp1:163"><span class="id" title="binder">wpp1</span></a> <a id="wpp2:164" class="idref" href="#wpp2:164"><span class="id" title="binder">wpp2</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARGS:161"><span class="id" title="variable">ARGS</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:162"><span class="id" title="variable">RESULT</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_entails"><span class="id" title="abbreviation">wpspec_entails</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:163"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:164"><span class="id" title="variable">wpp2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_entails_fupd"><span class="id" title="abbreviation">wpspec_entails_fupd</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp1:163"><span class="id" title="variable">wpp1</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp2:164"><span class="id" title="variable">wpp2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">EN</span> <span class="id" title="var">vs</span> <span class="id" title="var">K</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "WPP !&gt;". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a> <span class="id" title="notation">with</span> "[] WPP"<span class="id" title="notation">)</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relations"><span class="id" title="section">wpspec_relations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">iris.proofmode.tactics</span>.<br/>

<br/>
</div>

<div class="doc">
Combinators for building <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a></span>s 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="with_AR" class="idref" href="#with_AR"><span class="id" title="section">with_AR</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="PROP:165" class="idref" href="#PROP:165"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:166" class="idref" href="#A:166"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="R:167" class="idref" href="#R:167"><span class="id" title="binder">R</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="WPP" class="idref" href="#WPP"><span class="id" title="abbreviation">WPP</span></a> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR.A"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR.R"><span class="id" title="variable">R</span></a>).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.prelude.elpi.derive_test.html#Alias.T"><span class="id" title="inductive">T</span></a></span> <span class="inlinecode"><span class="id" title="var">wpp</span></span> adds <span class="inlinecode"><a class="idref" href="bedrock.prelude.elpi.derive_test.html#Alias.T"><span class="id" title="inductive">T</span></a></span> as logical variable to <span class="inlinecode"><span class="id" title="var">wpp</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="add_with" class="idref" href="#add_with"><span class="id" title="definition">add_with</span></a> {<a id="T:168" class="idref" href="#T:168"><span class="id" title="binder">T</span></a> : <span class="id" title="var">Type@</span>{<span class="id" title="var">universes.Quant</span>}} (<a id="wpp:169" class="idref" href="#wpp:169"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:168"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="args':170" class="idref" href="#args':170"><span class="id" title="binder">args'</span></a> <a id="P:171" class="idref" href="#P:171"><span class="id" title="binder">P</span></a> <a id="Q:172" class="idref" href="#Q:172"><span class="id" title="binder">Q</span></a> <a id="args:173" class="idref" href="#args:173"><span class="id" title="binder">args</span></a> <a id="K:174" class="idref" href="#K:174"><span class="id" title="binder">K</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a> <span class="id" title="notation">∃</span> <a id="x:175" class="idref" href="#x:175"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:168"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:169"><span class="id" title="variable">wpp</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:175"><span class="id" title="variable">x</span></a>).(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':170"><span class="id" title="variable">args'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:171"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:172"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:173"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:174"><span class="id" title="variable">K</span></a> |}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "A B"; <span class="id" title="var">iDestruct</span> "B" <span class="id" title="keyword">as</span> (<span class="id" title="var">b</span>) "B"; <span class="id" title="var">iExists</span> <span class="id" title="var">b</span>; <span class="id" title="var">iRevert</span> "B"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>; <span class="id" title="var">iAssumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">bi.sep_exist_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bi.exist_exist</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.exist_proper</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bi.sep_exist_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.exist_proper</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.exist_proper</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_ind'.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">wpp</span></span> adds <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_ind'.P"><span class="id" title="variable">P</span></a></span> as a pre-condition to <span class="inlinecode"><span class="id" title="var">wpp</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="add_pre" class="idref" href="#add_pre"><span class="id" title="definition">add_pre</span></a> (<a id="P:176" class="idref" href="#P:176"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR.PROP"><span class="id" title="variable">PROP</span></a>) (<a id="wpp:177" class="idref" href="#wpp:177"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="args':178" class="idref" href="#args':178"><span class="id" title="binder">args'</span></a> <a id="PRE:179" class="idref" href="#PRE:179"><span class="id" title="binder">PRE</span></a> <a id="Q:180" class="idref" href="#Q:180"><span class="id" title="binder">Q</span></a> <a id="args:181" class="idref" href="#args:181"><span class="id" title="binder">args</span></a> <a id="K:182" class="idref" href="#K:182"><span class="id" title="binder">K</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:177"><span class="id" title="variable">wpp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':178"><span class="id" title="variable">args'</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:176"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PRE:179"><span class="id" title="variable">PRE</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:180"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:181"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:182"><span class="id" title="variable">K</span></a> |}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">iIntros</span> "A B"; <span class="id" title="var">iRevert</span> "B"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>; <span class="id" title="var">iAssumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">assoc</span> (<span class="id" title="definition">comm</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span>) -<span class="id" title="definition">assoc</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_with"><span class="id" title="definition">add_post_with</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_ind'.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">wpp</span></span> adds <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_ind'.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">result</span></span> as a post-condition to <span class="inlinecode"><span class="id" title="var">wpp</span></span>

<div class="paragraph"> </div>

      TODO: while simple, this produces iterated magic wands rather than a single
      magic wand, which is much nicer to deal with.
   
</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="add_post_with" class="idref" href="#add_post_with"><span class="id" title="definition">add_post_with</span></a> (<a id="P:183" class="idref" href="#P:183"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR.R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR.PROP"><span class="id" title="variable">PROP</span></a>) (<a id="wpp:184" class="idref" href="#wpp:184"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="args':185" class="idref" href="#args':185"><span class="id" title="binder">args'</span></a> <a id="PRE:186" class="idref" href="#PRE:186"><span class="id" title="binder">PRE</span></a> <a id="Q:187" class="idref" href="#Q:187"><span class="id" title="binder">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:184"><span class="id" title="variable">wpp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':185"><span class="id" title="variable">args'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PRE:186"><span class="id" title="variable">PRE</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:183"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:187"><span class="id" title="variable">Q</span></a>) |}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "A"; <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_ind'.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">wpp</span></span> adds <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_ind'.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.iprop_own.html#PROP"><span class="id" title="abbreviation">PROP</span></a></span> as a post-condition to <span class="inlinecode"><span class="id" title="var">wpp</span></span>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="add_post" class="idref" href="#add_post"><span class="id" title="definition">add_post</span></a> := <span class="id" title="keyword">fun</span> <a id="p:188" class="idref" href="#p:188"><span class="id" title="binder">p</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_with"><span class="id" title="definition">add_post_with</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:188"><span class="id" title="variable">p</span></a>).<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="WpSpec_SpecGen" class="idref" href="#WpSpec_SpecGen"><span class="id" title="instance">WpSpec_SpecGen</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.classy.html#SpecGen"><span class="id" title="class">SpecGen</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_pre"><span class="id" title="method">classy.add_pre</span></a> := <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_post"><span class="id" title="method">classy.add_post</span></a> := <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_with"><span class="id" title="method">classy.add_with</span></a> := @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#with_AR"><span class="id" title="section">with_AR</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a>) 4 := {}.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a>) 3 := {}.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_with"><span class="id" title="definition">add_post_with</span></a>) 3 := {}.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a>) 3 := {}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="list_arg" class="idref" href="#list_arg"><span class="id" title="section">list_arg</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="PROP:189" class="idref" href="#PROP:189"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="A:190" class="idref" href="#A:190"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="WPP" class="idref" href="#WPP"><span class="id" title="abbreviation">WPP</span></a> <span class="id" title="var">R</span> := (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.A"><span class="id" title="variable">A</span></a> <span class="id" title="var">R</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="list_arg.list_local" class="idref" href="#list_arg.list_local"><span class="id" title="section">list_local</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="T:191" class="idref" href="#T:191"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Fixpoint</span> <a id="rev_append" class="idref" href="#rev_append"><span class="id" title="definition">rev_append</span></a> (<a id="ls:192" class="idref" href="#ls:192"><span class="id" title="binder">ls</span></a> <a id="ls':193" class="idref" href="#ls':193"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.list_local.T"><span class="id" title="variable">T</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.list_local.T"><span class="id" title="variable">T</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:192"><span class="id" title="variable">ls</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls':193"><span class="id" title="variable">ls'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append:194"><span class="id" title="definition">rev_append</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:192"><span class="id" title="variable">ls</span></a> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls':193"><span class="id" title="variable">ls'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.list_local"><span class="id" title="section">list_local</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a></span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode"><span class="id" title="var">wpp</span></span> adds an argument with value <span class="inlinecode"><span class="id" title="var">v</span></span> to
      the beginning of <span class="inlinecode"><span class="id" title="var">wpp</span></span>.
   
</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="add_arg" class="idref" href="#add_arg"><span class="id" title="definition">add_arg</span></a> {<a id="R:196" class="idref" href="#R:196"><span class="id" title="binder">R</span></a>} (<a id="v:197" class="idref" href="#v:197"><span class="id" title="binder">v</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.A"><span class="id" title="variable">A</span></a>) (<a id="wpp:198" class="idref" href="#wpp:198"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:196"><span class="id" title="variable">R</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:196"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="args':199" class="idref" href="#args':199"><span class="id" title="binder">args'</span></a> <a id="Q:200" class="idref" href="#Q:200"><span class="id" title="binder">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:198"><span class="id" title="variable">wpp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:197"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':199"><span class="id" title="variable">args'</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:200"><span class="id" title="variable">Q</span></a> |}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "A"; <span class="id" title="tactic">destruct</span> <span class="id" title="var">args'</span>; <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="add_arg_nil_contra" class="idref" href="#add_arg_nil_contra"><span class="id" title="lemma">add_arg_nil_contra</span></a> {<a id="R:201" class="idref" href="#R:201"><span class="id" title="binder">R</span></a>} (<a id="v:202" class="idref" href="#v:202"><span class="id" title="binder">v</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.A"><span class="id" title="variable">A</span></a>) (<a id="wpp:203" class="idref" href="#wpp:203"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:201"><span class="id" title="variable">R</span></a>) (<a id="PQ:204" class="idref" href="#PQ:204"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:201"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:202"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:203"><span class="id" title="variable">wpp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:204"><span class="id" title="variable">PQ</span></a> <span class="id" title="notation">⊢</span> <span class="id" title="notation">False</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "A"; <span class="id" title="tactic">unfold</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wpp</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">app_nil_l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">arg_ok0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (?) "[%CONTRA _]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="add_args" class="idref" href="#add_args"><span class="id" title="definition">add_args</span></a> {<a id="R:205" class="idref" href="#R:205"><span class="id" title="binder">R</span></a>} (<a id="vs:206" class="idref" href="#vs:206"><span class="id" title="binder">vs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.A"><span class="id" title="variable">A</span></a>) (<a id="wpp:207" class="idref" href="#wpp:207"><span class="id" title="binder">wpp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:205"><span class="id" title="variable">R</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:205"><span class="id" title="variable">R</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="args':208" class="idref" href="#args':208"><span class="id" title="binder">args'</span></a> <a id="Q:209" class="idref" href="#Q:209"><span class="id" title="binder">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpp:207"><span class="id" title="variable">wpp</span></a>.(<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a>) (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#vs:206"><span class="id" title="variable">vs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':208"><span class="id" title="variable">args'</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#Q:209"><span class="id" title="variable">Q</span></a> |}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "A"; <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> <span class="id" title="var">vs</span> (<span class="id" title="var">acc_args</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">A0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_append"><span class="id" title="definition">List.rev_append</span></a> <span class="id" title="var">vs</span> (<span class="id" title="var">acc_args</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">A0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_append_rev"><span class="id" title="lemma">rev_append_rev</span></a> <span class="id" title="definition">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_append_rev"><span class="id" title="lemma">rev_append_rev</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="WpSpec_WithArg" class="idref" href="#WpSpec_WithArg"><span class="id" title="instance">WpSpec_WithArg</span></a> {<a id="R:210" class="idref" href="#R:210"><span class="id" title="binder">R</span></a>} : <a class="idref" href="bedrock.lang.cpp.specs.classy.html#WithArg"><span class="id" title="class">WithArg</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WPP"><span class="id" title="abbreviation">WPP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:210"><span class="id" title="variable">R</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg.A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_arg"><span class="id" title="method">classy.add_arg</span></a> := @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_args"><span class="id" title="method">classy.add_args</span></a> := @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_args"><span class="id" title="definition">add_args</span></a> <span class="id" title="var">_</span> |}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_arg"><span class="id" title="section">list_arg</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="post_val" class="idref" href="#post_val"><span class="id" title="section">post_val</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="PROP:211" class="idref" href="#PROP:211"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:212" class="idref" href="#ARG:212"><span class="id" title="binder">ARG</span></a> : <span class="id" title="keyword">Type</span>} {<a id="RESULT:213" class="idref" href="#RESULT:213"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="list_sep_into" class="idref" href="#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> (<a id="ls:214" class="idref" href="#ls:214"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a>) (<a id="P:215" class="idref" href="#P:215"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:214"><span class="id" title="variable">ls</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:215"><span class="id" title="variable">P</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into:216"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:214"><span class="id" title="variable">ls</span></a> (<span class="id" title="var">l</span> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:215"><span class="id" title="variable">P</span></a>) <span class="comment">(*&nbsp;l&nbsp;∗&nbsp;list_sep_into&nbsp;ls&nbsp;P&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_sep_into_take" class="idref" href="#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a> : <span class="id" title="notation">forall</span> <a id="ls:218" class="idref" href="#ls:218"><span class="id" title="binder">ls</span></a> <a id="P:219" class="idref" href="#P:219"><span class="id" title="binder">P</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:218"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:219"><span class="id" title="variable">P</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:219"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:218"><span class="id" title="variable">ls</span></a> <span class="id" title="notation">emp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">split'</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iIntros</span> "[$ _]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHls</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHls</span>. <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">assoc</span> <span class="id" title="instance">bi.sep_emp</span> (<span class="id" title="definition">comm</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span>). <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Ltac</span> <span class="id" title="var">take_all</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">change</span> @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_append"><span class="id" title="definition">List.rev_append</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">X</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">X</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.bi.prelude.html#::stdpp_scope:'emp'"><span class="id" title="notation">emp</span></a> =&gt; <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a> <span class="id" title="var">_</span> <span class="id" title="var">X</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_sep_into_frame" class="idref" href="#list_sep_into_frame"><span class="id" title="lemma">list_sep_into_frame</span></a> : <span class="id" title="notation">forall</span> <a id="ls:220" class="idref" href="#ls:220"><span class="id" title="binder">ls</span></a> <a id="P:221" class="idref" href="#P:221"><span class="id" title="binder">P</span></a> <a id="P':222" class="idref" href="#P':222"><span class="id" title="binder">P'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:221"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P':222"><span class="id" title="variable">P'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:220"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:221"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:220"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P':222"><span class="id" title="variable">P'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">iIntros</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">take_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[X $]"; <span class="id" title="var">iApply</span> "A"; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_sep_into_app" class="idref" href="#list_sep_into_app"><span class="id" title="lemma">list_sep_into_app</span></a> : <span class="id" title="notation">forall</span> <a id="ls:223" class="idref" href="#ls:223"><span class="id" title="binder">ls</span></a> <a id="ls':224" class="idref" href="#ls':224"><span class="id" title="binder">ls'</span></a> <a id="P:225" class="idref" href="#P:225"><span class="id" title="binder">P</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:223"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls':224"><span class="id" title="variable">ls'</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:225"><span class="id" title="variable">P</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:223"><span class="id" title="variable">ls</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls':224"><span class="id" title="variable">ls'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:225"><span class="id" title="variable">P</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHls</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">take_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">assoc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_sep_into_rev" class="idref" href="#list_sep_into_rev"><span class="id" title="lemma">list_sep_into_rev</span></a> : <span class="id" title="notation">forall</span> <a id="ls:226" class="idref" href="#ls:226"><span class="id" title="binder">ls</span></a> <a id="P:227" class="idref" href="#P:227"><span class="id" title="binder">P</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:226"><span class="id" title="variable">ls</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:227"><span class="id" title="variable">P</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:226"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:227"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IHls</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_app"><span class="id" title="lemma">list_sep_into_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;opt&nbsp;to&nbsp;reify&nbsp;this&nbsp;to&nbsp;avoid&nbsp;adding&nbsp;extra&nbsp;equalities&nbsp;when&nbsp;we&nbsp;do&nbsp;not&nbsp;actually&nbsp;need&nbsp;them.&nbsp;arguments&nbsp;that&nbsp;are&nbsp;awkward&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="_post" class="idref" href="#_post"><span class="id" title="definition, inductive"><span id="_post_rect" class="id"><span id="_post_ind" class="id"><span id="_post_rec" class="id"><span id="_post_sind" class="id">_post</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="WITH" class="idref" href="#WITH"><span class="id" title="constructor">WITH</span></a> [<a id="t:230" class="idref" href="#t:230"><span class="id" title="binder">t</span></a> : <span class="id" title="var">Type@</span>{<span class="id" title="var">universes.Quant</span>}] (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#t:230"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_post:228"><span class="id" title="inductive">_post</span></a>)<br/>
&nbsp;&nbsp;| <a id="DONE" class="idref" href="#DONE"><span class="id" title="constructor">DONE</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.RESULT"><span class="id" title="variable">RESULT</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="_postD" class="idref" href="#_postD"><span class="id" title="definition">_postD</span></a> (<a id="p:231" class="idref" href="#p:231"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_post"><span class="id" title="inductive">_post</span></a>) (<a id="ls:232" class="idref" href="#ls:232"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.RESULT"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a>)) (<a id="K:233" class="idref" href="#K:233"><span class="id" title="binder">K</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.RESULT"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:231"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WITH"><span class="id" title="constructor">WITH</span></a> <span class="id" title="var">f</span> =&gt; <span class="id" title="notation">∀</span> <a id="x:236" class="idref" href="#x:236"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD:234"><span class="id" title="definition">_postD</span></a> (<span class="id" title="var">f</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:236"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:232"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:233"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#DONE"><span class="id" title="constructor">DONE</span></a> <span class="id" title="var">r</span> <span class="id" title="var">P</span> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> (<span class="id" title="notation">(</span><span class="id" title="keyword">fun</span> <a id="p:237" class="idref" href="#p:237"><span class="id" title="binder">p</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:237"><span class="id" title="variable">p</span></a> <span class="id" title="var">r</span><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:232"><span class="id" title="variable">ls</span></a>) <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:233"><span class="id" title="variable">K</span></a> <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">Coercion</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_postD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">:</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">Funclass</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="_postD_frame" class="idref" href="#_postD_frame"><span class="id" title="lemma">_postD_frame</span></a> <a id="p:238" class="idref" href="#p:238"><span class="id" title="binder">p</span></a> <a id="ls:239" class="idref" href="#ls:239"><span class="id" title="binder">ls</span></a> : <span class="id" title="notation">forall</span> <a id="K:240" class="idref" href="#K:240"><span class="id" title="binder">K</span></a> <a id="K':241" class="idref" href="#K':241"><span class="id" title="binder">K'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="r:242" class="idref" href="#r:242"><span class="id" title="binder">r</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:240"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#r:242"><span class="id" title="variable">r</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':241"><span class="id" title="variable">K'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#r:242"><span class="id" title="variable">r</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_postD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:238"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:239"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:240"><span class="id" title="variable">K</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_postD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:238"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:239"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':241"><span class="id" title="variable">K'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "A B" (?); <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="var">H</span> <span class="id" title="notation">with</span> "A"<span class="id" title="notation">)</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "A B C"; <span class="id" title="var">iApply</span> "A"; <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "B".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="_postD_proper" class="idref" href="#_postD_proper"><span class="id" title="lemma">_postD_proper</span></a> <a id="p:243" class="idref" href="#p:243"><span class="id" title="binder">p</span></a> <a id="ls:244" class="idref" href="#ls:244"><span class="id" title="binder">ls</span></a> : <span class="id" title="notation">forall</span> <a id="K:245" class="idref" href="#K:245"><span class="id" title="binder">K</span></a> <a id="K':246" class="idref" href="#K':246"><span class="id" title="binder">K'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:247" class="idref" href="#x:247"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:245"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:247"><span class="id" title="variable">x</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':246"><span class="id" title="variable">K'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:247"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_postD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:243"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:244"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:245"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_postD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#p:243"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ls:244"><span class="id" title="variable">ls</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K':246"><span class="id" title="variable">K'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.forall_proper</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.wand_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="start_post_list" class="idref" href="#start_post_list"><span class="id" title="definition">start_post_list</span></a> (<a id="P:248" class="idref" href="#P:248"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_post"><span class="id" title="inductive">_post</span></a>) : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.ARG"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.RESULT"><span class="id" title="variable">RESULT</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> <a id="args':249" class="idref" href="#args':249"><span class="id" title="binder">args'</span></a> <a id="PRE:250" class="idref" href="#PRE:250"><span class="id" title="binder">PRE</span></a> <a id="POST:251" class="idref" href="#POST:251"><span class="id" title="binder">POST</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="args:252" class="idref" href="#args:252"><span class="id" title="binder">args</span></a> <a id="K:253" class="idref" href="#K:253"><span class="id" title="binder">K</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:252"><span class="id" title="variable">args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':249"><span class="id" title="variable">args'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PRE:250"><span class="id" title="variable">PRE</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_postD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:248"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#POST:251"><span class="id" title="variable">POST</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:253"><span class="id" title="variable">K</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "A [$ B]"; <span class="id" title="var">iRevert</span> "B"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_frame"><span class="id" title="lemma">list_sep_into_frame</span></a>; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD_frame"><span class="id" title="lemma">_postD_frame</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="definition">assoc</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="definition">comm</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- (<span class="id" title="definition">assoc</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ex_eq'"><span class="id" title="lemma">ex_eq'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> -&gt;: (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> (<span class="id" title="var">acc_args</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">A</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> <span class="id" title="var">acc_args</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a>) <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_append"><span class="id" title="definition">List.rev_append</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_append_rev"><span class="id" title="lemma">rev_append_rev</span></a> !<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a> /=. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">assoc</span> (<span class="id" title="definition">comm</span> <span class="id" title="var">_</span> <span class="id" title="var">P0</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>) -<span class="id" title="definition">assoc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">assoc</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.forall_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bi.wand_curry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.wand_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fmap_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_app"><span class="id" title="lemma">list_sep_into_app</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="definition">comm</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">P0</span> <span class="id" title="var">r</span>)) <span class="id" title="definition">assoc</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">program</span>,<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="WpSpec_WithPost" class="idref" href="#WpSpec_WithPost"><span class="id" title="instance">WpSpec_WithPost</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.classy.html#WithPost"><span class="id" title="class">WithPost</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.ARG"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.RESULT"><span class="id" title="variable">RESULT</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val.RESULT"><span class="id" title="variable">RESULT</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.classy.html#start_post"><span class="id" title="method">classy.start_post</span></a> := <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#start_post_list"><span class="id" title="definition">start_post_list</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.cpp.specs.classy.html#post_with"><span class="id" title="method">post_with</span></a> := @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WITH"><span class="id" title="constructor">WITH</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.cpp.specs.classy.html#post_ret"><span class="id" title="method">post_ret</span></a> := @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#DONE"><span class="id" title="constructor">DONE</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_val"><span class="id" title="section">post_val</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="bind" class="idref" href="#bind"><span class="id" title="section">bind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="PROP:254" class="idref" href="#PROP:254"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:255" class="idref" href="#ARG:255"><span class="id" title="binder">ARG</span></a> <a id="ARG':256" class="idref" href="#ARG':256"><span class="id" title="binder">ARG'</span></a> <a id="RESULT:257" class="idref" href="#RESULT:257"><span class="id" title="binder">RESULT</span></a> <a id="RESULT':258" class="idref" href="#RESULT':258"><span class="id" title="binder">RESULT'</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.stmt.html#Stmt.wp"><span class="id" title="abbreviation">wp</span></a></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">K</span></span> effectively forwards to the specification of <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.stmt.html#Stmt.wp"><span class="id" title="abbreviation">wp</span></a></span>
      evaluated with the arguments <span class="inlinecode"><span class="id" title="var">a</span></span> and binds the result of the call passing
      it to <span class="inlinecode"><span class="id" title="var">cont</span></span>.

<div class="paragraph"> </div>

      This is used to "wrap" a function specification *and produce another type*.

<div class="paragraph"> </div>

      It is effectively the same as:

<div class="paragraph"> </div>

      <br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id" title="var">pre</span>{<span class="id" title="var">K</span>} <a class="idref" href="bedrock.lang.cpp.logic.stmt.html#Stmt.wp"><span class="id" title="abbreviation">wp</span></a> <span class="id" title="var">a</span> <span class="id" title="var">K</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id" title="var">post</span>{<span class="id" title="var">res'</span> ..}[...] <span class="id" title="var">K</span> <span class="id" title="var">res'</span> ** ...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

      where <span class="inlinecode"><span class="id" title="var">res'</span></span> is the return value of <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.stmt.html#Stmt.wp"><span class="id" title="abbreviation">wp</span></a></span>.

<div class="paragraph"> </div>

      NOTE: This is still experimental.
   
</div>
<div class="code">
&nbsp;&nbsp;#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="wp_spec_bind" class="idref" href="#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> (<a id="wp:259" class="idref" href="#wp:259"><span class="id" title="binder">wp</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.ARG"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.RESULT"><span class="id" title="variable">RESULT</span></a>) (<a id="a:260" class="idref" href="#a:260"><span class="id" title="binder">a</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.ARG"><span class="id" title="variable">ARG</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cont:261" class="idref" href="#cont:261"><span class="id" title="binder">cont</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.RESULT"><span class="id" title="variable">RESULT</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_post"><span class="id" title="inductive">_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.RESULT'"><span class="id" title="variable">RESULT'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.ARG'"><span class="id" title="variable">ARG'</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.RESULT'"><span class="id" title="variable">RESULT'</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="args:262" class="idref" href="#args:262"><span class="id" title="binder">args</span></a> <a id="PRE:263" class="idref" href="#PRE:263"><span class="id" title="binder">PRE</span></a> <a id="POST:264" class="idref" href="#POST:264"><span class="id" title="binder">POST</span></a> <a id="args':265" class="idref" href="#args':265"><span class="id" title="binder">args'</span></a> <a id="K:266" class="idref" href="#K:266"><span class="id" title="binder">K</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:262"><span class="id" title="variable">args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args':265"><span class="id" title="variable">args'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PRE:263"><span class="id" title="variable">PRE</span></a> ((<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp:259"><span class="id" title="variable">wp</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#a:260"><span class="id" title="variable">a</span></a>) (<span class="id" title="keyword">fun</span> <a id="r:267" class="idref" href="#r:267"><span class="id" title="binder">r</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD"><span class="id" title="definition">_postD</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#cont:261"><span class="id" title="variable">cont</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#r:267"><span class="id" title="variable">r</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#POST:264"><span class="id" title="variable">POST</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:266"><span class="id" title="variable">K</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "A [$ B]"; <span class="id" title="var">iRevert</span> "B"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_frame"><span class="id" title="lemma">list_sep_into_frame</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_frame"><span class="id" title="projection">spec_internal_frame</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD_frame"><span class="id" title="lemma">_postD_frame</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> @<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_append"><span class="id" title="definition">List.rev_append</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_alt"><span class="id" title="lemma">rev_alt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "[&lt;- A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (?) "(-&gt; &amp; &lt;- &amp; A)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "($ &amp; $ &amp; $ &amp; $)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "($ &amp; [$ $] &amp; $)".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_proper"><span class="id" title="lemma">spec_internal_proper</span></a>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">cont</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.forall_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">bi.wand_curry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.wand_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">fmap_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_app"><span class="id" title="lemma">list_sep_into_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "[[$ $] $]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "[[$ $] $]".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_spec_bind_add_post" class="idref" href="#wp_spec_bind_add_post"><span class="id" title="lemma">wp_spec_bind_add_post</span></a> (<a id="P:268" class="idref" href="#P:268"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.PROP"><span class="id" title="variable">PROP</span></a>) <a id="spec:269" class="idref" href="#spec:269"><span class="id" title="binder">spec</span></a> <a id="aargs:270" class="idref" href="#aargs:270"><span class="id" title="binder">aargs</span></a> <a id="aas:271" class="idref" href="#aas:271"><span class="id" title="binder">aas</span></a> <a id="aps:272" class="idref" href="#aps:272"><span class="id" title="binder">aps</span></a> <a id="aqs:273" class="idref" href="#aqs:273"><span class="id" title="binder">aqs</span></a> <a id="args:274" class="idref" href="#args:274"><span class="id" title="binder">args</span></a> <a id="K:275" class="idref" href="#K:275"><span class="id" title="binder">K</span></a> <a id="KONT:276" class="idref" href="#KONT:276"><span class="id" title="binder">KONT</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:268"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec:269"><span class="id" title="variable">spec</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aargs:270"><span class="id" title="variable">aargs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#KONT:276"><span class="id" title="variable">KONT</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aas:271"><span class="id" title="variable">aas</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aps:272"><span class="id" title="variable">aps</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aqs:273"><span class="id" title="variable">aqs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:274"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:275"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec:269"><span class="id" title="variable">spec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aargs:270"><span class="id" title="variable">aargs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#KONT:276"><span class="id" title="variable">KONT</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aas:271"><span class="id" title="variable">aas</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aps:272"><span class="id" title="variable">aps</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aqs:273"><span class="id" title="variable">aqs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:274"><span class="id" title="variable">args</span></a> (<a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="x:277" class="idref" href="#x:277"><span class="id" title="binder">x</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:268"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:275"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:277"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="instance">bi.sep_proper</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind.RESULT"><span class="id" title="variable">RESULT</span></a> =&gt; <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal_proper"><span class="id" title="lemma">spec_internal_proper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">KONT</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "A B" (<span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <span class="id" title="notation">(</span>"A" <span class="id" title="notation">$!</span> <span class="id" title="var">a</span><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRevert</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#_postD_frame"><span class="id" title="lemma">_postD_frame</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "A"; <span class="id" title="var">iApply</span> "A"; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "A" (<span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">iIntros</span> "B".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span>"A" <span class="id" title="notation">with</span> "B"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "A B C". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"A" <span class="id" title="notation">with</span> "C B"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">iIntros</span> "A B C". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"A" <span class="id" title="notation">with</span> "C B"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_spec_bind_add_pre" class="idref" href="#wp_spec_bind_add_pre"><span class="id" title="lemma">wp_spec_bind_add_pre</span></a> <a id="P:278" class="idref" href="#P:278"><span class="id" title="binder">P</span></a> <a id="spec:279" class="idref" href="#spec:279"><span class="id" title="binder">spec</span></a> <a id="aargs:280" class="idref" href="#aargs:280"><span class="id" title="binder">aargs</span></a> <a id="aas:281" class="idref" href="#aas:281"><span class="id" title="binder">aas</span></a> <a id="aps:282" class="idref" href="#aps:282"><span class="id" title="binder">aps</span></a> <a id="aqs:283" class="idref" href="#aqs:283"><span class="id" title="binder">aqs</span></a> <a id="args:284" class="idref" href="#args:284"><span class="id" title="binder">args</span></a> <a id="K:285" class="idref" href="#K:285"><span class="id" title="binder">K</span></a> <a id="KONT:286" class="idref" href="#KONT:286"><span class="id" title="binder">KONT</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:278"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec:279"><span class="id" title="variable">spec</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aargs:280"><span class="id" title="variable">aargs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#KONT:286"><span class="id" title="variable">KONT</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aas:281"><span class="id" title="variable">aas</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aps:282"><span class="id" title="variable">aps</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aqs:283"><span class="id" title="variable">aqs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:284"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:285"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:278"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec:279"><span class="id" title="variable">spec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aargs:280"><span class="id" title="variable">aargs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#KONT:286"><span class="id" title="variable">KONT</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aas:281"><span class="id" title="variable">aas</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aps:282"><span class="id" title="variable">aps</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aqs:283"><span class="id" title="variable">aqs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:284"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:285"><span class="id" title="variable">K</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "($ &amp; $ &amp; $ &amp; $)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> "($ &amp; [$ $] &amp; $)".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wp_spec_bind_add_with" class="idref" href="#wp_spec_bind_add_with"><span class="id" title="lemma">wp_spec_bind_add_with</span></a> (<a id="T:287" class="idref" href="#T:287"><span class="id" title="binder">T</span></a> : <span class="id" title="keyword">Type</span>) (<a id="spec:288" class="idref" href="#spec:288"><span class="id" title="binder">spec</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:287"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span>) <a id="aargs:289" class="idref" href="#aargs:289"><span class="id" title="binder">aargs</span></a> <a id="aas:290" class="idref" href="#aas:290"><span class="id" title="binder">aas</span></a> <a id="aps:291" class="idref" href="#aps:291"><span class="id" title="binder">aps</span></a> <a id="aqs:292" class="idref" href="#aqs:292"><span class="id" title="binder">aqs</span></a> <a id="args:293" class="idref" href="#args:293"><span class="id" title="binder">args</span></a> <a id="K:294" class="idref" href="#K:294"><span class="id" title="binder">K</span></a> <a id="KONT:295" class="idref" href="#KONT:295"><span class="id" title="binder">KONT</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec:288"><span class="id" title="variable">spec</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aargs:289"><span class="id" title="variable">aargs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#KONT:295"><span class="id" title="variable">KONT</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aas:290"><span class="id" title="variable">aas</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aps:291"><span class="id" title="variable">aps</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aqs:292"><span class="id" title="variable">aqs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:293"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:294"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">⊣⊢</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="x:296" class="idref" href="#x:296"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:287"><span class="id" title="variable">T</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec_internal"><span class="id" title="projection">spec_internal</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#spec:288"><span class="id" title="variable">spec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:296"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aargs:289"><span class="id" title="variable">aargs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#KONT:295"><span class="id" title="variable">KONT</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aas:290"><span class="id" title="variable">aas</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aps:291"><span class="id" title="variable">aps</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#aqs:292"><span class="id" title="variable">aqs</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:293"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:294"><span class="id" title="variable">K</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> "[$ [A B]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span>) "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">spec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">iIntros</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span>) "[$ A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into_take"><span class="id" title="lemma">list_sep_into_take</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> "[A $]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_spec_bind_ne" class="idref" href="#wp_spec_bind_ne"><span class="id" title="instance">wp_spec_bind_ne</span></a> <a id="n:297" class="idref" href="#n:297"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:297"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:297"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?? <span class="id" title="var">H</span> ??? ??? ??. <span class="id" title="tactic">subst</span>. <span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_spec_bind_proper" class="idref" href="#wp_spec_bind_proper"><span class="id" title="instance">wp_spec_bind_proper</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?? <span class="id" title="var">H</span> ??? ??? ??. <span class="id" title="tactic">subst</span>. <span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#bind"><span class="id" title="section">bind</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_spec_bind"><span class="id" title="definition">wp_spec_bind</span></a>) 5 := {}.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_with_ne" class="idref" href="#add_with_ne"><span class="id" title="instance">add_with_ne</span></a> <a id="PROP:298" class="idref" href="#PROP:298"><span class="id" title="binder">PROP</span></a> <a id="A:299" class="idref" href="#A:299"><span class="id" title="binder">A</span></a> <a id="R:300" class="idref" href="#R:300"><span class="id" title="binder">R</span></a> <a id="T:301" class="idref" href="#T:301"><span class="id" title="binder">T</span></a> <a id="n:302" class="idref" href="#n:302"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:302"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:302"><span class="id" title="variable">n</span></a>) (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:298"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:299"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:300"><span class="id" title="variable">R</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:301"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a>/<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a>/=; <span class="id" title="tactic">intros</span> ?? <span class="id" title="var">H</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_with_proper" class="idref" href="#add_with_proper"><span class="id" title="instance">add_with_proper</span></a> <a id="PROP:303" class="idref" href="#PROP:303"><span class="id" title="binder">PROP</span></a> <a id="A:304" class="idref" href="#A:304"><span class="id" title="binder">A</span></a> <a id="R:305" class="idref" href="#R:305"><span class="id" title="binder">R</span></a> <a id="T:306" class="idref" href="#T:306"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span>) (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:303"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:304"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:305"><span class="id" title="variable">R</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:306"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a>/<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a>/=; <span class="id" title="tactic">intros</span> ?? <span class="id" title="var">H</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_pre_ne" class="idref" href="#add_pre_ne"><span class="id" title="instance">add_pre_ne</span></a> <a id="PROP:307" class="idref" href="#PROP:307"><span class="id" title="binder">PROP</span></a> <a id="A:308" class="idref" href="#A:308"><span class="id" title="binder">A</span></a> <a id="R:309" class="idref" href="#R:309"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">NonExpansive2</span> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:307"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:308"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:309"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a>/<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a>/=; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> ? ?? <span class="id" title="var">H</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) !<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pres_ok"><span class="id" title="lemma">pres_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="var">solve_proper</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_pre_proper" class="idref" href="#add_pre_proper"><span class="id" title="instance">add_pre_proper</span></a> <a id="PROP:310" class="idref" href="#PROP:310"><span class="id" title="binder">PROP</span></a> <a id="A:311" class="idref" href="#A:311"><span class="id" title="binder">A</span></a> <a id="R:312" class="idref" href="#R:312"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span>) (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:310"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:311"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:312"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">exact</span> : <span class="id" title="lemma">ne_proper_2</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_post_with_ne" class="idref" href="#add_post_with_ne"><span class="id" title="instance">add_post_with_ne</span></a> <a id="PROP:313" class="idref" href="#PROP:313"><span class="id" title="binder">PROP</span></a> <a id="A:314" class="idref" href="#A:314"><span class="id" title="binder">A</span></a> <a id="R:315" class="idref" href="#R:315"><span class="id" title="binder">R</span></a> <a id="n:316" class="idref" href="#n:316"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:316"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:316"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_with"><span class="id" title="definition">add_post_with</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:313"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:314"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:315"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a>/<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a>/=; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> ? ?? <span class="id" title="var">H</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">app_nil_l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">app_nil_l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) !<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#posts_ok"><span class="id" title="lemma">posts_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_post_with_proper" class="idref" href="#add_post_with_proper"><span class="id" title="instance">add_post_with_proper</span></a> <a id="PROP:317" class="idref" href="#PROP:317"><span class="id" title="binder">PROP</span></a> <a id="A:318" class="idref" href="#A:318"><span class="id" title="binder">A</span></a> <a id="R:319" class="idref" href="#R:319"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_with"><span class="id" title="definition">add_post_with</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:317"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:318"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:319"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 6 <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a>/<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wpspec_relation"><span class="id" title="definition">wpspec_relation</span></a>/=; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> ? ?? <span class="id" title="var">H</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">app_nil_l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">app_nil_l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) !<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#posts_ok"><span class="id" title="lemma">posts_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_post_ne" class="idref" href="#add_post_ne"><span class="id" title="instance">add_post_ne</span></a> <a id="PROP:320" class="idref" href="#PROP:320"><span class="id" title="binder">PROP</span></a> <a id="A:321" class="idref" href="#A:321"><span class="id" title="binder">A</span></a> <a id="R:322" class="idref" href="#R:322"><span class="id" title="binder">R</span></a> <a id="n:323" class="idref" href="#n:323"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:323"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:323"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:320"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:321"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:322"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_with_ne"><span class="id" title="instance">add_post_with_ne</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_post_proper" class="idref" href="#add_post_proper"><span class="id" title="instance">add_post_proper</span></a> <a id="PROP:324" class="idref" href="#PROP:324"><span class="id" title="binder">PROP</span></a> <a id="A:325" class="idref" href="#A:325"><span class="id" title="binder">A</span></a> <a id="R:326" class="idref" href="#R:326"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:324"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:325"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:326"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_with_proper"><span class="id" title="instance">add_post_with_proper</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="list_sep_into_ne" class="idref" href="#list_sep_into_ne"><span class="id" title="instance">list_sep_into_ne</span></a> {<a id="PROP:327" class="idref" href="#PROP:327"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} <a id="n:328" class="idref" href="#n:328"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:328"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:328"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:328"><span class="id" title="variable">n</span></a>) (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:327"><span class="id" title="variable">PROP</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">as</span> [|?????? <span class="id" title="var">IH</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>. <span class="id" title="var">solve_proper</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_arg_ne" class="idref" href="#add_arg_ne"><span class="id" title="instance">add_arg_ne</span></a> {<a id="PROP:329" class="idref" href="#PROP:329"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="A:330" class="idref" href="#A:330"><span class="id" title="binder">A</span></a> <a id="R:331" class="idref" href="#R:331"><span class="id" title="binder">R</span></a>} (<a id="x:332" class="idref" href="#x:332"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:330"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">NonExpansive</span> (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:329"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:330"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:331"><span class="id" title="variable">R</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:332"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a>/=. <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> ?? <span class="id" title="var">H</span> ??.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">app_nil_l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) !<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="add_arg_proper" class="idref" href="#add_arg_proper"><span class="id" title="instance">add_arg_proper</span></a> {<a id="PROP:333" class="idref" href="#PROP:333"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="A:334" class="idref" href="#A:334"><span class="id" title="binder">A</span></a> <a id="R:335" class="idref" href="#R:335"><span class="id" title="binder">R</span></a>} (<a id="x:336" class="idref" href="#x:336"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:334"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span>) (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:333"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:334"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:335"><span class="id" title="variable">R</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:336"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">exact</span> : <span class="id" title="lemma">ne_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_specD_ne" class="idref" href="#wp_specD_ne"><span class="id" title="instance">wp_specD_ne</span></a> {<a id="PROP:337" class="idref" href="#PROP:337"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="A:338" class="idref" href="#A:338"><span class="id" title="binder">A</span></a> <a id="R:339" class="idref" href="#R:339"><span class="id" title="binder">R</span></a>} <a id="n:340" class="idref" href="#n:340"><span class="id" title="binder">n</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:340"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#n:340"><span class="id" title="variable">n</span></a>) (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:337"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:338"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:339"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> ?? <span class="id" title="var">H</span> ??? ???; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="wp_specD_proper" class="idref" href="#wp_specD_proper"><span class="id" title="instance">wp_specD_proper</span></a> {<a id="PROP:341" class="idref" href="#PROP:341"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="A:342" class="idref" href="#A:342"><span class="id" title="binder">A</span></a> <a id="R:343" class="idref" href="#R:343"><span class="id" title="binder">R</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="definition">equiv</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">equiv</span>) (@<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:341"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#A:342"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#R:343"><span class="id" title="variable">R</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">red</span>; <span class="id" title="tactic">intros</span> ?? <span class="id" title="var">H</span> ??? ???; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="add_with_equiv" class="idref" href="#add_with_equiv"><span class="id" title="lemma">add_with_equiv</span></a> {<a id="PROP:344" class="idref" href="#PROP:344"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:345" class="idref" href="#ARG:345"><span class="id" title="binder">ARG</span></a> <a id="RESULT:346" class="idref" href="#RESULT:346"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="T:347" class="idref" href="#T:347"><span class="id" title="binder">T</span></a> (<a id="PQ:348" class="idref" href="#PQ:348"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:347"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:344"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:345"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:346"><span class="id" title="variable">RESULT</span></a>) <a id="args:349" class="idref" href="#args:349"><span class="id" title="binder">args</span></a> <a id="K:350" class="idref" href="#K:350"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:348"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:349"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:350"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊣⊢</span> <span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="x:351" class="idref" href="#x:351"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:348"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:351"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:349"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:350"><span class="id" title="variable">K</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">split'</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (<span class="id" title="var">x</span>) "A"; <span class="id" title="var">iExists</span> <span class="id" title="var">x</span>; <span class="id" title="var">iApply</span> "A". <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="spec_add_with" class="idref" href="#spec_add_with"><span class="id" title="lemma">spec_add_with</span></a> {<a id="PROP:352" class="idref" href="#PROP:352"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:353" class="idref" href="#ARG:353"><span class="id" title="binder">ARG</span></a> <a id="RESULT:354" class="idref" href="#RESULT:354"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="T:355" class="idref" href="#T:355"><span class="id" title="binder">T</span></a> (<a id="PQ:356" class="idref" href="#PQ:356"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#T:355"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:352"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:353"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:354"><span class="id" title="variable">RESULT</span></a>) <a id="args:357" class="idref" href="#args:357"><span class="id" title="binder">args</span></a> <a id="K:358" class="idref" href="#K:358"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="x:359" class="idref" href="#x:359"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> (<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:356"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#x:359"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:357"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:358"><span class="id" title="variable">K</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with"><span class="id" title="definition">add_with</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:356"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:357"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:358"><span class="id" title="variable">K</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_with_equiv"><span class="id" title="lemma">add_with_equiv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="add_arg_equiv" class="idref" href="#add_arg_equiv"><span class="id" title="lemma">add_arg_equiv</span></a> {<a id="PROP:360" class="idref" href="#PROP:360"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:361" class="idref" href="#ARG:361"><span class="id" title="binder">ARG</span></a> <a id="RESULT:362" class="idref" href="#RESULT:362"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="v:363" class="idref" href="#v:363"><span class="id" title="binder">v</span></a> (<a id="PQ:364" class="idref" href="#PQ:364"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:360"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:361"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:362"><span class="id" title="variable">RESULT</span></a>) <a id="args:365" class="idref" href="#args:365"><span class="id" title="binder">args</span></a> <a id="K:366" class="idref" href="#K:366"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:363"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:364"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:365"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:366"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊣⊢</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:365"><span class="id" title="variable">args</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">vs</span> =&gt; <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:363"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v'</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:364"><span class="id" title="variable">PQ</span></a> <span class="id" title="var">vs</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:366"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>; [| <span class="id" title="var">cbn</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">split'</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> "[]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg_nil_contra"><span class="id" title="lemma">add_arg_nil_contra</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_nil_l"><span class="id" title="lemma">app_nil_l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#arg_ok"><span class="id" title="projection">arg_ok</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="var">iIntros</span> "A"; <span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> (<span class="id" title="var">args'</span>) "[%Hargs A]"; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hargs</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">iIntros</span> "[-&gt; A]"; <span class="id" title="var">iExists</span> <span class="id" title="var">args</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="spec_add_arg" class="idref" href="#spec_add_arg"><span class="id" title="lemma">spec_add_arg</span></a> {<a id="PROP:368" class="idref" href="#PROP:368"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:369" class="idref" href="#ARG:369"><span class="id" title="binder">ARG</span></a> <a id="RESULT:370" class="idref" href="#RESULT:370"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="v:371" class="idref" href="#v:371"><span class="id" title="binder">v</span></a> (<a id="PQ:372" class="idref" href="#PQ:372"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:368"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:369"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:370"><span class="id" title="variable">RESULT</span></a>) <a id="args:373" class="idref" href="#args:373"><span class="id" title="binder">args</span></a> <a id="K:374" class="idref" href="#K:374"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:373"><span class="id" title="variable">args</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">vs</span> =&gt; <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:371"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v'</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:372"><span class="id" title="variable">PQ</span></a> <span class="id" title="var">vs</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:374"><span class="id" title="variable">K</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg"><span class="id" title="definition">add_arg</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#v:371"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:372"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:373"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:374"><span class="id" title="variable">K</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_arg_equiv"><span class="id" title="lemma">add_arg_equiv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="add_pre_equiv" class="idref" href="#add_pre_equiv"><span class="id" title="lemma">add_pre_equiv</span></a> {<a id="PROP:376" class="idref" href="#PROP:376"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:377" class="idref" href="#ARG:377"><span class="id" title="binder">ARG</span></a> <a id="RESULT:378" class="idref" href="#RESULT:378"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="P:379" class="idref" href="#P:379"><span class="id" title="binder">P</span></a> (<a id="PQ:380" class="idref" href="#PQ:380"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:376"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:377"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:378"><span class="id" title="variable">RESULT</span></a>) <a id="args:381" class="idref" href="#args:381"><span class="id" title="binder">args</span></a> <a id="K:382" class="idref" href="#K:382"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:379"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:380"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:381"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:382"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:379"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:380"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:381"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:382"><span class="id" title="variable">K</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a>/=; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#pre_ok"><span class="id" title="projection">pre_ok</span></a>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="spec_add_pre" class="idref" href="#spec_add_pre"><span class="id" title="lemma">spec_add_pre</span></a> {<a id="PROP:383" class="idref" href="#PROP:383"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:384" class="idref" href="#ARG:384"><span class="id" title="binder">ARG</span></a> <a id="RESULT:385" class="idref" href="#RESULT:385"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="P:386" class="idref" href="#P:386"><span class="id" title="binder">P</span></a> (<a id="PQ:387" class="idref" href="#PQ:387"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:383"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:384"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:385"><span class="id" title="variable">RESULT</span></a>) <a id="args:388" class="idref" href="#args:388"><span class="id" title="binder">args</span></a> <a id="K:389" class="idref" href="#K:389"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:386"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:387"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:388"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:389"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre"><span class="id" title="definition">add_pre</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:386"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:387"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:388"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:389"><span class="id" title="variable">K</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre_equiv"><span class="id" title="lemma">add_pre_equiv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="add_post_equiv" class="idref" href="#add_post_equiv"><span class="id" title="lemma">add_post_equiv</span></a> {<a id="PROP:390" class="idref" href="#PROP:390"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:391" class="idref" href="#ARG:391"><span class="id" title="binder">ARG</span></a> <a id="RESULT:392" class="idref" href="#RESULT:392"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="P:393" class="idref" href="#P:393"><span class="id" title="binder">P</span></a> (<a id="PQ:394" class="idref" href="#PQ:394"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:390"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:391"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:392"><span class="id" title="variable">RESULT</span></a>) <a id="args:395" class="idref" href="#args:395"><span class="id" title="binder">args</span></a> <a id="K:396" class="idref" href="#K:396"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:393"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:394"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:395"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:396"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:394"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:395"><span class="id" title="variable">args</span></a> (<span class="id" title="keyword">fun</span> <a id="res:397" class="idref" href="#res:397"><span class="id" title="binder">res</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:393"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:396"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#res:397"><span class="id" title="variable">res</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#wp_specD"><span class="id" title="definition">wp_specD</span></a>/=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">RESULT</span> =&gt; <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#post_ok"><span class="id" title="projection">post_ok</span></a>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="spec_add_post" class="idref" href="#spec_add_post"><span class="id" title="lemma">spec_add_post</span></a> {<a id="PROP:398" class="idref" href="#PROP:398"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:399" class="idref" href="#ARG:399"><span class="id" title="binder">ARG</span></a> <a id="RESULT:400" class="idref" href="#RESULT:400"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="P:401" class="idref" href="#P:401"><span class="id" title="binder">P</span></a> (<a id="PQ:402" class="idref" href="#PQ:402"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:398"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:399"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:400"><span class="id" title="variable">RESULT</span></a>) <a id="args:403" class="idref" href="#args:403"><span class="id" title="binder">args</span></a> <a id="K:404" class="idref" href="#K:404"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:402"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:403"><span class="id" title="variable">args</span></a> (<span class="id" title="keyword">fun</span> <a id="res:405" class="idref" href="#res:405"><span class="id" title="binder">res</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:401"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:404"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#res:405"><span class="id" title="variable">res</span></a>) <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post"><span class="id" title="definition">add_post</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:401"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:402"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:403"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:404"><span class="id" title="variable">K</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_equiv"><span class="id" title="lemma">add_post_equiv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="add_prepost_equiv" class="idref" href="#add_prepost_equiv"><span class="id" title="lemma">add_prepost_equiv</span></a> {<a id="PROP:406" class="idref" href="#PROP:406"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:407" class="idref" href="#ARG:407"><span class="id" title="binder">ARG</span></a> <a id="RESULT:408" class="idref" href="#RESULT:408"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="P:409" class="idref" href="#P:409"><span class="id" title="binder">P</span></a> (<a id="PQ:410" class="idref" href="#PQ:410"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:406"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:407"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:408"><span class="id" title="variable">RESULT</span></a>) <a id="args:411" class="idref" href="#args:411"><span class="id" title="binder">args</span></a> <a id="K:412" class="idref" href="#K:412"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_prepost"><span class="id" title="method">add_prepost</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:409"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:410"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:411"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:412"><span class="id" title="variable">K</span></a> <span class="id" title="notation">⊣⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:409"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:410"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:411"><span class="id" title="variable">args</span></a> (<span class="id" title="keyword">fun</span> <a id="res:413" class="idref" href="#res:413"><span class="id" title="binder">res</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:409"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:412"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#res:413"><span class="id" title="variable">res</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_prepost"><span class="id" title="method">add_prepost</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_pre_equiv"><span class="id" title="lemma">add_pre_equiv</span></a> -<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_post_equiv"><span class="id" title="lemma">add_post_equiv</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="spec_add_prepost" class="idref" href="#spec_add_prepost"><span class="id" title="lemma">spec_add_prepost</span></a> {<a id="PROP:414" class="idref" href="#PROP:414"><span class="id" title="binder">PROP</span></a> : <span class="id" title="record">bi</span>} {<a id="ARG:415" class="idref" href="#ARG:415"><span class="id" title="binder">ARG</span></a> <a id="RESULT:416" class="idref" href="#RESULT:416"><span class="id" title="binder">RESULT</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="notation">forall</span> <a id="P:417" class="idref" href="#P:417"><span class="id" title="binder">P</span></a> (<a id="PQ:418" class="idref" href="#PQ:418"><span class="id" title="binder">PQ</span></a> : <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#WpSpec"><span class="id" title="record">WpSpec</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PROP:414"><span class="id" title="variable">PROP</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#ARG:415"><span class="id" title="variable">ARG</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#RESULT:416"><span class="id" title="variable">RESULT</span></a>) <a id="args:419" class="idref" href="#args:419"><span class="id" title="binder">args</span></a> <a id="K:420" class="idref" href="#K:420"><span class="id" title="binder">K</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:417"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:418"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:419"><span class="id" title="variable">args</span></a> (<span class="id" title="keyword">fun</span> <a id="res:421" class="idref" href="#res:421"><span class="id" title="binder">res</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:417"><span class="id" title="variable">P</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:420"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#res:421"><span class="id" title="variable">res</span></a>) <span class="id" title="notation">⊢</span> <a class="idref" href="bedrock.lang.cpp.specs.classy.html#add_prepost"><span class="id" title="method">add_prepost</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#P:417"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#PQ:418"><span class="id" title="variable">PQ</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#args:419"><span class="id" title="variable">args</span></a> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#K:420"><span class="id" title="variable">K</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#add_prepost_equiv"><span class="id" title="lemma">add_prepost_equiv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#list_sep_into"><span class="id" title="definition">list_sep_into</span></a> {<span class="id" title="var">PROP</span>} !<span class="id" title="var">_</span> <span class="id" title="var">_</span>/.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="bedrock.lang.cpp.specs.wp_spec_compat.html#rev_append"><span class="id" title="definition">rev_append</span></a> {<span class="id" title="var">T</span>} !<span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
