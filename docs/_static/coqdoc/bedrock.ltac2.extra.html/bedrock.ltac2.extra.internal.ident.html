<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>bedrock.ltac2.extra.internal.ident</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library bedrock.ltac2.extra.internal.ident</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.ltac2.extra.internal.plugin.html#"><span class="id" title="library">bedrock.ltac2.extra.internal.plugin</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.ltac2.extra.internal.init.html#"><span class="id" title="library">bedrock.ltac2.extra.internal.init</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.ltac2.extra.internal.constr.html#"><span class="id" title="library">bedrock.ltac2.extra.internal.constr</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.ltac2.extra.internal.std.html#"><span class="id" title="library">bedrock.ltac2.extra.internal.std</span></a>.<br/>

<br/>
</div>

<div class="doc">
Minor extensions to <span class="inlinecode"><span class="id" title="var">Ltac2.Ident</span></span> 
<div class="paragraph"> </div>

This is part of <span class="inlinecode"><span class="id" title="var">bedrock.prelude.tactics.ltac2</span></span>. <span class="inlinecode"><span class="id" title="keyword">Require</span></span> that,
instead.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="Ident" class="idref" href="#Ident"><span class="id" title="module">Ident</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="module">Ltac2</span> <a class="idref" href="bedrock.ltac2.extra.internal.constr.html#Constr"><span class="id" title="module">Constr</span></a> <a class="idref" href="bedrock.ltac2.extra.internal.constr.html#Constr.Unsafe"><span class="id" title="module">Constr.Unsafe</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Export</span> <span class="id" title="module">Ltac2.Ident</span>.<br/>

<br/>
</div>

<div class="doc">
  <code>Rep (fun id =&gt; tt)</code> represents identifier <code>id</code> in Gallina
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="Ident.rep" class="idref" href="#Ident.rep"><span class="id" title="inductive">rep</span></a> : <span class="id" title="keyword">Set</span> := <a id="Ident.Rep" class="idref" href="#Ident.Rep"><span class="id" title="constructor">Rep</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Register</span> <span class="id" title="var">rep</span> <span class="id" title="keyword">as</span> <span class="id" title="var">bedrock.ltac2.extra.Ident.rep.type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Register</span> <span class="id" title="var">Rep</span> <span class="id" title="keyword">as</span> <span class="id" title="var">bedrock.ltac2.extra.Ident.rep.Rep</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">invalid_arg</span> (<span class="id" title="var">whence</span> : <span class="id" title="var">string</span>) (<span class="id" title="var">t</span> : <span class="id" title="keyword">constr</span>) : '<span class="id" title="var">a</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">m</span> := <span class="id" title="var">Message.of_string</span> <span class="id" title="var">whence</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">m</span> := <span class="id" title="var">Message.concat</span> <span class="id" title="var">m</span> (<span class="id" title="var">Message.of_string</span> ": ") <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">m</span> := <span class="id" title="var">Message.concat</span> <span class="id" title="var">m</span> (<span class="id" title="var">Message.of_constr</span> <span class="id" title="var">t</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Control.throw</span> (<span class="id" title="var">Invalid_argument</span> (<span class="id" title="var">Some</span> <span class="id" title="var">m</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">of_rep_opt</span> : <span class="id" title="keyword">constr</span> -&gt; <span class="id" title="var">ident</span> <span class="id" title="var">option</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lazy_match</span>! <span class="id" title="var">Std.eval_whd_all</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.ltac2.extra.internal.ident.html#Ident.Rep"><span class="id" title="constructor">Rep</span></a> ?<span class="id" title="var">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">b</span>, <span class="id" title="var">_</span>) := <span class="id" title="var">Destruct.of_lambda</span> <span class="id" title="var">f</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">n</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := <span class="id" title="var">Binder.deconstruct</span> <span class="id" title="var">b</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" title="var">t</span> =&gt; <span class="id" title="var">invalid_arg</span> "Ident.of_rep_opt: Expected &lt;&lt;Ident.rep&gt;&gt; constructor" <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">of_rep</span> : <span class="id" title="keyword">constr</span> -&gt; <span class="id" title="var">ident</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">of_rep_opt</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">id</span> =&gt; <span class="id" title="var">id</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> =&gt; <span class="id" title="var">invalid_arg</span> "Ident.of_rep: No name hint" <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">as_rep'</span> () : <span class="id" title="var">ident</span> -&gt; <span class="id" title="keyword">constr</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">unit</span> := <span class="id" title="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tt</span> := <span class="id" title="keyword">constr</span>:(<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">rep</span> := <span class="id" title="keyword">constr</span>:(<a class="idref" href="bedrock.ltac2.extra.internal.ident.html#Ident.Rep"><span class="id" title="constructor">Rep</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">id</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">b</span> := <span class="id" title="var">Binder.unsafe_make</span> (<span class="id" title="var">Some</span> <span class="id" title="var">id</span>) <span class="id" title="var">Binder.Relevant</span> <span class="id" title="var">unit</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">make_app1</span> <span class="id" title="var">rep</span> (<span class="id" title="var">make_lambda</span> <span class="id" title="var">b</span> <span class="id" title="var">tt</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span>2 <span class="id" title="var">as_rep</span> (<span class="id" title="var">id</span> : <span class="id" title="var">ident</span>) : <span class="id" title="keyword">constr</span> := <span class="id" title="var">as_rep'</span> () <span class="id" title="var">id</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.ltac2.extra.internal.ident.html#Ident"><span class="id" title="module">Ident</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>