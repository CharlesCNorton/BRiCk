<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>bedrock.elpi.extra.add_predicate_command</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library bedrock.elpi.extra.add_predicate_command</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bedrock.elpi.extra.prelude.html#"><span class="id" title="library">bedrock.elpi.extra.prelude</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">Elpi.Db.AddPred</span></span> is a vernacular command that can be used to declare a new
    predicate in an existing elpi database. See <span class="inlinecode"><span class="id" title="var">usage</span></span> below for instructions
    and examples. 

<div class="paragraph"> </div>

    Elpi 1.20 and onwards require predicates to be declared before clauses for
    it are accumulated. 

</div>
<div class="code">

<br/>
<span class="id" title="var">Elpi</span> <span class="id" title="var">Command</span> <span class="id" title="var">AddPred</span>.<br/>

<br/>
<span class="id" title="var">Elpi</span> <span class="id" title="var">Accumulate</span> <span class="id" title="var">lp</span>:{{<br/>
&nbsp;&nbsp;<span class="id" title="var">usage</span> :- <span class="id" title="var">coq.error</span><br/>
"Elpi AddPred database predicate_name \"&lt;<span class="id" title="var">Mode1</span>&gt;:&lt;<span class="id" title="var">Type1</span>&gt;\" .. \"&lt;<span class="id" title="var">ModeN</span>&gt;:&lt;<span class="id" title="var">TypeN</span>&gt;\".

Example: Elpi AddPred my.db my.predicate \"<span class="id" title="var">i</span>:(<span class="id" title="var">list</span> <span class="id" title="var">string</span>)\" \"<span class="id" title="var">o</span>:<span class="id" title="var">prop</span>\".
".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">pred</span> <span class="id" title="var">parse</span>-<span class="id" title="var">mode</span> <span class="id" title="var">i</span>:<span class="id" title="var">string</span> <span class="id" title="var">o</span>:<span class="id" title="var">argument_mode</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">mode</span> "i" <span class="id" title="tactic">in</span> :- !.<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">mode</span> "o" <span class="id" title="var">out</span> :- !.<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">mode</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> :- <span class="id" title="var">usage</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">pred</span> <span class="id" title="var">parse</span>-<span class="id" title="var">string</span> <span class="id" title="var">i</span>:(<span class="id" title="var">list</span> <span class="id" title="var">argument</span>) <span class="id" title="var">o</span>:(<span class="id" title="var">string</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">argument</span> -&gt; <span class="id" title="var">prop</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">string</span> [<span class="id" title="var">str</span> <span class="id" title="var">S</span>|<span class="id" title="var">Args</span>] <span class="id" title="var">K</span> :- !, <span class="id" title="var">K</span> <span class="id" title="var">S</span> <span class="id" title="var">Args</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">string</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> :- <span class="id" title="var">usage</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">pred</span> <span class="id" title="var">parse</span>-<span class="id" title="var">sig</span> <span class="id" title="var">i</span>:(<span class="id" title="var">list</span> <span class="id" title="var">argument</span>) <span class="id" title="var">o</span>:(<span class="id" title="var">list</span> (<span class="id" title="var">pair</span> <span class="id" title="var">argument_mode</span> <span class="id" title="var">string</span>) -&gt; <span class="id" title="var">list</span> <span class="id" title="var">argument</span> -&gt; <span class="id" title="var">prop</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">sig</span> [<span class="id" title="var">str</span> <span class="id" title="var">S</span>|<span class="id" title="var">Args</span>] <span class="id" title="var">K</span> :- !, <span class="id" title="var">std.do</span>! [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rex.split</span> ":" <span class="id" title="var">S</span> <span class="id" title="var">L</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">L</span> = [<span class="id" title="var">PreMode</span>,<span class="id" title="keyword">Type</span>], !; <span class="id" title="var">usage</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">mode</span> <span class="id" title="var">PreMode</span> <span class="id" title="var">Mode</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">sig</span> <span class="id" title="var">Args</span> <span class="id" title="var">Sig</span> \ <span class="id" title="var">Args</span> \<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">K</span> [<span class="id" title="var">pr</span> <span class="id" title="var">Mode</span> <span class="id" title="keyword">Type</span>|<span class="id" title="var">Sig</span>] <span class="id" title="var">Args</span><br/>
&nbsp;&nbsp;].<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">sig</span> [] <span class="id" title="var">K</span> :- !, <span class="id" title="var">K</span> [] [].<br/>
&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">sig</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> :- <span class="id" title="var">usage</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">main</span> <span class="id" title="var">Args</span> :- <span class="id" title="var">std.do</span>![<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">string</span> <span class="id" title="var">Args</span> <span class="id" title="var">Db</span> \ <span class="id" title="var">Args</span> \<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">string</span> <span class="id" title="var">Args</span> <span class="id" title="var">Pred</span> \ <span class="id" title="var">Args</span> \<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parse</span>-<span class="id" title="var">sig</span> <span class="id" title="var">Args</span> <span class="id" title="var">Sig</span> \ <span class="id" title="var">Args</span> \ <span class="id" title="var">std.do</span>! [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Args</span> = [], !; <span class="id" title="var">usage</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">std.assert</span>! (@<span class="id" title="var">global</span>! =&gt; <span class="id" title="var">coq.elpi.add</span>-<span class="id" title="var">predicate</span> <span class="id" title="var">Db</span> <span class="id" title="var">_</span> <span class="id" title="var">Pred</span> <span class="id" title="var">Sig</span>) "Elpi.Db.AddPred"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;].<br/>
}}.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>