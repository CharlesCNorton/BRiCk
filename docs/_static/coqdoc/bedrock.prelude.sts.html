<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> `theories/` </a>
      <a href="../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.prelude.sts</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(C)&nbsp;BedRock&nbsp;Systems&nbsp;Inc.&nbsp;2020<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#"><span class="id" title="library">stdpp.propset</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.base.html#"><span class="id" title="library">bedrock.prelude.base</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.finite.html#"><span class="id" title="library">bedrock.prelude.finite</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.functions.html#"><span class="id" title="library">bedrock.prelude.functions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.lens.html#"><span class="id" title="library">bedrock.prelude.lens</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Lens.Lens.html#LensNotations"><span class="id" title="module">LensNotations</span></a>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">lens_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Labeled transition systems 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="Sts" class="idref" href="#Sts"><span class="id" title="module">Sts</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Labeled&nbsp;transition&nbsp;systems.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="Sts.sts" class="idref" href="#Sts.sts"><span class="id" title="record">sts</span></a> {<a id="Label:1" class="idref" href="#Label:1"><span class="id" title="binder">Label</span></a> : <span class="id" title="keyword">Type</span>} : <span class="id" title="keyword">Type</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
State type 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Sts._state" class="idref" href="#Sts._state"><span class="id" title="projection">_state</span></a>      :&gt; <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Initial state predicate 
</div>
<div class="code">
&nbsp;&nbsp;; <a id="Sts._init_state" class="idref" href="#Sts._init_state"><span class="id" title="projection">_init_state</span></a> : <a class="idref" href="bedrock.prelude.sts.html#_state:3"><span class="id" title="method">_state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Step relation of the LTS
    <span class="inlinecode"><a class="idref" href="bedrock.upoly.UTypes.html#None"><span class="id" title="constructor">None</span></a></span> means <span class="inlinecode"><span class="id" title="var">Tau</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;; <a id="Sts._step" class="idref" href="#Sts._step"><span class="id" title="projection">_step</span></a>       : <a class="idref" href="bedrock.prelude.sts.html#_state:3"><span class="id" title="method">_state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.prelude.sts.html#Label:1"><span class="id" title="variable">Label</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#_state:3"><span class="id" title="method">_state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <span class="id" title="var">_</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
Reflexive, transitive closure of steps 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Sts.step_star" class="idref" href="#Sts.step_star"><span class="id" title="definition">step_star</span></a> {<a id="L:6" class="idref" href="#L:6"><span class="id" title="binder">L</span></a>} (<a id="STS:7" class="idref" href="#STS:7"><span class="id" title="binder">STS</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#L:6"><span class="id" title="variable">L</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:8" class="idref" href="#s:8"><span class="id" title="binder">s</span></a> : <a class="idref" href="bedrock.prelude.sts.html#STS:7"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">_state</span></a>)) (<a id="ls:9" class="idref" href="#ls:9"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.prelude.sts.html#L:6"><span class="id" title="variable">L</span></a>)) (<a id="s':10" class="idref" href="#s':10"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#STS:7"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">_state</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.prelude.sts.html#ls:9"><span class="id" title="variable">ls</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">ol</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ls'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s'':13" class="idref" href="#s'':13"><span class="id" title="binder">s''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:7"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s:8"><span class="id" title="variable">s</span></a> <span class="id" title="var">ol</span> <a class="idref" href="bedrock.prelude.sts.html#s'':13"><span class="id" title="variable">s''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.prelude.sts.html#step_star:11"><span class="id" title="definition">step_star</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:7"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s'':13"><span class="id" title="variable">s''</span></a> <span class="id" title="var">ls'</span> <a class="idref" href="bedrock.prelude.sts.html#s':10"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="bedrock.prelude.sts.html#s:8"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':10"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Reflexive transitive closure of internal steps 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Sts.step_star_tau" class="idref" href="#Sts.step_star_tau"><span class="id" title="definition">step_star_tau</span></a> {<a id="L:14" class="idref" href="#L:14"><span class="id" title="binder">L</span></a>} (<a id="STS:15" class="idref" href="#STS:15"><span class="id" title="binder">STS</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#L:14"><span class="id" title="variable">L</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:16" class="idref" href="#s:16"><span class="id" title="binder">s</span></a> <a id="s':17" class="idref" href="#s':17"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#STS:15"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">_state</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="n:18" class="idref" href="#n:18"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star"><span class="id" title="definition">step_star</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:15"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:16"><span class="id" title="variable">s</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate"><span class="id" title="definition">replicate</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:18"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s':17"><span class="id" title="variable">s'</span></a>.<br/>

<br/>
</div>

<div class="doc">
Composition of closures 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Sts.step_star_comp" class="idref" href="#Sts.step_star_comp"><span class="id" title="lemma">step_star_comp</span></a> <a id="L:19" class="idref" href="#L:19"><span class="id" title="binder">L</span></a> (<a id="STS:20" class="idref" href="#STS:20"><span class="id" title="binder">STS</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#L:19"><span class="id" title="variable">L</span></a>) <a id="s:21" class="idref" href="#s:21"><span class="id" title="binder">s</span></a> <a id="s':22" class="idref" href="#s':22"><span class="id" title="binder">s'</span></a> <a id="s'':23" class="idref" href="#s'':23"><span class="id" title="binder">s''</span></a> <a id="lbls:24" class="idref" href="#lbls:24"><span class="id" title="binder">lbls</span></a> <a id="lbls':25" class="idref" href="#lbls':25"><span class="id" title="binder">lbls'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step_star"><span class="id" title="definition">step_star</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:20"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:21"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#lbls:24"><span class="id" title="variable">lbls</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':22"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step_star"><span class="id" title="definition">step_star</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:20"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':22"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#lbls':25"><span class="id" title="variable">lbls'</span></a> <a class="idref" href="bedrock.prelude.sts.html#s'':23"><span class="id" title="variable">s''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step_star"><span class="id" title="definition">step_star</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:20"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:21"><span class="id" title="variable">s</span></a> (<a class="idref" href="bedrock.prelude.sts.html#lbls:24"><span class="id" title="variable">lbls</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.prelude.sts.html#lbls':25"><span class="id" title="variable">lbls'</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s'':23"><span class="id" title="variable">s''</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">s''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">lbls</span> <span class="id" title="keyword">as</span> [|?? <span class="id" title="var">IH</span>] =&gt;[<span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">s''</span> /= -&gt;//|<span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">s''</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;[<span class="id" title="var">s3</span> [<span class="id" title="var">Hss3</span> <span class="id" title="var">Hs3s'</span>]] <span class="id" title="var">Hs's''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s3</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">apply</span>: <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Sts.step_star_tau_comp" class="idref" href="#Sts.step_star_tau_comp"><span class="id" title="lemma">step_star_tau_comp</span></a> <a id="L:26" class="idref" href="#L:26"><span class="id" title="binder">L</span></a> (<a id="STS:27" class="idref" href="#STS:27"><span class="id" title="binder">STS</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#L:26"><span class="id" title="variable">L</span></a>) <a id="s:28" class="idref" href="#s:28"><span class="id" title="binder">s</span></a> <a id="s':29" class="idref" href="#s':29"><span class="id" title="binder">s'</span></a> <a id="s'':30" class="idref" href="#s'':30"><span class="id" title="binder">s''</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">step_star_tau</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:27"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:28"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':29"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">step_star_tau</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:27"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':29"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#s'':30"><span class="id" title="variable">s''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">step_star_tau</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:27"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:28"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#s'':30"><span class="id" title="variable">s''</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;[<span class="id" title="var">n</span> <span class="id" title="var">Hs</span>] [<span class="id" title="var">n'</span> <span class="id" title="var">Hs'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n'</span>); <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#replicate_add"><span class="id" title="lemma">replicate_add</span></a>; <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_comp"><span class="id" title="lemma">step_star_comp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Reflexive transitive closure of external steps

<div class="paragraph"> </div>

  We model the closure as interleaving of external steps
  with finitely many (possibly 0) internal tau steps
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Sts.step_star_ext" class="idref" href="#Sts.step_star_ext"><span class="id" title="definition">step_star_ext</span></a> {<a id="L:31" class="idref" href="#L:31"><span class="id" title="binder">L</span></a>} (<a id="STS:32" class="idref" href="#STS:32"><span class="id" title="binder">STS</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#L:31"><span class="id" title="variable">L</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:33" class="idref" href="#s:33"><span class="id" title="binder">s</span></a> : <a class="idref" href="bedrock.prelude.sts.html#STS:32"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">_state</span></a>)) (<a id="ls:34" class="idref" href="#ls:34"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.prelude.sts.html#L:31"><span class="id" title="variable">L</span></a>) (<a id="s':35" class="idref" href="#s':35"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#STS:32"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">_state</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.prelude.sts.html#ls:34"><span class="id" title="variable">ls</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ls'</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s'':38" class="idref" href="#s'':38"><span class="id" title="binder">s''</span></a> <a id="s''':39" class="idref" href="#s''':39"><span class="id" title="binder">s'''</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">step_star_tau</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:32"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:33"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#s'':38"><span class="id" title="variable">s''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#STS:32"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s'':38"><span class="id" title="variable">s''</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">l</span>) <a class="idref" href="bedrock.prelude.sts.html#s''':39"><span class="id" title="variable">s'''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.prelude.sts.html#step_star_ext:36"><span class="id" title="definition">step_star_ext</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:32"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s''':39"><span class="id" title="variable">s'''</span></a> <span class="id" title="var">ls'</span> <a class="idref" href="bedrock.prelude.sts.html#s':35"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">step_star_tau</span></a> <a class="idref" href="bedrock.prelude.sts.html#STS:32"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:33"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':35"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Sts.map" class="idref" href="#Sts.map"><span class="id" title="section">map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">L</span></span>&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;*internal*&nbsp;events<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">L'</span></span>&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;*external*&nbsp;events&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="L:40" class="idref" href="#L:40"><span class="id" title="binder">L</span></a> <a id="L':41" class="idref" href="#L':41"><span class="id" title="binder">L'</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:42" class="idref" href="#f:42"><span class="id" title="binder">f</span></a> : <a class="idref" href="bedrock.prelude.sts.html#L:40"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#L':41"><span class="id" title="variable">L'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> (<a id="Sts.map.STS" class="idref" href="#Sts.map.STS"><span class="id" title="variable">STS</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.map.L"><span class="id" title="variable">L</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="Sts.Map_step" class="idref" href="#Sts.Map_step"><span class="id" title="inductive">Map_step</span></a> (<a id="s:44" class="idref" href="#s:44"><span class="id" title="binder">s</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.map.STS"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">_state</span></a>)) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.map.L'"><span class="id" title="variable">L'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.map.STS"><span class="id" title="variable">STS</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Sts.MAP_tau" class="idref" href="#Sts.MAP_tau"><span class="id" title="constructor">MAP_tau</span></a> {<a id="s':47" class="idref" href="#s':47"><span class="id" title="binder">s'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.map.STS"><span class="id" title="variable">STS</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:44"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':47"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bedrock.prelude.sts.html#Map_step:45"><span class="id" title="inductive">Map_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:44"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':47"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Sts.MAP_action" class="idref" href="#Sts.MAP_action"><span class="id" title="constructor">MAP_action</span></a> {<a id="s':48" class="idref" href="#s':48"><span class="id" title="binder">s'</span></a> <a id="l:49" class="idref" href="#l:49"><span class="id" title="binder">l</span></a> <a id="l':50" class="idref" href="#l':50"><span class="id" title="binder">l'</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts.map.STS"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s:44"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#l:49"><span class="id" title="variable">l</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s':48"><span class="id" title="variable">s'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts.map.f"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.prelude.sts.html#l:49"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.sts.html#l':50"><span class="id" title="variable">l'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bedrock.prelude.sts.html#Map_step:45"><span class="id" title="inductive">Map_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:44"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#l':50"><span class="id" title="variable">l'</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s':48"><span class="id" title="variable">s'</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab90"></a><h1 class="section">Mapping event types</h1>

    This allows you to translate events in one <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.zstring.html#zstring.t"><span class="id" title="definition">t</span></a></span> to another <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.zstring.html#zstring.t"><span class="id" title="definition">t</span></a></span>
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Sts.map" class="idref" href="#Sts.map"><span class="id" title="definition">map</span></a>  : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.map.L'"><span class="id" title="variable">L'</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.prelude.sts.html#Sts._init_state"><span class="id" title="projection">_init_state</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Sts.map.STS"><span class="id" title="variable">STS</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._init_state"><span class="id" title="projection">_init_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Sts.Map_step"><span class="id" title="inductive">Map_step</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.map"><span class="id" title="section">map</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Sts.hide" class="idref" href="#Sts.hide"><span class="id" title="section">hide</span></a>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#type_ind'.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">e</span></span> holds on events <span class="inlinecode"><span class="id" title="var">e</span></span> that should not connect to the outside
    world, i.e. they must match internal to this system or they are
    not enabled.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="L:51" class="idref" href="#L:51"><span class="id" title="binder">L</span></a> : <span class="id" title="keyword">Type</span>} (<a id="P:52" class="idref" href="#P:52"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.prelude.sts.html#L:51"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="Sts.Hide_step" class="idref" href="#Sts.Hide_step"><span class="id" title="inductive">Hide_step</span></a> (<a id="l:53" class="idref" href="#l:53"><span class="id" title="binder">l</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.hide.L"><span class="id" title="variable">L</span></a>) : <a class="idref" href="bedrock.prelude.sts.html#Sts.hide.L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Sts.HIDE" class="idref" href="#Sts.HIDE"><span class="id" title="constructor">HIDE</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="bedrock.prelude.sts.html#Sts.hide.P"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.prelude.sts.html#l:53"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bedrock.prelude.sts.html#Hide_step:54"><span class="id" title="inductive">Hide_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.sts.html#l:53"><span class="id" title="variable">l</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab91"></a><h1 class="section">Hiding internal events</h1>

    To prevent "Internal" events from escaping, you can do the following

<div class="paragraph"> </div>

    <br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.hide"><span class="id" title="definition">hide</span></a> (<span class="id" title="keyword">fun</span> <a class="idref" href="bedrock.noimport.doc.cpp.logic.html#with_Sigma.x"><span class="id" title="variable">x</span></a> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="bedrock.noimport.doc.cpp.logic.html#with_Sigma.x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Internal</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">st</span>
<div class="paragraph"> </div>

</span>    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Sts.hide" class="idref" href="#Sts.hide"><span class="id" title="definition">hide</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.hide.L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.hide.L"><span class="id" title="variable">L</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Sts.map"><span class="id" title="definition">map</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.Hide_step"><span class="id" title="inductive">Hide_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.hide"><span class="id" title="section">hide</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Sts.par" class="idref" href="#Sts.par"><span class="id" title="section">par</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="e:56" class="idref" href="#e:56"><span class="id" title="binder">e</span></a> : <span class="id" title="keyword">Type</span>} (<a id="dual:57" class="idref" href="#dual:57"><span class="id" title="binder">dual</span></a> : <a class="idref" href="bedrock.prelude.sts.html#e:56"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#e:56"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> (<a id="Sts.par.L" class="idref" href="#Sts.par.L"><span class="id" title="variable">L</span></a> <a id="Sts.par.R" class="idref" href="#Sts.par.R"><span class="id" title="variable">R</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.e"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variant</span> <a id="Sts.Par_step" class="idref" href="#Sts.Par_step"><span class="id" title="inductive">Par_step</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.par.L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.L"><span class="id" title="variable">L</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.R"><span class="id" title="variable">R</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Sts.PAR_comm" class="idref" href="#Sts.PAR_comm"><span class="id" title="constructor">PAR_comm</span></a> {<a id="l:62" class="idref" href="#l:62"><span class="id" title="binder">l</span></a> <a id="l':63" class="idref" href="#l':63"><span class="id" title="binder">l'</span></a> <a id="r:64" class="idref" href="#r:64"><span class="id" title="binder">r</span></a> <a id="r':65" class="idref" href="#r':65"><span class="id" title="binder">r'</span></a> <a id="eL:66" class="idref" href="#eL:66"><span class="id" title="binder">eL</span></a> <a id="eR:67" class="idref" href="#eR:67"><span class="id" title="binder">eR</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.L"><span class="id" title="variable">L</span></a> <a class="idref" href="bedrock.prelude.sts.html#l:62"><span class="id" title="variable">l</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#eL:66"><span class="id" title="variable">eL</span></a>) <a class="idref" href="bedrock.prelude.sts.html#l':63"><span class="id" title="variable">l'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.R"><span class="id" title="variable">R</span></a> <a class="idref" href="bedrock.prelude.sts.html#r:64"><span class="id" title="variable">r</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#eR:67"><span class="id" title="variable">eR</span></a>) <a class="idref" href="bedrock.prelude.sts.html#r':65"><span class="id" title="variable">r'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts.par.dual"><span class="id" title="variable">dual</span></a> <a class="idref" href="bedrock.prelude.sts.html#eL:66"><span class="id" title="variable">eL</span></a> <a class="idref" href="bedrock.prelude.sts.html#eR:67"><span class="id" title="variable">eR</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bedrock.prelude.sts.html#Par_step:60"><span class="id" title="inductive">Par_step</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.sts.html#l:62"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.prelude.sts.html#r:64"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.sts.html#l':63"><span class="id" title="variable">l'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.prelude.sts.html#r':65"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Sts.PAR_left" class="idref" href="#Sts.PAR_left"><span class="id" title="constructor">PAR_left</span></a> {<a id="l:68" class="idref" href="#l:68"><span class="id" title="binder">l</span></a> <a id="l':69" class="idref" href="#l':69"><span class="id" title="binder">l'</span></a> <a id="r:70" class="idref" href="#r:70"><span class="id" title="binder">r</span></a> <a id="e:71" class="idref" href="#e:71"><span class="id" title="binder">e</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.L"><span class="id" title="variable">L</span></a> <a class="idref" href="bedrock.prelude.sts.html#l:68"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.sts.html#e:71"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.prelude.sts.html#l':69"><span class="id" title="variable">l'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bedrock.prelude.sts.html#Par_step:60"><span class="id" title="inductive">Par_step</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.sts.html#l:68"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.prelude.sts.html#r:70"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.prelude.sts.html#e:71"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.sts.html#l':69"><span class="id" title="variable">l'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.prelude.sts.html#r:70"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Sts.PAR_right" class="idref" href="#Sts.PAR_right"><span class="id" title="constructor">PAR_right</span></a> {<a id="l:72" class="idref" href="#l:72"><span class="id" title="binder">l</span></a> <a id="r:73" class="idref" href="#r:73"><span class="id" title="binder">r</span></a> <a id="r':74" class="idref" href="#r':74"><span class="id" title="binder">r'</span></a> <a id="e:75" class="idref" href="#e:75"><span class="id" title="binder">e</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.R"><span class="id" title="variable">R</span></a> <a class="idref" href="bedrock.prelude.sts.html#r:73"><span class="id" title="variable">r</span></a> <a class="idref" href="bedrock.prelude.sts.html#e:75"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.prelude.sts.html#r':74"><span class="id" title="variable">r'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="bedrock.prelude.sts.html#Par_step:60"><span class="id" title="inductive">Par_step</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.sts.html#l:72"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.prelude.sts.html#r:73"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.prelude.sts.html#e:75"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.sts.html#l:72"><span class="id" title="variable">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.prelude.sts.html#r':74"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab92"></a><h1 class="section">Binary parallel composition</h1>

    this allows you to compose two <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.zstring.html#zstring.t"><span class="id" title="definition">t</span></a></span>s with possible communication
    between them.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">dual</span></span> <span class="inlinecode"><span class="id" title="var">e1</span></span> <span class="inlinecode"><span class="id" title="var">e2</span></span> holds when <span class="inlinecode"><span class="id" title="var">e1</span></span> and <span class="inlinecode"><span class="id" title="var">e2</span></span> cancel producing a <span class="inlinecode"><span class="id" title="var">Tau</span></span>
    transition for the composed system.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Sts.par" class="idref" href="#Sts.par"><span class="id" title="definition">par</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.e"><span class="id" title="variable">e</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.prelude.sts.html#Sts._init_state"><span class="id" title="projection">_init_state</span></a> '<a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">(</span></a><a id="l:77" class="idref" href="#l:77"><span class="id" title="binder"><span id="pat:78" class="id">l</span></span></a><a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">,</span></a><a id="r:76" class="idref" href="#r:76"><span class="id" title="binder"><span id="pat:78" class="id">r</span></span></a><a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">)</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Sts.par.L"><span class="id" title="variable">L</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._init_state"><span class="id" title="projection">_init_state</span></a>) <a class="idref" href="bedrock.prelude.sts.html#l:77"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.par.R"><span class="id" title="variable">R</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._init_state"><span class="id" title="projection">_init_state</span></a>) <a class="idref" href="bedrock.prelude.sts.html#r:76"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Sts.Par_step"><span class="id" title="inductive">Par_step</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.par"><span class="id" title="section">par</span></a>.<br/>

<br/>
</div>

<div class="doc">
bundled state transition systems. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="Sts.t" class="idref" href="#Sts.t"><span class="id" title="record">t</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Sts.Label" class="idref" href="#Sts.Label"><span class="id" title="projection">Label</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;; <a id="Sts._sts" class="idref" href="#Sts._sts"><span class="id" title="projection">_sts</span></a> :&gt; <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Label:80"><span class="id" title="method">Label</span></a><br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.Build_t"><span class="id" title="constructor">Build_t</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Sts.State" class="idref" href="#Sts.State"><span class="id" title="definition">State</span></a> (<a id="x:82" class="idref" href="#x:82"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.t"><span class="id" title="record">t</span></a>) := <a class="idref" href="bedrock.prelude.sts.html#x:82"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._sts"><span class="id" title="projection">_sts</span></a>).(<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">_state</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Sts.init_state" class="idref" href="#Sts.init_state"><span class="id" title="definition">init_state</span></a> (<a id="x:83" class="idref" href="#x:83"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.t"><span class="id" title="record">t</span></a>) : <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">State</span></a> <a class="idref" href="bedrock.prelude.sts.html#x:83"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> := <a class="idref" href="bedrock.prelude.sts.html#x:83"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._sts"><span class="id" title="projection">_sts</span></a>).(<a class="idref" href="bedrock.prelude.sts.html#Sts._init_state"><span class="id" title="projection">_init_state</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Sts.step" class="idref" href="#Sts.step"><span class="id" title="definition">step</span></a> (<a id="x:84" class="idref" href="#x:84"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.t"><span class="id" title="record">t</span></a>) : <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">State</span></a> <a class="idref" href="bedrock.prelude.sts.html#x:84"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.prelude.sts.html#x:84"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Label</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">State</span></a> <a class="idref" href="bedrock.prelude.sts.html#x:84"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#x:84"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#Sts._sts"><span class="id" title="projection">_sts</span></a>).(<a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">_step</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Let&nbsp;these&nbsp;simplify&nbsp;as&nbsp;if&nbsp;they&nbsp;were&nbsp;projections.&nbsp;*)</span><br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">State</span></a> !<span class="id" title="var">_</span> /.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.init_state"><span class="id" title="definition">init_state</span></a> !<span class="id" title="var">_</span> /.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.sts.html#Sts.step"><span class="id" title="definition">step</span></a> !<span class="id" title="var">_</span> /.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.sts.html#Sts"><span class="id" title="module">Sts</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Compose" class="idref" href="#Compose"><span class="id" title="module">Compose</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;configuration&nbsp;for&nbsp;a&nbsp;composition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="Compose.config" class="idref" href="#Compose.config"><span class="id" title="record">config</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;logical&nbsp;name&nbsp;of&nbsp;each&nbsp;component&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Compose.name" class="idref" href="#Compose.name"><span class="id" title="projection">name</span></a> : <span class="id" title="keyword">Set</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="Compose.name_eq_dec" class="idref" href="#Compose.name_eq_dec"><span class="id" title="projection">name_eq_dec</span></a> :: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="bedrock.prelude.sts.html#name:86"><span class="id" title="method">name</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="Compose.name_finite" class="idref" href="#Compose.name_finite"><span class="id" title="projection">name_finite</span></a> :: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#Finite"><span class="id" title="class">Finite</span></a> <a class="idref" href="bedrock.prelude.sts.html#name:86"><span class="id" title="method">name</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;external&nbsp;event&nbsp;type&nbsp;of&nbsp;the&nbsp;composition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Compose.external_event" class="idref" href="#Compose.external_event"><span class="id" title="projection">external_event</span></a> : <span class="id" title="keyword">Set</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;LTS&nbsp;of&nbsp;each&nbsp;component&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Compose.sts_name" class="idref" href="#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> : <a class="idref" href="bedrock.prelude.sts.html#name:86"><span class="id" title="method">name</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.t"><span class="id" title="record">Sts.t</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;LTSes&nbsp;communicate&nbsp;through&nbsp;canceling&nbsp;events<br/>
&nbsp;&nbsp;&nbsp;&nbsp;n1&nbsp;initiates&nbsp;the&nbsp;communication,&nbsp;and&nbsp;n2&nbsp;receives&nbsp;it.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Compose.cancel_evt_asym" class="idref" href="#Compose.cancel_evt_asym"><span class="id" title="projection">cancel_evt_asym</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="n1:91" class="idref" href="#n1:91"><span class="id" title="binder">n1</span></a> <a id="n2:92" class="idref" href="#n2:92"><span class="id" title="binder">n2</span></a> : <a class="idref" href="bedrock.prelude.sts.html#name:86"><span class="id" title="method">name</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#sts_name:90"><span class="id" title="method">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#n1:91"><span class="id" title="variable">n1</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#sts_name:90"><span class="id" title="method">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#n2:92"><span class="id" title="variable">n2</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Compose.cancel_evt" class="idref" href="#Compose.cancel_evt"><span class="id" title="projection">cancel_evt</span></a> (<a id="n1:94" class="idref" href="#n1:94"><span class="id" title="binder">n1</span></a> <a id="n2:95" class="idref" href="#n2:95"><span class="id" title="binder">n2</span></a> : <a class="idref" href="bedrock.prelude.sts.html#name:86"><span class="id" title="method">name</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l1:96" class="idref" href="#l1:96"><span class="id" title="binder">l1</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#sts_name:90"><span class="id" title="method">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#n1:94"><span class="id" title="variable">n1</span></a>)) (<a id="l2:97" class="idref" href="#l2:97"><span class="id" title="binder">l2</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#sts_name:90"><span class="id" title="method">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#n2:95"><span class="id" title="variable">n2</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#cancel_evt_asym:93"><span class="id" title="method">cancel_evt_asym</span></a> <a class="idref" href="bedrock.prelude.sts.html#n1:94"><span class="id" title="variable">n1</span></a> <a class="idref" href="bedrock.prelude.sts.html#n2:95"><span class="id" title="variable">n2</span></a> <a class="idref" href="bedrock.prelude.sts.html#l1:96"><span class="id" title="variable">l1</span></a> <a class="idref" href="bedrock.prelude.sts.html#l2:97"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="bedrock.prelude.sts.html#cancel_evt_asym:93"><span class="id" title="method">cancel_evt_asym</span></a> <a class="idref" href="bedrock.prelude.sts.html#n2:95"><span class="id" title="variable">n2</span></a> <a class="idref" href="bedrock.prelude.sts.html#n1:94"><span class="id" title="variable">n1</span></a> <a class="idref" href="bedrock.prelude.sts.html#l2:97"><span class="id" title="variable">l2</span></a> <a class="idref" href="bedrock.prelude.sts.html#l1:96"><span class="id" title="variable">l1</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;component's&nbsp;event&nbsp;can&nbsp;be&nbsp;external&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Compose.inj_evt" class="idref" href="#Compose.inj_evt"><span class="id" title="projection">inj_evt</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="n:99" class="idref" href="#n:99"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.prelude.sts.html#name:86"><span class="id" title="method">name</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#sts_name:90"><span class="id" title="method">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:99"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.prelude.sts.html#external_event:89"><span class="id" title="method">external_event</span></a>;<br/>
<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Compose.Compose" class="idref" href="#Compose.Compose"><span class="id" title="section">Compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="sf:101" class="idref" href="#sf:101"><span class="id" title="binder">sf</span></a>: <a class="idref" href="bedrock.prelude.sts.html#Compose.config"><span class="id" title="record">config</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">n</span> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Compose.State" class="idref" href="#Compose.State"><span class="id" title="definition">State</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:102" class="idref" href="#n:102"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">Sts.State</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:102"><span class="id" title="variable">n</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Compose.init_state" class="idref" href="#Compose.init_state"><span class="id" title="definition">init_state</span></a> (<a id="s:103" class="idref" href="#s:103"><span class="id" title="binder">s</span></a>: <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">State</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:104" class="idref" href="#n:104"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.init_state"><span class="id" title="definition">Sts.init_state</span></a> <span class="id" title="var">_</span> (<a class="idref" href="bedrock.prelude.sts.html#s:103"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:104"><span class="id" title="variable">n</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Compose.eq_except" class="idref" href="#Compose.eq_except"><span class="id" title="definition">eq_except</span></a> (<a id="n:105" class="idref" href="#n:105"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">_</span>) (<a id="s:106" class="idref" href="#s:106"><span class="id" title="binder">s</span></a> <a id="s':107" class="idref" href="#s':107"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">State</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n':108" class="idref" href="#n':108"><span class="id" title="binder">n'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#n':108"><span class="id" title="variable">n'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:105"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:106"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#n':108"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':107"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#n':108"><span class="id" title="variable">n'</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Compose.compose_lts" class="idref" href="#Compose.compose_lts"><span class="id" title="definition">compose_lts</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.sts"><span class="id" title="record">Sts.sts</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.external_event"><span class="id" title="projection">external_event</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>) := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts._state"><span class="id" title="projection">Sts._state</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">State</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts._init_state"><span class="id" title="projection">Sts._init_state</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Compose.init_state"><span class="id" title="definition">init_state</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;a&nbsp;step&nbsp;of&nbsp;the&nbsp;composition&nbsp;is&nbsp;either:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;an&nbsp;externally&nbsp;visible&nbsp;step&nbsp;which&nbsp;comes&nbsp;from&nbsp;some&nbsp;constituent&nbsp;component&nbsp;n<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;tau&nbsp;step,&nbsp;which&nbsp;is&nbsp;either<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;a&nbsp;tau&nbsp;step&nbsp;of&nbsp;some&nbsp;constituent&nbsp;component&nbsp;n<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;an&nbsp;internal&nbsp;communication&nbsp;step&nbsp;between&nbsp;two&nbsp;components&nbsp;na&nbsp;and&nbsp;nb&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts._step"><span class="id" title="projection">Sts._step</span></a> (<a id="s:109" class="idref" href="#s:109"><span class="id" title="binder">s</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">State</span></a>) (<a id="e:110" class="idref" href="#e:110"><span class="id" title="binder">e</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.external_event"><span class="id" title="projection">external_event</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>)) (<a id="s':111" class="idref" href="#s':111"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">State</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.prelude.sts.html#e:110"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">ext_e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:113" class="idref" href="#n:113"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Compose.eq_except"><span class="id" title="definition">eq_except</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.prelude.sts.html#n:113"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:109"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="comment">(*&nbsp;only&nbsp;differ&nbsp;in&nbsp;component&nbsp;n&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="evt_x:114" class="idref" href="#evt_x:114"><span class="id" title="binder">evt_x</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:113"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;evt_x&nbsp;is&nbsp;externally&nbsp;ext_e&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Compose.inj_evt"><span class="id" title="projection">inj_evt</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:113"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.prelude.sts.html#evt_x:114"><span class="id" title="variable">evt_x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">ext_e</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step"><span class="id" title="definition">Sts.step</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:113"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#s:109"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:113"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#evt_x:114"><span class="id" title="variable">evt_x</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:113"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;either&nbsp;a&nbsp;tau&nbsp;step&nbsp;of&nbsp;n&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="n:115" class="idref" href="#n:115"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.eq_except"><span class="id" title="definition">eq_except</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.prelude.sts.html#n:115"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:109"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step"><span class="id" title="definition">Sts.step</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:115"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#s:109"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:115"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="bedrock.prelude.sts.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:115"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;or&nbsp;a&nbsp;communication&nbsp;step&nbsp;between&nbsp;na&nbsp;and&nbsp;nb&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a id="na:116" class="idref" href="#na:116"><span class="id" title="binder">na</span></a> <a id="nb:117" class="idref" href="#nb:117"><span class="id" title="binder">nb</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="la:118" class="idref" href="#la:118"><span class="id" title="binder">la</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#na:116"><span class="id" title="variable">na</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lb:119" class="idref" href="#lb:119"><span class="id" title="binder">lb</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#nb:117"><span class="id" title="variable">nb</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#na:116"><span class="id" title="variable">na</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="bedrock.prelude.sts.html#nb:117"><span class="id" title="variable">nb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="comment">(*&nbsp;communication&nbsp;requires&nbsp;two&nbsp;*distinct*&nbsp;parties&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step"><span class="id" title="definition">Sts.step</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#na:116"><span class="id" title="variable">na</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#s:109"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#na:116"><span class="id" title="variable">na</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#la:118"><span class="id" title="variable">la</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#na:116"><span class="id" title="variable">na</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Compose.eq_except"><span class="id" title="definition">eq_except</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.prelude.sts.html#na:116"><span class="id" title="variable">na</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><a class="idref" href="bedrock.prelude.sts.html#nb:117"><span class="id" title="variable">nb</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:109"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step"><span class="id" title="definition">Sts.step</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#nb:117"><span class="id" title="variable">nb</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#s:109"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#nb:117"><span class="id" title="variable">nb</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#lb:119"><span class="id" title="variable">lb</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#s':111"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#nb:117"><span class="id" title="variable">nb</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Compose.cancel_evt"><span class="id" title="projection">cancel_evt</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#na:116"><span class="id" title="variable">na</span></a> <a class="idref" href="bedrock.prelude.sts.html#nb:117"><span class="id" title="variable">nb</span></a> <a class="idref" href="bedrock.prelude.sts.html#la:118"><span class="id" title="variable">la</span></a> <a class="idref" href="bedrock.prelude.sts.html#lb:119"><span class="id" title="variable">lb</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Compose.make" class="idref" href="#Compose.make"><span class="id" title="definition">make</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.t"><span class="id" title="record">Sts.t</span></a> := <a class="idref" href="bedrock.prelude.sts.html#Sts.Build_t"><span class="id" title="constructor">Sts.Build_t</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.compose_lts"><span class="id" title="definition">compose_lts</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose"><span class="id" title="section">Compose</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">State</span></a> !<span class="id" title="var">_</span> /.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Lens&nbsp;to&nbsp;project&nbsp;state&nbsp;of&nbsp;the&nbsp;component&nbsp;n&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Compose._fam_sts" class="idref" href="#Compose._fam_sts"><span class="id" title="definition">_fam_sts</span></a> (<a id="fam:120" class="idref" href="#fam:120"><span class="id" title="binder">fam</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.config"><span class="id" title="record">Compose.config</span></a>) (<a id="n:121" class="idref" href="#n:121"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">Compose.name</span></a> <a class="idref" href="bedrock.prelude.sts.html#fam:120"><span class="id" title="variable">fam</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">Compose.State</span></a> <a class="idref" href="bedrock.prelude.sts.html#fam:120"><span class="id" title="variable">fam</span></a> <a class="idref" href="Lens.Lens.html#LensNotations.::type_scope:x_'-l&gt;'_x"><span class="id" title="notation">-</span></a><a class="idref" href="Lens.Lens.html#LensNotations.::type_scope:x_'-l&gt;'_x"><span class="id" title="notation">l</span></a><a class="idref" href="Lens.Lens.html#LensNotations.::type_scope:x_'-l&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">Sts.State</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#fam:120"><span class="id" title="variable">fam</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:121"><span class="id" title="variable">n</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#lens_aux_1.lens.of_get_set"><span class="id" title="definition">lens.of_get_set</span></a> (<span class="id" title="keyword">fun</span> <a id="st:124" class="idref" href="#st:124"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="bedrock.prelude.sts.html#st:124"><span class="id" title="variable">st</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:121"><span class="id" title="variable">n</span></a>) (<span class="id" title="keyword">fun</span> <a id="st:122" class="idref" href="#st:122"><span class="id" title="binder">st</span></a> <a id="ip:123" class="idref" href="#ip:123"><span class="id" title="binder">ip</span></a> =&gt; <a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert"><span class="id" title="definition">dep_fn_insert</span></a> <a class="idref" href="bedrock.prelude.sts.html#n:121"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.prelude.sts.html#ip:123"><span class="id" title="variable">ip</span></a> <a class="idref" href="bedrock.prelude.sts.html#st:122"><span class="id" title="variable">st</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Lifting&nbsp;cancel_evt&nbsp;to&nbsp;sets&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Compose.dual_sets" class="idref" href="#Compose.dual_sets"><span class="id" title="definition">dual_sets</span></a> (<a id="sf:125" class="idref" href="#sf:125"><span class="id" title="binder">sf</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.config"><span class="id" title="record">Compose.config</span></a>) {<a id="n1:126" class="idref" href="#n1:126"><span class="id" title="binder">n1</span></a> <a id="n2:127" class="idref" href="#n2:127"><span class="id" title="binder">n2</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">Compose.name</span></a> <a class="idref" href="bedrock.prelude.sts.html#sf:125"><span class="id" title="variable">sf</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP1:128" class="idref" href="#STEP1:128"><span class="id" title="binder">STEP1</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#n1:126"><span class="id" title="variable">n1</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP2:129" class="idref" href="#STEP2:129"><span class="id" title="binder">STEP2</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#n2:127"><span class="id" title="variable">n2</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e1:130" class="idref" href="#e1:130"><span class="id" title="binder">e1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#e1:130"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.prelude.sts.html#STEP1:128"><span class="id" title="variable">STEP1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="e2:131" class="idref" href="#e2:131"><span class="id" title="binder">e2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#e2:131"><span class="id" title="variable">e2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.prelude.sts.html#STEP2:129"><span class="id" title="variable">STEP2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.cancel_evt"><span class="id" title="projection">Compose.cancel_evt</span></a> <a class="idref" href="bedrock.prelude.sts.html#sf:125"><span class="id" title="variable">sf</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#e1:130"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.prelude.sts.html#e2:131"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e2:132" class="idref" href="#e2:132"><span class="id" title="binder">e2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#e2:132"><span class="id" title="variable">e2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.prelude.sts.html#STEP2:129"><span class="id" title="variable">STEP2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="e1:133" class="idref" href="#e1:133"><span class="id" title="binder">e1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.sts.html#e1:133"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.prelude.sts.html#STEP1:128"><span class="id" title="variable">STEP1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.cancel_evt"><span class="id" title="projection">Compose.cancel_evt</span></a> <a class="idref" href="bedrock.prelude.sts.html#sf:125"><span class="id" title="variable">sf</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#e1:133"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.prelude.sts.html#e2:132"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Compose.Compose" class="idref" href="#Compose.Compose"><span class="id" title="section">Compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="sf:134" class="idref" href="#sf:134"><span class="id" title="binder">sf</span></a>: <a class="idref" href="bedrock.prelude.sts.html#Compose.config"><span class="id" title="record">config</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">n</span> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Compose.dual_sets_singletons" class="idref" href="#Compose.dual_sets_singletons"><span class="id" title="lemma">dual_sets_singletons</span></a> {<a id="n1:135" class="idref" href="#n1:135"><span class="id" title="binder">n1</span></a> <a id="n2:136" class="idref" href="#n2:136"><span class="id" title="binder">n2</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:137" class="idref" href="#s1:137"><span class="id" title="binder">s1</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#n1:135"><span class="id" title="variable">n1</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s2:138" class="idref" href="#s2:138"><span class="id" title="binder">s2</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#n2:136"><span class="id" title="variable">n2</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Compose.dual_sets"><span class="id" title="definition">dual_sets</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><a class="idref" href="bedrock.prelude.sts.html#s1:137"><span class="id" title="variable">s1</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><a class="idref" href="bedrock.prelude.sts.html#s2:138"><span class="id" title="variable">s2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.cancel_evt"><span class="id" title="projection">Compose.cancel_evt</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#s1:137"><span class="id" title="variable">s1</span></a> <a class="idref" href="bedrock.prelude.sts.html#s2:138"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.prelude.sts.html#Compose.dual_sets"><span class="id" title="definition">dual_sets</span></a>. <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Compose.dual_sets_proper" class="idref" href="#Compose.dual_sets_proper"><span class="id" title="instance">dual_sets_proper</span></a> {<a id="n1:139" class="idref" href="#n1:139"><span class="id" title="binder">n1</span></a> <a id="n2:140" class="idref" href="#n2:140"><span class="id" title="binder">n2</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#Compose.dual_sets"><span class="id" title="definition">dual_sets</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> (<span class="id" title="var">n1</span> := <a class="idref" href="bedrock.prelude.sts.html#n1:139"><span class="id" title="variable">n1</span></a>) (<span class="id" title="var">n2</span> := <a class="idref" href="bedrock.prelude.sts.html#n2:140"><span class="id" title="variable">n2</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>*. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.prelude.sts.html#Compose.dual_sets"><span class="id" title="definition">dual_sets</span></a>. <span class="id" title="tactic">intros</span> ??? ???. <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Compose.step_star_tau_lift" class="idref" href="#Compose.step_star_tau_lift"><span class="id" title="lemma">step_star_tau_lift</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n__comp:141" class="idref" href="#n__comp:141"><span class="id" title="binder">n__comp</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">Compose.name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="st:142" class="idref" href="#st:142"><span class="id" title="binder">st</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">Compose.State</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="st__comp':143" class="idref" href="#st__comp':143"><span class="id" title="binder">st__comp'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">Sts.State</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__comp:141"><span class="id" title="variable">n__comp</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">Sts.step_star_tau</span></a> <span class="id" title="var">_</span> (<a class="idref" href="bedrock.prelude.sts.html#st:142"><span class="id" title="variable">st</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__comp:141"><span class="id" title="variable">n__comp</span></a>) <a class="idref" href="bedrock.prelude.sts.html#st__comp':143"><span class="id" title="variable">st__comp'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a>  <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">Sts.step_star_tau</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.compose_lts"><span class="id" title="definition">compose_lts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>) <a class="idref" href="bedrock.prelude.sts.html#st:142"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.prelude.sts.html#st:142"><span class="id" title="variable">st</span></a> <a class="idref" href="Lens.Lens.html#LensNotations.::lens_scope:x_'&amp;:'_x"><span class="id" title="notation">&amp;:</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose._fam_sts"><span class="id" title="definition">_fam_sts</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#n__comp:141"><span class="id" title="variable">n__comp</span></a> <a class="idref" href="Lens.Lens.html#6fb92b1cc0767d1e7aa1412dec5d5a8a"><span class="id" title="notation">.=</span></a> <a class="idref" href="bedrock.prelude.sts.html#st__comp':143"><span class="id" title="variable">st__comp'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;[<span class="id" title="var">n</span>]. <span class="id" title="tactic">move</span>: <span class="id" title="var">st</span> <span class="id" title="var">st__comp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>=&gt;<span class="id" title="var">st</span> <span class="id" title="var">st__comp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt;/= &lt;-; <span class="id" title="tactic">exists</span> 0; <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_set_view_fun"><span class="id" title="lemma">dep_fn_insert_set_view_fun</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span>=&gt; /= [<span class="id" title="var">s'</span> [<span class="id" title="var">Hs'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> := <a class="idref" href="bedrock.prelude.base.html#Refine"><span class="id" title="abbreviation">Refine</span></a> (<span class="id" title="var">IHn</span> (<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert"><span class="id" title="definition">dep_fn_insert</span></a> <span class="id" title="var">n__comp</span> <span class="id" title="var">s'</span> <span class="id" title="var">st</span>) <span class="id" title="var">st__comp'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_eq"><span class="id" title="abbreviation">dep_fn_insert_eq</span></a> =&gt; <span class="id" title="var">H</span> {}/<span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_set_set_fun"><span class="id" title="lemma">dep_fn_insert_set_set_fun</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;[<span class="id" title="var">n'</span> <span class="id" title="var">Hstep_star'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span>), (<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert"><span class="id" title="definition">dep_fn_insert</span></a> <span class="id" title="var">n__comp</span> <span class="id" title="var">s'</span> <span class="id" title="var">st</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">n__comp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;use&nbsp;<span class="inlinecode"><span class="id" title="var">Compose_eq_except_insert_in</span></span>&nbsp;from&nbsp;downstream.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set"><span class="id" title="lemma">dep_fn_insert_view_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;<span class="id" title="var">n''</span>/<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_cons"><span class="id" title="lemma">not_elem_of_cons</span></a> [<span class="id" title="var">Hne</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set_ne"><span class="id" title="lemma">dep_fn_insert_view_set_ne</span></a> <span class="id" title="var">st</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Compose.step_star_ext_lift_single" class="idref" href="#Compose.step_star_ext_lift_single"><span class="id" title="lemma">step_star_ext_lift_single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n__comp:144" class="idref" href="#n__comp:144"><span class="id" title="binder">n__comp</span></a> <a id="n__cncl:145" class="idref" href="#n__cncl:145"><span class="id" title="binder">n__cncl</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.name"><span class="id" title="projection">Compose.name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="st:146" class="idref" href="#st:146"><span class="id" title="binder">st</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Compose.State"><span class="id" title="definition">Compose.State</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="st__comp':147" class="idref" href="#st__comp':147"><span class="id" title="binder">st__comp'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">Sts.State</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__comp:144"><span class="id" title="variable">n__comp</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lbl:148" class="idref" href="#lbl:148"><span class="id" title="binder">lbl</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__comp:144"><span class="id" title="variable">n__comp</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="st__cncl':149" class="idref" href="#st__cncl':149"><span class="id" title="binder">st__cncl'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.State"><span class="id" title="definition">Sts.State</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__cncl:145"><span class="id" title="variable">n__cncl</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lbl':150" class="idref" href="#lbl':150"><span class="id" title="binder">lbl'</span></a> : <a class="idref" href="bedrock.prelude.sts.html#Sts.Label"><span class="id" title="projection">Sts.Label</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">Compose.sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__cncl:145"><span class="id" title="variable">n__cncl</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#n__comp:144"><span class="id" title="variable">n__comp</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__cncl:145"><span class="id" title="variable">n__cncl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_ext"><span class="id" title="definition">Sts.step_star_ext</span></a> <span class="id" title="var">_</span> (<a class="idref" href="bedrock.prelude.sts.html#st:146"><span class="id" title="variable">st</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__comp:144"><span class="id" title="variable">n__comp</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.prelude.sts.html#lbl:148"><span class="id" title="variable">lbl</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.prelude.sts.html#st__comp':147"><span class="id" title="variable">st__comp'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.cancel_evt"><span class="id" title="projection">cancel_evt</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__comp:144"><span class="id" title="variable">n__comp</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__cncl:145"><span class="id" title="variable">n__cncl</span></a> <a class="idref" href="bedrock.prelude.sts.html#lbl:148"><span class="id" title="variable">lbl</span></a> <a class="idref" href="bedrock.prelude.sts.html#lbl':150"><span class="id" title="variable">lbl'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.step"><span class="id" title="definition">Sts.step</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.sts_name"><span class="id" title="projection">sts_name</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__cncl:145"><span class="id" title="variable">n__cncl</span></a>) (<a class="idref" href="bedrock.prelude.sts.html#st:146"><span class="id" title="variable">st</span></a> <a class="idref" href="bedrock.prelude.sts.html#n__cncl:145"><span class="id" title="variable">n__cncl</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.sts.html#lbl':150"><span class="id" title="variable">lbl'</span></a>) <a class="idref" href="bedrock.prelude.sts.html#st__cncl':149"><span class="id" title="variable">st__cncl'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau"><span class="id" title="definition">Sts.step_star_tau</span></a> (<a class="idref" href="bedrock.prelude.sts.html#Compose.compose_lts"><span class="id" title="definition">compose_lts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose.sf"><span class="id" title="variable">sf</span></a>) <a class="idref" href="bedrock.prelude.sts.html#st:146"><span class="id" title="variable">st</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.prelude.sts.html#st:146"><span class="id" title="variable">st</span></a> <a class="idref" href="Lens.Lens.html#LensNotations.::lens_scope:x_'&amp;:'_x"><span class="id" title="notation">&amp;:</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose._fam_sts"><span class="id" title="definition">_fam_sts</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#n__comp:144"><span class="id" title="variable">n__comp</span></a> <a class="idref" href="Lens.Lens.html#6fb92b1cc0767d1e7aa1412dec5d5a8a"><span class="id" title="notation">.=</span></a> <a class="idref" href="bedrock.prelude.sts.html#st__comp':147"><span class="id" title="variable">st__comp'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Lens.Lens.html#LensNotations.::lens_scope:x_'&amp;:'_x"><span class="id" title="notation">&amp;:</span></a> <a class="idref" href="bedrock.prelude.sts.html#Compose._fam_sts"><span class="id" title="definition">_fam_sts</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.prelude.sts.html#n__cncl:145"><span class="id" title="variable">n__cncl</span></a> <a class="idref" href="Lens.Lens.html#6fb92b1cc0767d1e7aa1412dec5d5a8a"><span class="id" title="notation">.=</span></a> <a class="idref" href="bedrock.prelude.sts.html#st__cncl':149"><span class="id" title="variable">st__cncl'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;<span class="id" title="var">Hne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;[<span class="id" title="var">st''</span> [<span class="id" title="var">st'''</span> [<span class="id" title="var">Hsteps_tau</span> [<span class="id" title="var">Hstep</span> <span class="id" title="var">Hsteps</span>]]]] <span class="id" title="var">Hcncl</span> <span class="id" title="var">Hstep'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.prelude.sts.html#Sts.step_star_tau_comp"><span class="id" title="lemma">Sts.step_star_tau_comp</span></a>; <span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.prelude.sts.html#Compose.step_star_tau_lift"><span class="id" title="lemma">step_star_tau_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set"><span class="id" title="lemma">dep_fn_insert_view_set</span></a> <span class="id" title="var">st</span> <span class="id" title="var">n__comp</span> <span class="id" title="var">st'''</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsteps</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<a class="idref" href="bedrock.prelude.sts.html#Compose.step_star_tau_lift"><span class="id" title="lemma">step_star_tau_lift</span></a> <span class="id" title="var">n__comp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert"><span class="id" title="definition">dep_fn_insert</span></a> <span class="id" title="var">n__comp</span> <span class="id" title="var">st'''</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert"><span class="id" title="definition">dep_fn_insert</span></a> <span class="id" title="var">n__cncl</span> <span class="id" title="var">st__cncl'</span> <span class="id" title="var">st</span>)) <span class="id" title="var">st__comp'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">Hsteps</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set"><span class="id" title="lemma">dep_fn_insert_view_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;<span class="id" title="var">n'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_set_set_fun"><span class="id" title="lemma">dep_fn_insert_set_set_fun</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= (<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_exchange_fun"><span class="id" title="lemma">dep_fn_insert_exchange_fun</span></a> <span class="id" title="var">_</span> <span class="id" title="var">n__comp</span> <span class="id" title="var">n__cncl</span>) //= =&gt;?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span>), <span class="id" title="var">_</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">n__comp</span>, <span class="id" title="var">n__cncl</span>, <span class="id" title="var">lbl</span>, <span class="id" title="var">lbl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set"><span class="id" title="lemma">dep_fn_insert_view_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.prelude.sts.html#Compose.eq_except"><span class="id" title="definition">eq_except</span></a>=&gt;<span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;/<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_cons"><span class="id" title="lemma">not_elem_of_cons</span></a> [<span class="id" title="var">Hne'</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#not_elem_of_cons"><span class="id" title="lemma">not_elem_of_cons</span></a> [<span class="id" title="var">Hne''</span> ?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set_ne"><span class="id" title="lemma">dep_fn_insert_view_set_ne</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set_ne"><span class="id" title="lemma">dep_fn_insert_view_set_ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">n__comp</span> <span class="id" title="var">n__cncl</span>) //<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.functions.html#dep_fn_insert_view_set"><span class="id" title="lemma">dep_fn_insert_view_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.sts.html#Compose.Compose"><span class="id" title="section">Compose</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.sts.html#Compose"><span class="id" title="module">Compose</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> <a id="LTS" class="idref" href="#LTS"><span class="id" title="abbreviation">LTS</span></a> := <a class="idref" href="bedrock.prelude.sts.html#sts"><span class="id" title="record">Sts.sts</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> <a id="lts_state" class="idref" href="#lts_state"><span class="id" title="abbreviation">lts_state</span></a> := <a class="idref" href="bedrock.prelude.sts.html#_state"><span class="id" title="projection">Sts._state</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> <a id="lts_step" class="idref" href="#lts_step"><span class="id" title="abbreviation">lts_step</span></a> := <a class="idref" href="bedrock.prelude.sts.html#_step"><span class="id" title="projection">Sts._step</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> <a id="lts_init_state" class="idref" href="#lts_init_state"><span class="id" title="abbreviation">lts_init_state</span></a> := <a class="idref" href="bedrock.prelude.sts.html#_init_state"><span class="id" title="projection">Sts._init_state</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;unify&nbsp;<span class="inlinecode"><span class="id" title="var">reachable</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">Sts.step_star</span></span><br/>
The&nbsp;following&nbsp;lemma&nbsp;should&nbsp;hold:<br/>
Lemma&nbsp;reachable_step_star&nbsp;{l}&nbsp;(lts&nbsp;:&nbsp;LTS&nbsp;l)&nbsp;s&nbsp;es&nbsp;s'&nbsp;:<br/>
&nbsp;&nbsp;reachable&nbsp;lts&nbsp;s&nbsp;es&nbsp;s'&nbsp;&lt;-&gt;&nbsp;Sts.step_star&nbsp;lts&nbsp;s&nbsp;es&nbsp;s'.<br/>
<br/>
The&nbsp;difference&nbsp;is&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">reachable</span></span>&nbsp;recurses&nbsp;on&nbsp;the&nbsp;tail&nbsp;(es&nbsp;++&nbsp;<span class="inlinecode"><span class="id" title="var">e</span></span>),&nbsp;while<br/>
<span class="inlinecode"><span class="id" title="var">Sts.step_star</span></span>&nbsp;recurses&nbsp;on&nbsp;the&nbsp;head&nbsp;(e&nbsp;::&nbsp;es).<br/>
*)</span><br/>
<span class="id" title="keyword">Inductive</span> <a id="reachable" class="idref" href="#reachable"><span class="id" title="definition, inductive"><span id="reachable_ind" class="id"><span id="reachable_sind" class="id">reachable</span></span></span></a> {<a id="Label:151" class="idref" href="#Label:151"><span class="id" title="binder">Label</span></a> : <span class="id" title="keyword">Type</span>} (<a id="lts:152" class="idref" href="#lts:152"><span class="id" title="binder">lts</span></a> : <a class="idref" href="bedrock.prelude.sts.html#LTS"><span class="id" title="abbreviation">LTS</span></a> <a class="idref" href="bedrock.prelude.sts.html#Label:151"><span class="id" title="variable">Label</span></a>) (<a id="s:153" class="idref" href="#s:153"><span class="id" title="binder">s</span></a> : <a class="idref" href="bedrock.prelude.sts.html#lts:152"><span class="id" title="variable">lts</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#lts_state"><span class="id" title="abbreviation">lts_state</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">Label</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">lts</span>.(<a class="idref" href="bedrock.prelude.sts.html#lts_state"><span class="id" title="abbreviation">lts_state</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="ReachableDone" class="idref" href="#ReachableDone"><span class="id" title="constructor">ReachableDone</span></a> : <a class="idref" href="bedrock.prelude.sts.html#reachable:154"><span class="id" title="inductive">reachable</span></a> <a class="idref" href="bedrock.prelude.sts.html#lts:152"><span class="id" title="variable">lts</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:153"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:153"><span class="id" title="variable">s</span></a><br/>
| <a id="ReachableStep" class="idref" href="#ReachableStep"><span class="id" title="constructor">ReachableStep</span></a> {<a id="e:156" class="idref" href="#e:156"><span class="id" title="binder">e</span></a> <a id="es:157" class="idref" href="#es:157"><span class="id" title="binder">es</span></a> <a id="s':158" class="idref" href="#s':158"><span class="id" title="binder">s'</span></a> <a id="s'':159" class="idref" href="#s'':159"><span class="id" title="binder">s''</span></a>} (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#reachable:154"><span class="id" title="inductive">reachable</span></a> <a class="idref" href="bedrock.prelude.sts.html#lts:152"><span class="id" title="variable">lts</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:153"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#es:157"><span class="id" title="variable">es</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':158"><span class="id" title="variable">s'</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.prelude.sts.html#lts:152"><span class="id" title="variable">lts</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#lts_step"><span class="id" title="abbreviation">lts_step</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s':158"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.prelude.sts.html#e:156"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.prelude.sts.html#s'':159"><span class="id" title="variable">s''</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="bedrock.prelude.sts.html#reachable:154"><span class="id" title="inductive">reachable</span></a> <a class="idref" href="bedrock.prelude.sts.html#lts:152"><span class="id" title="variable">lts</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:153"><span class="id" title="variable">s</span></a> (<a class="idref" href="bedrock.prelude.sts.html#es:157"><span class="id" title="variable">es</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.prelude.sts.html#e:156"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s'':159"><span class="id" title="variable">s''</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reachable_nil" class="idref" href="#reachable_nil"><span class="id" title="lemma">reachable_nil</span></a> {<a id="Label:160" class="idref" href="#Label:160"><span class="id" title="binder">Label</span></a> : <span class="id" title="keyword">Type</span>} (<a id="lts:161" class="idref" href="#lts:161"><span class="id" title="binder">lts</span></a> : <a class="idref" href="bedrock.prelude.sts.html#sts"><span class="id" title="record">Sts.sts</span></a> <a class="idref" href="bedrock.prelude.sts.html#Label:160"><span class="id" title="variable">Label</span></a>) <a id="s:162" class="idref" href="#s:162"><span class="id" title="binder">s</span></a> <a id="s':163" class="idref" href="#s':163"><span class="id" title="binder">s'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#reachable"><span class="id" title="inductive">reachable</span></a> <a class="idref" href="bedrock.prelude.sts.html#lts:161"><span class="id" title="variable">lts</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:162"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':163"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:162"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':163"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [|???? <span class="id" title="var">REACH</span> ? <span class="id" title="var">EqH</span>]; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#app_nil"><span class="id" title="lemma">app_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EqH</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="reachable_singleton" class="idref" href="#reachable_singleton"><span class="id" title="lemma">reachable_singleton</span></a> {<a id="Label:164" class="idref" href="#Label:164"><span class="id" title="binder">Label</span></a> : <span class="id" title="keyword">Type</span>} (<a id="lts:165" class="idref" href="#lts:165"><span class="id" title="binder">lts</span></a> : <a class="idref" href="bedrock.prelude.sts.html#LTS"><span class="id" title="abbreviation">LTS</span></a> <a class="idref" href="bedrock.prelude.sts.html#Label:164"><span class="id" title="variable">Label</span></a>) <a id="s:166" class="idref" href="#s:166"><span class="id" title="binder">s</span></a> <a id="e:167" class="idref" href="#e:167"><span class="id" title="binder">e</span></a> <a id="s':168" class="idref" href="#s':168"><span class="id" title="binder">s'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.sts.html#reachable"><span class="id" title="inductive">reachable</span></a> <a class="idref" href="bedrock.prelude.sts.html#lts:165"><span class="id" title="variable">lts</span></a> <a class="idref" href="bedrock.prelude.sts.html#s:166"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.prelude.sts.html#e:167"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':168"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="bedrock.prelude.sts.html#lts:165"><span class="id" title="variable">lts</span></a>.(<a class="idref" href="bedrock.prelude.sts.html#lts_step"><span class="id" title="abbreviation">lts_step</span></a>) <a class="idref" href="bedrock.prelude.sts.html#s:166"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.sts.html#e:167"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.prelude.sts.html#s':168"><span class="id" title="variable">s'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">STEP</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">STEP</span> <span class="id" title="keyword">as</span> [|???? <span class="id" title="var">REACH</span> ? <span class="id" title="var">EqH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">es</span>; <span class="id" title="var">simplify_list_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.prelude.sts.html#reachable_nil"><span class="id" title="lemma">reachable_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">REACH</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#app_nil"><span class="id" title="lemma">app_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (@<a class="idref" href="bedrock.prelude.sts.html#ReachableStep"><span class="id" title="constructor">ReachableStep</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); [|<span class="id" title="var">done</span>]. <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
