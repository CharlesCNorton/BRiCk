<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> `theories/` </a>
      <a href="../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.lang.cpp.logic.new_delete</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2021-2023&nbsp;BedRock&nbsp;Systems,&nbsp;Inc.<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">iris.bi.lib.fractional</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">iris.proofmode.proofmode</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.errors.html#"><span class="id" title="library">bedrock.lang.bi.errors</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">bedrock.lang.cpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.ast.html#"><span class="id" title="library">ast</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.html#"><span class="id" title="library">semantics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">bedrock.lang.bi.spec</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.spec.frac_splittable.html#"><span class="id" title="library">frac_splittable</span></a> <a class="idref" href="bedrock.lang.bi.spec.nary_classes.html#"><span class="id" title="library">nary_classes</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">bedrock.lang.cpp.logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.pred.html#"><span class="id" title="library">pred</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#"><span class="id" title="library">path_pred</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#"><span class="id" title="library">heap_pred</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.destroy.html#"><span class="id" title="library">destroy</span></a> <a class="idref" href="bedrock.lang.cpp.logic.initializers.html#"><span class="id" title="library">initializers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.dispatch.html#"><span class="id" title="library">dispatch</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.wp.html#"><span class="id" title="library">wp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.call.html#"><span class="id" title="library">call</span></a> <a class="idref" href="bedrock.lang.cpp.logic.translation_unit.html#"><span class="id" title="library">translation_unit</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <a id="Expr__newdelete" class="idref" href="#Expr__newdelete"><span class="id" title="module">Expr__newdelete</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">free_scope</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;hide&nbsp;<span class="inlinecode"><span class="id" title="var">genv</span></span>&nbsp;argument,&nbsp;it's&nbsp;a&nbsp;typeclass&nbsp;anyway&nbsp;*)</span><br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.semantics.types.html#size_of"><span class="id" title="definition">size_of</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab224"></a><h1 class="section">Weakest pre-condition for <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.new"><span class="id" title="section">new</span></a></span> and <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete"><span class="id" title="section">delete</span></a></span> expressions</h1>

   *
<a id="lab225"></a><h1 class="section">The semantics of <code>new</code> and <code>delete</code> expressions (including their array forms)</h1>

<a id="lab226"></a><h1 class="section">are *very* complex in C++. This is due to a litany of corner cases such as:</h1>

<a id="lab227"></a><h1 class="section">- the need to pair allocation and de-allocation functions</h1>

<a id="lab228"></a><h1 class="section">- the existance of placement <code>new</code></h1>

<a id="lab229"></a><h1 class="section">- the need to handle alignment as well as size.</h1>

<a id="lab230"></a><h1 class="section">- the potential for padding bytes.</h1>

<a id="lab231"></a><h1 class="section">- the potential to merge allocations. (BRiCk does not attempt to support this)</h1>

   *
<a id="lab232"></a><h1 class="section">NOTE It is important that these rules are sound, but less important that</h1>

<a id="lab233"></a><h1 class="section">they are complete. When in doubt, we err on the side of caution and under-specify</h1>

<a id="lab234"></a><h1 class="section">the behavior of various constructs.</h1>

   *
<a id="lab235"></a><h1 class="section">If you run into code that requires addditional semantic specification, please file</h1>

<a id="lab236"></a><h1 class="section">an issue.</h1>

   
<div class="paragraph"> </div>

 Dynamic Typing at <code>delete</code>-Time

<div class="paragraph"> </div>

      The C++ Standard ascribes undefined behavior to any <code>delete</code>-calls which
      have a Static Type which differs from the Dynamic Type that was associated
      with the pointer when it was initially created via <code>new</code>
      &lt;https://eel.is/c++draft/expr.delete3>:
      | (3) In a single-object delete expression, if the static type of the object to be
      |     deleted is not similar ([conv.qual]) to its dynamic type and the selected
      |     deallocation function (see below) is not a destroying operator delete, the
      |     static type shall be a base class of the dynamic type of the object to be
      |     deleted and the static type shall have a virtual destructor or the behavior is
      |     undefined. In an array delete expression, if the dynamic type of the object to
      |     be deleted is not similar to its static type, the behavior is undefined.
      [new_tokenR q allocation_type] tracks this Dynamic Type information.

      Making this [Fractional] instead of [Exclusive] helps write representation
      predicates for classes like the following:
      <<
      class Foo {
        int* x;
        Foo() : x(new int) {}
      };
      >>

      [obj |-> new_tokenR q (ty, storage, offset)] is ownership that:
      - [obj] is the constructed pointer
      - [ty] is the <<new>>d type, *including qualifiers*.
      - [storage] is the storage pointer that underlies [obj],
        see [new_token_provides_storage].
      - [offset] is the size of the meta-data owned by the C++ abstract machine.
        This overhead lives at [storage .[ Tuchar ! -offset ] |-> blockR 1 offset].
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a id="Expr__newdelete.new_tokenR" class="idref" href="#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">`{</span><a id="eb9571817dd417966f307c3a9de8fe7f" class="idref" href="#eb9571817dd417966f307c3a9de8fe7f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>} {<a id="cd01c1f8eba18116122f50d6eb622af2" class="idref" href="#cd01c1f8eba18116122f50d6eb622af2"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>} (<a id="q:5" class="idref" href="#q:5"><span class="id" title="binder">q</span></a> : <span class="id" title="record">Qp</span>) (<a id="ty_storage_overhead:6" class="idref" href="#ty_storage_overhead:6"><span class="id" title="binder">ty_storage_overhead</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a><span class="id" title="notation">),</span> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#Rep"><span class="id" title="definition">Rep</span></a>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> σ} <span class="id" title="var">_</span>%<span class="id" title="var">Qp</span> <span class="id" title="var">_</span>%<span class="id" title="var">N</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.Tbyte" class="idref" href="#Expr__newdelete.Tbyte"><span class="id" title="abbreviation">Tbyte</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tuchar"><span class="id" title="abbreviation">Tuchar</span></a> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Expr__newdelete.with_cpp_logic" class="idref" href="#Expr__newdelete.with_cpp_logic"><span class="id" title="section">with_cpp_logic</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="2ab75602e9b8af2ca6fd6dbdb1e68a19" class="idref" href="#2ab75602e9b8af2ca6fd6dbdb1e68a19"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>} {<a id="303c62d4b554442e1659318da8f8db12" class="idref" href="#303c62d4b554442e1659318da8f8db12"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Declare</span> <span class="id" title="keyword">Instance</span> <a id="Expr__newdelete.new_token_provides_storage" class="idref" href="#Expr__newdelete.new_token_provides_storage"><span class="id" title="instance">new_token_provides_storage</span></a> : <span class="id" title="notation">forall</span> <a id="obj:12" class="idref" href="#obj:12"><span class="id" title="binder">obj</span></a> <a id="q:13" class="idref" href="#q:13"><span class="id" title="binder">q</span></a> <a id="ty:14" class="idref" href="#ty:14"><span class="id" title="binder">ty</span></a> <a id="storage:15" class="idref" href="#storage:15"><span class="id" title="binder">storage</span></a> (<a id="offset:16" class="idref" href="#offset:16"><span class="id" title="binder">offset</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.observe.html#Observe"><span class="id" title="class">Observe</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.pred.html#L.provides_storage"><span class="id" title="axiom">provides_storage</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage:15"><span class="id" title="variable">storage</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">.[</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tuchar"><span class="id" title="abbreviation">Tuchar</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#offset:16"><span class="id" title="variable">offset</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">]</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj:12"><span class="id" title="variable">obj</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:14"><span class="id" title="variable">ty</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj:12"><span class="id" title="variable">obj</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#q:13"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:14"><span class="id" title="variable">ty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage:15"><span class="id" title="variable">storage</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#offset:16"><span class="id" title="variable">offset</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Declare</span> <span class="id" title="keyword">Instance</span> <a id="Expr__newdelete.new_token_type_size" class="idref" href="#Expr__newdelete.new_token_type_size"><span class="id" title="instance">new_token_type_size</span></a> : <span class="id" title="notation">forall</span> <a id="q:17" class="idref" href="#q:17"><span class="id" title="binder">q</span></a> <a id="ty:18" class="idref" href="#ty:18"><span class="id" title="binder">ty</span></a> <a id="storage:19" class="idref" href="#storage:19"><span class="id" title="binder">storage</span></a> (<a id="offset:20" class="idref" href="#offset:20"><span class="id" title="binder">offset</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.observe.html#Observe"><span class="id" title="class">Observe</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="sz:21" class="idref" href="#sz:21"><span class="id" title="binder">sz</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.types.html#size_of"><span class="id" title="definition">size_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:18"><span class="id" title="variable">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#sz:21"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#q:17"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:18"><span class="id" title="variable">ty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage:19"><span class="id" title="variable">storage</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#offset:20"><span class="id" title="variable">offset</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Declare</span> <span class="id" title="keyword">Instance</span> <a id="Expr__newdelete.new_tokenR_frac" class="idref" href="#Expr__newdelete.new_tokenR_frac"><span class="id" title="instance">new_tokenR_frac</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.spec.frac_splittable.html#FracSplittable_1"><span class="id" title="class">FracSplittable_1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Declare</span> <span class="id" title="keyword">Instance</span> <a id="Expr__newdelete.new_tokenR_agree" class="idref" href="#Expr__newdelete.new_tokenR_agree"><span class="id" title="instance">new_tokenR_agree</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.fractional.html#nary.AgreeF1"><span class="id" title="abbreviation">AgreeF1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Expr__newdelete.with_cpp_logic.with_region" class="idref" href="#Expr__newdelete.with_cpp_logic.with_region"><span class="id" title="section">with_region</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="c7f5d2869829b618abb6c650203e3006" class="idref" href="#c7f5d2869829b618abb6c650203e3006"><span class="id" title="binder">ρ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#region"><span class="id" title="inductive">region</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> (<a id="Expr__newdelete.with_cpp_logic.with_region.tu" class="idref" href="#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.wp_init" class="idref" href="#Expr__newdelete.wp_init"><span class="id" title="abbreviation">wp_init</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_init"><span class="id" title="axiom">wp_init</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#6b338ce916be5cae39be4bbc4d76ba0a"><span class="id" title="variable">ρ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.wp_initialize" class="idref" href="#Expr__newdelete.wp_initialize"><span class="id" title="abbreviation">wp_initialize</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.initializers.html#wp_initialize"><span class="id" title="definition">wp_initialize</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#6b338ce916be5cae39be4bbc4d76ba0a"><span class="id" title="variable">ρ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.default_initialize" class="idref" href="#Expr__newdelete.default_initialize"><span class="id" title="abbreviation">default_initialize</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.initializers.html#default_initialize"><span class="id" title="abbreviation">default_initialize</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.wp_operand" class="idref" href="#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_operand"><span class="id" title="axiom">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#6b338ce916be5cae39be4bbc4d76ba0a"><span class="id" title="variable">ρ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.wp_args" class="idref" href="#Expr__newdelete.wp_args"><span class="id" title="abbreviation">wp_args</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.call.html#wp_args"><span class="id" title="definition">wp_args</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#6b338ce916be5cae39be4bbc4d76ba0a"><span class="id" title="variable">ρ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&lt;&lt;std::align_val_t&gt;&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.Talign_val_t" class="idref" href="#Expr__newdelete.Talign_val_t"><span class="id" title="abbreviation">Talign_val_t</span></a> := (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tenum"><span class="id" title="constructor">Tenum</span></a> "_ZN3std11align_val_tE") (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.Tbyte" class="idref" href="#Expr__newdelete.Tbyte"><span class="id" title="abbreviation">Tbyte</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tuchar"><span class="id" title="abbreviation">Tuchar</span></a> (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Expr__newdelete.with_cpp_logic.with_region.new" class="idref" href="#Expr__newdelete.with_cpp_logic.with_region.new"><span class="id" title="section">new</span></a>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.new"><span class="id" title="section">new</span></a></span> <span class="inlinecode">(...)</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.algebra.coGset.html#C"><span class="id" title="abbreviation">C</span></a>(...)</span> &lt;https://eel.is/c++draft/expr.new&gt;
<ul class="doclist">
<li> invokes a C++ new operator <span class="inlinecode"><span class="id" title="var">new_fn</span></span>, which returns a storage pointer <span class="inlinecode"><span class="id" title="var">storage_ptr</span></span>;
              <span class="inlinecode"><span class="id" title="var">new_fn</span></span> <i>might</i> allocate memory
              (&lt;https://eel.is/c++draft/expr.new10>), or return an argument
              address for some forms of placement new;
            - constructs an object pointer [obj_ptr], which shares the address of [storage_ptr];
            - invokes the constructor C over [obj_ptr].

            Furthermore <https://eel.is/c++draft/expr.new22&gt;:

</li>
</ul>
            | (22) A new-expression that creates an object of type <code>T</code> initializes that
            |      object as follows:
            | (22.1) If the new-initializer is omitted, the object is default-initialized
            |        (<span class="inlinecode"><span class="id" title="var">dcl.init</span></span>).
            |        <span class="inlinecode"><span class="id" title="var">Note</span></span> <span class="inlinecode">12:</span> <span class="inlinecode"><span class="id" title="var">If</span></span> <span class="inlinecode"><span class="id" title="keyword">no</span></span> <span class="inlinecode"><span class="id" title="var">initialization</span></span> <span class="inlinecode"><span class="id" title="keyword">is</span></span> <span class="inlinecode"><span class="id" title="var">performed</span>,</span> <span class="inlinecode"><span class="id" title="var">the</span></span> <span class="inlinecode"><span class="id" title="var">object</span></span> <span class="inlinecode"><span class="id" title="var">has</span></span> <span class="inlinecode"><span class="id" title="var">an</span></span>
            <span class="inlinecode">|</span>         <span class="inlinecode"><span class="id" title="var">indeterminate</span></span> <span class="inlinecode"><span class="id" title="var">value</span>.</span> <span class="inlinecode">—</span> <span class="inlinecode"><span class="id" title="keyword">end</span></span> <span class="inlinecode"><span class="id" title="var">note</span></span>
            | (22.2) Otherwise, the new-initializer is interpreted according to the
            |        initialization rules of <span class="inlinecode"><span class="id" title="var">dcl.init</span></span> for direct-initialization.
            We use <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.stmt.html#Stmt.default_initialize"><span class="id" title="abbreviation">default_initialize</span></a></span> for default ininitialization as it is defined in the
            C++ Standard and we use <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_init"><span class="id" title="abbreviation">wp_init</span></a></span> for direct-initialization as defined
            by the C++ Standard.

<div class="paragraph"> </div>

            ~~~ Implementation Details ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<div class="paragraph"> </div>

<ul class="doclist">
<li> This axiom assumes that <span class="inlinecode"><span class="id" title="var">storage_ptr</span></span> points to a character array that will
              <i>provide storage</i> for a new <i>complete object</i> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.pred_paradoxes.html#with_cpp.type_ptr_object_representation_full_is_unsound.o"><span class="id" title="variable">o</span></a></span>
              (&lt;http://eel.is/c++draft/intro.objectdef:provides_storage>).

              In that case, the C++ abstract machine can choose to make [obj_ptr
              <> storage_ptr] (while keeping the same address), so that the old
              pointer [storage_ptr] cannot be used to access the new object.
              Inspired by Cerberus, we model this by _allowing_ [obj_ptr] to have
              a different allocation ID.

            - The created object might be a subobject of an existing object
              (pointed to by some pointer [p])
              (<https://eel.is/c++draft/basic.memobjintro.object-2&gt;).
              It is unclear whether that requires <span class="inlinecode"><span class="id" title="var">storage_ptr</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.pred_paradoxes.html#with_cpp.type_ptr_object_representation_full_is_unsound.p"><span class="id" title="variable">p</span></a></span> or just
              <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.model.simple_pred.html#SimpleCPP.provides_storage"><span class="id" title="definition">provides_storage</span></a></span> <span class="inlinecode"><span class="id" title="var">storage_ptr</span></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.pred_paradoxes.html#with_cpp.type_ptr_object_representation_full_is_unsound.p"><span class="id" title="variable">p</span></a></span>.
              In that case, we plan to allow proving that <span class="inlinecode"><span class="id" title="var">obj_ptr</span></span> = <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.pred_paradoxes.html#with_cpp.type_ptr_object_representation_full_is_unsound.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">.,</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.pred_paradoxes.html#with_cpp.type_ptr_object_representation_full_is_unsound.o"><span class="id" title="variable">o</span></a></span>; we
              offer no such support at present; we account for this case by not specifying that
              <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.model.inductive_pointers.html#PTRS_IMPL.ptr_alloc_id"><span class="id" title="definition">ptr_alloc_id</span></a></span> <span class="inlinecode"><span class="id" title="var">obj_ptr</span></span> <span class="inlinecode">&lt;&gt;</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.model.inductive_pointers.html#PTRS_IMPL.ptr_alloc_id"><span class="id" title="definition">ptr_alloc_id</span></a></span> <span class="inlinecode"><span class="id" title="var">storage_ptr</span></span>.

</li>
<li> Currently, we do not model coalescing of multiple allocations
              (&lt;https://eel.is/c++draft/expr.new14>).
         

</li>
</ul>
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Expr__newdelete.wp_opt_initialize" class="idref" href="#Expr__newdelete.wp_opt_initialize"><span class="id" title="definition">wp_opt_initialize</span></a> (<a id="oinit:24" class="idref" href="#oinit:24"><span class="id" title="binder">oinit</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>) <a id="aty:25" class="idref" href="#aty:25"><span class="id" title="binder">aty</span></a> <a id="obj_ptr:26" class="idref" href="#obj_ptr:26"><span class="id" title="binder">obj_ptr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#oinit:24"><span class="id" title="variable">oinit</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="comment">(*&nbsp;default_initialize&nbsp;the&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.default_initialize"><span class="id" title="abbreviation">default_initialize</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:25"><span class="id" title="variable">aty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:26"><span class="id" title="variable">obj_ptr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">init</span> =&gt; <span class="comment">(*&nbsp;Use&nbsp;<span class="inlinecode"><span class="id" title="var">init</span></span>&nbsp;to&nbsp;initialize&nbsp;the&nbsp;memory&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_initialize"><span class="id" title="abbreviation">wp_initialize</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:25"><span class="id" title="variable">aty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:26"><span class="id" title="variable">obj_ptr</span></a> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_opt_initialize"><span class="id" title="definition">wp_opt_initialize</span></a> !<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> /.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;function&nbsp;takes&nbsp;the&nbsp;size&nbsp;and&nbsp;alignment&nbsp;explicitly&nbsp;because<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;semantics&nbsp;of&nbsp;&lt;&lt;operator&nbsp;new<span class="inlinecode"></span>&gt;&gt;&nbsp;can&nbsp;add&nbsp;an&nbsp;unspecified&nbsp;amount<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;overhead&nbsp;to&nbsp;the&nbsp;allocation.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Question:&nbsp;Is&nbsp;it&nbsp;possible&nbsp;for&nbsp;the&nbsp;C++&nbsp;abstract&nbsp;machine&nbsp;to&nbsp;pass&nbsp;an<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alignment&nbsp;that&nbsp;is&nbsp;different&nbsp;than&nbsp;the&nbsp;alignment&nbsp;of&nbsp;the&nbsp;object&nbsp;type?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Expr__newdelete.new_implicits" class="idref" href="#Expr__newdelete.new_implicits"><span class="id" title="definition">new_implicits</span></a> (<a id="pass_align:28" class="idref" href="#pass_align:28"><span class="id" title="binder">pass_align</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="sz:29" class="idref" href="#sz:29"><span class="id" title="binder">sz</span></a> <a id="al:30" class="idref" href="#al:30"><span class="id" title="binder">al</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;evaluation&nbsp;of&nbsp;these&nbsp;expressions&nbsp;implicitly&nbsp;check&nbsp;that&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;are&nbsp;representable&nbsp;in&nbsp;their&nbsp;respective&nbsp;types&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eint"><span class="id" title="constructor">Eint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#sz:29"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tsize_t"><span class="id" title="abbreviation">Tsize_t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pass_align:28"><span class="id" title="variable">pass_align</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecast"><span class="id" title="constructor">Ecast</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Cintegral"><span class="id" title="constructor">Cintegral</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eint"><span class="id" title="constructor">Eint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#al:30"><span class="id" title="variable">al</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tsize_t"><span class="id" title="abbreviation">Tsize_t</span></a>) <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.Talign_val_t"><span class="id" title="abbreviation">Talign_val_t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="Expr__newdelete.wp_operand_new" class="idref" href="#Expr__newdelete.wp_operand_new"><span class="id" title="axiom">wp_operand_new</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="oinit:31" class="idref" href="#oinit:31"><span class="id" title="binder">oinit</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="new_fn:32" class="idref" href="#new_fn:32"><span class="id" title="binder">new_fn</span></a> (<a id="pass_align:33" class="idref" href="#pass_align:33"><span class="id" title="binder">pass_align</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="new_args:34" class="idref" href="#new_args:34"><span class="id" title="binder">new_args</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_args:34"><span class="id" title="variable">new_args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a id="aty:35" class="idref" href="#aty:35"><span class="id" title="binder">aty</span></a> <a id="Q:36" class="idref" href="#Q:36"><span class="id" title="binder">Q</span></a> <a id="targs:37" class="idref" href="#targs:37"><span class="id" title="binder">targs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nfty:38" class="idref" href="#nfty:38"><span class="id" title="binder">nfty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#normalize_type"><span class="id" title="definition">normalize_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:32"><span class="id" title="variable">new_fn</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.call.html#arg_types"><span class="id" title="definition">arg_types</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#nfty:38"><span class="id" title="variable">nfty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#targs:37"><span class="id" title="variable">targs</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="alloc_sz:39" class="idref" href="#alloc_sz:39"><span class="id" title="binder">alloc_sz</span></a> <a id="alloc_al:40" class="idref" href="#alloc_al:40"><span class="id" title="binder">alloc_al</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.semantics.types.html#size_of"><span class="id" title="definition">size_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:35"><span class="id" title="variable">aty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:39"><span class="id" title="variable">alloc_sz</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.semantics.types.html#align_of"><span class="id" title="axiom">align_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:35"><span class="id" title="variable">aty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:40"><span class="id" title="variable">alloc_al</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> <a id="implicit_args:41" class="idref" href="#implicit_args:41"><span class="id" title="binder">implicit_args</span></a> := <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_implicits"><span class="id" title="definition">new_implicits</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pass_align:33"><span class="id" title="variable">pass_align</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:39"><span class="id" title="variable">alloc_sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:40"><span class="id" title="variable">alloc_al</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <span class="id" title="var">_</span>, <a id="vs:42" class="idref" href="#vs:42"><span class="id" title="binder">vs</span></a>, <a id="ifree:43" class="idref" href="#ifree:43"><span class="id" title="binder">ifree</span></a>, <a id="free:44" class="idref" href="#free:44"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_args"><span class="id" title="abbreviation">wp_args</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#evaluation_order.nd"><span class="id" title="constructor">evaluation_order.nd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#targs:37"><span class="id" title="variable">targs</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#implicit_args:41"><span class="id" title="variable">implicit_args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_args:34"><span class="id" title="variable">new_args</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="res:45" class="idref" href="#res:45"><span class="id" title="binder">res</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_fptr"><span class="id" title="axiom">wp_fptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#types"><span class="id" title="projection">types</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#nfty:38"><span class="id" title="variable">nfty</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:32"><span class="id" title="variable">new_fn</span></a><span class="id" title="notation">.1</span>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#vs:42"><span class="id" title="variable">vs</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ifree:43"><span class="id" title="variable">ifree</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="storage_val:46" class="idref" href="#storage_val:46"><span class="id" title="binder">storage_val</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.call.html#operand_receive"><span class="id" title="abbreviation">operand_receive</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#res:45"><span class="id" title="variable">res</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="storage_ptr:47" class="idref" href="#storage_ptr:47"><span class="id" title="binder">storage_ptr</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_val:46"><span class="id" title="variable">storage_val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:47"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:47"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:36"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:47"><span class="id" title="variable">storage_ptr</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:44"><span class="id" title="variable">free</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;<span class="inlinecode"><span class="id" title="var">new_args</span></span> <span class="inlinecode">&lt;&gt;</span> <span class="inlinecode"><span class="id" title="var">nil</span></span>&nbsp;exists&nbsp;because&nbsp;the&nbsp;default&nbsp;&lt;&lt;operator&nbsp;new&gt;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;never&nbsp;allowed&nbsp;to&nbsp;return&nbsp;<span class="inlinecode"><span class="id" title="var">nullptr</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;C++&nbsp;requires&nbsp;the&nbsp;resulting&nbsp;pointer&nbsp;to&nbsp;be&nbsp;aligned&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;__STDCPP_DEFAULT_NEW_ALIGNMENT__&gt;&gt;&nbsp;even&nbsp;in&nbsp;cases&nbsp;when&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required&nbsp;alignment&nbsp;is&nbsp;actually&nbsp;smaller.&nbsp;When&nbsp;the&nbsp;alignment&nbsp;is<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;smaller,&nbsp;<span class="inlinecode"><span class="id" title="var">pass_align</span></span>&nbsp;will&nbsp;be&nbsp;<span class="inlinecode"><span class="id" title="var">false</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:47"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.simple.html#alignedR"><span class="id" title="abbreviation">alignedR</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pass_align:33"><span class="id" title="variable">pass_align</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:40"><span class="id" title="variable">alloc_al</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#STDCPP_DEFAULT_NEW_ALIGNMENT"><span class="id" title="definition">STDCPP_DEFAULT_NEW_ALIGNMENT</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:47"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.block.html#blockR"><span class="id" title="definition">blockR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:39"><span class="id" title="variable">alloc_sz</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">(</span></a><a id="obj_ptr:48" class="idref" href="#obj_ptr:48"><span class="id" title="binder">obj_ptr</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.pred.html#L.provides_storage"><span class="id" title="axiom">provides_storage</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:47"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:48"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:35"><span class="id" title="variable">aty</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="free':49" class="idref" href="#free':49"><span class="id" title="binder">free'</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_opt_initialize"><span class="id" title="definition">wp_opt_initialize</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#oinit:31"><span class="id" title="variable">oinit</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:35"><span class="id" title="variable">aty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:48"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;also&nbsp;ensures&nbsp;these&nbsp;pointers&nbsp;share&nbsp;their<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;address&nbsp;(see&nbsp;<span class="inlinecode"><span class="id" title="var">provides_storage_same_address</span></span>)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Track&nbsp;the&nbsp;type&nbsp;we&nbsp;are&nbsp;allocating<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;checked&nbsp;at&nbsp;<span class="inlinecode"><span class="id" title="var">delete</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;important&nbsp;that&nbsp;this&nbsp;preserves<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`const`ness&nbsp;of&nbsp;the&nbsp;type.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:48"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:35"><span class="id" title="variable">aty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:47"><span class="id" title="variable">storage_ptr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 0%<span class="id" title="var">N</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:36"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:48"><span class="id" title="variable">obj_ptr</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free':49"><span class="id" title="variable">free'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:44"><span class="id" title="variable">free</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Enew"><span class="id" title="constructor">Enew</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:32"><span class="id" title="variable">new_fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_args:34"><span class="id" title="variable">new_args</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#new_form.Allocating"><span class="id" title="constructor">new_form.Allocating</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pass_align:33"><span class="id" title="variable">pass_align</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:35"><span class="id" title="variable">aty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#oinit:31"><span class="id" title="variable">oinit</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:36"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
The C++ standard distinguishes placement/non-allocating forms in
<a id="lab237"></a><h1 class="section">&lt;https://eel.is/c++draft/new.delete.placement1>.</h1>

         *
<a id="lab238"></a><h1 class="section">NOTE: placement &lt;new&gt; is more subtle than the rule described here</h1>

<a id="lab239"></a><h1 class="section">because it can be used to construct an object over an existing</h1>

<a id="lab240"></a><h1 class="section">object.</h1>

         
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="Expr__newdelete.wp_operand_non_allocating_new" class="idref" href="#Expr__newdelete.wp_operand_non_allocating_new"><span class="id" title="axiom">wp_operand_non_allocating_new</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="oinit:51" class="idref" href="#oinit:51"><span class="id" title="binder">oinit</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="new_fn:52" class="idref" href="#new_fn:52"><span class="id" title="binder">new_fn</span></a> <a id="storage_expr:53" class="idref" href="#storage_expr:53"><span class="id" title="binder">storage_expr</span></a> <a id="aty:54" class="idref" href="#aty:54"><span class="id" title="binder">aty</span></a> <a id="Q:55" class="idref" href="#Q:55"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nfty:56" class="idref" href="#nfty:56"><span class="id" title="binder">nfty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#normalize_type"><span class="id" title="definition">normalize_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:52"><span class="id" title="variable">new_fn</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_expr:53"><span class="id" title="variable">storage_expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.call.html#arg_types"><span class="id" title="definition">arg_types</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#nfty:56"><span class="id" title="variable">nfty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tsize_t"><span class="id" title="abbreviation">Tsize_t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Ar_Definite"><span class="id" title="constructor">Ar_Definite</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="alloc_sz:57" class="idref" href="#alloc_sz:57"><span class="id" title="binder">alloc_sz</span></a> <a id="alloc_al:58" class="idref" href="#alloc_al:58"><span class="id" title="binder">alloc_al</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.types.html#size_of"><span class="id" title="definition">size_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:54"><span class="id" title="variable">aty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:57"><span class="id" title="variable">alloc_sz</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.types.html#align_of"><span class="id" title="axiom">align_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:54"><span class="id" title="variable">aty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:58"><span class="id" title="variable">alloc_al</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> </div>

<div class="doc">
&lt;-- TODO FM-975 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <span class="id" title="var">_</span>, <a id="vs:59" class="idref" href="#vs:59"><span class="id" title="binder">vs</span></a>, <a id="ifree:60" class="idref" href="#ifree:60"><span class="id" title="binder">ifree</span></a>, <a id="free:61" class="idref" href="#free:61"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_args"><span class="id" title="abbreviation">wp_args</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#evaluation_order.nd"><span class="id" title="constructor">evaluation_order.nd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tsize_t"><span class="id" title="abbreviation">Tsize_t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Ar_Definite"><span class="id" title="constructor">Ar_Definite</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eint"><span class="id" title="constructor">Eint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:57"><span class="id" title="variable">alloc_sz</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tsize_t"><span class="id" title="abbreviation">Tsize_t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_expr:53"><span class="id" title="variable">storage_expr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="storage_ptr:62" class="idref" href="#storage_ptr:62"><span class="id" title="binder">storage_ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="size_loc:63" class="idref" href="#size_loc:63"><span class="id" title="binder">size_loc</span></a> <a id="storage_loc:64" class="idref" href="#storage_loc:64"><span class="id" title="binder">storage_loc</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#vs:59"><span class="id" title="variable">vs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#size_loc:63"><span class="id" title="variable">size_loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_loc:64"><span class="id" title="variable">storage_loc</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_loc:64"><span class="id" title="variable">storage_loc</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a>) (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:62"><span class="id" title="variable">storage_ptr</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <span class="id" title="notation">True</span><a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">//\\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="res:65" class="idref" href="#res:65"><span class="id" title="binder">res</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_fptr"><span class="id" title="axiom">wp_fptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#types"><span class="id" title="projection">types</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#nfty:56"><span class="id" title="variable">nfty</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:52"><span class="id" title="variable">new_fn</span></a><span class="id" title="notation">.1</span>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#vs:59"><span class="id" title="variable">vs</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ifree:60"><span class="id" title="variable">ifree</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#res:65"><span class="id" title="variable">res</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a>) (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:62"><span class="id" title="variable">storage_ptr</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;this&nbsp;line&nbsp;requires&nbsp;the&nbsp;function&nbsp;to&nbsp;return&nbsp;the&nbsp;passed&nbsp;pointer.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;mandated&nbsp;by&nbsp;the&nbsp;standard,&nbsp;see,&nbsp;e.g.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;https://eel.is/c++draft/new.delete.placement2>
                  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:62"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;mostly&nbsp;redundant&nbsp;with&nbsp;next&nbsp;line&nbsp;except&nbsp;for&nbsp;0-sized&nbsp;objects&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:62"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.block.html#blockR"><span class="id" title="definition">blockR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:57"><span class="id" title="variable">alloc_sz</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:62"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.simple.html#alignedR"><span class="id" title="abbreviation">alignedR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:58"><span class="id" title="variable">alloc_al</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">(</span></a><a id="obj_ptr:66" class="idref" href="#obj_ptr:66"><span class="id" title="binder">obj_ptr</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;also&nbsp;ensures&nbsp;these&nbsp;pointers&nbsp;share&nbsp;their<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;address&nbsp;(see&nbsp;<span class="inlinecode"><span class="id" title="var">provides_storage_same_address</span></span>)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.pred.html#L.provides_storage"><span class="id" title="axiom">provides_storage</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:62"><span class="id" title="variable">storage_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:66"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:54"><span class="id" title="variable">aty</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="free':67" class="idref" href="#free':67"><span class="id" title="binder">free'</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_opt_initialize"><span class="id" title="definition">wp_opt_initialize</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#oinit:51"><span class="id" title="variable">oinit</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:54"><span class="id" title="variable">aty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:66"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Track&nbsp;the&nbsp;type&nbsp;we&nbsp;are&nbsp;allocating<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;checked&nbsp;at&nbsp;<span class="inlinecode"><span class="id" title="var">delete</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;important&nbsp;that&nbsp;this&nbsp;preserves<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`const`ness&nbsp;of&nbsp;the&nbsp;type.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:66"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:54"><span class="id" title="variable">aty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_ptr:62"><span class="id" title="variable">storage_ptr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 0%<span class="id" title="var">N</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:55"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:66"><span class="id" title="variable">obj_ptr</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free':67"><span class="id" title="variable">free'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:61"><span class="id" title="variable">free</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">)</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Enew"><span class="id" title="constructor">Enew</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:52"><span class="id" title="variable">new_fn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_expr:53"><span class="id" title="variable">storage_expr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#new_form.NonAllocating"><span class="id" title="constructor">new_form.NonAllocating</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:54"><span class="id" title="variable">aty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#oinit:51"><span class="id" title="variable">oinit</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:55"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;size&nbsp;such&nbsp;that&nbsp;if&nbsp;the&nbsp;requested&nbsp;allocation&nbsp;size&nbsp;is&nbsp;less&nbsp;than&nbsp;this,&nbsp;the&nbsp;C++<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abstract&nbsp;machine&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;find&nbsp;a&nbsp;suitable&nbsp;overhead&nbsp;such<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;there&nbsp;is&nbsp;an&nbsp;allocation&nbsp;that&nbsp;can&nbsp;satisfy&nbsp;the&nbsp;requirements.&nbsp;See<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;https://eel.is/c++draft/implimits2.17>

           The C++ standard recommends that this value be greater than <<262,144>>.
         *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a id="Expr__newdelete.SIZE_MAX" class="idref" href="#Expr__newdelete.SIZE_MAX"><span class="id" title="axiom">SIZE_MAX</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="Expr__newdelete.wp_operand_array_new" class="idref" href="#Expr__newdelete.wp_operand_array_new"><span class="id" title="axiom">wp_operand_array_new</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="array_size:70" class="idref" href="#array_size:70"><span class="id" title="binder">array_size</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>) (<a id="oinit:71" class="idref" href="#oinit:71"><span class="id" title="binder">oinit</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="new_fn:72" class="idref" href="#new_fn:72"><span class="id" title="binder">new_fn</span></a> (<a id="pass_align:73" class="idref" href="#pass_align:73"><span class="id" title="binder">pass_align</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="new_args:74" class="idref" href="#new_args:74"><span class="id" title="binder">new_args</span></a> <a id="aty:75" class="idref" href="#aty:75"><span class="id" title="binder">aty</span></a> <a id="Q:76" class="idref" href="#Q:76"><span class="id" title="binder">Q</span></a> <a id="targs:77" class="idref" href="#targs:77"><span class="id" title="binder">targs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_args:74"><span class="id" title="variable">new_args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="comment">(*&nbsp;prevents&nbsp;default&nbsp;<span class="inlinecode"><span class="id" title="var">new</span></span>&nbsp;which&nbsp;must&nbsp;be&nbsp;able&nbsp;to&nbsp;throw&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nfty:78" class="idref" href="#nfty:78"><span class="id" title="binder">nfty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#normalize_type"><span class="id" title="definition">normalize_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:72"><span class="id" title="variable">new_fn</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.call.html#arg_types"><span class="id" title="definition">arg_types</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#nfty:78"><span class="id" title="variable">nfty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#targs:77"><span class="id" title="variable">targs</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&lt;https://eel.is/c++draft/expr.new7>
               | (7) Every constant-expression in a noptr-new-declarator shall be a
               |     converted constant expression ([expr.const]) of type std​::​size_t
               |     and its value shall be greater than zero.
               |     [Example 4: Given the definition int n = 42, new float[n][5] is
               |      well-formed (because n is the expression of a noptr-new-declarator),
               |      but new float[5][n] is ill-formed (because n is not a constant
               |      expression). — end example]
               If we're allocating a new array, we know that the expression must reduce
               to a constant value of type [size_t] /and/ that it must be sequenced
               before we call the [new_fn].
             *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="v:79" class="idref" href="#v:79"><span class="id" title="binder">v</span></a>, <a id="free:80" class="idref" href="#free:80"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_size:70"><span class="id" title="variable">array_size</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Valid&nbsp;C++&nbsp;programs&nbsp;require&nbsp;this&nbsp;value&nbsp;to&nbsp;be&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="var">Vint</span></span>&nbsp;(see&nbsp;the&nbsp;quote&nbsp;from<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;expr.new7> above). *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="array_sizeN:81" class="idref" href="#array_sizeN:81"><span class="id" title="binder">array_sizeN</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#v:79"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vn"><span class="id" title="definition">Vn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_sizeN:81"><span class="id" title="variable">array_sizeN</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;size&nbsp;must&nbsp;be&nbsp;non-negative.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#2ccca3280733654024e33c2005ae2530"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_sizeN:81"><span class="id" title="variable">array_sizeN</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>%<span class="id" title="var">N</span> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="alloc_sz:82" class="idref" href="#alloc_sz:82"><span class="id" title="binder">alloc_sz</span></a> <a id="alloc_al:83" class="idref" href="#alloc_al:83"><span class="id" title="binder">alloc_al</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="array_ty:84" class="idref" href="#array_ty:84"><span class="id" title="binder">array_ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:75"><span class="id" title="variable">aty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_sizeN:81"><span class="id" title="variable">array_sizeN</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.types.html#size_of"><span class="id" title="definition">size_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_ty:84"><span class="id" title="variable">array_ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:82"><span class="id" title="variable">alloc_sz</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.types.html#align_of"><span class="id" title="axiom">align_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:75"><span class="id" title="variable">aty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:83"><span class="id" title="variable">alloc_al</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> </div>

<div class="doc">
&lt;-- TODO FM-975 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;This&nbsp;is&nbsp;<span class="inlinecode"><span class="id" title="var">Forall</span></span> <span class="inlinecode"><span class="id" title="var">overhead_sz</span></span>&nbsp;because&nbsp;the&nbsp;C++&nbsp;Abstract&nbsp;Machine&nbsp;can&nbsp;choose<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;however&nbsp;many&nbsp;bytes&nbsp;it&nbsp;wants&nbsp;to&nbsp;use&nbsp;for&nbsp;metadata&nbsp;when&nbsp;handling<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dynamically&nbsp;allocated&nbsp;arrays;&nbsp;however,&nbsp;it&nbsp;can&nbsp;not&nbsp;be&nbsp;*completely*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unconstrained&nbsp;because&nbsp;the&nbsp;allocated&nbsp;size&nbsp;plus&nbsp;the&nbsp;overhead<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;must&nbsp;fit&nbsp;within&nbsp;&lt;&lt;size_t&gt;&gt;.&nbsp;If&nbsp;it&nbsp;does&nbsp;not,&nbsp;<span class="inlinecode"><span class="id" title="var">nullptr</span></span>&nbsp;is&nbsp;returned<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(or&nbsp;&lt;&lt;std::bad_array_new_length&gt;&gt;&nbsp;is&nbsp;thrown,&nbsp;but&nbsp;BRiCk&nbsp;does&nbsp;not<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;support&nbsp;exceptions).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;&lt;https://eel.is/c++draft/expr.new8.6>.
                  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:82"><span class="id" title="variable">alloc_sz</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tsize_t"><span class="id" title="abbreviation">Tsize_t</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.SIZE_MAX"><span class="id" title="axiom">SIZE_MAX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#::N_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:82"><span class="id" title="variable">alloc_sz</span></a>)%<span class="id" title="var">N</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:76"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:80"><span class="id" title="variable">free</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#23fc0d5bb9014b82545f597774eb1845"><span class="id" title="notation">//\\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^^&nbsp;handles&nbsp;when&nbsp;the&nbsp;overhead&nbsp;exceeds&nbsp;the&nbsp;size&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a id="overhead_sz:85" class="idref" href="#overhead_sz:85"><span class="id" title="binder">overhead_sz</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#overhead_sz:85"><span class="id" title="variable">overhead_sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#64708cc1fcff61c206ed571fe7828ea8"><span class="id" title="notation">+</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:82"><span class="id" title="variable">alloc_sz</span></a>)%<span class="id" title="var">N</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tsize_t"><span class="id" title="abbreviation">Tsize_t</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="implicit_args:86" class="idref" href="#implicit_args:86"><span class="id" title="binder">implicit_args</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_implicits"><span class="id" title="definition">new_implicits</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pass_align:73"><span class="id" title="variable">pass_align</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#overhead_sz:85"><span class="id" title="variable">overhead_sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#64708cc1fcff61c206ed571fe7828ea8"><span class="id" title="notation">+</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:82"><span class="id" title="variable">alloc_sz</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:83"><span class="id" title="variable">alloc_al</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <span class="id" title="var">_</span>, <a id="vs:87" class="idref" href="#vs:87"><span class="id" title="binder">vs</span></a>, <a id="ifree:88" class="idref" href="#ifree:88"><span class="id" title="binder">ifree</span></a>, <a id="free':89" class="idref" href="#free':89"><span class="id" title="binder">free'</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_args"><span class="id" title="abbreviation">wp_args</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#evaluation_order.nd"><span class="id" title="constructor">evaluation_order.nd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#targs:77"><span class="id" title="variable">targs</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#implicit_args:86"><span class="id" title="variable">implicit_args</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_args:74"><span class="id" title="variable">new_args</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="res:90" class="idref" href="#res:90"><span class="id" title="binder">res</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_fptr"><span class="id" title="axiom">wp_fptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#types"><span class="id" title="projection">types</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#nfty:78"><span class="id" title="variable">nfty</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:72"><span class="id" title="variable">new_fn</span></a><span class="id" title="notation">.1</span>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#vs:87"><span class="id" title="variable">vs</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ifree:88"><span class="id" title="variable">ifree</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">(</span></a><a id="storage_base:91" class="idref" href="#storage_base:91"><span class="id" title="binder">storage_base</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#res:90"><span class="id" title="variable">res</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a>) (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:76"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:80"><span class="id" title="variable">free</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">blockR</span></span> <span class="inlinecode"><span class="id" title="var">alloc_sz</span></span> <span class="inlinecode">-|-</span> <span class="inlinecode"><span class="id" title="var">tblockR</span></span> <span class="inlinecode">(<span class="id" title="var">Tarray</span></span> <span class="inlinecode"><span class="id" title="var">aty</span></span> <span class="inlinecode"><span class="id" title="var">array_size</span>)</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.block.html#blockR"><span class="id" title="definition">blockR</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#overhead_sz:85"><span class="id" title="variable">overhead_sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.NArith.BinNat.html#64708cc1fcff61c206ed571fe7828ea8"><span class="id" title="notation">+</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_sz:82"><span class="id" title="variable">alloc_sz</span></a>) (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.m"><span class="id" title="abbreviation">cQp.m</span></a> 1) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.simple.html#alignedR"><span class="id" title="abbreviation">alignedR</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pass_align:73"><span class="id" title="variable">pass_align</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:83"><span class="id" title="variable">alloc_al</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#STDCPP_DEFAULT_NEW_ALIGNMENT"><span class="id" title="definition">STDCPP_DEFAULT_NEW_ALIGNMENT</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">(</span></a><a id="obj_ptr:92" class="idref" href="#obj_ptr:92"><span class="id" title="binder">obj_ptr</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">.[</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.Tbyte"><span class="id" title="abbreviation">Tbyte</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#overhead_sz:85"><span class="id" title="variable">overhead_sz</span></a><a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.simple.html#alignedR"><span class="id" title="abbreviation">alignedR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#alloc_al:83"><span class="id" title="variable">alloc_al</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;also&nbsp;ensures&nbsp;these&nbsp;pointers&nbsp;share&nbsp;their<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;address&nbsp;(see&nbsp;<span class="inlinecode"><span class="id" title="var">provides_storage_same_address</span></span>)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.pred.html#L.provides_storage"><span class="id" title="axiom">provides_storage</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">.[</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.Tbyte"><span class="id" title="abbreviation">Tbyte</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">!</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#overhead_sz:85"><span class="id" title="variable">overhead_sz</span></a><a class="idref" href="bedrock.lang.cpp.semantics.ptrs.html#386812f0666029e370133e1eab907589"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:92"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_ty:84"><span class="id" title="variable">array_ty</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="free'':93" class="idref" href="#free'':93"><span class="id" title="binder">free''</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_opt_initialize"><span class="id" title="definition">wp_opt_initialize</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#oinit:71"><span class="id" title="variable">oinit</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_ty:84"><span class="id" title="variable">array_ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:92"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Track&nbsp;the&nbsp;type&nbsp;we&nbsp;are&nbsp;allocating<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;checked&nbsp;at&nbsp;<span class="inlinecode"><span class="id" title="var">delete</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:92"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.new_tokenR"><span class="id" title="axiom">new_tokenR</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_ty:84"><span class="id" title="variable">array_ty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#storage_base:91"><span class="id" title="variable">storage_base</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#overhead_sz:85"><span class="id" title="variable">overhead_sz</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:76"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:92"><span class="id" title="variable">obj_ptr</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free'':93"><span class="id" title="variable">free''</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free':89"><span class="id" title="variable">free'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#3661e58f765c638206576597ccc57486"><span class="id" title="notation">&gt;*&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:80"><span class="id" title="variable">free</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">))</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Enew"><span class="id" title="constructor">Enew</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_fn:72"><span class="id" title="variable">new_fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#new_args:74"><span class="id" title="variable">new_args</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#new_form.Allocating"><span class="id" title="constructor">new_form.Allocating</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pass_align:73"><span class="id" title="variable">pass_align</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#aty:75"><span class="id" title="variable">aty</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_size:70"><span class="id" title="variable">array_size</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#oinit:71"><span class="id" title="variable">oinit</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:76"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;deliberately&nbsp;avoid&nbsp;giving&nbsp;a&nbsp;reasoning&nbsp;principle&nbsp;for&nbsp;array-placement&nbsp;&lt;&lt;new&gt;&gt;&nbsp;since<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;generally&nbsp;not&nbsp;used&nbsp;and&nbsp;compilers&nbsp;differ&nbsp;in&nbsp;the&nbsp;semantics.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region.new"><span class="id" title="section">new</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic.with_region"><span class="id" title="section">with_region</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab241"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_delete"><span class="id" title="abbreviation">wp_delete</span></a></span></h3>

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Expr__newdelete.alloc_pointer" class="idref" href="#Expr__newdelete.alloc_pointer"><span class="id" title="definition">alloc_pointer</span></a> (<a id="pv:95" class="idref" href="#pv:95"><span class="id" title="binder">pv</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:96" class="idref" href="#Q:96"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemp"><span class="id" title="abbreviation">FreeTemp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a id="p:97" class="idref" href="#p:97"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:97"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a>) (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#pv:95"><span class="id" title="variable">pv</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:96"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:97"><span class="id" title="variable">p</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps.delete"><span class="id" title="constructor">FreeTemps.delete</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:97"><span class="id" title="variable">p</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Expr__newdelete.alloc_pointer_frame" class="idref" href="#Expr__newdelete.alloc_pointer_frame"><span class="id" title="lemma">alloc_pointer_frame</span></a> : <span class="id" title="notation">forall</span> <a id="p:98" class="idref" href="#p:98"><span class="id" title="binder">p</span></a> <a id="Q:99" class="idref" href="#Q:99"><span class="id" title="binder">Q</span></a> <a id="Q':100" class="idref" href="#Q':100"><span class="id" title="binder">Q'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a id="p:101" class="idref" href="#p:101"><span class="id" title="binder">p</span></a> <a id="fr:102" class="idref" href="#fr:102"><span class="id" title="binder">fr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:99"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:101"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#fr:102"><span class="id" title="variable">fr</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':100"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:101"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#fr:102"><span class="id" title="variable">fr</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.alloc_pointer"><span class="id" title="definition">alloc_pointer</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:98"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:99"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.alloc_pointer"><span class="id" title="definition">alloc_pointer</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:98"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':100"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.alloc_pointer"><span class="id" title="definition">alloc_pointer</span></a>. <span class="id" title="var">iIntros</span> "X Y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "p"; <span class="id" title="var">iApply</span> "X"; <span class="id" title="var">iApply</span> "Y"; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">delete_val</span></span> <span class="inlinecode"><span class="id" title="var">default</span></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span>&nbsp;is&nbsp;the&nbsp;weakest&nbsp;pre-condition&nbsp;of&nbsp;deleting&nbsp;<span class="inlinecode"><span class="id" title="var">p</span></span>&nbsp;(of&nbsp;type&nbsp;<span class="inlinecode"><span class="id" title="var">ty</span></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;case&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">ty</span></span>&nbsp;has&nbsp;a&nbsp;custom&nbsp;<span class="inlinecode"><span class="id" title="var">operator</span></span> <span class="inlinecode"><span class="id" title="var">delete</span></span>,&nbsp;that&nbsp;function&nbsp;will&nbsp;be&nbsp;called,&nbsp;otherwise<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">default</span></span>&nbsp;delete&nbsp;operator&nbsp;will&nbsp;be&nbsp;used.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TODO:&nbsp;This&nbsp;does&nbsp;*not*&nbsp;support&nbsp;destroying&nbsp;&lt;&lt;delete&gt;&gt;&nbsp;introduced&nbsp;in&nbsp;C++20.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Expr__newdelete.delete_val" class="idref" href="#Expr__newdelete.delete_val"><span class="id" title="definition">delete_val</span></a> <a id="tu:103" class="idref" href="#tu:103"><span class="id" title="binder">tu</span></a> (<a id="default:104" class="idref" href="#default:104"><span class="id" title="binder">default</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.names.html#obj_name"><span class="id" title="definition">obj_name</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="ty:105" class="idref" href="#ty:105"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="p:106" class="idref" href="#p:106"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:107" class="idref" href="#Q:107"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="del_type:108" class="idref" href="#del_type:108"><span class="id" title="binder">del_type</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="del:115" class="idref" href="#del:115"><span class="id" title="binder">del</span></a> '<a id="pat:111" class="idref" href="#pat:111"><span class="id" title="binder">(</span></a><a id="fn:110" class="idref" href="#fn:110"><span class="id" title="binder"><span id="pat:111" class="id">fn</span></span></a><a id="pat:111" class="idref" href="#pat:111"><span class="id" title="binder">,</span></a> <a id="ty:109" class="idref" href="#ty:109"><span class="id" title="binder"><span id="pat:111" class="id">ty</span></span></a><a id="pat:111" class="idref" href="#pat:111"><span class="id" title="binder">)</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="p':112" class="idref" href="#p':112"><span class="id" title="binder">p'</span></a>, <a id="free:113" class="idref" href="#free:113"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.alloc_pointer"><span class="id" title="definition">alloc_pointer</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:106"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="p:114" class="idref" href="#p:114"><span class="id" title="binder">p</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_fptr"><span class="id" title="axiom">wp_fptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:103"><span class="id" title="variable">tu</span></a>.(<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#types"><span class="id" title="projection">types</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:109"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_global"><span class="id" title="definition">_global</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#fn:110"><span class="id" title="variable">fn</span></a>) (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p':112"><span class="id" title="variable">p'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp"><span class="id" title="abbreviation">interp</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:103"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:113"><span class="id" title="variable">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#f9d3e3a67e261f7f954c4cd8a90ae26c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.call.html#operand_receive"><span class="id" title="abbreviation">operand_receive</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:114"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:107"><span class="id" title="variable">Q</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:105"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <span class="id" title="var">nm</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:103"><span class="id" title="variable">tu</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">nm</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gstruct"><span class="id" title="constructor">Gstruct</span></a> <span class="id" title="var">s</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#del:115"><span class="id" title="variable">del</span></a> <span class="id" title="notation">$</span> <span class="id" title="definition">from_option</span> (<span class="id" title="keyword">fun</span> <a id="x:116" class="idref" href="#x:116"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#x:116"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#del_type:108"><span class="id" title="variable">del_type</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#default:104"><span class="id" title="variable">default</span></a> <span class="id" title="var">s</span>.(<a class="idref" href="bedrock.lang.cpp.syntax.decl.html#s_delete"><span class="id" title="projection">s_delete</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gunion"><span class="id" title="constructor">Gunion</span></a> <span class="id" title="var">u</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#del:115"><span class="id" title="variable">del</span></a> <span class="id" title="notation">$</span> <span class="id" title="definition">from_option</span> (<span class="id" title="keyword">fun</span> <a id="x:117" class="idref" href="#x:117"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#x:117"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#del_type:108"><span class="id" title="variable">del_type</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#default:104"><span class="id" title="variable">default</span></a> <span class="id" title="var">u</span>.(<a class="idref" href="bedrock.lang.cpp.syntax.decl.html#u_delete"><span class="id" title="projection">u_delete</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#del:115"><span class="id" title="variable">del</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#default:104"><span class="id" title="variable">default</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Expr__newdelete.delete_val_frame" class="idref" href="#Expr__newdelete.delete_val_frame"><span class="id" title="lemma">delete_val_frame</span></a> : <span class="id" title="notation">forall</span> <a id="tu:118" class="idref" href="#tu:118"><span class="id" title="binder">tu</span></a> <a id="default:119" class="idref" href="#default:119"><span class="id" title="binder">default</span></a> <a id="ty:120" class="idref" href="#ty:120"><span class="id" title="binder">ty</span></a> <a id="p:121" class="idref" href="#p:121"><span class="id" title="binder">p</span></a> <a id="Q:122" class="idref" href="#Q:122"><span class="id" title="binder">Q</span></a> <a id="Q':123" class="idref" href="#Q':123"><span class="id" title="binder">Q'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:122"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':123"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete_val"><span class="id" title="definition">delete_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:118"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#default:119"><span class="id" title="variable">default</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:120"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:121"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:122"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete_val"><span class="id" title="definition">delete_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:118"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#default:119"><span class="id" title="variable">default</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:120"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:121"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':123"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete_val"><span class="id" title="definition">delete_val</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "X"; <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.alloc_pointer_frame"><span class="id" title="lemma">alloc_pointer_frame</span></a>; <span class="id" title="var">iIntros</span> (??);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Y !&gt;"; <span class="id" title="var">iRevert</span> "Y";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_fptr_frame"><span class="id" title="lemma">wp_fptr_frame</span></a>; <span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#interp_frame"><span class="id" title="lemma">interp_frame</span></a>; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.call.html#operand_receive_frame"><span class="id" title="lemma">operand_receive_frame</span></a>; <span class="id" title="var">iIntros</span> (?); <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.resolve_dtor"><span class="id" title="definition">resolve_dtor</span></a></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><span class="id" title="var">obj_ptr'</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span> resolves the destructor for the object <span class="inlinecode"><span class="id" title="var">obj_ptr'</span></span> (of type <span class="inlinecode"><span class="id" title="var">ty</span></span>).
        The continuation <span class="inlinecode"><span class="id" title="var">Q</span></span> is passed the pointer to the most-derived-object of <span class="inlinecode"><span class="id" title="var">obj_ptr</span></span> and its type.
      
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Expr__newdelete.resolve_dtor" class="idref" href="#Expr__newdelete.resolve_dtor"><span class="id" title="definition">resolve_dtor</span></a> (<a id="tu:124" class="idref" href="#tu:124"><span class="id" title="binder">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>) (<a id="ty:125" class="idref" href="#ty:125"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="obj_ptr':126" class="idref" href="#obj_ptr':126"><span class="id" title="binder">obj_ptr'</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a>) (<a id="Q:127" class="idref" href="#Q:127"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.ptr"><span class="id" title="axiom">ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_qualifiers"><span class="id" title="definition">drop_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:125"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tqualified"><span class="id" title="constructor">Tqualified</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ty</span> =&gt; <span class="id" title="notation">False</span> <span class="comment">(*&nbsp;unreachable&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <span class="id" title="var">cls</span>      =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:124"><span class="id" title="variable">tu</span></a> <span class="id" title="notation">!!</span> <span class="id" title="var">cls</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gstruct"><span class="id" title="constructor">Gstruct</span></a> <span class="id" title="var">s</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.decl.html#has_virtual_dtor"><span class="id" title="definition">has_virtual_dtor</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE&nbsp;<span class="inlinecode"><span class="id" title="var">has_virtual_dtor</span></span>&nbsp;could&nbsp;be&nbsp;derived&nbsp;from&nbsp;the&nbsp;vtable...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;this&nbsp;case,&nbsp;use&nbsp;virtual&nbsp;dispatch&nbsp;to&nbsp;invoke&nbsp;the&nbsp;destructor.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="fimpl:128" class="idref" href="#fimpl:128"><span class="id" title="binder">fimpl</span></a>, <a id="impl_class:129" class="idref" href="#impl_class:129"><span class="id" title="binder">impl_class</span></a>, <a id="obj_ptr:130" class="idref" href="#obj_ptr:130"><span class="id" title="binder">obj_ptr</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.dispatch.html#resolve_virtual"><span class="id" title="definition">resolve_virtual</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr':126"><span class="id" title="variable">obj_ptr'</span></a> <span class="id" title="var">cls</span> <span class="id" title="var">s</span>.(<a class="idref" href="bedrock.lang.cpp.syntax.decl.html#s_dtor"><span class="id" title="projection">s_dtor</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="r_ty:131" class="idref" href="#r_ty:131"><span class="id" title="binder">r_ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnamed"><span class="id" title="constructor">Tnamed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#impl_class:129"><span class="id" title="variable">impl_class</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:127"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:130"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#r_ty:131"><span class="id" title="variable">r_ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:127"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr':126"><span class="id" title="variable">obj_ptr'</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:125"><span class="id" title="variable">ty</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#Gunion"><span class="id" title="constructor">Gunion</span></a> <span class="id" title="var">u</span>)  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Unions&nbsp;cannot&nbsp;have&nbsp;<span class="inlinecode"><span class="id" title="var">virtual</span></span>&nbsp;destructors:&nbsp;we&nbsp;directly&nbsp;invoke&nbsp;the&nbsp;destructor.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:127"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr':126"><span class="id" title="variable">obj_ptr'</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:125"><span class="id" title="variable">ty</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>                =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tincomplete_array"><span class="id" title="constructor">Tincomplete_array</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvariable_array"><span class="id" title="constructor">Tvariable_array</span></a> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:127"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr':126"><span class="id" title="variable">obj_ptr'</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:125"><span class="id" title="variable">ty</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <span class="id" title="var">r_ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> <span class="id" title="var">r_ty</span>    =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">False</span> <span class="comment">(*&nbsp;references&nbsp;can&nbsp;not&nbsp;be&nbsp;deleted,&nbsp;only&nbsp;destroyed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">ty</span>              =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:127"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr':126"><span class="id" title="variable">obj_ptr'</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:125"><span class="id" title="variable">ty</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>%<span class="id" title="var">I</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Expr__newdelete.resolve_dtor_frame" class="idref" href="#Expr__newdelete.resolve_dtor_frame"><span class="id" title="lemma">resolve_dtor_frame</span></a> : <span class="id" title="notation">forall</span> <a id="tu:132" class="idref" href="#tu:132"><span class="id" title="binder">tu</span></a> <a id="ty:133" class="idref" href="#ty:133"><span class="id" title="binder">ty</span></a> <a id="p:134" class="idref" href="#p:134"><span class="id" title="binder">p</span></a> <a id="Q:135" class="idref" href="#Q:135"><span class="id" title="binder">Q</span></a> <a id="Q':136" class="idref" href="#Q':136"><span class="id" title="binder">Q'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a id="p:137" class="idref" href="#p:137"><span class="id" title="binder">p</span></a> <a id="t:138" class="idref" href="#t:138"><span class="id" title="binder">t</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:135"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:137"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#t:138"><span class="id" title="variable">t</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':136"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:137"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#t:138"><span class="id" title="variable">t</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.resolve_dtor"><span class="id" title="definition">resolve_dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:132"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:133"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:134"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:135"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.resolve_dtor"><span class="id" title="definition">resolve_dtor</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:132"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:133"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:134"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':136"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.resolve_dtor"><span class="id" title="definition">resolve_dtor</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "X"; <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_fptr_frame"><span class="id" title="lemma">wp_fptr_frame</span></a>; <span class="id" title="var">iIntros</span> (?); <span class="id" title="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.dispatch.html#resolve_virtual_frame"><span class="id" title="lemma">resolve_virtual_frame</span></a>. <span class="id" title="var">iIntros</span> (???); <span class="id" title="var">iApply</span> "X".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Expr__newdelete.cv_compat" class="idref" href="#Expr__newdelete.cv_compat"><span class="id" title="definition">cv_compat</span></a> (<a id="t1:139" class="idref" href="#t1:139"><span class="id" title="binder">t1</span></a> <a id="t2:140" class="idref" href="#t2:140"><span class="id" title="binder">t2</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#t1:139"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#t2:140"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.with_cpp_logic"><span class="id" title="section">with_cpp_logic</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Expr__newdelete.array_compatible" class="idref" href="#Expr__newdelete.array_compatible"><span class="id" title="definition">array_compatible</span></a> (<a id="is_array:141" class="idref" href="#is_array:141"><span class="id" title="binder">is_array</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="ty:142" class="idref" href="#ty:142"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:142"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#is_array:141"><span class="id" title="variable">is_array</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tincomplete_array"><span class="id" title="constructor">Tincomplete_array</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvariable_array"><span class="id" title="constructor">Tvariable_array</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="notation">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#is_array:141"><span class="id" title="variable">is_array</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">wp_delete</span></span>&nbsp;encapsulates&nbsp;the&nbsp;logic&nbsp;needed&nbsp;to&nbsp;&lt;&lt;delete&gt;&gt;&nbsp;an<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object&nbsp;of&nbsp;a&nbsp;particular&nbsp;type.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;the&nbsp;future,&nbsp;when&nbsp;we&nbsp;support&nbsp;C++20's&nbsp;destroying&nbsp;&lt;&lt;delete&gt;&gt;,&nbsp;we<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;insert&nbsp;the&nbsp;appropriate&nbsp;logic&nbsp;here&nbsp;to&nbsp;select&nbsp;the&nbsp;right&nbsp;way<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;destroy&nbsp;the&nbsp;object.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">mlock</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Definition</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">wp_delete</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">`{</span></span></span></span></span></span></span></a><a id="2c4158be8aa7e2838abd7fadbabfa578" class="idref" href="#2c4158be8aa7e2838abd7fadbabfa578"><span class="id" title="axiom, binder, definition, module"><span id="adef04e5061ce77a6c2e0f4fa8863238" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Σ</span></span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cpp_logic</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">}</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">{</span></span></span></span></span></span></span></a><a id="06d41dcb34aba9ed41f4c6448cdbe741" class="idref" href="#06d41dcb34aba9ed41f4c6448cdbe741"><span class="id" title="axiom, binder, definition, module"><span id="8efd8ab516cd0ccee3583f43c7bf1a55" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">σ</span></span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">genv</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">}</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="tu:148" class="idref" href="#tu:148"><span class="id" title="axiom, binder, definition, module"><span id="tu:165" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">tu</span></span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">translation_unit</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">)</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="delete_fn:149" class="idref" href="#delete_fn:149"><span class="id" title="axiom, binder, definition, module"><span id="delete_fn:166" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">delete_fn</span></span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">_</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">)</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="array:150" class="idref" href="#array:150"><span class="id" title="axiom, binder, definition, module"><span id="array:167" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">array</span></span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">bool</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">)</span></span></span></span></span></span></span></a> <a id="destroyed_type:151" class="idref" href="#destroyed_type:151"><span class="id" title="axiom, binder, definition, module"><span id="destroyed_type:168" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">destroyed_type</span></span></span></span></span></span></span></span></span></a> <a id="obj_ptr:152" class="idref" href="#obj_ptr:152"><span class="id" title="axiom, binder, definition, module"><span id="obj_ptr:169" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">obj_ptr</span></span></span></span></span></span></span></span></span></a> <a id="Q:153" class="idref" href="#Q:153"><span class="id" title="axiom, binder, definition, module"><span id="Q:170" class="id"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Q</span></span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">mpred</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:=</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">denoteModule</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">tu</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">-*</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">letI</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">*</span></span></span></span></span></span></span></a> <a id="this':154" class="idref" href="#this':154"><span class="id" title="axiom, binder, definition, module"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">this'</span></span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">,</span></span></span></span></span></span></span></a> <a id="mdc_ty:155" class="idref" href="#mdc_ty:155"><span class="id" title="axiom, binder, definition, module"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">mdc_ty</span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:=</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">resolve_dtor</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">tu</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">destroyed_type</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">obj_ptr</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">in</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Exists</span></span></span></span></span></span></span></a> <a id="cv_mdc:156" class="idref" href="#cv_mdc:156"><span class="id" title="axiom, binder, definition, module"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cv_mdc</span></span></span></span></span></span></span></span></a> <a id="storage_ptr:157" class="idref" href="#storage_ptr:157"><span class="id" title="axiom, binder, definition, module"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">storage_ptr</span></span></span></span></span></span></span></span></a> <a id="overhead:158" class="idref" href="#overhead:158"><span class="id" title="axiom, binder, definition, module"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">overhead</span></span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">,</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">this'</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">|-&gt;</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">new_tokenR</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">1</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cv_mdc</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">,</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">storage_ptr</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">,</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">overhead</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">)</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">**</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">[|</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cv_compat</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cv_mdc</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">mdc_ty</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">|]</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">**</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">[|</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">array_compatible</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">array</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cv_mdc</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">|]</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">**</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Exists</span></span></span></span></span></span></span></a> <a id="tu':159" class="idref" href="#tu':159"><span class="id" title="axiom, binder, definition, module"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">tu'</span></span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">,</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">denoteModule</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">tu'</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">**</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">letI</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">*</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:=</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">destroy_val</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">tu'</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cv_mdc</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">this'</span></span></span></span></span></span></span></a> <span class="comment">(*&nbsp;&lt;&lt;&nbsp;invoke&nbsp;the&nbsp;destructor&nbsp;*)</span> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">in</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Exists</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="sz:160" class="idref" href="#sz:160"><span class="id" title="axiom, binder, definition, module"><span id="Expr__newdelete.wp_delete_Locked" class="id"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">sz</span></span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">:</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">N</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">),</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">[|</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">size_of</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">mdc_ty</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">=</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Some</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">sz</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">|]</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">**</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">storage_ptr</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">.[</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Tuchar</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">!</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">-</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">overhead</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">]</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">|-&gt;</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">blockR</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">overhead</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">+</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">sz</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">)</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">cQp.m</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">1)</span></span></span></span></span></span></span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">-*</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">delete_val</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">tu'</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">delete_fn</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">mdc_ty</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">storage_ptr</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">.[</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Tuchar</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">!</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">-</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">overhead</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">])</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">(</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Q</span></span></span></span></span></span></span></a> <a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">Vvoid</span></span></span></span></span></span></span></a><a id="Expr__newdelete.wp_delete_Locked" class="idref" href="#Expr__newdelete.wp_delete_Locked"><span class="id" title="axiom, definition, module"><span id="Expr__newdelete.wp_delete_Locked.body" class="id"><span id="Expr__newdelete.wp_delete_Locked.unlock" class="id"><span id="Expr__newdelete.wp_delete" class="id"><span id="Expr__newdelete.wp_delete.body" class="id"><span id="Expr__newdelete.wp_delete.unlock" class="id"><span id="Expr__newdelete.wp_delete_unlock_subterm" class="id">))</span></span></span></span></span></span></span></a>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.body"><span class="id" title="axiom">wp_delete</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> σ}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Expr__newdelete.delete" class="idref" href="#Expr__newdelete.delete"><span class="id" title="section">delete</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="c1c5c8c67a0dc9808d5f39ed656267e7" class="idref" href="#c1c5c8c67a0dc9808d5f39ed656267e7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>} {<a id="99cca33ba64e7bc35d195824e11d3400" class="idref" href="#99cca33ba64e7bc35d195824e11d3400"><span class="id" title="binder">σ</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Expr__newdelete.delete.with_region" class="idref" href="#Expr__newdelete.delete.with_region"><span class="id" title="section">with_region</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> (<a id="Expr__newdelete.delete.with_region.tu" class="idref" href="#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="9fb15f60f1182dd36f595ec6981b6ab5" class="idref" href="#9fb15f60f1182dd36f595ec6981b6ab5"><span class="id" title="binder">ρ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#region"><span class="id" title="inductive">region</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Expr__newdelete.wp_operand" class="idref" href="#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_operand"><span class="id" title="axiom">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#f87fdd685aa8a144f9861ffc3911f267"><span class="id" title="variable">ρ</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Expr__newdelete.wp_delete_frame" class="idref" href="#Expr__newdelete.wp_delete_frame"><span class="id" title="lemma">wp_delete_frame</span></a> : <span class="id" title="notation">forall</span> <a id="tu:177" class="idref" href="#tu:177"><span class="id" title="binder">tu</span></a> <a id="fn:178" class="idref" href="#fn:178"><span class="id" title="binder">fn</span></a> <a id="ary:179" class="idref" href="#ary:179"><span class="id" title="binder">ary</span></a> <a id="ty:180" class="idref" href="#ty:180"><span class="id" title="binder">ty</span></a> <a id="p:181" class="idref" href="#p:181"><span class="id" title="binder">p</span></a> <a id="Q:182" class="idref" href="#Q:182"><span class="id" title="binder">Q</span></a> <a id="Q':183" class="idref" href="#Q':183"><span class="id" title="binder">Q'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a id="p:184" class="idref" href="#p:184"><span class="id" title="binder">p</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:182"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:184"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':183"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:184"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_delete"><span class="id" title="abbreviation">wp_delete</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:177"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#fn:178"><span class="id" title="variable">fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:180"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ary:179"><span class="id" title="variable">ary</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:181"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:182"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_delete"><span class="id" title="abbreviation">wp_delete</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#tu:177"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#fn:178"><span class="id" title="variable">fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:180"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ary:179"><span class="id" title="variable">ary</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#p:181"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q':183"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.unlock"><span class="id" title="axiom">wp_delete.unlock</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "X Y M"; <span class="id" title="var">iSpecialize</span> <span class="id" title="notation">(</span>"Y" <span class="id" title="notation">with</span> "M"<span class="id" title="notation">)</span>; <span class="id" title="var">iRevert</span> "Y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.resolve_dtor_frame"><span class="id" title="lemma">resolve_dtor_frame</span></a>; <span class="id" title="var">iIntros</span> (??) "Y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Y" <span class="id" title="keyword">as</span> (???) "Y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Y" <span class="id" title="keyword">as</span> "[$[$[$Y]]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Y" <span class="id" title="keyword">as</span> (?) "Y".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iDestruct</span> "Y" <span class="id" title="keyword">as</span> "[$ Y]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRevert</span> "Y"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.destroy.html#destroy_val_frame"><span class="id" title="lemma">destroy_val_frame</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Y"; <span class="id" title="var">iDestruct</span> "Y" <span class="id" title="keyword">as</span> (?) "Y"; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iDestruct</span> "Y" <span class="id" title="keyword">as</span> "[$ Y]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Z"; <span class="id" title="var">iSpecialize</span> <span class="id" title="notation">(</span>"Y" <span class="id" title="notation">with</span> "Z"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iRevert</span> "Y"; <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete_val_frame"><span class="id" title="lemma">delete_val_frame</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&lt;&lt;delete&gt;&gt;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://eel.is/c++draft/expr.delete<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NOTE:&nbsp;https://eel.is/c++draft/expr.delete7.1 says:
          > The value returned from the allocation call of the new-expression
          > shall be passed as the first argument to the deallocation function.

          Hence, the destructor is passed a pointer to the object, and the
          deallocation function <<delete>> is passed a pointer to the
          underlying storage (of type <<void *>>).

          On deleting null:
          From the C++ standard (<https://en.cppreference.com/w/cpp/language/delete>)

          > If expression evaluates to a null pointer value, no destructors are
          > called, and the deallocation function may or may not be called (it's
          > unspecified), but the default deallocation functions are guaranteed
          > to do nothing when passed a null pointer.

          NOTE: [Edelete]'s first argument is [true] iff the expression corresponds to
          an array-delete, i.e. <<delete[]>>.
        *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="Expr__newdelete.wp_operand_delete" class="idref" href="#Expr__newdelete.wp_operand_delete"><span class="id" title="axiom">wp_operand_delete</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="delete_fn:185" class="idref" href="#delete_fn:185"><span class="id" title="binder">delete_fn</span></a> <a id="e:186" class="idref" href="#e:186"><span class="id" title="binder">e</span></a> <a id="destroyed_type:187" class="idref" href="#destroyed_type:187"><span class="id" title="binder">destroyed_type</span></a> <a id="Q:188" class="idref" href="#Q:188"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dfty:189" class="idref" href="#dfty:189"><span class="id" title="binder">dfty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#normalize_type"><span class="id" title="definition">normalize_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:185"><span class="id" title="variable">delete_fn</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.call.html#arg_types"><span class="id" title="definition">arg_types</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#dfty:189"><span class="id" title="variable">dfty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Ar_Definite"><span class="id" title="constructor">Ar_Definite</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;call&nbsp;the&nbsp;destructor&nbsp;on&nbsp;the&nbsp;object,&nbsp;and&nbsp;then&nbsp;call&nbsp;delete_fn&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="v:190" class="idref" href="#v:190"><span class="id" title="binder">v</span></a> , <a id="free:191" class="idref" href="#free:191"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#e:186"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="obj_ptr:192" class="idref" href="#obj_ptr:192"><span class="id" title="binder">obj_ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#v:190"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:192"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:192"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;this&nbsp;conjunction&nbsp;justifies&nbsp;the&nbsp;compiler&nbsp;calling&nbsp;the&nbsp;delete&nbsp;function<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;not&nbsp;calling&nbsp;it&nbsp;when&nbsp;the&nbsp;argument&nbsp;is&nbsp;null.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete_val"><span class="id" title="definition">delete_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:185"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#destroyed_type:187"><span class="id" title="variable">destroyed_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:192"><span class="id" title="variable">obj_ptr</span></a> <span class="id" title="notation">$</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:188"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vvoid"><span class="id" title="definition">Vvoid</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:191"><span class="id" title="variable">free</span></a><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∧</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:188"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vvoid"><span class="id" title="definition">Vvoid</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:191"><span class="id" title="variable">free</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;v----&nbsp;Calling&nbsp;destructor&nbsp;with&nbsp;object&nbsp;pointer&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_delete"><span class="id" title="abbreviation">wp_delete</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:185"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#destroyed_type:187"><span class="id" title="variable">destroyed_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:192"><span class="id" title="variable">obj_ptr</span></a> (<span class="id" title="keyword">fun</span> <a id="v:193" class="idref" href="#v:193"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:188"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#v:193"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:191"><span class="id" title="variable">free</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Edelete"><span class="id" title="constructor">Edelete</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:185"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#e:186"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#destroyed_type:187"><span class="id" title="variable">destroyed_type</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:188"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand_delete_default"><span class="id" title="lemma">wp_operand_delete_default</span></a></span> specializes <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand_delete"><span class="id" title="axiom">wp_operand_delete</span></a></span> for invocations of
<a id="lab242"></a><h1 class="section">the form <code>delete p;</code> - where <code>p</code> is a non-null pointer to an object whose</h1>

<a id="lab243"></a><h1 class="section">most-derived destructor is defined in the current translation unit.</h1>

        
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Expr__newdelete.wp_operand_delete_default" class="idref" href="#Expr__newdelete.wp_operand_delete_default"><span class="id" title="lemma">wp_operand_delete_default</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="delete_fn:195" class="idref" href="#delete_fn:195"><span class="id" title="binder">delete_fn</span></a> <a id="e:196" class="idref" href="#e:196"><span class="id" title="binder">e</span></a> <a id="destroyed_type:197" class="idref" href="#destroyed_type:197"><span class="id" title="binder">destroyed_type</span></a> <a id="Q:198" class="idref" href="#Q:198"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dfty:199" class="idref" href="#dfty:199"><span class="id" title="binder">dfty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#normalize_type"><span class="id" title="definition">normalize_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:195"><span class="id" title="variable">delete_fn</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.call.html#arg_types"><span class="id" title="definition">arg_types</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#dfty:199"><span class="id" title="variable">dfty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Ar_Definite"><span class="id" title="constructor">Ar_Definite</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;call&nbsp;the&nbsp;destructor&nbsp;on&nbsp;the&nbsp;object,&nbsp;and&nbsp;then&nbsp;call&nbsp;delete_fn&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="v:200" class="idref" href="#v:200"><span class="id" title="binder">v</span></a>, <a id="free:201" class="idref" href="#free:201"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#e:196"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="obj_ptr:202" class="idref" href="#obj_ptr:202"><span class="id" title="binder">obj_ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#v:200"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:202"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:202"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;v----&nbsp;Calling&nbsp;destructor&nbsp;with&nbsp;object&nbsp;pointer&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_delete"><span class="id" title="abbreviation">wp_delete</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:195"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#destroyed_type:197"><span class="id" title="variable">destroyed_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:202"><span class="id" title="variable">obj_ptr</span></a> (<span class="id" title="keyword">fun</span> <a id="v:203" class="idref" href="#v:203"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:198"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#v:203"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:201"><span class="id" title="variable">free</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Edelete"><span class="id" title="constructor">Edelete</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:195"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#e:196"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#destroyed_type:197"><span class="id" title="variable">destroyed_type</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:198"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> **; <span class="id" title="var">iIntros</span> "operand".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_operand_models"><span class="id" title="axiom">wp_operand_models</span></a>; <span class="id" title="var">iIntros</span> "#MOD".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand_delete"><span class="id" title="axiom">wp_operand_delete</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_operand_frame"><span class="id" title="axiom">wp_operand_frame</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a>); [<span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span> | | <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span> <span class="id" title="var">free</span>) "H"; <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">obj_ptr</span>) "(-&gt; &amp; % &amp; dtor_lookup)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">obj_ptr</span>; <span class="id" title="var">iSplitR</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="abbreviation">bool_decide_false</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_delete_frame"><span class="id" title="lemma">wp_delete_frame</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;<span class="inlinecode"><span class="id" title="var">destroyed_type</span></span>&nbsp;will&nbsp;refer&nbsp;to&nbsp;the&nbsp;/element/&nbsp;of&nbsp;the&nbsp;array&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="Expr__newdelete.wp_operand_array_delete" class="idref" href="#Expr__newdelete.wp_operand_array_delete"><span class="id" title="axiom">wp_operand_array_delete</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">forall</span> <a id="delete_fn:204" class="idref" href="#delete_fn:204"><span class="id" title="binder">delete_fn</span></a> <a id="e:205" class="idref" href="#e:205"><span class="id" title="binder">e</span></a> <a id="destroyed_type:206" class="idref" href="#destroyed_type:206"><span class="id" title="binder">destroyed_type</span></a> <a id="Q:207" class="idref" href="#Q:207"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dfty:208" class="idref" href="#dfty:208"><span class="id" title="binder">dfty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#normalize_type"><span class="id" title="definition">normalize_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:204"><span class="id" title="variable">delete_fn</span></a><span class="id" title="notation">.2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.cpp.logic.call.html#arg_types"><span class="id" title="definition">arg_types</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#dfty:208"><span class="id" title="variable">dfty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Ar_Definite"><span class="id" title="constructor">Ar_Definite</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;call&nbsp;the&nbsp;destructor&nbsp;on&nbsp;the&nbsp;object,&nbsp;and&nbsp;then&nbsp;call&nbsp;delete_fn&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="v:209" class="idref" href="#v:209"><span class="id" title="binder">v</span></a>, <a id="free:210" class="idref" href="#free:210"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#e:205"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="obj_ptr:211" class="idref" href="#obj_ptr:211"><span class="id" title="binder">obj_ptr</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#v:209"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vptr"><span class="id" title="constructor">Vptr</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:211"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="array_size:212" class="idref" href="#array_size:212"><span class="id" title="binder">array_size</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="array_ty:213" class="idref" href="#array_ty:213"><span class="id" title="binder">array_ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#destroyed_type:206"><span class="id" title="variable">destroyed_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_size:212"><span class="id" title="variable">array_size</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="definition">bool_decide</span> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:211"><span class="id" title="variable">obj_ptr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;this&nbsp;conjunction&nbsp;justifies&nbsp;the&nbsp;compiler&nbsp;calling&nbsp;the&nbsp;delete&nbsp;function<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;not&nbsp;calling&nbsp;it.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete_val"><span class="id" title="definition">delete_val</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:204"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_ty:213"><span class="id" title="variable">array_ty</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#PTRS_INTF_AXIOM.nullptr"><span class="id" title="axiom">nullptr</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:207"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vvoid"><span class="id" title="definition">Vvoid</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:210"><span class="id" title="variable">free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∧</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:207"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vvoid"><span class="id" title="definition">Vvoid</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:210"><span class="id" title="variable">free</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;the&nbsp;only&nbsp;downside&nbsp;that&nbsp;I&nbsp;see&nbsp;to&nbsp;using&nbsp;<span class="inlinecode"><span class="id" title="var">wp_delete</span></span>&nbsp;here&nbsp;instead<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;inlining&nbsp;it&nbsp;is&nbsp;that&nbsp;the&nbsp;AST&nbsp;has&nbsp;already&nbsp;fixed&nbsp;the&nbsp;deallocation&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_delete"><span class="id" title="abbreviation">wp_delete</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.tu"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:204"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_ty:213"><span class="id" title="variable">array_ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#obj_ptr:211"><span class="id" title="variable">obj_ptr</span></a> (<span class="id" title="keyword">fun</span> <a id="v:214" class="idref" href="#v:214"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:207"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#v:214"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#free:210"><span class="id" title="variable">free</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">)</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Edelete"><span class="id" title="constructor">Edelete</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#delete_fn:204"><span class="id" title="variable">delete_fn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#e:205"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#destroyed_type:206"><span class="id" title="variable">destroyed_type</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Q:207"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Expr__newdelete.delete.with_region.NOTE_potentially_relaxing_array_delete" class="idref" href="#Expr__newdelete.delete.with_region.NOTE_potentially_relaxing_array_delete"><span class="id" title="section">NOTE_potentially_relaxing_array_delete</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;While&nbsp;(we&nbsp;currently&nbsp;think)&nbsp;it&nbsp;is&nbsp;UB&nbsp;to&nbsp;delete&nbsp;<span class="inlinecode"><span class="id" title="tactic">auto</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">new</span></span> <span class="inlinecode"><span class="id" title="var">int</span>[5][6]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using&nbsp;<span class="inlinecode"><span class="id" title="var">delete</span>[]</span> <span class="inlinecode">&amp;(<span class="id" title="var">p</span>[0][0])</span>,&nbsp;it&nbsp;seems&nbsp;like&nbsp;clang&nbsp;still&nbsp;does&nbsp;something<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sensible&nbsp;for&nbsp;this.&nbsp;If&nbsp;we&nbsp;want&nbsp;to&nbsp;relax&nbsp;our&nbsp;axioms&nbsp;in&nbsp;the&nbsp;future&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow&nbsp;for&nbsp;this&nbsp;sort&nbsp;of&nbsp;behavior,&nbsp;we&nbsp;could&nbsp;relate&nbsp;the&nbsp;"carrier&nbsp;type"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;the&nbsp;"dynamic&nbsp;type"&nbsp;of&nbsp;the&nbsp;array&nbsp;which&nbsp;was&nbsp;allocated&nbsp;(which&nbsp;is&nbsp;stored<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">new_token</span></span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;particular,&nbsp;so&nbsp;long&nbsp;as&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">obj_ptr</span></span>&nbsp;<span class="inlinecode"><span class="id" title="var">p'</span></span>&nbsp;we&nbsp;delete&nbsp;is&nbsp;syntactically<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identical&nbsp;to&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">obj_ptr</span></span>&nbsp;<span class="inlinecode"><span class="id" title="var">p</span></span>&nbsp;returned&nbsp;by&nbsp;our&nbsp;array-new&nbsp;call&nbsp;/and/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;"carrier&nbsp;type"&nbsp;of&nbsp;the&nbsp;delete&nbsp;is&nbsp;_similar_<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;https://eel.is/c++draft/conv.qual&gt;&nbsp;to&nbsp;the&nbsp;"carrier&nbsp;type"&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;array,&nbsp;we&nbsp;can&nbsp;use&nbsp;<span class="inlinecode"><span class="id" title="var">p'</span></span>&nbsp;to&nbsp;delete&nbsp;the&nbsp;object&nbsp;rooted&nbsp;at&nbsp;<span class="inlinecode"><span class="id" title="var">p</span></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NOTE:&nbsp;we&nbsp;might&nbsp;need&nbsp;to&nbsp;insert&nbsp;<span class="inlinecode"><span class="id" title="var">erase_qualifiers</span></span>/<span class="inlinecode"><span class="id" title="var">normalize_type</span></span>&nbsp;calls&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflect&nbsp;that&nbsp;the&nbsp;standard&nbsp;only&nbsp;calls&nbsp;for&nbsp;"similarity"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(which&nbsp;has&nbsp;a&nbsp;more&nbsp;nuanced&nbsp;consideration&nbsp;of&nbsp;cv-qualifiers).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;If&nbsp;we&nbsp;have&nbsp;<span class="inlinecode"><span class="id" title="var">Tarray</span></span> <span class="inlinecode"><span class="id" title="var">ty</span></span> <span class="inlinecode"><span class="id" title="var">sz</span></span>,&nbsp;<span class="inlinecode"><span class="id" title="var">array_carrier_type</span></span> <span class="inlinecode"><span class="id" title="var">ty</span></span>&nbsp;strips&nbsp;all&nbsp;of&nbsp;the&nbsp;outermost<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">Tarray</span></span>s&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;"carrier&nbsp;type"&nbsp;of&nbsp;the&nbsp;array.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="Expr__newdelete.array_carrier_type" class="idref" href="#Expr__newdelete.array_carrier_type"><span class="id" title="definition">array_carrier_type</span></a> (<a id="ty:216" class="idref" href="#ty:216"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:216"><span class="id" title="variable">ty</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> <span class="id" title="var">ty'</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#array_carrier_type:217"><span class="id" title="definition">array_carrier_type</span></a> <span class="id" title="var">ty'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#ty:216"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region.NOTE_potentially_relaxing_array_delete"><span class="id" title="section">NOTE_potentially_relaxing_array_delete</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete.with_region"><span class="id" title="section">with_region</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete.delete"><span class="id" title="section">delete</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete"><span class="id" title="module">Expr__newdelete</span></a>.<br/>

<br/>
<span class="id" title="keyword">Declare Module</span> <a id="E__newdelete" class="idref" href="#E__newdelete"><span class="id" title="module">E__newdelete</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#Expr__newdelete"><span class="id" title="module">Expr__newdelete</span></a>.<br/>

<br/>
<span class="id" title="keyword">Export</span> <a class="idref" href="bedrock.lang.cpp.logic.new_delete.html#E__newdelete"><span class="id" title="module">E__newdelete</span></a>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
