<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index for the theory </a>
      <a href="./toc.html"> Table of contents for the theory </a>
      <a href="../../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.lang.base_logic.lib.spectra</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(C)&nbsp;BedRock&nbsp;Systems&nbsp;Inc.&nbsp;2020-2024<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>

<br/>
<span class="comment">(***&nbsp;The&nbsp;Spectra&nbsp;Framework&nbsp;*)</span><br/>
</div>

<div class="doc">
<ul class="doclist">
<li> v1 developed by Gregory Malecha and Jonas Kastberg Hinrichsen.

</li>
<li> v2 developed by Gordon Stewart.

</li>
<li> further development by Abhishek Anand, Paolo G. Giarrusso, Yoichi Hirai,
  Hoang-Hai Dang.

</li>
</ul>

<div class="paragraph"> </div>

See the documentation in spectra.md for more details.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#"><span class="id" title="library">stdpp.namespaces</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.base</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">bedrock.prelude.sts</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.finite</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.sets</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">bedrock.prelude.propset</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.fin_sets</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.bytestring</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.tactics.proper</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.prelude.html#"><span class="id" title="library">bedrock.lang.bi.prelude</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.observe.html#"><span class="id" title="library">bedrock.lang.bi.observe</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.big_op.html#"><span class="id" title="library">bedrock.lang.bi.big_op</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#"><span class="id" title="library">bedrock.lang.bi.atomic_commit</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.atomic_update_properties.html#"><span class="id" title="library">bedrock.lang.bi.atomic_update_properties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#"><span class="id" title="library">bedrock.lang.bi.spec.knowledge</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.prop_constraints.html#"><span class="id" title="library">bedrock.lang.bi.prop_constraints</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.invariants.html#"><span class="id" title="library">bedrock.lang.bi.invariants</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#"><span class="id" title="library">bedrock.lang.base_logic.lib.auth_set</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.proofmode.fancy_updates.html#"><span class="id" title="library">bedrock.lang.proofmode.fancy_updates</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.proofmode.proofmode.html#"><span class="id" title="library">bedrock.lang.proofmode.proofmode</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.prelude.html#ChargeNotation"><span class="id" title="module">ChargeNotation</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Belongs&nbsp;to&nbsp;stdpp&nbsp;to&nbsp;support&nbsp;<span class="inlinecode"><span class="id" title="var">cbn</span></span>,&nbsp;same&nbsp;as&nbsp;we&nbsp;did&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">gset</span></span>.&nbsp;*)</span><br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset_difference"><span class="id" title="instance">coPset_difference</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#difference"><span class="id" title="definition">stdpp.base.difference</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="refinement_rootNS" class="idref" href="#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#nroot"><span class="id" title="definition">nroot</span></a><span class="id" title="notation">.@@</span>"refinement".<br/>

<br/>
<span class="comment">(***&nbsp;Refinement&nbsp;Namespace&nbsp;*)</span><br/>
</div>

<div class="doc">
This class manages the namespaces used by decompose invariants. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="refinement" class="idref" href="#refinement"><span class="id" title="record">refinement</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="refinement_root" class="idref" href="#refinement_root"><span class="id" title="projection">refinement_root</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="abbreviation">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;The&nbsp;current&nbsp;root.&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;; <a id="refinement_mkns" class="idref" href="#refinement_mkns"><span class="id" title="projection">refinement_mkns</span></a> (<a id="ss:3" class="idref" href="#ss:3"><span class="id" title="binder">ss</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="abbreviation">bs</span>) := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ss:3"><span class="id" title="variable">ss</span></a><br/>
&nbsp;&nbsp;; <a id="refinement_ns" class="idref" href="#refinement_ns"><span class="id" title="projection">refinement_ns</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_mkns:4"><span class="id" title="method">refinement_mkns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root:2"><span class="id" title="method">refinement_root</span></a><br/>
&nbsp;&nbsp;; <a id="refinement_cur" class="idref" href="#refinement_cur"><span class="id" title="projection">refinement_cur</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns:5"><span class="id" title="method">refinement_ns</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;The&nbsp;current&nbsp;refinement&nbsp;namespace&nbsp;has&nbsp;form:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nroot.@@"refinement".@refinement_root.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;lower&nbsp;levels,&nbsp;the&nbsp;root&nbsp;is&nbsp;extended&nbsp;by&nbsp;list&nbsp;append&nbsp;rather<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;<span class="inlinecode"><span class="id" title="var">ndot</span></span>.&nbsp;This&nbsp;ensures&nbsp;that&nbsp;lower&nbsp;levels&nbsp;have&nbsp;disjoint&nbsp;namespaces<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;current&nbsp;root.*)</span><br/>
<br/>
&nbsp;&nbsp;; <a id="refinement_up" class="idref" href="#refinement_up"><span class="id" title="projection">refinement_up</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;All&nbsp;the&nbsp;namespaces&nbsp;above&nbsp;the&nbsp;current&nbsp;point.&nbsp;*)</span><br/>
&nbsp;&nbsp;; <a id="refinement_up_sub" class="idref" href="#refinement_up_sub"><span class="id" title="projection">refinement_up_sub</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up:7"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a><br/>
<br/>
&nbsp;&nbsp;; <a id="refinement_disj" class="idref" href="#refinement_disj"><span class="id" title="projection">refinement_disj</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="ss:9" class="idref" href="#ss:9"><span class="id" title="binder">ss</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="abbreviation">bs</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_mkns:4"><span class="id" title="method">refinement_mkns</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root:2"><span class="id" title="method">refinement_root</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ss:9"><span class="id" title="variable">ss</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up:7"><span class="id" title="method">refinement_up</span></a> }.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;<span class="inlinecode"><span class="id" title="var">refinement_up</span></span>&nbsp;is&nbsp;disjoint&nbsp;from&nbsp;all&nbsp;list-app&nbsp;extensions&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;root.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="record">refinement</span></a></span> is instantiatable. 
</div>
<div class="code">
#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="start_refinement" class="idref" href="#start_refinement"><span class="id" title="definition">start_refinement</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Go down a level (indexed by bytestring <span class="inlinecode"><span class="id" title="var">arg</span></span>): 
</div>
<div class="code">
#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="go_down" class="idref" href="#go_down"><span class="id" title="definition">go_down</span></a> (<a id="arg:11" class="idref" href="#arg:11"><span class="id" title="binder">arg</span></a> : <span class="id" title="abbreviation">bs</span>) (<a id="cur:12" class="idref" href="#cur:12"><span class="id" title="binder">cur</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> := @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cur:12"><span class="id" title="variable">cur</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#arg:11"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> := @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cur:12"><span class="id" title="variable">cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cur:12"><span class="id" title="variable">cur</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;<span class="inlinecode"><span class="id" title="var">refinement_up</span></span>&nbsp;is&nbsp;the&nbsp;union&nbsp;of&nbsp;the&nbsp;current&nbsp;level&nbsp;and&nbsp;those&nbsp;above.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_disj"><span class="id" title="method">refinement_disj</span></a> := <span class="id" title="var">_</span> |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">_</span> <span class="id" title="var">cur</span>. <span class="id" title="var">have</span> ? := @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up_sub"><span class="id" title="method">refinement_up_sub</span></a> <span class="id" title="var">cur</span>. <span class="id" title="var">solve_ndisj</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">arg</span> <span class="id" title="var">cur</span> <span class="id" title="var">ns</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#disjoint_union_r"><span class="id" title="lemma">disjoint_union_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>. { <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_disj"><span class="id" title="method">refinement_disj</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#ndot_ne_disjoint"><span class="id" title="lemma">ndot_ne_disjoint</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">elim</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> =&gt; // <span class="id" title="var">x</span> <span class="id" title="var">l'</span> <span class="id" title="var">IH</span> [].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Section</span> <a id="with_refinement" class="idref" href="#with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="R:13" class="idref" href="#R:13"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refinement_cur_up_disj" class="idref" href="#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">move</span>: (@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_disj"><span class="id" title="method">refinement_disj</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_refinement.R"><span class="id" title="variable">R</span></a>); <span class="id" title="tactic">move</span>/(<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> =&gt; //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="up_go_left" class="idref" href="#up_go_left"><span class="id" title="lemma">up_go_left</span></a> <a id="bs:14" class="idref" href="#bs:14"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#go_down"><span class="id" title="definition">go_down</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bs:14"><span class="id" title="variable">bs</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_refinement.R"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> []. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="masks" class="idref" href="#masks"><span class="id" title="module">masks</span></a>.<br/>
</div>

<div class="doc">
  A consistent choice of masks.
  When proving requesters, clients can use their own invariants with mask <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.expr.html#E"><span class="id" title="module">E</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="library">coPset</span></span>,
  such that <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.expr.html#E"><span class="id" title="module">E</span></a></span> <span class="inlinecode">⊆</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a></span> <span class="inlinecode">\</span> <span class="inlinecode">↑<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a></span> and <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">I</span></a></span> <span class="inlinecode">⊆</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a></span> <span class="inlinecode">\</span> <span class="inlinecode">↑<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a></span> <span class="inlinecode">\</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.expr.html#E"><span class="id" title="module">E</span></a></span>.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="masks.t" class="idref" href="#masks.t"><span class="id" title="record">t</span></a> : <span class="id" title="keyword">Set</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.O" class="idref" href="#masks.O"><span class="id" title="projection">O</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>; </div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a></span>uter mask 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.I" class="idref" href="#masks.I"><span class="id" title="projection">I</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>; </div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">I</span></a></span>nner mask 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.order" class="idref" href="#masks.order"><span class="id" title="projection">order</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:17"><span class="id" title="method">I</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O:16"><span class="id" title="method">O</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.RinO" class="idref" href="#masks.RinO"><span class="id" title="projection">RinO</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O:16"><span class="id" title="method">O</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="masks.default" class="idref" href="#masks.default"><span class="id" title="definition">default</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">I</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> ;<br/>
&nbsp;&nbsp;|}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="masks.t_inh" class="idref" href="#masks.t_inh"><span class="id" title="instance">t_inh</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Inhabited"><span class="id" title="class">Inhabited</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.t"><span class="id" title="record">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">exact</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#populate"><span class="id" title="constructor">populate</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">default</span></a>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="masks.hints" class="idref" href="#masks.hints"><span class="id" title="module">hints</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">order</span> <span class="id" title="var">RinO</span> : <span class="id" title="var">ndisj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.hints"><span class="id" title="module">hints</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks"><span class="id" title="module">masks</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.hints"><span class="id" title="module">masks.hints</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Type</span> (<span class="id" title="var">m</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#t"><span class="id" title="record">masks.t</span></a>).<br/>

<br/>
<span class="comment">(***&nbsp;Apps&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="App" class="idref" href="#App"><span class="id" title="module">App</span></a>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a></span>s bundle an LTS with its event type.
  <span class="inlinecode"><span class="id" title="var">AuthSet.inG</span></span> <span class="inlinecode">...</span> asserts that Σ has an auth set over the type of the LTS. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="5708e05d69a78c7c9bc39a82b007386a" class="idref" href="#5708e05d69a78c7c9bc39a82b007386a"><span class="id" title="module">Σ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="eb60a19c2eb608167c17bc436e967bcf" class="idref" href="#eb60a19c2eb608167c17bc436e967bcf"><span class="id" title="record">app</span></a> {<a id="f8cd4500ff4fee5cd966dfeb97ee3847" class="idref" href="#f8cd4500ff4fee5cd966dfeb97ee3847"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="d3a9bd6ee4c10e7cb434b664c334c435" class="idref" href="#d3a9bd6ee4c10e7cb434b664c334c435"><span class="id" title="projection">evt</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="2725be836e6282bac9070dd3973f8702" class="idref" href="#2725be836e6282bac9070dd3973f8702"><span class="id" title="projection">lts</span></a> : <span class="id" title="abbreviation">LTS</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:22"><span class="id" title="method">evt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="edcb7e13f8ee4356e6cb796b3802e0a1" class="idref" href="#edcb7e13f8ee4356e6cb796b3802e0a1"><span class="id" title="projection">inG</span></a> :: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f8cd4500ff4fee5cd966dfeb97ee3847"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts:23"><span class="id" title="method">lts</span></a>.(<span class="id" title="abbreviation">lts_state</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eb60a19c2eb608167c17bc436e967bcf"><span class="id" title="class">app</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#012b9960fbb371378bdb3b6aff0b3a5a"><span class="id" title="constructor">mk</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">evt</span> <span class="id" title="var">lts</span> {<span class="id" title="var">_</span>} : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d3a9bd6ee4c10e7cb434b664c334c435"><span class="id" title="method">evt</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2725be836e6282bac9070dd3973f8702"><span class="id" title="method">lts</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#edcb7e13f8ee4356e6cb796b3802e0a1"><span class="id" title="method">inG</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5708e05d69a78c7c9bc39a82b007386a"><span class="id" title="module">Σ</span></a>.<br/>

<br/>
</div>

<div class="doc">
BI-general version of Σ.app 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="App.app" class="idref" href="#App.app"><span class="id" title="record">app</span></a> `{<a id="H:26" class="idref" href="#H:26"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:25" class="idref" href="#PROP:25"><span class="id" title="binder"><span id="H:26" class="id">PROP</span></span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="App.evt" class="idref" href="#App.evt"><span class="id" title="projection">evt</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="App.lts" class="idref" href="#App.lts"><span class="id" title="projection">lts</span></a> : <span class="id" title="abbreviation">LTS</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:28"><span class="id" title="method">evt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="App.inG" class="idref" href="#App.inG"><span class="id" title="projection">inG</span></a> :: <a class="idref" href="bedrock.lang.bi.prop_constraints.html#HasUsualOwn"><span class="id" title="class">HasUsualOwn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#PROP:25"><span class="id" title="variable">PROP</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts:29"><span class="id" title="method">lts</span></a>.(<span class="id" title="abbreviation">lts_state</span>));<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.mk"><span class="id" title="constructor">mk</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">evt</span> <span class="id" title="var">lts</span> {<span class="id" title="var">_</span>} : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.inG"><span class="id" title="method">inG</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>

<br/>
<span class="comment">(***&nbsp;Steps&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="Step" class="idref" href="#Step"><span class="id" title="module">Step</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*<span class="inlinecode"><span class="id" title="var">NOTE</span>:</span> <span class="inlinecode"><span class="id" title="var">tau_safe</span></span>&nbsp;is&nbsp;vacuous&nbsp;if&nbsp;<span class="inlinecode"><span class="id" title="var">sset</span></span>&nbsp;is&nbsp;empty.&nbsp;The&nbsp;toplevel<br/>
&nbsp;&nbsp;&nbsp;&nbsp;invariant&nbsp;holding&nbsp;the&nbsp;whole&nbsp;system-state&nbsp;auth&nbsp;should&nbsp;record&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">sset</span></span>&nbsp;is&nbsp;nonempty.&nbsp;&nbsp;Nonemptiness&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">sset</span></span>&nbsp;is&nbsp;preserved&nbsp;by<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">updater</span></span>.&nbsp;Nonemptiness&nbsp;is&nbsp;established&nbsp;initially&nbsp;by&nbsp;starting&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;system&nbsp;in&nbsp;a&nbsp;state&nbsp;related&nbsp;to&nbsp;the&nbsp;initial&nbsp;state&nbsp;of&nbsp;the&nbsp;whole-system<br/>
&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;<span class="inlinecode"><span class="id" title="var">AuthSet.auth_exact</span></span> <span class="inlinecode"><span class="id" title="var">γ</span></span> <span class="inlinecode">{[</span> <span class="inlinecode"><span class="id" title="var">wholesystem_init</span></span> <span class="inlinecode">]}</span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="Step.tau_safe" class="idref" href="#Step.tau_safe"><span class="id" title="abbreviation">tau_safe</span></a> <span class="id" title="var">lts</span> <span class="id" title="var">sset</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:31" class="idref" href="#s:31"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:31"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':32" class="idref" href="#s':32"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">lts</span>.(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:31"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':32"><span class="id" title="variable">s'</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Step.with_app" class="idref" href="#Step.with_app"><span class="id" title="section">with_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:34" class="idref" href="#H:34"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:33" class="idref" href="#PROP:33"><span class="id" title="binder"><span id="H:34" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:35" class="idref" href="#BiFUpd0:35"><span class="id" title="binder">!</span></a><a id="BiFUpd0:35" class="idref" href="#BiFUpd0:35"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:35" class="idref" href="#BiFUpd0:35"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="x:36" class="idref" href="#x:36"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.app"><span class="id" title="class">App.app</span></a>) (<a id="E:37" class="idref" href="#E:37"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Type</span> (<span class="id" title="var">γ</span> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "All".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;avoids&nbsp;duplicate&nbsp;reasoning&nbsp;to&nbsp;establish&nbsp;a&nbsp;property&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;typically&nbsp;about&nbsp;the&nbsp;final&nbsp;state:&nbsp;once&nbsp;to&nbsp;prove&nbsp;the&nbsp;atomic_pre,&nbsp;then&nbsp;in&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;learn&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;during&nbsp;the&nbsp;atomic_pre&nbsp;proof&nbsp;and&nbsp;you&nbsp;get&nbsp;to&nbsp;use&nbsp;it&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.&nbsp;Use&nbsp;the&nbsp;lemma<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">requester_learn_implies</span></span>&nbsp;with&nbsp;an&nbsp;appropriate&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;before&nbsp;proving&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="var">requester</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.gen_requester_learn" class="idref" href="#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a id="m:38" class="idref" href="#m:38"><span class="id" title="binder">m</span></a> <a id="53c4cb77ec0f68b3b6fc377e98c1716b" class="idref" href="#53c4cb77ec0f68b3b6fc377e98c1716b"><span class="id" title="binder">γ</span></a> (<a id="STEP:40" class="idref" href="#STEP:40"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="learn:41" class="idref" href="#learn:41"><span class="id" title="binder">learn</span></a> : <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Q:42" class="idref" href="#Q:42"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">AC</span></a>  <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∀</span></a> <a id="sset:43" class="idref" href="#sset:43"><span class="id" title="binder"><span id="sset:45" class="id"><span id="sset:46" class="id"><span id="sset:51" class="id"><span id="sset:52" class="id"><span id="sset:58" class="id"><span id="sset:59" class="id">sset</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#53c4cb77ec0f68b3b6fc377e98c1716b"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:46"><span class="id" title="variable">sset</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:47" class="idref" href="#s:47"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:47"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:46"><span class="id" title="variable">sset</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="comment">(*The&nbsp;model&nbsp;is&nbsp;safe&nbsp;to&nbsp;step&nbsp;any&nbsp;event&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">STEP</span></span>.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:48" class="idref" href="#s:48"><span class="id" title="binder">s</span></a> <a id="e:49" class="idref" href="#e:49"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:48"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:46"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:49"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:40"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':50" class="idref" href="#s':50"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:48"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:49"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':50"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:41"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:48"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:49"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':50"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">@</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:38"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:38"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">masks.I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∃</span></a> <a id="e:44" class="idref" href="#e:44"><span class="id" title="binder"><span id="e:53" class="id"><span id="e:54" class="id"><span id="e:60" class="id"><span id="e:61" class="id">e</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:54"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:40"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#53c4cb77ec0f68b3b6fc377e98c1716b"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':55" class="idref" href="#s':55"><span class="id" title="binder"><span id="s':56" class="id">s'</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:57" class="idref" href="#s:57"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:52"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:57"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:54"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':55"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:41"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:57"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:54"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':55"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:42"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:61"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a requester /proves/ in order to perform its
        own <span class="inlinecode"><span class="id" title="var">STEP</span></span> action. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.gen_requester" class="idref" href="#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a id="m:62" class="idref" href="#m:62"><span class="id" title="binder">m</span></a> <a id="1486e6bd6a1aff12f93283a00dce7905" class="idref" href="#1486e6bd6a1aff12f93283a00dce7905"><span class="id" title="binder">γ</span></a> (<a id="STEP:64" class="idref" href="#STEP:64"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:65" class="idref" href="#Q:65"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:62"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1486e6bd6a1aff12f93283a00dce7905"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:64"><span class="id" title="variable">STEP</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:65"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a committer /assumes/ in order to perform a
        <span class="inlinecode"><span class="id" title="var">STEP</span></span> action. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.gen_committer" class="idref" href="#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a id="m:66" class="idref" href="#m:66"><span class="id" title="binder">m</span></a> <a id="3b30edb83f270077543e06e2075c3b3f" class="idref" href="#3b30edb83f270077543e06e2075c3b3f"><span class="id" title="binder">γ</span></a> (<a id="STEP:68" class="idref" href="#STEP:68"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:69" class="idref" href="#Q:69"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">AU</span></a>  <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∃∃</span></a> <a id="sset:70" class="idref" href="#sset:70"><span class="id" title="binder"><span id="sset:73" class="id"><span id="sset:74" class="id"><span id="sset:80" class="id">sset</span></span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3b30edb83f270077543e06e2075c3b3f"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:73"><span class="id" title="variable">sset</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">@</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:66"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:66"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∀∀</span></a> <a id="sset':71" class="idref" href="#sset':71"><span class="id" title="binder"><span id="sset':75" class="id"><span id="sset':81" class="id">sset'</span></span></span></a> <a id="e:72" class="idref" href="#e:72"><span class="id" title="binder"><span id="e:76" class="id"><span id="e:82" class="id">e</span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:76"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:68"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:77" class="idref" href="#s:77"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:77"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':75"><span class="id" title="variable">sset'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="s':78" class="idref" href="#s':78"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':78"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':75"><span class="id" title="variable">sset'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:79" class="idref" href="#s:79"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:79"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:74"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:79"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:76"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':78"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3b30edb83f270077543e06e2075c3b3f"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':75"><span class="id" title="variable">sset'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:69"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:82"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.alt_gen_committer" class="idref" href="#Step.alt_gen_committer"><span class="id" title="definition">alt_gen_committer</span></a> <a id="m:83" class="idref" href="#m:83"><span class="id" title="binder">m</span></a> <a id="b12fc19e382e87051c8752fe592ad971" class="idref" href="#b12fc19e382e87051c8752fe592ad971"><span class="id" title="binder">γ</span></a> (<a id="STEP:85" class="idref" href="#STEP:85"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:86" class="idref" href="#Q:86"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="sset0:87" class="idref" href="#sset0:87"><span class="id" title="binder">sset0</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b12fc19e382e87051c8752fe592ad971"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset0:87"><span class="id" title="variable">sset0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:83"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:83"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="sset:88" class="idref" href="#sset:88"><span class="id" title="binder">sset</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset0:87"><span class="id" title="variable">sset0</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:88"><span class="id" title="variable">sset</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="sset':89" class="idref" href="#sset':89"><span class="id" title="binder">sset'</span></a> <a id="e:90" class="idref" href="#e:90"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:90"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:85"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:91" class="idref" href="#s:91"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:91"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':89"><span class="id" title="variable">sset'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="s':92" class="idref" href="#s':92"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':92"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':89"><span class="id" title="variable">sset'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:93" class="idref" href="#s:93"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:93"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:88"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:93"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:90"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':92"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:83"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:83"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#110137cd1237291d2aaa53ff6cacba47"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b12fc19e382e87051c8752fe592ad971"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':89"><span class="id" title="variable">sset'</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:86"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:90"><span class="id" title="variable">e</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a requester /proves/ in order to perform its
        own <span class="inlinecode"><span class="id" title="var">STEP</span></span> action.
    TODO: requester := requester_learn γ STEP (λ _  , True) Q.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.requester" class="idref" href="#Step.requester"><span class="id" title="definition">requester</span></a> <a id="531ae133224ae9d60e87320eae3ab4eb" class="idref" href="#531ae133224ae9d60e87320eae3ab4eb"><span class="id" title="binder">γ</span></a> (<a id="STEP:95" class="idref" href="#STEP:95"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:96" class="idref" href="#Q:96"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">AC</span></a>  <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∀</span></a> <a id="s:97" class="idref" href="#s:97"><span class="id" title="binder"><span id="s:99" class="id"><span id="s:100" class="id"><span id="s:103" class="id"><span id="s:104" class="id"><span id="s:109" class="id"><span id="s:110" class="id">s</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#531ae133224ae9d60e87320eae3ab4eb"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:100"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="comment">(*The&nbsp;model&nbsp;is&nbsp;safe&nbsp;to&nbsp;step&nbsp;any&nbsp;event&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">STEP</span></span>.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:101" class="idref" href="#e:101"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:101"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:95"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':102" class="idref" href="#s':102"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:100"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:101"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':102"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∃</span></a> <a id="e:98" class="idref" href="#e:98"><span class="id" title="binder"><span id="e:105" class="id"><span id="e:106" class="id"><span id="e:111" class="id"><span id="e:112" class="id">e</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:106"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:95"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#531ae133224ae9d60e87320eae3ab4eb"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':107" class="idref" href="#s':107"><span class="id" title="binder"><span id="s':108" class="id">s'</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:104"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:106"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':107"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:96"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:112"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;avoids&nbsp;duplicate&nbsp;reasoning&nbsp;to&nbsp;establish&nbsp;a&nbsp;property&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;typically&nbsp;about&nbsp;the&nbsp;final&nbsp;state:&nbsp;once&nbsp;to&nbsp;prove&nbsp;the&nbsp;atomic_pre,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;in&nbsp;the&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;learn&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;during&nbsp;the&nbsp;atomic_pre&nbsp;proof&nbsp;and&nbsp;you&nbsp;get&nbsp;to&nbsp;use&nbsp;it<br/>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Use&nbsp;the&nbsp;lemma&nbsp;<span class="inlinecode"><span class="id" title="var">requester_learn_implies</span></span>&nbsp;with&nbsp;an&nbsp;appropriate&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;before&nbsp;proving&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="var">requester</span></span>&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.requester_learn" class="idref" href="#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> <a id="38b624dd8f05cf712514e16a4bcf9beb" class="idref" href="#38b624dd8f05cf712514e16a4bcf9beb"><span class="id" title="binder">γ</span></a> (<a id="STEP:114" class="idref" href="#STEP:114"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="learn:115" class="idref" href="#learn:115"><span class="id" title="binder">learn</span></a> : <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Q:116" class="idref" href="#Q:116"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">AC</span></a>  <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∀</span></a> <a id="s:117" class="idref" href="#s:117"><span class="id" title="binder"><span id="s:119" class="id"><span id="s:120" class="id"><span id="s:123" class="id"><span id="s:124" class="id"><span id="s:128" class="id"><span id="s:129" class="id">s</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#38b624dd8f05cf712514e16a4bcf9beb"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:120"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="comment">(*The&nbsp;model&nbsp;is&nbsp;safe&nbsp;to&nbsp;step&nbsp;any&nbsp;event&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">STEP</span></span>.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:121" class="idref" href="#e:121"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:121"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:114"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':122" class="idref" href="#s':122"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:120"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:121"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':122"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:115"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:120"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:121"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':122"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∃</span></a> <a id="e:118" class="idref" href="#e:118"><span class="id" title="binder"><span id="e:125" class="id"><span id="e:126" class="id"><span id="e:130" class="id"><span id="e:131" class="id">e</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:126"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:114"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="s':127" class="idref" href="#s':127"><span class="id" title="binder">s'</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:124"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:126"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':127"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:115"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:124"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:126"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':127"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#38b624dd8f05cf712514e16a4bcf9beb"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':127"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:116"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:131"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a committer /assumes/ in order to perform a
        <span class="inlinecode"><span class="id" title="var">STEP</span></span> action. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.committer" class="idref" href="#Step.committer"><span class="id" title="definition">committer</span></a> <a id="a08bac321961039a33589098be03bb39" class="idref" href="#a08bac321961039a33589098be03bb39"><span class="id" title="binder">γ</span></a> (<a id="STEP:133" class="idref" href="#STEP:133"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:134" class="idref" href="#Q:134"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">AU</span></a>  <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∃∃</span></a> <a id="sset:135" class="idref" href="#sset:135"><span class="id" title="binder"><span id="sset:139" class="id"><span id="sset:140" class="id"><span id="sset:144" class="id">sset</span></span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a08bac321961039a33589098be03bb39"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:139"><span class="id" title="variable">sset</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∀∀</span></a> <a id="s:136" class="idref" href="#s:136"><span class="id" title="binder"><span id="s:141" class="id"><span id="s:145" class="id">s</span></span></span></a> <a id="e:137" class="idref" href="#e:137"><span class="id" title="binder"><span id="e:142" class="id"><span id="e:146" class="id">e</span></span></span></a> <a id="s':138" class="idref" href="#s':138"><span class="id" title="binder"><span id="s':143" class="id"><span id="s':147" class="id">s'</span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:141"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:140"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:142"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:133"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:141"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:142"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':143"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a08bac321961039a33589098be03bb39"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':143"><span class="id" title="variable">s'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:134"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:146"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
Updaters grant the right to make silent (tau) steps. They're justified
        by opening the decompose invariants of the framework. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.updater_def" class="idref" href="#Step.updater_def"><span class="id" title="definition">updater_def</span></a> <a id="93cf703066592093a333e099f71d45cf" class="idref" href="#93cf703066592093a333e099f71d45cf"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="sset:149" class="idref" href="#sset:149"><span class="id" title="binder">sset</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_state</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:150" class="idref" href="#s:150"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:150"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:149"><span class="id" title="variable">sset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.tau_safe"><span class="id" title="abbreviation">tau_safe</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:149"><span class="id" title="variable">sset</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#93cf703066592093a333e099f71d45cf"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:149"><span class="id" title="variable">sset</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#93cf703066592093a333e099f71d45cf"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':151" class="idref" href="#s':151"><span class="id" title="binder"><span id="s':152" class="id">s'</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:153" class="idref" href="#s:153"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:153"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:149"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:153"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':151"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Iris-style&nbsp;sealing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="Step.updater_aux" class="idref" href="#Step.updater_aux"><span class="id" title="definition">updater_aux</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#seal"><span class="id" title="record">seal</span></a> (@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_def"><span class="id" title="definition">updater_def</span></a>). <span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.updater" class="idref" href="#Step.updater"><span class="id" title="definition">updater</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_aux"><span class="id" title="definition">updater_aux</span></a>.(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#unseal"><span class="id" title="projection">unseal</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.updater_unseal" class="idref" href="#Step.updater_unseal"><span class="id" title="definition">updater_unseal</span></a> : @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_aux"><span class="id" title="definition">updater_aux</span></a>.(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#seal_eq"><span class="id" title="projection">seal_eq</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.updater_persistent" class="idref" href="#Step.updater_persistent"><span class="id" title="instance">updater_persistent</span></a> <a id="5c770ebd012d2a923bce1f8811fe72c1" class="idref" href="#5c770ebd012d2a923bce1f8811fe72c1"><span class="id" title="binder">γ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#Persistent"><span class="id" title="class">Persistent</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5c770ebd012d2a923bce1f8811fe72c1"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_unseal"><span class="id" title="definition">updater_unseal</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.updater_affine" class="idref" href="#Step.updater_affine"><span class="id" title="instance">updater_affine</span></a> <a id="0cb875bbddee084acd0d791fa0647e0d" class="idref" href="#0cb875bbddee084acd0d791fa0647e0d"><span class="id" title="binder">γ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#Affine"><span class="id" title="class">Affine</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0cb875bbddee084acd0d791fa0647e0d"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_unseal"><span class="id" title="definition">updater_unseal</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We have the following relations:

<div class="paragraph"> </div>

          GRL ---------&gt; GR ---------&gt; GC
          ^             ^              |
          |             |              ∨
          RL ----------&gt; R  ---------&gt; C

<div class="paragraph"> </div>

      + C  : committer
      + GC : gen_committer
      + GRL: gen_requester_learn
      + RL : requester_learn
      + GR : gen_requester
      + R  : requester
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_learn_implies" class="idref" href="#Step.requester_learn_implies"><span class="id" title="lemma">requester_learn_implies</span></a> `{<a id="BiBUpdFUpd0:156" class="idref" href="#BiBUpdFUpd0:156"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:156" class="idref" href="#BiBUpdFUpd0:156"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:156" class="idref" href="#BiBUpdFUpd0:156"><span class="id" title="binder">PROP</span></a>} <a id="P:157" class="idref" href="#P:157"><span class="id" title="binder">P</span></a> <a id="c31ba324ef8ad5c480dbfc71008f0578" class="idref" href="#c31ba324ef8ad5c480dbfc71008f0578"><span class="id" title="binder">γ</span></a> <a id="STEP:159" class="idref" href="#STEP:159"><span class="id" title="binder">STEP</span></a> <a id="Q:160" class="idref" href="#Q:160"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c31ba324ef8ad5c480dbfc71008f0578"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:159"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:157"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:160"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c31ba324ef8ad5c480dbfc71008f0578"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:159"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:160"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">t</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">t</span>. <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HI</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "?"; [<span class="id" title="var">set_solver</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "W"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_learn_gen_requester_learn" class="idref" href="#Step.requester_learn_gen_requester_learn"><span class="id" title="lemma">requester_learn_gen_requester_learn</span></a> `{<a id="BiBUpdFUpd0:161" class="idref" href="#BiBUpdFUpd0:161"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:161" class="idref" href="#BiBUpdFUpd0:161"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:161" class="idref" href="#BiBUpdFUpd0:161"><span class="id" title="binder">PROP</span></a>} <a id="P:162" class="idref" href="#P:162"><span class="id" title="binder">P</span></a> <a id="d4486c51ddab04ea873d1a3fccd8f01e" class="idref" href="#d4486c51ddab04ea873d1a3fccd8f01e"><span class="id" title="binder">γ</span></a> <a id="STEP:164" class="idref" href="#STEP:164"><span class="id" title="binder">STEP</span></a> <a id="Q:165" class="idref" href="#Q:165"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d4486c51ddab04ea873d1a3fccd8f01e"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:164"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:162"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:165"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">masks.default</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d4486c51ddab04ea873d1a3fccd8f01e"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:164"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:162"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:165"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">s0</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s0</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a>. <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HI</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "?"; [<span class="id" title="var">set_solver</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "W"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_learn_mono" class="idref" href="#Step.gen_requester_learn_mono"><span class="id" title="lemma">gen_requester_learn_mono</span></a> <a id="m:166" class="idref" href="#m:166"><span class="id" title="binder">m</span></a> <a id="5265a3c0a909c052205abc02307c0297" class="idref" href="#5265a3c0a909c052205abc02307c0297"><span class="id" title="binder">γ</span></a> <a id="STEP:168" class="idref" href="#STEP:168"><span class="id" title="binder">STEP</span></a> `{<a id="BiBUpdFUpd0:169" class="idref" href="#BiBUpdFUpd0:169"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:169" class="idref" href="#BiBUpdFUpd0:169"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:169" class="idref" href="#BiBUpdFUpd0:169"><span class="id" title="binder">PROP</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>  (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>)))<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:166"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5265a3c0a909c052205abc02307c0297"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:168"><span class="id" title="variable">STEP</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> =&gt; <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">HP</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">t</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HI</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">IN0</span> &amp; <span class="id" title="var">HI</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">t</span>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">IN0</span>) "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"W" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[&gt;-]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$"; <span class="id" title="var">last</span> <span class="id" title="var">done</span>. <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_learn_gen_requester" class="idref" href="#Step.gen_requester_learn_gen_requester"><span class="id" title="lemma">gen_requester_learn_gen_requester</span></a> `{<a id="BiBUpdFUpd0:170" class="idref" href="#BiBUpdFUpd0:170"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:170" class="idref" href="#BiBUpdFUpd0:170"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:170" class="idref" href="#BiBUpdFUpd0:170"><span class="id" title="binder">PROP</span></a>} <a id="P:171" class="idref" href="#P:171"><span class="id" title="binder">P</span></a> <a id="m:172" class="idref" href="#m:172"><span class="id" title="binder">m</span></a> <a id="d0c9676e0a6fd489d1adac4115dd1009" class="idref" href="#d0c9676e0a6fd489d1adac4115dd1009"><span class="id" title="binder">γ</span></a> <a id="STEP:174" class="idref" href="#STEP:174"><span class="id" title="binder">STEP</span></a> <a id="Q:175" class="idref" href="#Q:175"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:172"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d0c9676e0a6fd489d1adac4115dd1009"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:174"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:171"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:175"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:172"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d0c9676e0a6fd489d1adac4115dd1009"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:174"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:175"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn_mono"><span class="id" title="lemma">gen_requester_learn_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_gen_requester" class="idref" href="#Step.requester_gen_requester"><span class="id" title="lemma">requester_gen_requester</span></a> <a id="6de60eeb94c41ec891c867c26876b03a" class="idref" href="#6de60eeb94c41ec891c867c26876b03a"><span class="id" title="binder">γ</span></a> <a id="STEP:177" class="idref" href="#STEP:177"><span class="id" title="binder">STEP</span></a> <a id="Q:178" class="idref" href="#Q:178"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6de60eeb94c41ec891c867c26876b03a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:177"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:178"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">masks.default</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6de60eeb94c41ec891c867c26876b03a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:177"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:178"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">s0</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s0</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a>. <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "W". <span class="id" title="var">iFrame</span> (<span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">_</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':179" class="idref" href="#s':179"><span class="id" title="binder"><span id="s':180" class="id"><span id="s':184" class="id"><span id="s':185" class="id"><span id="s':189" class="id"><span id="s':190" class="id">s'</span></span></span></span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:181" class="idref" href="#s:181"><span class="id" title="binder"><span id="s:186" class="id"><span id="s:191" class="id">s</span></span></span></a> : <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:181"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s0</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:181"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">ev</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':179"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>)%<span class="id" title="keyword">type</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':182" class="idref" href="#s':182"><span class="id" title="binder"><span id="s':183" class="id"><span id="s':187" class="id"><span id="s':188" class="id"><span id="s':192" class="id"><span id="s':193" class="id">s'</span></span></span></span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <span class="id" title="var">s0</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">ev</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':182"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_committer_committer" class="idref" href="#Step.gen_committer_committer"><span class="id" title="lemma">gen_committer_committer</span></a> <a id="8ccf86f024bf8e2488476a43f199acbc" class="idref" href="#8ccf86f024bf8e2488476a43f199acbc"><span class="id" title="binder">γ</span></a> <a id="STEP:195" class="idref" href="#STEP:195"><span class="id" title="binder">STEP</span></a> <a id="Q:196" class="idref" href="#Q:196"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">masks.default</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8ccf86f024bf8e2488476a43f199acbc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:195"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:196"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8ccf86f024bf8e2488476a43f199acbc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:195"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:196"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "AU".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">sset</span>) "[A Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">sset</span>. <span class="id" title="var">iFrame</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;abort&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[Close _]". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Close". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[_ Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">s'</span>) "[%HI A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a>. <span class="id" title="var">iFrame</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">gen_committer</span></span>&nbsp;is&nbsp;stronger&nbsp;than&nbsp;<span class="inlinecode"><span class="id" title="var">alt_gen_committer</span></span>&nbsp;in&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">gen_committer</span></span>&nbsp;allows&nbsp;peeking.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Meanwhile,&nbsp;the&nbsp;reverse&nbsp;direction&nbsp;needs&nbsp;to&nbsp;know&nbsp;the&nbsp;refinement&nbsp;invariant.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_committer_alt_gen_committer" class="idref" href="#Step.gen_committer_alt_gen_committer"><span class="id" title="lemma">gen_committer_alt_gen_committer</span></a> `{<a id="BiBUpdFUpd0:197" class="idref" href="#BiBUpdFUpd0:197"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:197" class="idref" href="#BiBUpdFUpd0:197"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:197" class="idref" href="#BiBUpdFUpd0:197"><span class="id" title="binder">PROP</span></a>} <a id="m:198" class="idref" href="#m:198"><span class="id" title="binder">m</span></a> <a id="6b8b897b53825509484043b57ef582cc" class="idref" href="#6b8b897b53825509484043b57ef582cc"><span class="id" title="binder">γ</span></a> <a id="STEP:200" class="idref" href="#STEP:200"><span class="id" title="binder">STEP</span></a> <a id="Q:201" class="idref" href="#Q:201"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:198"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6b8b897b53825509484043b57ef582cc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:200"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:201"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.alt_gen_committer"><span class="id" title="definition">alt_gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:198"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6b8b897b53825509484043b57ef582cc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:200"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:201"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "AU".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.alt_gen_committer"><span class="id" title="definition">alt_gen_committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">sset0</span>) "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">sset</span>) "[A [_ Close]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">sset0</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">sset</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F A"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "%sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">sset</span>. <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">sset'</span> <span class="id" title="var">e</span>) "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F A"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[$ A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">sset'</span> <span class="id" title="var">e</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$A $H]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.committer_proper" class="idref" href="#Step.committer_proper"><span class="id" title="instance">committer_proper</span></a> <a id="1c5a00c0069b8c8624e7ed68d4238bbf" class="idref" href="#1c5a00c0069b8c8624e7ed68d4238bbf"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1c5a00c0069b8c8624e7ed68d4238bbf"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;AUTO:&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_tidy</span></span>&nbsp;calls&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_prepare</span></span>&nbsp;twice&nbsp;hence&nbsp;unfolds&nbsp;sealing&nbsp;wrappers.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>; <span class="id" title="var">solve_proper_tidy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.requester_proper" class="idref" href="#Step.requester_proper"><span class="id" title="instance">requester_proper</span></a> <a id="f0ce66ebbcb59c60054e361ed1b28f6f" class="idref" href="#f0ce66ebbcb59c60054e361ed1b28f6f"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f0ce66ebbcb59c60054e361ed1b28f6f"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">f_equiv_tidy</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">iff_forall</span> =&gt; <span class="id" title="var">i</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.gen_committer_proper" class="idref" href="#Step.gen_committer_proper"><span class="id" title="instance">gen_committer_proper</span></a> <a id="m:204" class="idref" href="#m:204"><span class="id" title="binder">m</span></a> <a id="f73da999b0d8ffa7e94367bb3a1fe991" class="idref" href="#f73da999b0d8ffa7e94367bb3a1fe991"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:204"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f73da999b0d8ffa7e94367bb3a1fe991"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;AUTO:&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_tidy</span></span>&nbsp;calls&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_prepare</span></span>&nbsp;twice&nbsp;hence&nbsp;unfolds&nbsp;sealing&nbsp;wrappers.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>; <span class="id" title="var">solve_proper_tidy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.gen_requester_learn_proper" class="idref" href="#Step.gen_requester_learn_proper"><span class="id" title="instance">gen_requester_learn_proper</span></a> <a id="m:206" class="idref" href="#m:206"><span class="id" title="binder">m</span></a> <a id="a0977fa7a7ee7e9146de31e768117592" class="idref" href="#a0977fa7a7ee7e9146de31e768117592"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>  (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:206"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a0977fa7a7ee7e9146de31e768117592"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">HP</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="var">f_equiv_tidy</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.gen_requester_proper" class="idref" href="#Step.gen_requester_proper"><span class="id" title="instance">gen_requester_proper</span></a> <a id="m:208" class="idref" href="#m:208"><span class="id" title="binder">m</span></a> <a id="df2ebc77a0b55bd71fe3c9e774b77a21" class="idref" href="#df2ebc77a0b55bd71fe3c9e774b77a21"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:208"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#df2ebc77a0b55bd71fe3c9e774b77a21"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a>. <span class="id" title="var">solve_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Stronger than the "obvious" statement thanks to the extra <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">STEP</span></span>
    assumption in the hypothesis. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_proper_strong" class="idref" href="#Step.requester_proper_strong"><span class="id" title="lemma">requester_proper_strong</span></a> <a id="00f232e4cd0a76f9440ce8cbf69ae58e" class="idref" href="#00f232e4cd0a76f9440ce8cbf69ae58e"><span class="id" title="binder">γ</span></a> (<a id="STEP:211" class="idref" href="#STEP:211"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:212" class="idref" href="#f:212"><span class="id" title="binder">f</span></a> <a id="g:213" class="idref" href="#g:213"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:214" class="idref" href="#e:214"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:214"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:211"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:212"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:214"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:213"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:214"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#00f232e4cd0a76f9440ce8cbf69ae58e"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:211"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> =&gt; <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_eq"><span class="id" title="definition">atomic_commit_eq</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_def"><span class="id" title="definition">atomic_commit_def</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 6 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>. <span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Stronger than the "obvious" statement thanks to the extra <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">STEP</span></span>
    assumption in the hypothesis. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.committer_proper_strong" class="idref" href="#Step.committer_proper_strong"><span class="id" title="lemma">committer_proper_strong</span></a> <a id="397088dabf54b5cc30649a5d41fa02bc" class="idref" href="#397088dabf54b5cc30649a5d41fa02bc"><span class="id" title="binder">γ</span></a> (<a id="STEP:216" class="idref" href="#STEP:216"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:217" class="idref" href="#f:217"><span class="id" title="binder">f</span></a> <a id="g:218" class="idref" href="#g:218"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:219" class="idref" href="#e:219"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:219"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:216"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:217"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:219"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:218"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:219"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#397088dabf54b5cc30649a5d41fa02bc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:216"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> =&gt; <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_unseal"><span class="id" title="definition">atomic.atomic_update_unseal</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_def"><span class="id" title="definition">atomic.atomic_update_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_pre"><span class="id" title="definition">atomic_update_pre</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 14 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>; <span class="id" title="var">iIntros</span> ([? []]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_learn_proper_strong" class="idref" href="#Step.gen_requester_learn_proper_strong"><span class="id" title="lemma">gen_requester_learn_proper_strong</span></a> <a id="m:220" class="idref" href="#m:220"><span class="id" title="binder">m</span></a> <a id="1f7feab83d95397e974e1d9756006ca8" class="idref" href="#1f7feab83d95397e974e1d9756006ca8"><span class="id" title="binder">γ</span></a> (<a id="STEP:222" class="idref" href="#STEP:222"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:223" class="idref" href="#f:223"><span class="id" title="binder">f</span></a> <a id="g:224" class="idref" href="#g:224"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:225" class="idref" href="#e:225"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:225"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:222"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:223"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:225"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:224"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:225"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:220"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1f7feab83d95397e974e1d9756006ca8"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:222"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> =&gt; <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">HP</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_eq"><span class="id" title="definition">atomic_commit_eq</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_def"><span class="id" title="definition">atomic_commit_def</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 6 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">f_equiv</span>. <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>. <span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">f_equiv</span>. <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_proper_strong" class="idref" href="#Step.gen_requester_proper_strong"><span class="id" title="lemma">gen_requester_proper_strong</span></a> <a id="m:226" class="idref" href="#m:226"><span class="id" title="binder">m</span></a> <a id="dd067ade874353078f5fe21bee97c8d0" class="idref" href="#dd067ade874353078f5fe21bee97c8d0"><span class="id" title="binder">γ</span></a> (<a id="STEP:228" class="idref" href="#STEP:228"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:229" class="idref" href="#f:229"><span class="id" title="binder">f</span></a> <a id="g:230" class="idref" href="#g:230"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:231" class="idref" href="#e:231"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:231"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:228"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:229"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:231"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:230"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:231"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:226"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dd067ade874353078f5fe21bee97c8d0"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:228"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn_proper_strong"><span class="id" title="lemma">gen_requester_learn_proper_strong</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Stronger than the "obvious" statement thanks to the extra <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">STEP</span></span>
    assumption in the hypothesis. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_committer_proper_strong" class="idref" href="#Step.gen_committer_proper_strong"><span class="id" title="lemma">gen_committer_proper_strong</span></a> <a id="m:232" class="idref" href="#m:232"><span class="id" title="binder">m</span></a> <a id="52c755a6de5d7348221864f3785d0aa9" class="idref" href="#52c755a6de5d7348221864f3785d0aa9"><span class="id" title="binder">γ</span></a> (<a id="STEP:234" class="idref" href="#STEP:234"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:235" class="idref" href="#f:235"><span class="id" title="binder">f</span></a> <a id="g:236" class="idref" href="#g:236"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:237" class="idref" href="#e:237"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:237"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:234"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:235"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:237"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:236"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:237"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:232"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#52c755a6de5d7348221864f3785d0aa9"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:234"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> =&gt; <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_unseal"><span class="id" title="definition">atomic.atomic_update_unseal</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_def"><span class="id" title="definition">atomic.atomic_update_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_pre"><span class="id" title="definition">atomic_update_pre</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 12 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>. <span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="tactic">do</span> 4 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.alt_gen_committer_proper" class="idref" href="#Step.alt_gen_committer_proper"><span class="id" title="instance">alt_gen_committer_proper</span></a> <a id="m:238" class="idref" href="#m:238"><span class="id" title="binder">m</span></a> <a id="b3e653b1ad7b6652af4a4b05da8741ac" class="idref" href="#b3e653b1ad7b6652af4a4b05da8741ac"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.alt_gen_committer"><span class="id" title="definition">alt_gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:238"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b3e653b1ad7b6652af4a4b05da8741ac"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.alt_gen_committer"><span class="id" title="definition">alt_gen_committer</span></a>. <span class="id" title="var">solve_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Stronger than the "obvious" statement thanks to the extra <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">STEP</span></span>
    assumption in the hypothesis. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.alt_gen_committer_proper_strong" class="idref" href="#Step.alt_gen_committer_proper_strong"><span class="id" title="lemma">alt_gen_committer_proper_strong</span></a> <a id="m:240" class="idref" href="#m:240"><span class="id" title="binder">m</span></a> <a id="9d2ddd0aadc811e8ed90d5fa84510fb5" class="idref" href="#9d2ddd0aadc811e8ed90d5fa84510fb5"><span class="id" title="binder">γ</span></a> (<a id="STEP:242" class="idref" href="#STEP:242"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:243" class="idref" href="#f:243"><span class="id" title="binder">f</span></a> <a id="g:244" class="idref" href="#g:244"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:245" class="idref" href="#e:245"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:245"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:242"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:243"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:245"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:244"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:245"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.alt_gen_committer"><span class="id" title="definition">alt_gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:240"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#9d2ddd0aadc811e8ed90d5fa84510fb5"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:242"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.alt_gen_committer"><span class="id" title="definition">alt_gen_committer</span></a> =&gt; <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 11 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>. <span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="tactic">do</span> 4 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.committer_post_mono" class="idref" href="#Step.committer_post_mono"><span class="id" title="lemma">committer_post_mono</span></a> <a id="g:246" class="idref" href="#g:246"><span class="id" title="binder">g</span></a> <a id="STEP:247" class="idref" href="#STEP:247"><span class="id" title="binder">STEP</span></a> <a id="Q1:248" class="idref" href="#Q1:248"><span class="id" title="binder">Q1</span></a> <a id="Q2:249" class="idref" href="#Q2:249"><span class="id" title="binder">Q2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:246"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:247"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:248"><span class="id" title="variable">Q1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="e:250" class="idref" href="#e:250"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:248"><span class="id" title="variable">Q1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:250"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:249"><span class="id" title="variable">Q2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:250"><span class="id" title="variable">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:246"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:247"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:249"><span class="id" title="variable">Q2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "C W". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.atomic_update_properties.html#aupd_ppost_wand"><span class="id" title="lemma">aupd_ppost_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "C"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> (????). <span class="id" title="var">iApply</span> "W".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_committer_post_mono" class="idref" href="#Step.gen_committer_post_mono"><span class="id" title="lemma">gen_committer_post_mono</span></a> <a id="m:251" class="idref" href="#m:251"><span class="id" title="binder">m</span></a> <a id="g:252" class="idref" href="#g:252"><span class="id" title="binder">g</span></a> <a id="STEP:253" class="idref" href="#STEP:253"><span class="id" title="binder">STEP</span></a> <a id="Q1:254" class="idref" href="#Q1:254"><span class="id" title="binder">Q1</span></a> <a id="Q2:255" class="idref" href="#Q2:255"><span class="id" title="binder">Q2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:251"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:252"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:253"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:254"><span class="id" title="variable">Q1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="e:256" class="idref" href="#e:256"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:254"><span class="id" title="variable">Q1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:256"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:255"><span class="id" title="variable">Q2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:256"><span class="id" title="variable">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:251"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:252"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:253"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:255"><span class="id" title="variable">Q2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "C W". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.atomic_update_properties.html#aupd_ppost_wand"><span class="id" title="lemma">aupd_ppost_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "C"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> (???). <span class="id" title="var">iApply</span> "W".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app"><span class="id" title="section">with_app</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> <a id="Step.properC" class="idref" href="#Step.properC"><span class="id" title="abbreviation">properC</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer_proper_strong"><span class="id" title="lemma">committer_proper_strong</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="var">br_opacity</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step"><span class="id" title="module">Step</span></a>.<br/>

<br/>
<span class="comment">(***&nbsp;Satisfiability<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;We&nbsp;provide&nbsp;a&nbsp;simple&nbsp;invariant&nbsp;to&nbsp;demonstrate&nbsp;that&nbsp;Spectra&nbsp;is&nbsp;satisfiable.<br/>
&nbsp;&nbsp;The&nbsp;definition&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">root_inv</span></span>&nbsp;below&nbsp;bundles&nbsp;the&nbsp;authoritative&nbsp;state&nbsp;of<br/>
&nbsp;&nbsp;the&nbsp;LTS&nbsp;but&nbsp;does&nbsp;**not**&nbsp;connect&nbsp;it&nbsp;to&nbsp;the&nbsp;physical&nbsp;state&nbsp;of&nbsp;the&nbsp;system,<br/>
&nbsp;&nbsp;which&nbsp;is&nbsp;necessary&nbsp;to&nbsp;use&nbsp;Spectra&nbsp;to&nbsp;prove&nbsp;an&nbsp;actual&nbsp;refinement.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;In&nbsp;order&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;physical&nbsp;state,&nbsp;the&nbsp;WP&nbsp;of&nbsp;the&nbsp;physical&nbsp;system<br/>
&nbsp;&nbsp;must&nbsp;expose&nbsp;the&nbsp;visible&nbsp;events&nbsp;that&nbsp;it&nbsp;takes&nbsp;(which&nbsp;can&nbsp;be&nbsp;exposed&nbsp;as&nbsp;a&nbsp;trace).<br/>
&nbsp;&nbsp;Using&nbsp;this&nbsp;trace&nbsp;we&nbsp;can&nbsp;construct&nbsp;a&nbsp;true&nbsp;root&nbsp;invariant&nbsp;by&nbsp;bundling&nbsp;the&nbsp;physical<br/>
&nbsp;&nbsp;trace&nbsp;into&nbsp;the&nbsp;root&nbsp;invariant&nbsp;anc&nbsp;connecting&nbsp;it&nbsp;to&nbsp;the&nbsp;trace&nbsp;<span class="inlinecode"><span class="id" title="var">evts</span></span>&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">root_inv</span></span>.<br/>
&nbsp;&nbsp;With&nbsp;this,&nbsp;unpacking&nbsp;this&nbsp;invariant&nbsp;allows&nbsp;us&nbsp;to&nbsp;prove&nbsp;the&nbsp;standard<br/>
&nbsp;&nbsp;termination-insensitive&nbsp;refinement&nbsp;property&nbsp;characterized&nbsp;by&nbsp;trace&nbsp;equivalence<br/>
&nbsp;&nbsp;up&nbsp;to&nbsp;stuttering.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Section</span> <a id="with_app" class="idref" href="#with_app"><span class="id" title="section">with_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:258" class="idref" href="#H:258"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:257" class="idref" href="#PROP:257"><span class="id" title="binder"><span id="H:258" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:259" class="idref" href="#BiFUpd0:259"><span class="id" title="binder">!</span></a><a id="BiFUpd0:259" class="idref" href="#BiFUpd0:259"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:259" class="idref" href="#BiFUpd0:259"><span class="id" title="binder">PROP</span></a>} `{<a id="BiBUpdFUpd0:260" class="idref" href="#BiBUpdFUpd0:260"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:260" class="idref" href="#BiBUpdFUpd0:260"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:260" class="idref" href="#BiBUpdFUpd0:260"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="root:261" class="idref" href="#root:261"><span class="id" title="binder">root</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a>, <a id="E:262" class="idref" href="#E:262"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="root_inv" class="idref" href="#root_inv"><span class="id" title="definition">root_inv</span></a> <a id="ns:263" class="idref" href="#ns:263"><span class="id" title="binder">ns</span></a> <a id="52513d1797f10a4ff0698d83a2bd65d0" class="idref" href="#52513d1797f10a4ff0698d83a2bd65d0"><span class="id" title="binder">γroot</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.invariants.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:263"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="root_set:265" class="idref" href="#root_set:265"><span class="id" title="binder">root_set</span></a> <a id="init_st:266" class="idref" href="#init_st:266"><span class="id" title="binder">init_st</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#52513d1797f10a4ff0698d83a2bd65d0"><span class="id" title="variable">γroot</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_set:265"><span class="id" title="variable">root_set</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:267" class="idref" href="#s:267"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:267"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_set:265"><span class="id" title="variable">root_set</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="projection">Sts._init_state</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#init_st:266"><span class="id" title="variable">init_st</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="s:268" class="idref" href="#s:268"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:268"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_set:265"><span class="id" title="variable">root_set</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="evts:269" class="idref" href="#evts:269"><span class="id" title="binder">evts</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="inductive">reachable</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#init_st:266"><span class="id" title="variable">init_st</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evts:269"><span class="id" title="variable">evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:268"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>.<br/>

<br/>
</div>

<div class="doc">
why is <span class="inlinecode"><span class="id" title="var">inh</span></span> needed even though <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_inv"><span class="id" title="definition">root_inv</span></a></span> already asserts something stronger?
      opening the invariant results in a later. to move the later inside using <span class="inlinecode"><span class="id" title="var">bi.later_exist</span></span>,
      we need that the type is inhabited.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="alloc_updater" class="idref" href="#alloc_updater"><span class="id" title="lemma">alloc_updater</span></a> <a id="ns:270" class="idref" href="#ns:270"><span class="id" title="binder">ns</span></a> <a id="4da11b2964fd2643601766539fa6827c" class="idref" href="#4da11b2964fd2643601766539fa6827c"><span class="id" title="binder">γroot</span></a> {<a id="inh:272" class="idref" href="#inh:272"><span class="id" title="binder">inh</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Inhabited"><span class="id" title="class">Inhabited</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="projection">Sts._state</span>))}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_inv"><span class="id" title="definition">root_inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:270"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4da11b2964fd2643601766539fa6827c"><span class="id" title="variable">γroot</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:270"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4da11b2964fd2643601766539fa6827c"><span class="id" title="variable">γroot</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">sset</span> <span class="id" title="var">nonempty</span> <span class="id" title="var">safe</span>) "frag".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">nonempty</span> =&gt; <span class="id" title="var">s</span> <span class="id" title="var">nonempty</span>; <span class="id" title="tactic">case</span>: (<span class="id" title="var">safe</span> <span class="id" title="var">s</span> <span class="id" title="var">nonempty</span>) =&gt; <span class="id" title="var">s'</span> <span class="id" title="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">sset'</span> <span class="id" title="var">inits</span>) "(&gt;auth &amp; FACTS)" "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">sset</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "frag auth"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "%sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sset''</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':273" class="idref" href="#s':273"><span class="id" title="binder"><span id="s':274" class="id"><span id="s':276" class="id"><span id="s':277" class="id">s'</span></span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:275" class="idref" href="#s:275"><span class="id" title="binder"><span id="s:278" class="id">s</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:275"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:275"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':273"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">nonempty''</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:279" class="idref" href="#s:279"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:279"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset''</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> <span class="id" title="var">γroot</span> <span class="id" title="var">sset''</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "frag auth"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "($ &amp; auth')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[auth' FACTS]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">sset''</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "FACTS" <span class="id" title="keyword">as</span> %(? &amp; ? &amp; <span class="id" title="var">reach</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">reach''</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:280" class="idref" href="#s:280"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:280"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset''</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="evts:281" class="idref" href="#evts:281"><span class="id" title="binder">evts</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="inductive">reachable</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <span class="id" title="var">inits</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evts:281"><span class="id" title="variable">evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:280"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset''</span> =&gt; <span class="id" title="var">s0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">sx</span> []<span class="id" title="var">Hin</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sub</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">case</span>: (<span class="id" title="var">reach</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) =&gt; <span class="id" title="var">evts</span> <span class="id" title="var">Hreach</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">evts</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">econstructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iExists</span> <span class="id" title="var">inits</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app"><span class="id" title="section">with_app</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">Sts</span>.<br/>
<span class="comment">(***&nbsp;App&nbsp;Composition&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="ComposeN" class="idref" href="#ComposeN"><span class="id" title="module">ComposeN</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="ab8251b775ff59f920b756671e6895f2" class="idref" href="#ab8251b775ff59f920b756671e6895f2"><span class="id" title="module">Σ</span></a>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.lib.dfrac_agree.html#dfrac_agree.G"><span class="id" title="record">G</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.lib.dfrac_agree.html#f52d19196a7328d4103bb35fd990754f"><span class="id" title="definition">Σ</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN.fam"><span class="id" title="projection">fam</span></a></span> bundles the requirements that Σ contains all CMRAs
    all constituent LTSes as well as the composed LTS. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="237fda09389312116df7f7ed8430064d" class="idref" href="#237fda09389312116df7f7ed8430064d"><span class="id" title="record">G</span></a> {<a id="dd4ecff0e7618bc3712143ec0202068b" class="idref" href="#dd4ecff0e7618bc3712143ec0202068b"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a>} (<a id="fam:283" class="idref" href="#fam:283"><span class="id" title="binder">fam</span></a> : <span class="id" title="record">Compose.config</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="25c0b7a4d519bc3f887d2a5f32ce7ff7" class="idref" href="#25c0b7a4d519bc3f887d2a5f32ce7ff7"><span class="id" title="projection">comp_inG</span></a> ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:285" class="idref" href="#n:285"><span class="id" title="binder">n</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:283"><span class="id" title="variable">fam</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dd4ecff0e7618bc3712143ec0202068b"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="projection">_state</span> (<span class="id" title="projection">_sts</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span>  <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:285"><span class="id" title="variable">n</span></a>)))) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="e771e6b7bc3222bc4dbd355ef25ceb03" class="idref" href="#e771e6b7bc3222bc4dbd355ef25ceb03"><span class="id" title="projection">whole_inG</span></a> :: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dd4ecff0e7618bc3712143ec0202068b"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="definition">Compose.State</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:283"><span class="id" title="variable">fam</span></a>)) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#237fda09389312116df7f7ed8430064d"><span class="id" title="class">G</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
This also bundles the Compose.config itself 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="3e35c61441aab88222a692a09390282e" class="idref" href="#3e35c61441aab88222a692a09390282e"><span class="id" title="record">compose</span></a> {<a id="d541f9739cec167054278f287499b3ea" class="idref" href="#d541f9739cec167054278f287499b3ea"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="9cfdcf08c5c378373742d29d21efd75b" class="idref" href="#9cfdcf08c5c378373742d29d21efd75b"><span class="id" title="projection">fam</span></a> : <span class="id" title="record">Compose.config</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="a94b63a8a5327c2f0df839bce46ddb18" class="idref" href="#a94b63a8a5327c2f0df839bce46ddb18"><span class="id" title="projection">allGs</span></a> :: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#237fda09389312116df7f7ed8430064d"><span class="id" title="class">G</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d541f9739cec167054278f287499b3ea"><span class="id" title="variable">Σ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:290"><span class="id" title="method">fam</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="65260284fdebd90bac074ed15093a895" class="idref" href="#65260284fdebd90bac074ed15093a895"><span class="id" title="projection">app</span></a> := {| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2725be836e6282bac9070dd3973f8702"><span class="id" title="method">App.Σ.lts</span></a> := <span class="id" title="definition">Compose.compose_lts</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:290"><span class="id" title="method">fam</span></a>  |} ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3e35c61441aab88222a692a09390282e"><span class="id" title="class">compose</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ab8251b775ff59f920b756671e6895f2"><span class="id" title="module">Σ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;BI-general&nbsp;version&nbsp;of&nbsp;Σ.G&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="ComposeN.G" class="idref" href="#ComposeN.G"><span class="id" title="record">G</span></a> `{<a id="H:294" class="idref" href="#H:294"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:293" class="idref" href="#PROP:293"><span class="id" title="binder"><span id="H:294" class="id">PROP</span></span></a>} (<a id="fam:295" class="idref" href="#fam:295"><span class="id" title="binder">fam</span></a> : <span class="id" title="record">Compose.config</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="ComposeN.inGs" class="idref" href="#ComposeN.inGs"><span class="id" title="projection">inGs</span></a> ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:297" class="idref" href="#n:297"><span class="id" title="binder">n</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:295"><span class="id" title="variable">fam</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prop_constraints.html#HasUsualOwn"><span class="id" title="class">HasUsualOwn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#PROP:293"><span class="id" title="variable">PROP</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="projection">_state</span> (<span class="id" title="projection">_sts</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span>  <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:297"><span class="id" title="variable">n</span></a>)))) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="ComposeN.inG" class="idref" href="#ComposeN.inG"><span class="id" title="projection">inG</span></a> :: <a class="idref" href="bedrock.lang.bi.prop_constraints.html#HasUsualOwn"><span class="id" title="class">HasUsualOwn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#PROP:293"><span class="id" title="variable">PROP</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="definition">Compose.State</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:295"><span class="id" title="variable">fam</span></a>))<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;BI-general&nbsp;version&nbsp;of&nbsp;Σ.compose&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="ComposeN.compose" class="idref" href="#ComposeN.compose"><span class="id" title="record">compose</span></a> `{<a id="H:301" class="idref" href="#H:301"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:300" class="idref" href="#PROP:300"><span class="id" title="binder"><span id="H:301" class="id">PROP</span></span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="ComposeN.fam" class="idref" href="#ComposeN.fam"><span class="id" title="projection">fam</span></a> : <span class="id" title="record">Compose.config</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="ComposeN.ings" class="idref" href="#ComposeN.ings"><span class="id" title="projection">ings</span></a> :: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN.G"><span class="id" title="class">G</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:303"><span class="id" title="method">fam</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="ComposeN.app" class="idref" href="#ComposeN.app"><span class="id" title="projection">app</span></a> := {| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">App.lts</span></a> := <span class="id" title="definition">Compose.compose_lts</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:303"><span class="id" title="method">fam</span></a> |} ;<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN.compose"><span class="id" title="class">compose</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ComposeN.nsName" class="idref" href="#ComposeN.nsName"><span class="id" title="definition">nsName</span></a> {<a id="fam:306" class="idref" href="#fam:306"><span class="id" title="binder">fam</span></a> : <span class="id" title="record">Compose.config</span>} (<a id="n:307" class="idref" href="#n:307"><span class="id" title="binder">n</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:306"><span class="id" title="variable">fam</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_find"><span class="id" title="definition">list_find</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e:308" class="idref" href="#e:308"><span class="id" title="binder">e</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:306"><span class="id" title="variable">fam</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:307"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:308"><span class="id" title="variable">e</span></a>) (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> (<span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:306"><span class="id" title="variable">fam</span></a>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">index</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="definition">BS.of_N_decimal</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.NArith.BinNat.html#N.of_nat"><span class="id" title="definition">N.of_nat</span></a> <span class="id" title="var">index</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; ("")%<span class="id" title="var">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN"><span class="id" title="module">ComposeN</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="updl" class="idref" href="#updl"><span class="id" title="section">updl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations"><span class="id" title="module">EqNotations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:311" class="idref" href="#H:311"><span class="id" title="binder">Finite</span></a> <a id="Nm:309" class="idref" href="#Nm:309"><span class="id" title="binder"><span id="H:311" class="id">Nm</span></span></a>} {<a id="nl:312" class="idref" href="#nl:312"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:309"><span class="id" title="variable">Nm</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="P:313" class="idref" href="#P:313"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:315" class="idref" href="#slr_set:315"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:314" class="idref" href="#x:314"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:313"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:314"><span class="id" title="variable">x</span></a>) (<a id="sl:316" class="idref" href="#sl:316"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:313"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="updl" class="idref" href="#updl"><span class="id" title="definition">updl</span></a> (<a id="n:317" class="idref" href="#n:317"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.Nm"><span class="id" title="variable">Nm</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.P"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:317"><span class="id" title="variable">n</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:317"><span class="id" title="variable">n</span></a>) <span class="id" title="keyword">return</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.P"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:317"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">peq</span> =&gt;  <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations.:::'rew'_x_'in'_x"><span class="id" title="notation">rew</span></a> <span class="id" title="var">peq</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations.:::'rew'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.sl"><span class="id" title="variable">sl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.slr_set"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:317"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updll" class="idref" href="#updll"><span class="id" title="lemma">updll</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.sl"><span class="id" title="variable">sl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#proof_irrel"><span class="id" title="definition">proof_irrel</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="section">updl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="updlr" class="idref" href="#updlr"><span class="id" title="section">updlr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:320" class="idref" href="#H:320"><span class="id" title="binder">Finite</span></a> <a id="Nm:318" class="idref" href="#Nm:318"><span class="id" title="binder"><span id="H:320" class="id">Nm</span></span></a>} {<a id="nl:321" class="idref" href="#nl:321"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:318"><span class="id" title="variable">Nm</span></a>} {<a id="nr:322" class="idref" href="#nr:322"><span class="id" title="binder">nr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:318"><span class="id" title="variable">Nm</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations"><span class="id" title="module">EqNotations</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="updlr" class="idref" href="#updlr"><span class="id" title="definition">updlr</span></a> {<a id="P:323" class="idref" href="#P:323"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="slr_set:325" class="idref" href="#slr_set:325"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:324" class="idref" href="#x:324"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:323"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:324"><span class="id" title="variable">x</span></a>) (<a id="sl:326" class="idref" href="#sl:326"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:323"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:327" class="idref" href="#sr:327"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:323"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>) (<a id="n:328" class="idref" href="#n:328"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:323"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:328"><span class="id" title="variable">n</span></a>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:325"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:327"><span class="id" title="variable">sr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:326"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:328"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlrl" class="idref" href="#updlrl"><span class="id" title="lemma">updlrl</span></a> {<a id="P:329" class="idref" href="#P:329"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:331" class="idref" href="#slr_set:331"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:330" class="idref" href="#x:330"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:329"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:330"><span class="id" title="variable">x</span></a>) (<a id="sl:332" class="idref" href="#sl:332"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:329"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:333" class="idref" href="#sr:333"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:329"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:331"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:332"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:333"><span class="id" title="variable">sr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:332"><span class="id" title="variable">sl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="updlr.neq" class="idref" href="#updlr.neq"><span class="id" title="section">neq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> (<a id="updlr.neq.neq" class="idref" href="#updlr.neq.neq"><span class="id" title="variable">neq</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlo" class="idref" href="#updlo"><span class="id" title="lemma">updlo</span></a> {<a id="P:335" class="idref" href="#P:335"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:337" class="idref" href="#slr_set:337"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:336" class="idref" href="#x:336"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:335"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:336"><span class="id" title="variable">x</span></a>) (<a id="sl:338" class="idref" href="#sl:338"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:335"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:337"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:338"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:337"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">neq</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>. <span class="id" title="var">case_decide</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlrr" class="idref" href="#updlrr"><span class="id" title="lemma">updlrr</span></a> {<a id="P:339" class="idref" href="#P:339"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:341" class="idref" href="#slr_set:341"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:340" class="idref" href="#x:340"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:339"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:340"><span class="id" title="variable">x</span></a>) (<a id="sl:342" class="idref" href="#sl:342"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:339"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:343" class="idref" href="#sr:343"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:339"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:341"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:342"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:343"><span class="id" title="variable">sr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:343"><span class="id" title="variable">sr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">neq</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.neq"><span class="id" title="section">neq</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="section">updlr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="updlro" class="idref" href="#updlro"><span class="id" title="section">updlro</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:346" class="idref" href="#H:346"><span class="id" title="binder">Finite</span></a> <a id="Nm:344" class="idref" href="#Nm:344"><span class="id" title="binder"><span id="H:346" class="id">Nm</span></span></a>} {<a id="nl:347" class="idref" href="#nl:347"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:344"><span class="id" title="variable">Nm</span></a>} {<a id="nr:348" class="idref" href="#nr:348"><span class="id" title="binder">nr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:344"><span class="id" title="variable">Nm</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlro" class="idref" href="#updlro"><span class="id" title="lemma">updlro</span></a> {<a id="P:349" class="idref" href="#P:349"><span class="id" title="binder">P</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="slr_set:351" class="idref" href="#slr_set:351"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:350" class="idref" href="#x:350"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:349"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:350"><span class="id" title="variable">x</span></a>) (<a id="sl:352" class="idref" href="#sl:352"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:349"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:353" class="idref" href="#sr:353"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:349"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nr"><span class="id" title="variable">nr</span></a>) (<a id="n:354" class="idref" href="#n:354"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.Nm"><span class="id" title="variable">Nm</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:354"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:354"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nr"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:351"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:352"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:353"><span class="id" title="variable">sr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:354"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:351"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:354"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span> <span class="id" title="var">hr</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="section">updlro</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN"><span class="id" title="module">ComposeN</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="with_lts" class="idref" href="#with_lts"><span class="id" title="section">with_lts</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:356" class="idref" href="#H:356"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:355" class="idref" href="#PROP:355"><span class="id" title="binder"><span id="H:356" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:357" class="idref" href="#BiFUpd0:357"><span class="id" title="binder">!</span></a><a id="BiFUpd0:357" class="idref" href="#BiFUpd0:357"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:357" class="idref" href="#BiFUpd0:357"><span class="id" title="binder">PROP</span></a>} `{<a id="BiBUpdFUpd0:358" class="idref" href="#BiBUpdFUpd0:358"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:358" class="idref" href="#BiBUpdFUpd0:358"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:358" class="idref" href="#BiBUpdFUpd0:358"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H0:359" class="idref" href="#H0:359"><span class="id" title="binder">!</span></a><a id="H0:359" class="idref" href="#H0:359"><span class="id" title="binder">ComposeN.compose</span></a>}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="T" class="idref" href="#T"><span class="id" title="abbreviation">T</span></a> := (<span class="id" title="definition">Compose.State</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Nm" class="idref" href="#Nm"><span class="id" title="abbreviation">Nm</span></a> := (<span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="dual_evts" class="idref" href="#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> :=  (<span class="id" title="projection">Compose.cancel_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="external_event_sets" class="idref" href="#external_event_sets"><span class="id" title="definition">external_event_sets</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n:360" class="idref" href="#n:360"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>) (<a id="STEP:361" class="idref" href="#STEP:361"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:360"><span class="id" title="variable">n</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:362" class="idref" href="#STEPup:362"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.external_event</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e:363" class="idref" href="#e:363"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:363"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:361"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="eup:364" class="idref" href="#eup:364"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:364"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:362"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:363"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:364"><span class="id" title="variable">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="eup:365" class="idref" href="#eup:365"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:365"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:362"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="e:366" class="idref" href="#e:366"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:366"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:361"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:366"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:365"><span class="id" title="variable">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="appn" class="idref" href="#appn"><span class="id" title="definition">appn</span></a> (<a id="n:367" class="idref" href="#n:367"><span class="id" title="binder">n</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>): <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> := <span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:367"><span class="id" title="variable">n</span></a>); <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a> := <span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:367"><span class="id" title="variable">n</span></a>; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#inG"><span class="id" title="method">App.inG</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#inGs"><span class="id" title="method">inGs</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:367"><span class="id" title="variable">n</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(***&nbsp;Transports&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.with_refinement" class="idref" href="#with_lts.with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="R:368" class="idref" href="#R:368"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gen_transports" class="idref" href="#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a id="4482d20eedd694e608b62fc74f7873ac" class="idref" href="#4482d20eedd694e608b62fc74f7873ac"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="nl:370" class="idref" href="#nl:370"><span class="id" title="binder">nl</span></a> <a id="nr:371" class="idref" href="#nr:371"><span class="id" title="binder">nr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>) (<a id="diff:372" class="idref" href="#diff:372"><span class="id" title="binder">diff</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:370"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:371"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:373" class="idref" href="#STEPl:373"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:370"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:374" class="idref" href="#STEPr:374"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:371"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:375" class="idref" href="#dual:375"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:373"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:374"><span class="id" title="variable">STEPr</span></a>) <a id="Q:376" class="idref" href="#Q:376"><span class="id" title="binder">Q</span></a> <a id="m:377" class="idref" href="#m:377"><span class="id" title="binder">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:370"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:377"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4482d20eedd694e608b62fc74f7873ac"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:370"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:373"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:376"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:371"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:377"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4482d20eedd694e608b62fc74f7873ac"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:371"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:374"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:378" class="idref" href="#e2:378"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:379" class="idref" href="#e1:379"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:379"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:373"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:379"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:378"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:376"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:379"><span class="id" title="variable">e1</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="gen_transports_knowledge" class="idref" href="#gen_transports_knowledge"><span class="id" title="instance">gen_transports_knowledge</span></a> : <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#Knowledge1"><span class="id" title="abbreviation">Knowledge1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_knowledge</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="external_requests" class="idref" href="#external_requests"><span class="id" title="definition">external_requests</span></a> <a id="3fd40d0d0bb6cc31127375e8a6ae670b" class="idref" href="#3fd40d0d0bb6cc31127375e8a6ae670b"><span class="id" title="binder">γ</span></a> <a id="07b64cdd6f6267023298cc4e2e79c453" class="idref" href="#07b64cdd6f6267023298cc4e2e79c453"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="n:382" class="idref" href="#n:382"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:383" class="idref" href="#STEP:383"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:382"><span class="id" title="variable">n</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:384" class="idref" href="#STEPup:384"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.external_event</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="EXT:385" class="idref" href="#EXT:385"><span class="id" title="binder">EXT</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_event_sets"><span class="id" title="definition">external_event_sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:382"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:383"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:384"><span class="id" title="variable">STEPup</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Q:386" class="idref" href="#Q:386"><span class="id" title="binder">Q</span></a> <a id="m:387" class="idref" href="#m:387"><span class="id" title="binder">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:382"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:387"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3fd40d0d0bb6cc31127375e8a6ae670b"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:382"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:383"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:386"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:387"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#07b64cdd6f6267023298cc4e2e79c453"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:384"><span class="id" title="variable">STEPup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="eup:388" class="idref" href="#eup:388"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:389" class="idref" href="#e:389"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:389"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:383"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:389"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:388"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:386"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:389"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="external_requests_knowledge" class="idref" href="#external_requests_knowledge"><span class="id" title="instance">external_requests_knowledge</span></a> : <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#Knowledge2"><span class="id" title="abbreviation">Knowledge2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_knowledge</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="external_commits" class="idref" href="#external_commits"><span class="id" title="definition">external_commits</span></a> <a id="bb508476c7d8be99b9832b2cee6b2798" class="idref" href="#bb508476c7d8be99b9832b2cee6b2798"><span class="id" title="binder">γ</span></a> <a id="12bc8d54d3a330fc26ac73a9a9e7bc57" class="idref" href="#12bc8d54d3a330fc26ac73a9a9e7bc57"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="n:392" class="idref" href="#n:392"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:393" class="idref" href="#STEP:393"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:392"><span class="id" title="variable">n</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:394" class="idref" href="#STEPup:394"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.external_event</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="EXT:395" class="idref" href="#EXT:395"><span class="id" title="binder">EXT</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_event_sets"><span class="id" title="definition">external_event_sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:392"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:393"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:394"><span class="id" title="variable">STEPup</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Q:396" class="idref" href="#Q:396"><span class="id" title="binder">Q</span></a> <a id="m:397" class="idref" href="#m:397"><span class="id" title="binder">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:397"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#12bc8d54d3a330fc26ac73a9a9e7bc57"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:394"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:396"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:392"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:397"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bb508476c7d8be99b9832b2cee6b2798"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:392"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:393"><span class="id" title="variable">STEP</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e:398" class="idref" href="#e:398"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="eup:399" class="idref" href="#eup:399"><span class="id" title="binder">eup</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:399"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:394"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:398"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:399"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:396"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:399"><span class="id" title="variable">eup</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="external_commits_knowledge" class="idref" href="#external_commits_knowledge"><span class="id" title="instance">external_commits_knowledge</span></a> : <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#Knowledge2"><span class="id" title="abbreviation">Knowledge2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_knowledge</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(***&nbsp;Decomposition&nbsp;Invariant&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="with_lts.all_names" class="idref" href="#with_lts.all_names"><span class="id" title="variable">all_names</span></a> := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decomp_aux" class="idref" href="#decomp_aux"><span class="id" title="definition">decomp_aux</span></a> <a id="sets:400" class="idref" href="#sets:400"><span class="id" title="binder">sets</span></a> (<a id="53ff5d496bcfe0b7c70cc4c703423abe" class="idref" href="#53ff5d496bcfe0b7c70cc4c703423abe"><span class="id" title="binder">γ</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>) <a id="3632485d7ea817bee7b1f161b71d49ab" class="idref" href="#3632485d7ea817bee7b1f161b71d49ab"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:403" class="idref" href="#n:403"><span class="id" title="binder"><span id="n:404" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#53ff5d496bcfe0b7c70cc4c703423abe"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:403"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:400"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:403"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3632485d7ea817bee7b1f161b71d49ab"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:400"><span class="id" title="variable">sets</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:405" class="idref" href="#s:405"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:405"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:400"><span class="id" title="variable">sets</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Decomp_def" class="idref" href="#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> (<a id="2786dc660dc36d40f5e186a6d639dcdc" class="idref" href="#2786dc660dc36d40f5e186a6d639dcdc"><span class="id" title="binder">γ</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>) <a id="eca39e976e97fe6341bbb863aeba741f" class="idref" href="#eca39e976e97fe6341bbb863aeba741f"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="sets:408" class="idref" href="#sets:408"><span class="id" title="binder">sets</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:408"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2786dc660dc36d40f5e186a6d639dcdc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eca39e976e97fe6341bbb863aeba741f"><span class="id" title="variable">γup</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Decompose" class="idref" href="#Decompose"><span class="id" title="definition">Decompose</span></a> (<a id="ns:409" class="idref" href="#ns:409"><span class="id" title="binder">ns</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a>) <a id="20ff25f4df21a586ebbd5ad0260ee98c" class="idref" href="#20ff25f4df21a586ebbd5ad0260ee98c"><span class="id" title="binder">γ</span></a> (<a id="8a62eebada43ccb93a7ecd42c4c86b64" class="idref" href="#8a62eebada43ccb93a7ecd42c4c86b64"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.invariants.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:409"><span class="id" title="variable">ns</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#20ff25f4df21a586ebbd5ad0260ee98c"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8a62eebada43ccb93a7ecd42c4c86b64"><span class="id" title="variable">γup</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="alloc_decomp_aux" class="idref" href="#alloc_decomp_aux"><span class="id" title="lemma">alloc_decomp_aux</span></a> <a id="1eeeb7095d4dba7327beef7ca3aa8da7" class="idref" href="#1eeeb7095d4dba7327beef7ca3aa8da7"><span class="id" title="binder">γup</span></a> <a id="sets:413" class="idref" href="#sets:413"><span class="id" title="binder">sets</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:414" class="idref" href="#s:414"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:414"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:413"><span class="id" title="variable">sets</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1eeeb7095d4dba7327beef7ca3aa8da7"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:413"><span class="id" title="variable">sets</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="70b0384ef8d721228b7f642c867e4742" class="idref" href="#70b0384ef8d721228b7f642c867e4742"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:416" class="idref" href="#n:416"><span class="id" title="binder"><span id="n:417" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#70b0384ef8d721228b7f642c867e4742"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:416"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:413"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:416"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:413"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#70b0384ef8d721228b7f642c867e4742"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1eeeb7095d4dba7327beef7ca3aa8da7"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">nd</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#NoDup"><span class="id" title="inductive">NoDup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "/= ? !&gt;". <span class="id" title="var">iExists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">γup</span>). <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#NoDup_cons"><span class="id" title="lemma">NoDup_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">nd</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">ND</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">ND</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<span class="id" title="var">IHl</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span>) "(H1 &amp; H2 &amp; $ &amp; %Hex)". <span class="id" title="var">iFrame</span> (<span class="id" title="var">Hex</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.alloc"><span class="id" title="lemma">AuthSet.alloc</span></a> (<span class="id" title="var">T</span>:=(<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <span class="id" title="var">a</span>).(<span class="id" title="abbreviation">lts_state</span>)) (<span class="id" title="var">sets</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">γa</span>) "(? &amp; ?)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="keyword">fun</span> (<a id="n:418" class="idref" href="#n:418"><span class="id" title="binder"><span id="n:419" class="id">n</span></span></a>:<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:418"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">a</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="var">γa</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="var">f</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:418"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#decide_True"><span class="id" title="lemma">decide_True</span></a> //. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iCombine</span> "H1 H2" <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_sep"><span class="id" title="lemma">big_sepL_sep</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_mono"><span class="id" title="lemma">big_sepL_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">Hin</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#decide_False"><span class="id" title="lemma">decide_False</span></a>; [<span class="id" title="var">done</span>|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(***&nbsp;Internal&nbsp;Lemmas&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.comp" class="idref" href="#with_lts.comp"><span class="id" title="section">comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Inhabited"><span class="id" title="class">Inhabited</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:420" class="idref" href="#x:420"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:420"><span class="id" title="variable">x</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#populate"><span class="id" title="constructor">populate</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="nl:421" class="idref" href="#nl:421"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="with_lts.comp.left" class="idref" href="#with_lts.comp.left"><span class="id" title="variable">left</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">!</span></a><a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">Timeless</span></a> <a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">(</span></a><a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">emp</span></a><a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">%</span></a><a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">I</span></a> <a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">:</span></a> <a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">PROP</span></a><a id="Timeless0:422" class="idref" href="#Timeless0:422"><span class="id" title="binder">)</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> /.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Opaque</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Transparent</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Turning&nbsp;a&nbsp;subcomponent's&nbsp;requester&nbsp;into&nbsp;the&nbsp;parent's&nbsp;requester&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;makes&nbsp;an&nbsp;event&nbsp;externally&nbsp;visible&nbsp;outside&nbsp;the&nbsp;parent&nbsp;component.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;allows&nbsp;a&nbsp;request&nbsp;to&nbsp;bubble&nbsp;up.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_requester_visible" class="idref" href="#gen_requester_visible"><span class="id" title="lemma">gen_requester_visible</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:423" class="idref" href="#STEP:423"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:424" class="idref" href="#STEPup:424"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:425" class="idref" href="#ns:425"><span class="id" title="binder">ns</span></a> (<a id="E:426" class="idref" href="#E:426"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) <a id="m:427" class="idref" href="#m:427"><span class="id" title="binder">m</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:425"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:426"><span class="id" title="variable">E</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:425"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:427"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="up_events:432" class="idref" href="#up_events:432"><span class="id" title="binder">up_events</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="l:428" class="idref" href="#l:428"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:428"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:423"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lup:429" class="idref" href="#lup:429"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:429"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:424"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:428"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:429"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="lup:430" class="idref" href="#lup:430"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:430"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:424"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="l:431" class="idref" href="#l:431"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:431"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:423"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:431"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:430"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="78f4e3230abafae2b82aa37be3975c40" class="idref" href="#78f4e3230abafae2b82aa37be3975c40"><span class="id" title="binder">γ</span></a> <a id="6d225909cc130862f88cf5564e735675" class="idref" href="#6d225909cc130862f88cf5564e735675"><span class="id" title="binder">γup</span></a> (<a id="Q:435" class="idref" href="#Q:435"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Decompose&nbsp;invariant:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:425"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#78f4e3230abafae2b82aa37be3975c40"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6d225909cc130862f88cf5564e735675"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Subcomponent&nbsp;Requester&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:425"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:426"><span class="id" title="variable">E</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:427"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#78f4e3230abafae2b82aa37be3975c40"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:423"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:435"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Whole&nbsp;component&nbsp;Requester&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:426"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:427"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6d225909cc130862f88cf5564e735675"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:424"><span class="id" title="variable">STEPup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="eup:436" class="idref" href="#eup:436"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:437" class="idref" href="#e:437"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:437"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:423"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:437"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:436"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:435"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:437"><span class="id" title="variable">e</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_set</span>) "(&gt;A &amp; &gt;Fup &amp; &gt;%NEup)" "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "REQ" <span class="id" title="keyword">as</span> (<span class="id" title="var">ssl</span>) "((Fl &amp; %NEl &amp; %STEPl) &amp; Q)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>); [|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> "[Al A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">slr_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fl Al"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%s1_in_set".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset</span> := <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NEsset</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:438" class="idref" href="#s:438"><span class="id" title="binder"><span id="s:439" class="id">s</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:438"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">INs</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl</span> <span class="id" title="var">Insl</span>]. <span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="var">case_decide</span>; <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">sset</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">s1_in_set</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span>/= !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">INn</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">move</span> : (<span class="id" title="var">INn</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">sset</span>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">NEsset</span>) "Fup".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">up_events</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">UP1</span> <span class="id" title="var">UP2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%" (<span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">Inss</span> <span class="id" title="var">Ine</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">UP2</span> <span class="id" title="var">_</span> <span class="id" title="var">Ine</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">el</span> &amp; <span class="id" title="var">Inel</span> &amp; <span class="id" title="var">Injel</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">STEPl</span> (<span class="id" title="var">s</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> [<span class="id" title="var">stepL</span> <span class="id" title="var">_</span>]]; [|<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Inss</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl'</span>). <span class="id" title="tactic">split</span>; [|<span class="id" title="var">done</span>]. <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;TODO&nbsp;lemma&nbsp;*)</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> =&gt; <span class="id" title="var">NEq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e</span>) "[%INe Fup]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">UP2</span> <span class="id" title="var">_</span> <span class="id" title="var">INe</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">el</span> &amp; <span class="id" title="var">Inel</span> &amp; <span class="id" title="var">Injel</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">ssl'</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':440" class="idref" href="#s':440"><span class="id" title="binder"><span id="s':441" class="id"><span id="s':443" class="id"><span id="s':444" class="id"><span id="s':446" class="id"><span id="s':447" class="id">s'</span></span></span></span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:442" class="idref" href="#s:442"><span class="id" title="binder"><span id="s:445" class="id"><span id="s:448" class="id">s</span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:442"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:442"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">el</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':440"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>)%<span class="id" title="keyword">type</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ssl'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fl Al"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Fl Al]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Q" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Fl //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Q".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[&gt; A Fup Al]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_"; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset'</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>). <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">sl</span> &amp; <span class="id" title="var">Insl</span> &amp; <span class="id" title="var">stepL</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqnl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins</span> <span class="id" title="var">d</span>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [|<span class="id" title="var">done</span>]. <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;TODO&nbsp;lemma&nbsp;*)</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> =&gt; <span class="id" title="var">NEq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NEup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">INs</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl</span> <span class="id" title="var">Insl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">STEPl</span> <span class="id" title="var">sl</span> <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> <span class="id" title="var">stepL</span>]; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> =&gt; <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //. <span class="id" title="var">set_solver</span>+<span class="id" title="var">INs</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>); [|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Al".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "Al". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_mono"><span class="id" title="lemma">big_sepL_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "A"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> [<span class="id" title="var">INn</span> <span class="id" title="var">EqL</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EqL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Turning&nbsp;a&nbsp;parent's&nbsp;committer&nbsp;into&nbsp;a&nbsp;subcomponent's&nbsp;committer&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;makes&nbsp;an&nbsp;event&nbsp;externally&nbsp;visible&nbsp;outside&nbsp;the&nbsp;parent&nbsp;component.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;allows&nbsp;a&nbsp;commiter&nbsp;to&nbsp;flow&nbsp;down.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_committer_visible" class="idref" href="#gen_committer_visible"><span class="id" title="lemma">gen_committer_visible</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:449" class="idref" href="#STEP:449"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:450" class="idref" href="#STEPup:450"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:451" class="idref" href="#ns:451"><span class="id" title="binder">ns</span></a> (<a id="E:452" class="idref" href="#E:452"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) <a id="m:453" class="idref" href="#m:453"><span class="id" title="binder">m</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:451"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:452"><span class="id" title="variable">E</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:451"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:453"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="up_events:458" class="idref" href="#up_events:458"><span class="id" title="binder">up_events</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="l:454" class="idref" href="#l:454"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:454"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:449"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lup:455" class="idref" href="#lup:455"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:455"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:450"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:454"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:455"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="lup:456" class="idref" href="#lup:456"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:456"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:450"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="l:457" class="idref" href="#l:457"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:457"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:449"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:457"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:456"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="d0491d91df3750182fe39c12ea974bbc" class="idref" href="#d0491d91df3750182fe39c12ea974bbc"><span class="id" title="binder">γ</span></a> <a id="84736720dbde694489ab68908125fc8d" class="idref" href="#84736720dbde694489ab68908125fc8d"><span class="id" title="binder">γup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Q:461" class="idref" href="#Q:461"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Decompose&nbsp;invariant:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:451"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d0491d91df3750182fe39c12ea974bbc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#84736720dbde694489ab68908125fc8d"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Parent&nbsp;committer&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:452"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:453"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#84736720dbde694489ab68908125fc8d"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:450"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:461"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Child&nbsp;committer&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:451"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:452"><span class="id" title="variable">E</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:453"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d0491d91df3750182fe39c12ea974bbc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:449"><span class="id" title="variable">STEP</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e:462" class="idref" href="#e:462"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="eup:463" class="idref" href="#eup:463"><span class="id" title="binder">eup</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:463"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:450"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:462"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:463"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:461"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:463"><span class="id" title="variable">eup</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv COM".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "COM" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_frag</span>) "[Aup Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_set</span>) "(&gt;A &amp; &gt;Fup &amp; &gt;%NEup)" "CloseI".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>); [|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> "[Al A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#difference_difference_l_L"><span class="id" title="lemma">difference_difference_l_L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_comm_L"><span class="id" title="instance">union_comm_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">slr_set</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">slr_frag</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup Aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%SUBsup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Al". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;abort&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Al".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"CloseI" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[A Fup Al]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">NEup</span>) "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[Close _]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;commit&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">ssl'</span> <span class="id" title="var">el</span>) "(%Inel &amp; %NEl' &amp; %stepL' &amp; Al)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[_ Close]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset'</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup Aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Fup Aup]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">up_events</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">UP1</span> <span class="id" title="var">UP2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">UP1</span> <span class="id" title="var">_</span> <span class="id" title="var">Inel</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">eup</span> &amp; <span class="id" title="var">Ineup</span> &amp; <span class="id" title="var">Injel</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NE'</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:464" class="idref" href="#s:464"><span class="id" title="binder"><span id="s:465" class="id">s</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:464"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> <span class="id" title="var">Insl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NEup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Ins</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //. <span class="id" title="var">set_solver</span> +<span class="id" title="var">Ins</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"CloseI" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[A Fup Al]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iFrame</span> (<span class="id" title="var">NE'</span>) "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Al". { <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="var">iFrame</span> "Al". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_mono"><span class="id" title="lemma">big_sepL_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "A"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> [<span class="id" title="var">INn</span> <span class="id" title="var">EqL</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EqL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="var">eup</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$Aup]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Q".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%"; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">s'</span> <span class="id" title="var">Ins'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">stepL'</span> (<span class="id" title="var">s'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">sl</span> &amp; <span class="id" title="var">Insl</span> &amp; <span class="id" title="var">stepL</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">sl</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">SUBsup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins'</span> <span class="id" title="var">d</span>). <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;TODO&nbsp;lemma&nbsp;*)</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> =&gt; <span class="id" title="var">NEq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">eup</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "Q %".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Transporting&nbsp;a&nbsp;requester&nbsp;to&nbsp;a&nbsp;canceling&nbsp;committer.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_transport1l" class="idref" href="#gen_transport1l"><span class="id" title="lemma">gen_transport1l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="nr:466" class="idref" href="#nr:466"><span class="id" title="binder">nr</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:467" class="idref" href="#STEPl:467"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:468" class="idref" href="#STEPr:468"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="neq:469" class="idref" href="#neq:469"><span class="id" title="binder">neq</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:470" class="idref" href="#ns:470"><span class="id" title="binder">ns</span></a> (<a id="E:471" class="idref" href="#E:471"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) <a id="m:472" class="idref" href="#m:472"><span class="id" title="binder">m</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:471"><span class="id" title="variable">E</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:472"><span class="id" title="variable">m</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:471"><span class="id" title="variable">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:472"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:473" class="idref" href="#dual:473"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:467"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:468"><span class="id" title="variable">STEPr</span></a>) <a id="f8e3b539bc080b69ab57ec85450d69b3" class="idref" href="#f8e3b539bc080b69ab57ec85450d69b3"><span class="id" title="binder">γ</span></a> <a id="177411a7281a8a7066d211bc0fa84994" class="idref" href="#177411a7281a8a7066d211bc0fa84994"><span class="id" title="binder">γup</span></a> <a id="Q:476" class="idref" href="#Q:476"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="right:477" class="idref" href="#right:477"><span class="id" title="binder">right</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Decompose&nbsp;invariant:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f8e3b539bc080b69ab57ec85450d69b3"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#177411a7281a8a7066d211bc0fa84994"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:471"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#177411a7281a8a7066d211bc0fa84994"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Requester&nbsp;AC:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:472"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f8e3b539bc080b69ab57ec85450d69b3"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:467"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:476"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Committer&nbsp;AU:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#right:477"><span class="id" title="variable">right</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:472"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f8e3b539bc080b69ab57ec85450d69b3"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:468"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:478" class="idref" href="#e2:478"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:479" class="idref" href="#e1:479"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:479"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:467"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:479"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:478"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:476"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:479"><span class="id" title="variable">e1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="tactic">right</span>) "#inv #updater REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_set</span>) "(&gt;aleftr &amp; &gt;up &amp; &gt;%nonempty)" "Close"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="var">slr_set</span> <span class="id" title="var">nr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a> <span class="id" title="var">nr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_two"><span class="id" title="lemma">big_sepL_difference_two</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:= <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) (<span class="id" title="var">y</span>:=<span class="id" title="var">nr</span>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "aleftr" <span class="id" title="keyword">as</span> "[authl [$ authlist]]"; <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "authr". <span class="id" title="var">iFrame</span> "REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[authlist authr up authl]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_two"><span class="id" title="lemma">big_sepL_difference_two</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">nr</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">ssr'</span> <span class="id" title="var">er</span>) "(%evt &amp; [(%sr' &amp; %sr'_in_set) [%step_right authrf]])".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;right&nbsp;side&nbsp;has&nbsp;already&nbsp;transitioned&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">dual</span> =&gt; <span class="id" title="var">duall</span> <span class="id" title="var">dualr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<span class="id" title="var">dualr</span> <span class="id" title="var">er</span> <span class="id" title="var">evt</span>) =&gt; <span class="id" title="var">el</span> []<span class="id" title="var">elin</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "REQ" <span class="id" title="keyword">as</span> (<span class="id" title="var">ssl</span>) "((fragl &amp; %step_left) &amp; Q)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">step_left</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">NEl</span> <span class="id" title="var">step_left</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">slr_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%s1_in_set".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">ssl'</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':480" class="idref" href="#s':480"><span class="id" title="binder"><span id="s':481" class="id"><span id="s':483" class="id"><span id="s':484" class="id"><span id="s':486" class="id"><span id="s':487" class="id">s'</span></span></span></span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:482" class="idref" href="#s:482"><span class="id" title="binder"><span id="s:485" class="id"><span id="s:488" class="id">s</span></span></span></a> : <span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:482"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:482"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">el</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':480"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>)%<span class="id" title="keyword">type</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> (<span class="id" title="var">γ</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">ssl'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "(fraglf &amp; authlf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Q" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">el</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$fraglf //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "M".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">ssr</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s:489" class="idref" href="#s:489"><span class="id" title="binder"><span id="s:490" class="id"><span id="s:492" class="id"><span id="s:493" class="id"><span id="s:495" class="id"><span id="s:496" class="id">s</span></span></span></span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:489"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">nr</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s':491" class="idref" href="#s':491"><span class="id" title="binder"><span id="s':494" class="id"><span id="s':497" class="id">s'</span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':491"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">ssr'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="abbreviation">lts_step</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">nr</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:489"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">er</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':491"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset</span> := <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl</span> <span class="id" title="var">ssr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">sset</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "up"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">s1_in_set</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span>/= !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">INn</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">move</span> : (<span class="id" title="var">INn</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">set_solver</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">nonempty</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s0</span> <span class="id" title="var">NEs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl0</span> <span class="id" title="var">NEl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_right</span> <span class="id" title="var">_</span> <span class="id" title="var">sr'_in_set</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">sr0</span> &amp; <span class="id" title="var">NEr1</span> &amp; <span class="id" title="var">NEr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;/π_set&nbsp;elem_of_PropSet&nbsp;in&nbsp;nonempty.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">NONEMPTY_aux</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">sl0</span> <span class="id" title="var">sr0</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">NONEMPTY</span>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s0:498" class="idref" href="#s0:498"><span class="id" title="binder">s0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s0:498"><span class="id" title="variable">s0</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">(</span></a><span class="id" title="var">sset</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">)</span></a>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">NONEMPTY_aux</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">SAFE</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#tau_safe"><span class="id" title="abbreviation">Step.tau_safe</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a>).(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <span class="id" title="var">sset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">sc</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="var">Hin</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hl</span> := <span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_left</span> (<span class="id" title="var">sc</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sll</span> [<span class="id" title="var">STEPl'</span> <span class="id" title="var">_</span>]]; [<span class="id" title="var">done</span>..|].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hr</span> := <span class="id" title="var">Hin</span> <span class="id" title="var">nr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hr</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hr</span> &amp; <span class="id" title="var">srr</span> &amp; <span class="id" title="var">Hr'</span> &amp; <span class="id" title="var">STEPr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">sc</span> <span class="id" title="var">sll</span> <span class="id" title="var">srr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>, <span class="id" title="var">nr</span>, <span class="id" title="var">el</span>, <span class="id" title="var">er</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_and</span>!; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nn</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a>; [<span class="id" title="var">done</span>|..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">set_solver</span> + <span class="id" title="var">Hn</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"updater" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">_</span> <span class="id" title="var">NONEMPTY</span> <span class="id" title="var">SAFE</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "up".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">slrf</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl'</span> <span class="id" title="var">ssr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">slrf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">slrf</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "up".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">scf</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hl</span> := <span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">sl1</span> &amp; <span class="id" title="var">INsl1</span> &amp; <span class="id" title="var">STEPl1</span> &amp; <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hr</span> := <span class="id" title="var">Hin</span> <span class="id" title="var">nr</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_right</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">sr1</span> &amp; <span class="id" title="var">Insr1</span> &amp; <span class="id" title="var">STEPr1</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">scf</span> <span class="id" title="var">sl1</span> <span class="id" title="var">sr1</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hin</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>, <span class="id" title="var">nr</span>, <span class="id" title="var">el</span>, <span class="id" title="var">er</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_and</span>!; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nn</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a>; [<span class="id" title="var">done</span>|..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">set_solver</span> + <span class="id" title="var">Hn</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">el</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#comm_L"><span class="id" title="lemma">comm_L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#union"><span class="id" title="definition">union</span></a> <span class="id" title="var">E</span>) (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#difference_union_L"><span class="id" title="lemma">difference_union_L</span></a> <span class="id" title="var">_</span> <span class="id" title="var">E</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[authlf authrf up authlist]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_"; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">slrf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_two"><span class="id" title="lemma">big_sepL_difference_two</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:= <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) (<span class="id" title="var">y</span>:=<span class="id" title="var">nr</span>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Opaque</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_mono_elem"><span class="id" title="lemma">big_sepL_mono_elem</span></a>; [<span class="id" title="var">iFrame</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!%".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_left</span> <span class="id" title="var">sl0</span> <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> <span class="id" title="var">STEPl'</span>]; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">sl'</span> <span class="id" title="var">sr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="alt_gen_transport1l" class="idref" href="#alt_gen_transport1l"><span class="id" title="lemma">alt_gen_transport1l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="nr:499" class="idref" href="#nr:499"><span class="id" title="binder">nr</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:500" class="idref" href="#STEPl:500"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:501" class="idref" href="#STEPr:501"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:499"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="neq:502" class="idref" href="#neq:502"><span class="id" title="binder">neq</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:499"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:503" class="idref" href="#ns:503"><span class="id" title="binder">ns</span></a> (<a id="E:504" class="idref" href="#E:504"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) <a id="m:505" class="idref" href="#m:505"><span class="id" title="binder">m</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:503"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:504"><span class="id" title="variable">E</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:503"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:505"><span class="id" title="variable">m</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:504"><span class="id" title="variable">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:505"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:506" class="idref" href="#dual:506"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:500"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:501"><span class="id" title="variable">STEPr</span></a>) <a id="ac7690ca8d300c326c6ee097e01e634c" class="idref" href="#ac7690ca8d300c326c6ee097e01e634c"><span class="id" title="binder">γ</span></a> <a id="68dc77059f36e8eebabf42bd97e297bb" class="idref" href="#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="binder">γup</span></a> <a id="Q:509" class="idref" href="#Q:509"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="right:510" class="idref" href="#right:510"><span class="id" title="binder">right</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:499"><span class="id" title="variable">nr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Decompose&nbsp;invariant:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:503"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ac7690ca8d300c326c6ee097e01e634c"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:504"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Requester&nbsp;AC:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:503"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:505"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ac7690ca8d300c326c6ee097e01e634c"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:500"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:509"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Committer&nbsp;AU:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alt_gen_committer"><span class="id" title="definition">Step.alt_gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#right:510"><span class="id" title="variable">right</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:503"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:505"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ac7690ca8d300c326c6ee097e01e634c"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:499"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:501"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:511" class="idref" href="#e2:511"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:512" class="idref" href="#e1:512"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:512"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:500"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:512"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:511"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:509"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:512"><span class="id" title="variable">e1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="tactic">right</span>) "#inv #updater REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_alt_gen_committer"><span class="id" title="lemma">Step.gen_committer_alt_gen_committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transport1l"><span class="id" title="lemma">gen_transport1l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "inv updater REQ"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transport1l" class="idref" href="#transport1l"><span class="id" title="lemma">transport1l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="nr:513" class="idref" href="#nr:513"><span class="id" title="binder">nr</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:514" class="idref" href="#STEPl:514"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:515" class="idref" href="#STEPr:515"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:513"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="neq:516" class="idref" href="#neq:516"><span class="id" title="binder">neq</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:513"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:517" class="idref" href="#ns:517"><span class="id" title="binder">ns</span></a> (<a id="E:518" class="idref" href="#E:518"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:517"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:518"><span class="id" title="variable">E</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:519" class="idref" href="#dual:519"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:514"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:515"><span class="id" title="variable">STEPr</span></a>) <a id="7e50f517221ce7a4c5a147766fd61af0" class="idref" href="#7e50f517221ce7a4c5a147766fd61af0"><span class="id" title="binder">γ</span></a> <a id="258049a490d97bbf286205436cbeba56" class="idref" href="#258049a490d97bbf286205436cbeba56"><span class="id" title="binder">γup</span></a> <a id="Q:522" class="idref" href="#Q:522"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="right:523" class="idref" href="#right:523"><span class="id" title="binder">right</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:513"><span class="id" title="variable">nr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*Decompose&nbsp;invariant:*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:517"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7e50f517221ce7a4c5a147766fd61af0"><span class="id" title="variable">γ</span></a>  <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#258049a490d97bbf286205436cbeba56"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:518"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#258049a490d97bbf286205436cbeba56"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*Requester&nbsp;AC:*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:517"><span class="id" title="variable">ns</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7e50f517221ce7a4c5a147766fd61af0"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:514"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:522"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*Committer&nbsp;AU:*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#right:523"><span class="id" title="variable">right</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:517"><span class="id" title="variable">ns</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7e50f517221ce7a4c5a147766fd61af0"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:513"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:515"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:524" class="idref" href="#e2:524"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:525" class="idref" href="#e1:525"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:525"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:514"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:525"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:524"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:522"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:525"><span class="id" title="variable">e1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="tactic">right</span>) "#inv #updater ac1". <span class="comment">(*&nbsp;rename&nbsp;ac1&nbsp;to&nbsp;requester&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_committer"><span class="id" title="lemma">Step.gen_committer_committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transport1l"><span class="id" title="lemma">gen_transport1l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "inv updater"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester_gen_requester"><span class="id" title="lemma">Step.requester_gen_requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="left_updater" class="idref" href="#left_updater"><span class="id" title="lemma">left_updater</span></a> <a id="ns:526" class="idref" href="#ns:526"><span class="id" title="binder">ns</span></a> <a id="E:527" class="idref" href="#E:527"><span class="id" title="binder">E</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:526"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:527"><span class="id" title="variable">E</span></a>) <a id="5b5f93830d0bbb83f5f2a7265c49e6cf" class="idref" href="#5b5f93830d0bbb83f5f2a7265c49e6cf"><span class="id" title="binder">γ</span></a> <a id="e86e618c59cfe8d30d0a69897fd3ed31" class="idref" href="#e86e618c59cfe8d30d0a69897fd3ed31"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:526"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5b5f93830d0bbb83f5f2a7265c49e6cf"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e86e618c59cfe8d30d0a69897fd3ed31"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:527"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e86e618c59cfe8d30d0a69897fd3ed31"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:526"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:527"><span class="id" title="variable">E</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5b5f93830d0bbb83f5f2a7265c49e6cf"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv #upd". <span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">setl</span> <span class="id" title="var">nonemptyl</span> <span class="id" title="var">safe</span>) "fragl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">setlr</span>) "(&gt;aleftr &amp; &gt;up &amp; &gt;%nonempty)" "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_minus_l_L</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#difference_disjoint_L"><span class="id" title="lemma">difference_disjoint_L</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">finite.elem_of_enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:= <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "aleftr" <span class="id" title="keyword">as</span> "[authl authlist]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">setl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">setlr</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%sl_in_set".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">setle</span> := (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">setlr</span> <span class="id" title="var">setl</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">setle</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "fragup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {}/<span class="id" title="var">setle</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; /<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#d18bf1e242aa8006719f115a8f44092e"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#d18bf1e242aa8006719f115a8f44092e"><span class="id" title="notation">swap</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#d18bf1e242aa8006719f115a8f44092e"><span class="id" title="notation">]</span></a> <span class="id" title="var">d</span> /(<span class="id" title="var">_</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span>/=; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">sl_in_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">nonemptyl</span> =&gt; <span class="id" title="var">slne</span> <span class="id" title="var">nonemptyl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">NONEMPTY</span>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:530" class="idref" href="#s:530"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:530"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">setle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">case</span>: <span class="id" title="var">nonempty</span> =&gt; <span class="id" title="var">snonempty</span> <span class="id" title="var">nonempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">snonempty</span> <span class="id" title="var">slne</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">setle</span>, <span class="id" title="definition">π</span><span class="id" title="definition">_set</span>, <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">nonempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span> =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">SAFE</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#tau_safe"><span class="id" title="abbreviation">Step.tau_safe</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a>).(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <span class="id" title="var">setle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sc</span> <span class="id" title="var">Hin</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">safe</span> (<span class="id" title="var">sc</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">slf</span> <span class="id" title="var">stepl</span>]; <span class="id" title="tactic">auto</span>;[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">sc</span> <span class="id" title="var">slf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Transparent</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[ | <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"upd" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">setle</span> <span class="id" title="var">NONEMPTY</span> <span class="id" title="var">SAFE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "fragup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "fragup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">setlf</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="slf:531" class="idref" href="#slf:531"><span class="id" title="binder"><span id="slf:532" class="id"><span id="slf:534" class="id"><span id="slf:535" class="id">slf</span></span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s1:533" class="idref" href="#s1:533"><span class="id" title="binder"><span id="s1:536" class="id">s1</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:533"><span class="id" title="variable">s1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">setl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:533"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slf:531"><span class="id" title="variable">slf</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> (<span class="id" title="var">γ</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">setlf</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "(fragl &amp; authl)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">setlr</span> <span class="id" title="var">setlf</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "fragup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">sc</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<span class="id" title="var">setlf</span> /= !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sll</span> <span class="id" title="var">Hinl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">sc</span> <span class="id" title="var">sll</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Transparent</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">setle</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hin</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; [ | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [ | <span class="id" title="tactic">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nn</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[authl fragup authlist]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_"; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">setlr</span> <span class="id" title="var">setlf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Opaque</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iSplitL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_mono_elem"><span class="id" title="lemma">big_sepL_mono_elem</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NONEMPTY</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sne</span> <span class="id" title="var">NONEMPTY</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">safe</span> <span class="id" title="var">slne</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">slf</span> <span class="id" title="var">stepl</span>]; <span class="id" title="tactic">auto</span>;[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">sne</span> <span class="id" title="var">slf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">setle</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<span class="id" title="var">setlf</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<span class="id" title="var">setlf</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">NONEMPTY</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">NONEMPTY</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">NONEMPTY</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp"><span class="id" title="section">comp</span></a>.<br/>

<br/>
</div>

<div class="doc">
Decompose invariant is sufficient 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.refine_inv" class="idref" href="#with_lts.refine_inv"><span class="id" title="section">refine_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">!</span></a><a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">Timeless</span></a> <a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">(</span></a><a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">emp</span></a><a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">%</span></a><a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">I</span></a> <a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">:</span></a> <a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">PROP</span></a><a id="Timeless0:537" class="idref" href="#Timeless0:537"><span class="id" title="binder">)</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="R:538" class="idref" href="#R:538"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refine_inv_gen_transports" class="idref" href="#refine_inv_gen_transports"><span class="id" title="lemma">refine_inv_gen_transports</span></a> <a id="62df667385e7cf8f2d517f3a15304736" class="idref" href="#62df667385e7cf8f2d517f3a15304736"><span class="id" title="binder">γ</span></a> <a id="7af91439f56336b4d95f28b293a88018" class="idref" href="#7af91439f56336b4d95f28b293a88018"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#62df667385e7cf8f2d517f3a15304736"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7af91439f56336b4d95f28b293a88018"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7af91439f56336b4d95f28b293a88018"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#62df667385e7cf8f2d517f3a15304736"><span class="id" title="variable">γ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#INV #UPD !#" (<span class="id" title="var">nl</span> <span class="id" title="var">nr</span> <span class="id" title="var">NE</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPr</span> <span class="id" title="var">DUAL</span> <span class="id" title="var">Q</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transport1l"><span class="id" title="lemma">gen_transport1l</span></a>; [<span class="id" title="var">done</span>|..|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up_sub"><span class="id" title="method">refinement_up_sub</span></a>|]. <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refine_inv_requests" class="idref" href="#refine_inv_requests"><span class="id" title="lemma">refine_inv_requests</span></a> <a id="c3183071d41ba9a8315b7beeea687996" class="idref" href="#c3183071d41ba9a8315b7beeea687996"><span class="id" title="binder">γ</span></a> <a id="2f6bc78c9fe84e59b54120999fcf5af0" class="idref" href="#2f6bc78c9fe84e59b54120999fcf5af0"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c3183071d41ba9a8315b7beeea687996"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2f6bc78c9fe84e59b54120999fcf5af0"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c3183071d41ba9a8315b7beeea687996"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2f6bc78c9fe84e59b54120999fcf5af0"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#INV !#" (<span class="id" title="var">n</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPup</span> <span class="id" title="var">UP</span> <span class="id" title="var">Q</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester_visible"><span class="id" title="lemma">gen_requester_visible</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refine_inv_commits" class="idref" href="#refine_inv_commits"><span class="id" title="lemma">refine_inv_commits</span></a> <a id="27f09da78275e3e254988e8a464e20ea" class="idref" href="#27f09da78275e3e254988e8a464e20ea"><span class="id" title="binder">γ</span></a> <a id="e4e110dfd76dbb610b67211acb0e6e3c" class="idref" href="#e4e110dfd76dbb610b67211acb0e6e3c"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#27f09da78275e3e254988e8a464e20ea"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e4e110dfd76dbb610b67211acb0e6e3c"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#27f09da78275e3e254988e8a464e20ea"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e4e110dfd76dbb610b67211acb0e6e3c"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#INV !#" (<span class="id" title="var">n</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPup</span> <span class="id" title="var">UP</span> <span class="id" title="var">Q</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_visible"><span class="id" title="lemma">gen_committer_visible</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(***&nbsp;Decomposition<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;requires&nbsp;allocation&nbsp;of&nbsp;the&nbsp;decompose&nbsp;invariant,&nbsp;and&nbsp;the&nbsp;allocation<br/>
&nbsp;&nbsp;&nbsp;&nbsp;lemmas&nbsp;are&nbsp;not&nbsp;bi-polymorphic.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;we&nbsp;assume&nbsp;a&nbsp;bi-specific&nbsp;<span class="inlinecode"><span class="id" title="var">inv_alloc</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.refine_inv.with_inv_alloc" class="idref" href="#with_lts.refine_inv.with_inv_alloc"><span class="id" title="section">with_inv_alloc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a id="with_lts.refine_inv.with_inv_alloc.inv_alloc" class="idref" href="#with_lts.refine_inv.with_inv_alloc.inv_alloc"><span class="id" title="variable">inv_alloc</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="bbe704454668ef9b00188b987c9d3e26" class="idref" href="#bbe704454668ef9b00188b987c9d3e26"><span class="id" title="binder">γ</span></a> <a id="90797ba0295d5496ee8a96cdd845db96" class="idref" href="#90797ba0295d5496ee8a96cdd845db96"><span class="id" title="binder">γup</span></a> (<a id="N:547" class="idref" href="#N:547"><span class="id" title="binder">N</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a>) (<a id="E:548" class="idref" href="#E:548"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bbe704454668ef9b00188b987c9d3e26"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#90797ba0295d5496ee8a96cdd845db96"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:548"><span class="id" title="variable">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.invariants.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#N:547"><span class="id" title="variable">N</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bbe704454668ef9b00188b987c9d3e26"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#90797ba0295d5496ee8a96cdd845db96"><span class="id" title="variable">γup</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="alloc_decompose_bi" class="idref" href="#alloc_decompose_bi"><span class="id" title="lemma">alloc_decompose_bi</span></a> <a id="ns:550" class="idref" href="#ns:550"><span class="id" title="binder">ns</span></a> <a id="5306ce867ddb3fdbe7c7dde4bacbfd92" class="idref" href="#5306ce867ddb3fdbe7c7dde4bacbfd92"><span class="id" title="binder">γup</span></a> <a id="sets:552" class="idref" href="#sets:552"><span class="id" title="binder">sets</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:553" class="idref" href="#s:553"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:553"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:552"><span class="id" title="variable">sets</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5306ce867ddb3fdbe7c7dde4bacbfd92"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:552"><span class="id" title="variable">sets</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#032e8f60cf4c8d85414301b1e227a9cb"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#032e8f60cf4c8d85414301b1e227a9cb"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">(</span></a><a id="bd18e579db7708b6a6928b3e54b714fa" class="idref" href="#bd18e579db7708b6a6928b3e54b714fa"><span class="id" title="binder">γ</span></a>:<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:555" class="idref" href="#n:555"><span class="id" title="binder"><span id="n:556" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bd18e579db7708b6a6928b3e54b714fa"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:555"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:552"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:555"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:550"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bd18e579db7708b6a6928b3e54b714fa"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5306ce867ddb3fdbe7c7dde4bacbfd92"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>* <span class="id" title="var">inv_alloc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alloc_decomp_aux"><span class="id" title="lemma">alloc_decomp_aux</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "&gt;(%γ &amp; S &amp; R)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv.with_inv_alloc.inv_alloc"><span class="id" title="variable">inv_alloc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ns</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$R //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Inv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "S Inv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h1 class="section">Top-level theorem</h1>


<div class="paragraph"> </div>

      The following top-level theorem shows how to spawn apps in γ
      from a composed app γup. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_decompose_bi" class="idref" href="#gen_decompose_bi"><span class="id" title="lemma">gen_decompose_bi</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="81414e82aa17de83a2de99f4c73f9e0b" class="idref" href="#81414e82aa17de83a2de99f4c73f9e0b"><span class="id" title="binder">γup</span></a> <a id="sets:558" class="idref" href="#sets:558"><span class="id" title="binder">sets</span></a> (<a id="nonempty:560" class="idref" href="#nonempty:560"><span class="id" title="binder">nonempty</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:559" class="idref" href="#s:559"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:559"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:558"><span class="id" title="variable">sets</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Assume&nbsp;that&nbsp;the&nbsp;composed&nbsp;app&nbsp;is&nbsp;in&nbsp;state&nbsp;(π_set&nbsp;sets)&nbsp;...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#81414e82aa17de83a2de99f4c73f9e0b"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:558"><span class="id" title="variable">sets</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;...&nbsp;and&nbsp;updater&nbsp;for&nbsp;the&nbsp;composed&nbsp;app&nbsp;(the&nbsp;composed&nbsp;app&nbsp;can&nbsp;take<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tau&nbsp;steps).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#81414e82aa17de83a2de99f4c73f9e0b"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="7c03fd3d2a94fbc7391e0075a0db15fc" class="idref" href="#7c03fd3d2a94fbc7391e0075a0db15fc"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:562" class="idref" href="#n:562"><span class="id" title="binder"><span id="n:563" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;frag&nbsp;tokens&nbsp;for&nbsp;each&nbsp;constituent&nbsp;LTS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c03fd3d2a94fbc7391e0075a0db15fc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:562"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:558"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:562"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;and&nbsp;updater&nbsp;so&nbsp;it&nbsp;can&nbsp;make&nbsp;tau&nbsp;steps.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:562"><span class="id" title="variable">n</span></a>) (@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#go_down"><span class="id" title="definition">go_down</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nsName"><span class="id" title="definition">ComposeN.nsName</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:562"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv.R"><span class="id" title="variable">R</span></a>)) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c03fd3d2a94fbc7391e0075a0db15fc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:562"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;and&nbsp;proofs&nbsp;for&nbsp;making&nbsp;communication&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;internal&nbsp;communication&nbsp;steps:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;proof&nbsp;that&nbsp;for&nbsp;all&nbsp;sets&nbsp;of&nbsp;dual&nbsp;events&nbsp;<span class="inlinecode"><span class="id" title="var">STEPr</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">STEPc</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requester&nbsp;ACs&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">STEPr</span></span>&nbsp;imply&nbsp;committer&nbsp;AUs&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">STEPc</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c03fd3d2a94fbc7391e0075a0db15fc"><span class="id" title="variable">γ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;external&nbsp;communication&nbsp;requests:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;proof&nbsp;that&nbsp;an&nbsp;external&nbsp;request&nbsp;from&nbsp;a&nbsp;constituent&nbsp;LTS&nbsp;can&nbsp;be&nbsp;turned&nbsp;into<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;external&nbsp;request&nbsp;by&nbsp;the&nbsp;composed&nbsp;LTS.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c03fd3d2a94fbc7391e0075a0db15fc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#81414e82aa17de83a2de99f4c73f9e0b"><span class="id" title="variable">γup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;external&nbsp;communication&nbsp;commits:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;proof&nbsp;that&nbsp;an&nbsp;external&nbsp;commit&nbsp;of&nbsp;the&nbsp;composed&nbsp;LTS&nbsp;can&nbsp;be&nbsp;turned&nbsp;into<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;external&nbsp;commit&nbsp;of&nbsp;the&nbsp;receiving&nbsp;constituent&nbsp;LTS.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c03fd3d2a94fbc7391e0075a0db15fc"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#81414e82aa17de83a2de99f4c73f9e0b"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>* <span class="id" title="var">inv_alloc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "aup #upd".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alloc_decompose_bi"><span class="id" title="lemma">alloc_decompose_bi</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">sets</span> <span class="id" title="var">nonempty</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(fr &amp; #Inv)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_sep"><span class="id" title="lemma">big_sepL_sep</span></a>. <span class="id" title="var">iFrame</span> "fr". <span class="id" title="var">iSplitL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a> <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">xs</span>] "IHl"; <span class="id" title="tactic">simpl</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "IHl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#left_updater"><span class="id" title="lemma">left_updater</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv upd"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refine_inv_gen_transports"><span class="id" title="lemma">refine_inv_gen_transports</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv upd"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refine_inv_requests"><span class="id" title="lemma">refine_inv_requests</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refine_inv_commits"><span class="id" title="lemma">refine_inv_commits</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv.with_inv_alloc"><span class="id" title="section">with_inv_alloc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv"><span class="id" title="section">refine_inv</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts"><span class="id" title="section">with_lts</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a><br/>
: <span class="id" title="var">br_opacity</span> <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">comp</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">rename</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h1 class="section">Singleton and Constructor Requesters/Committers</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="updater_singleton" class="idref" href="#updater_singleton"><span class="id" title="lemma">updater_singleton</span></a> `{<a id="H:565" class="idref" href="#H:565"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:564" class="idref" href="#PROP:564"><span class="id" title="binder"><span id="H:565" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:566" class="idref" href="#BiFUpd0:566"><span class="id" title="binder">!</span></a><a id="BiFUpd0:566" class="idref" href="#BiFUpd0:566"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:566" class="idref" href="#BiFUpd0:566"><span class="id" title="binder">PROP</span></a>} `{<a id="BiBUpdFUpd0:567" class="idref" href="#BiBUpdFUpd0:567"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:567" class="idref" href="#BiBUpdFUpd0:567"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:567" class="idref" href="#BiBUpdFUpd0:567"><span class="id" title="binder">PROP</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="app:568" class="idref" href="#app:568"><span class="id" title="binder">app</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a>} <a id="E1:569" class="idref" href="#E1:569"><span class="id" title="binder">E1</span></a> <a id="E2:570" class="idref" href="#E2:570"><span class="id" title="binder">E2</span></a> <a id="5190705cf02ce08f2154abc4113a68fb" class="idref" href="#5190705cf02ce08f2154abc4113a68fb"><span class="id" title="binder">γ</span></a> (<a id="s1:572" class="idref" href="#s1:572"><span class="id" title="binder">s1</span></a> <a id="s2:573" class="idref" href="#s2:573"><span class="id" title="binder">s2</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:568"><span class="id" title="variable">app</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E1:569"><span class="id" title="variable">E1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E2:570"><span class="id" title="variable">E2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:568"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:572"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s2:573"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:568"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E1:569"><span class="id" title="variable">E1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5190705cf02ce08f2154abc4113a68fb"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:568"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5190705cf02ce08f2154abc4113a68fb"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:572"><span class="id" title="variable">s1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E2:570"><span class="id" title="variable">E2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:568"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5190705cf02ce08f2154abc4113a68fb"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s2:573"><span class="id" title="variable">s2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HE</span> <span class="id" title="var">Hstep</span>) "#U R". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"U" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[%] [%] R"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "R"; [<span class="id" title="var">set_solver</span>..|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "R"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$"; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="with_app" class="idref" href="#with_app"><span class="id" title="section">with_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:575" class="idref" href="#H:575"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:574" class="idref" href="#PROP:574"><span class="id" title="binder"><span id="H:575" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:576" class="idref" href="#BiFUpd0:576"><span class="id" title="binder">!</span></a><a id="BiFUpd0:576" class="idref" href="#BiFUpd0:576"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:576" class="idref" href="#BiFUpd0:576"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="app:577" class="idref" href="#app:577"><span class="id" title="binder">app</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a>, <a id="R:578" class="idref" href="#R:578"><span class="id" title="binder">R</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*Specializes&nbsp;<span class="inlinecode"><span class="id" title="var">Step.requester</span></span>&nbsp;to&nbsp;events&nbsp;<span class="inlinecode"><span class="id" title="var">e</span></span>&nbsp;built&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">Ctor</span></span>*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ctor_requester" class="idref" href="#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> (<a id="b221a2263ad539dccb6f3dc496aad946" class="idref" href="#b221a2263ad539dccb6f3dc496aad946"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:580" class="idref" href="#A:580"><span class="id" title="binder">A</span></a>} (<a id="Ctor:581" class="idref" href="#Ctor:581"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:580"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:582" class="idref" href="#Q:582"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:580"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b221a2263ad539dccb6f3dc496aad946"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="e:583" class="idref" href="#e:583"><span class="id" title="binder"><span id="e:584" class="id">e</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:585" class="idref" href="#x:585"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:583"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:581"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:585"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e:586" class="idref" href="#e:586"><span class="id" title="binder">e</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="x:587" class="idref" href="#x:587"><span class="id" title="binder">x</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:586"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:581"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:587"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:582"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:587"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="singleton_requester" class="idref" href="#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> (<a id="cd52584b96e5a9482a3156ea933566ae" class="idref" href="#cd52584b96e5a9482a3156ea933566ae"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="evt:589" class="idref" href="#evt:589"><span class="id" title="binder">evt</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:590" class="idref" href="#Q:590"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cd52584b96e5a9482a3156ea933566ae"><span class="id" title="variable">γ</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:589"><span class="id" title="variable">evt</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:590"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ctor_committer" class="idref" href="#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> (<a id="00d8fbad0b3d5aa3c258460ba6132f13" class="idref" href="#00d8fbad0b3d5aa3c258460ba6132f13"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:592" class="idref" href="#A:592"><span class="id" title="binder">A</span></a>} (<a id="Ctor:593" class="idref" href="#Ctor:593"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:592"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:594" class="idref" href="#Q:594"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:592"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#00d8fbad0b3d5aa3c258460ba6132f13"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="e:595" class="idref" href="#e:595"><span class="id" title="binder"><span id="e:596" class="id">e</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:597" class="idref" href="#x:597"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:595"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:593"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:597"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e:598" class="idref" href="#e:598"><span class="id" title="binder">e</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="x:599" class="idref" href="#x:599"><span class="id" title="binder">x</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:598"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:593"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:599"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:594"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:599"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="singleton_committer" class="idref" href="#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> (<a id="0257154fde3cc9f44d15801a5cef1d01" class="idref" href="#0257154fde3cc9f44d15801a5cef1d01"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="evt:601" class="idref" href="#evt:601"><span class="id" title="binder">evt</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:602" class="idref" href="#Q:602"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0257154fde3cc9f44d15801a5cef1d01"><span class="id" title="variable">γ</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:601"><span class="id" title="variable">evt</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:602"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;General&nbsp;in&nbsp;masks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gen_ctor_requester" class="idref" href="#gen_ctor_requester"><span class="id" title="definition">gen_ctor_requester</span></a> <a id="m:603" class="idref" href="#m:603"><span class="id" title="binder">m</span></a> (<a id="c04bda13baf5e5dec70705de941c91cb" class="idref" href="#c04bda13baf5e5dec70705de941c91cb"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:605" class="idref" href="#A:605"><span class="id" title="binder">A</span></a>} (<a id="Ctor:606" class="idref" href="#Ctor:606"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:605"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:607" class="idref" href="#Q:607"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:605"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:603"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c04bda13baf5e5dec70705de941c91cb"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="e:608" class="idref" href="#e:608"><span class="id" title="binder"><span id="e:609" class="id">e</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:610" class="idref" href="#x:610"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:608"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:606"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:610"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e:611" class="idref" href="#e:611"><span class="id" title="binder">e</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="x:612" class="idref" href="#x:612"><span class="id" title="binder">x</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:611"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:606"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:612"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:607"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:612"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gen_singleton_requester" class="idref" href="#gen_singleton_requester"><span class="id" title="definition">gen_singleton_requester</span></a> <a id="m:613" class="idref" href="#m:613"><span class="id" title="binder">m</span></a> (<a id="3890a8a3429deaec266d00fa10306474" class="idref" href="#3890a8a3429deaec266d00fa10306474"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="evt:615" class="idref" href="#evt:615"><span class="id" title="binder">evt</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:616" class="idref" href="#Q:616"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_ctor_requester"><span class="id" title="definition">gen_ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:613"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3890a8a3429deaec266d00fa10306474"><span class="id" title="variable">γ</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:615"><span class="id" title="variable">evt</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:616"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gen_ctor_committer" class="idref" href="#gen_ctor_committer"><span class="id" title="definition">gen_ctor_committer</span></a> <a id="m:617" class="idref" href="#m:617"><span class="id" title="binder">m</span></a> (<a id="7ff48e85aa3fff43f0b37d5744b4ff9a" class="idref" href="#7ff48e85aa3fff43f0b37d5744b4ff9a"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:619" class="idref" href="#A:619"><span class="id" title="binder">A</span></a>} (<a id="Ctor:620" class="idref" href="#Ctor:620"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:619"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:621" class="idref" href="#Q:621"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:619"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alt_gen_committer"><span class="id" title="definition">Step.alt_gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:617"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7ff48e85aa3fff43f0b37d5744b4ff9a"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="e:622" class="idref" href="#e:622"><span class="id" title="binder"><span id="e:623" class="id">e</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:624" class="idref" href="#x:624"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:622"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:620"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:624"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e:625" class="idref" href="#e:625"><span class="id" title="binder">e</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="x:626" class="idref" href="#x:626"><span class="id" title="binder">x</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:625"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:620"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:626"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:621"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:626"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gen_singleton_committer" class="idref" href="#gen_singleton_committer"><span class="id" title="definition">gen_singleton_committer</span></a> <a id="m:627" class="idref" href="#m:627"><span class="id" title="binder">m</span></a> (<a id="71f4b7d068ac3f708df664a5b76a9781" class="idref" href="#71f4b7d068ac3f708df664a5b76a9781"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="evt:629" class="idref" href="#evt:629"><span class="id" title="binder">evt</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:630" class="idref" href="#Q:630"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_ctor_committer"><span class="id" title="definition">gen_ctor_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:627"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#71f4b7d068ac3f708df664a5b76a9781"><span class="id" title="variable">γ</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:629"><span class="id" title="variable">evt</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:630"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctor_requester_wand" class="idref" href="#ctor_requester_wand"><span class="id" title="lemma">ctor_requester_wand</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> {<a id="A:631" class="idref" href="#A:631"><span class="id" title="binder">A</span></a>} <a id="752ca10ade90d25b5f1379696dc53829" class="idref" href="#752ca10ade90d25b5f1379696dc53829"><span class="id" title="binder">γ</span></a> (<a id="K:633" class="idref" href="#K:633"><span class="id" title="binder">K</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:631"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) (<a id="Q:634" class="idref" href="#Q:634"><span class="id" title="binder">Q</span></a> <a id="Q':635" class="idref" href="#Q':635"><span class="id" title="binder">Q'</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:631"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a id="a:636" class="idref" href="#a:636"><span class="id" title="binder">a</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:634"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a:636"><span class="id" title="variable">a</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':635"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a:636"><span class="id" title="variable">a</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#752ca10ade90d25b5f1379696dc53829"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#K:633"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:634"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#752ca10ade90d25b5f1379696dc53829"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#K:633"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':635"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">A</span> <span class="id" title="var">γ</span> <span class="id" title="var">K</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span>) "HQ I"; <span class="id" title="tactic">unfold</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a>, <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_ppost_wand"><span class="id" title="lemma">atomic_commit.atomic_commit_ppost_wand</span></a>; <span class="id" title="var">iApply</span> "I".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">_</span> <span class="id" title="var">x</span>) "H"; <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span>) "[%HK Q]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">a</span>; <span class="id" title="var">iFrame</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HQ".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_requester_wand" class="idref" href="#singleton_requester_wand"><span class="id" title="lemma">singleton_requester_wand</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="2f36af2833ec276640a24de33f2be6d1" class="idref" href="#2f36af2833ec276640a24de33f2be6d1"><span class="id" title="binder">γ</span></a> <a id="x:638" class="idref" href="#x:638"><span class="id" title="binder">x</span></a> (<a id="Q:639" class="idref" href="#Q:639"><span class="id" title="binder">Q</span></a> <a id="Q':640" class="idref" href="#Q':640"><span class="id" title="binder">Q'</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:639"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':640"><span class="id" title="variable">Q'</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2f36af2833ec276640a24de33f2be6d1"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:638"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:639"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2f36af2833ec276640a24de33f2be6d1"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:638"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':640"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">γ</span> <span class="id" title="var">x</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span>) "HQ"; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester_wand"><span class="id" title="lemma">ctor_requester_wand</span></a>; <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> (<span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="simpl_cont" class="idref" href="#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a> {<a id="A:641" class="idref" href="#A:641"><span class="id" title="binder">A</span></a>} (<a id="Q:642" class="idref" href="#Q:642"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) (<a id="evt:643" class="idref" href="#evt:643"><span class="id" title="binder">evt</span></a> <a id="e:644" class="idref" href="#e:644"><span class="id" title="binder">e</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:641"><span class="id" title="variable">A</span></a>)  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:644"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#32bdf1c61a13e8cb0e6ac97c698c267c"><span class="id" title="notation">∈@{</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:641"><span class="id" title="variable">A</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#32bdf1c61a13e8cb0e6ac97c698c267c"><span class="id" title="notation">}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:643"><span class="id" title="variable">evt</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Program.Syntax.html#fbbfb55f1ee0a61e0473fa0799e34e17"><span class="id" title="notation">()</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:644"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:643"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:642"><span class="id" title="variable">Q</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:642"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.exist_unit"><span class="id" title="lemma">bi.exist_unit</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#only_provable_True"><span class="id" title="lemma">only_provable_True</span></a> ?(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id"><span class="id" title="definition">left_id</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#::stdpp_scope:'emp'"><span class="id" title="notation">emp</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_sep"><span class="id" title="projection">bi_sep</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_requester_equiv" class="idref" href="#singleton_requester_equiv"><span class="id" title="lemma">singleton_requester_equiv</span></a> {<a id="evt:645" class="idref" href="#evt:645"><span class="id" title="binder">evt</span></a>} <a id="39b2b9a9554b5915a4ca99bca608595a" class="idref" href="#39b2b9a9554b5915a4ca99bca608595a"><span class="id" title="binder">γ</span></a> <a id="Q:647" class="idref" href="#Q:647"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#39b2b9a9554b5915a4ca99bca608595a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:645"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:647"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#39b2b9a9554b5915a4ca99bca608595a"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:645"><span class="id" title="variable">evt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:647"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <span class="id" title="lemma">propset_singleton_equiv_unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester_proper_strong"><span class="id" title="lemma">Step.requester_proper_strong</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_requester_intro" class="idref" href="#singleton_requester_intro"><span class="id" title="lemma">singleton_requester_intro</span></a> {<a id="evt:648" class="idref" href="#evt:648"><span class="id" title="binder">evt</span></a>} <a id="2019d65b5a035af9d5d21c389e2ef8c6" class="idref" href="#2019d65b5a035af9d5d21c389e2ef8c6"><span class="id" title="binder">γ</span></a> (<a id="Q:650" class="idref" href="#Q:650"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">AC</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">∀</span></a> <a id="s:651" class="idref" href="#s:651"><span class="id" title="binder"><span id="s:652" class="id"><span id="s:653" class="id"><span id="s:655" class="id"><span id="s:656" class="id"><span id="s:659" class="id"><span id="s:660" class="id">s</span></span></span></span></span></span></span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="s':654" class="idref" href="#s':654"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:653"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:648"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':654"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2019d65b5a035af9d5d21c389e2ef8c6"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:653"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2019d65b5a035af9d5d21c389e2ef8c6"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':657" class="idref" href="#s':657"><span class="id" title="binder"><span id="s':658" class="id">s'</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:656"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:648"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':657"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:650"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2019d65b5a035af9d5d21c389e2ef8c6"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:648"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:650"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester_equiv"><span class="id" title="lemma">singleton_requester_equiv</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span>) "/= [(%s' &amp; %Hstep &amp; F) Fc]"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">s</span>; <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%" (<span class="id" title="var">e</span> -&gt;%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>); <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e</span>) "[%Hin F]". <span class="id" title="tactic">move</span>: <span class="id" title="var">Hin</span> =&gt; /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Fc" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_committer_equiv" class="idref" href="#singleton_committer_equiv"><span class="id" title="lemma">singleton_committer_equiv</span></a> {<a id="evt:661" class="idref" href="#evt:661"><span class="id" title="binder">evt</span></a>} <a id="09492e10ca3e7f953283c2d460554424" class="idref" href="#09492e10ca3e7f953283c2d460554424"><span class="id" title="binder">γ</span></a> <a id="Q:663" class="idref" href="#Q:663"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#09492e10ca3e7f953283c2d460554424"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:661"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:663"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#09492e10ca3e7f953283c2d460554424"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:661"><span class="id" title="variable">evt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:663"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> <span class="id" title="lemma">propset_singleton_equiv_unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer_proper_strong"><span class="id" title="lemma">Step.committer_proper_strong</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Consider&nbsp;using&nbsp;<span class="inlinecode"><span class="id" title="var">transport_singleton</span></span>&nbsp;instead&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_committer_intro" class="idref" href="#singleton_committer_intro"><span class="id" title="lemma">singleton_committer_intro</span></a> {<a id="evt:664" class="idref" href="#evt:664"><span class="id" title="binder">evt</span></a>} <a id="f97451e688baa7d7bddd445fe0d64eb7" class="idref" href="#f97451e688baa7d7bddd445fe0d64eb7"><span class="id" title="binder">γ</span></a> (<a id="Q:666" class="idref" href="#Q:666"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">AU</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∃∃</span></a> <a id="sset:667" class="idref" href="#sset:667"><span class="id" title="binder"><span id="sset:670" class="id"><span id="sset:671" class="id"><span id="sset:674" class="id">sset</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f97451e688baa7d7bddd445fe0d64eb7"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:670"><span class="id" title="variable">sset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∀∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">(</span></a><a id="s:668" class="idref" href="#s:668"><span class="id" title="binder"><span id="s:672" class="id"><span id="s:675" class="id">s</span></span></span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) (<a id="s':669" class="idref" href="#s':669"><span class="id" title="binder"><span id="s':673" class="id"><span id="s':676" class="id">s'</span></span></span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:672"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:671"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:672"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:664"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':673"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f97451e688baa7d7bddd445fe0d64eb7"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':673"><span class="id" title="variable">s'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:666"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f97451e688baa7d7bddd445fe0d64eb7"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:664"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:666"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer_equiv"><span class="id" title="lemma">singleton_committer_equiv</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">sset</span>) "/= [A Ac]"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">sset</span>; <span class="id" title="var">iFrame</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.and_parallel"><span class="id" title="lemma">bi.and_parallel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ac"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">iIntros</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Ac" (<span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">s'</span>). <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> ((? &amp; -&gt;%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> &amp; ?)) "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Ac" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$A //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_singleton_requester_equiv" class="idref" href="#gen_singleton_requester_equiv"><span class="id" title="lemma">gen_singleton_requester_equiv</span></a> {<a id="evt:677" class="idref" href="#evt:677"><span class="id" title="binder">evt</span></a>} <a id="m:678" class="idref" href="#m:678"><span class="id" title="binder">m</span></a> <a id="ae2cf40b416683668253e8288e4666e6" class="idref" href="#ae2cf40b416683668253e8288e4666e6"><span class="id" title="binder">γ</span></a> <a id="Q:680" class="idref" href="#Q:680"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_requester"><span class="id" title="definition">gen_singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:678"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ae2cf40b416683668253e8288e4666e6"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:677"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:680"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:678"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ae2cf40b416683668253e8288e4666e6"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:677"><span class="id" title="variable">evt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:680"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_requester"><span class="id" title="definition">gen_singleton_requester</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_ctor_requester"><span class="id" title="definition">gen_ctor_requester</span></a> <span class="id" title="lemma">propset_singleton_equiv_unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester_proper_strong"><span class="id" title="lemma">Step.gen_requester_proper_strong</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_singleton_committer_equiv" class="idref" href="#gen_singleton_committer_equiv"><span class="id" title="lemma">gen_singleton_committer_equiv</span></a> {<a id="evt:681" class="idref" href="#evt:681"><span class="id" title="binder">evt</span></a>} <a id="m:682" class="idref" href="#m:682"><span class="id" title="binder">m</span></a> <a id="dac3569ae90b9a9b15f462f4473223f3" class="idref" href="#dac3569ae90b9a9b15f462f4473223f3"><span class="id" title="binder">γ</span></a> <a id="Q:684" class="idref" href="#Q:684"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_committer"><span class="id" title="definition">gen_singleton_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:682"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dac3569ae90b9a9b15f462f4473223f3"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:681"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:684"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alt_gen_committer"><span class="id" title="definition">Step.alt_gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:682"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dac3569ae90b9a9b15f462f4473223f3"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:681"><span class="id" title="variable">evt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:684"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_committer"><span class="id" title="definition">gen_singleton_committer</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_ctor_committer"><span class="id" title="definition">gen_ctor_committer</span></a> <span class="id" title="lemma">propset_singleton_equiv_unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alt_gen_committer_proper_strong"><span class="id" title="lemma">Step.alt_gen_committer_proper_strong</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_singleton_requester_intro" class="idref" href="#gen_singleton_requester_intro"><span class="id" title="lemma">gen_singleton_requester_intro</span></a> {<a id="evt:685" class="idref" href="#evt:685"><span class="id" title="binder">evt</span></a>} <a id="m:686" class="idref" href="#m:686"><span class="id" title="binder">m</span></a> <a id="b3533c536b516dfea2152a737e851eee" class="idref" href="#b3533c536b516dfea2152a737e851eee"><span class="id" title="binder">γ</span></a> (<a id="Q:688" class="idref" href="#Q:688"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">AC</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">∀</span></a> <a id="s:689" class="idref" href="#s:689"><span class="id" title="binder"><span id="s:690" class="id"><span id="s:691" class="id"><span id="s:693" class="id"><span id="s:694" class="id"><span id="s:697" class="id"><span id="s:698" class="id">s</span></span></span></span></span></span></span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="s':692" class="idref" href="#s':692"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:691"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:685"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':692"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b3533c536b516dfea2152a737e851eee"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:691"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">@</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:686"><span class="id" title="variable">m</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I"><span class="id" title="projection">masks.I</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:686"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b3533c536b516dfea2152a737e851eee"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':695" class="idref" href="#s':695"><span class="id" title="binder"><span id="s':696" class="id">s'</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:694"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:685"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':695"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:688"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_requester"><span class="id" title="definition">gen_singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:686"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b3533c536b516dfea2152a737e851eee"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:685"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:688"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_requester_equiv"><span class="id" title="lemma">gen_singleton_requester_equiv</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester_learn"><span class="id" title="definition">Step.gen_requester_learn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span>) "/= [(%s' &amp; %Hstep &amp; F) Fc]"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a>; <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%". <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">s0</span> <span class="id" title="var">e</span> -&gt;%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt;%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e</span>) "[%Hin F]". <span class="id" title="tactic">move</span>: <span class="id" title="var">Hin</span> =&gt; /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Fc" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[F]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_proper"><span class="id" title="instance">AuthSet.frag_proper</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="ctor_requesters_seq" class="idref" href="#ctor_requesters_seq"><span class="id" title="definition">ctor_requesters_seq</span></a> (<a id="31e08cffd03418af6a66113d13f6197d" class="idref" href="#31e08cffd03418af6a66113d13f6197d"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>) {<a id="X:700" class="idref" href="#X:700"><span class="id" title="binder">X</span></a> <a id="A:701" class="idref" href="#A:701"><span class="id" title="binder">A</span></a> <a id="I:702" class="idref" href="#I:702"><span class="id" title="binder">I</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ctor:705" class="idref" href="#Ctor:705"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="index:703" class="idref" href="#index:703"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:702"><span class="id" title="variable">I</span></a>) (<a id="input:704" class="idref" href="#input:704"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:700"><span class="id" title="variable">X</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) <span class="comment">(*&nbsp;e.g.&nbsp;MemRead&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:709" class="idref" href="#f:709"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:706" class="idref" href="#so_far:706"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:701"><span class="id" title="variable">A</span></a>) (<a id="index:707" class="idref" href="#index:707"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:702"><span class="id" title="variable">I</span></a>) (<a id="input:708" class="idref" href="#input:708"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:700"><span class="id" title="variable">X</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:701"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="stepQ:713" class="idref" href="#stepQ:713"><span class="id" title="binder">stepQ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:710" class="idref" href="#so_far:710"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:701"><span class="id" title="variable">A</span></a>) (<a id="index:711" class="idref" href="#index:711"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:702"><span class="id" title="variable">I</span></a>) (<a id="input:712" class="idref" href="#input:712"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:700"><span class="id" title="variable">X</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;each&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="finalQ:714" class="idref" href="#finalQ:714"><span class="id" title="binder">finalQ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:701"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;all&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indexes:715" class="idref" href="#indexes:715"><span class="id" title="binder">indexes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:702"><span class="id" title="variable">I</span></a>) (<a id="acc:716" class="idref" href="#acc:716"><span class="id" title="binder">acc</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:701"><span class="id" title="variable">A</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#indexes:715"><span class="id" title="variable">indexes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:714"><span class="id" title="variable">finalQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:716"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">indexes'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#31e08cffd03418af6a66113d13f6197d"><span class="id" title="variable">γ</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:705"><span class="id" title="variable">Ctor</span></a> <span class="id" title="var">hd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="input:719" class="idref" href="#input:719"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:700"><span class="id" title="variable">X</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:713"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:716"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#input:719"><span class="id" title="variable">input</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requesters_seq:717"><span class="id" title="definition">ctor_requesters_seq</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#31e08cffd03418af6a66113d13f6197d"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:705"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:709"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:713"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:714"><span class="id" title="variable">finalQ</span></a> <span class="id" title="var">indexes'</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:709"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:716"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#input:719"><span class="id" title="variable">input</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requesters_seq"><span class="id" title="definition">ctor_requesters_seq</span></a> : <span class="id" title="var">br_opacity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="singleton_requesters_seq" class="idref" href="#singleton_requesters_seq"><span class="id" title="definition">singleton_requesters_seq</span></a> (<a id="15f142e7804471e44c8794fcac52b45f" class="idref" href="#15f142e7804471e44c8794fcac52b45f"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>) {<a id="A:721" class="idref" href="#A:721"><span class="id" title="binder">A</span></a> <a id="I:722" class="idref" href="#I:722"><span class="id" title="binder">I</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Singleton:724" class="idref" href="#Singleton:724"><span class="id" title="binder">Singleton</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="index:723" class="idref" href="#index:723"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:722"><span class="id" title="variable">I</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) <span class="comment">(*&nbsp;e.g.&nbsp;MemWrite&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:727" class="idref" href="#f:727"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:725" class="idref" href="#so_far:725"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:721"><span class="id" title="variable">A</span></a>) (<a id="index:726" class="idref" href="#index:726"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:722"><span class="id" title="variable">I</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:721"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="stepQ:730" class="idref" href="#stepQ:730"><span class="id" title="binder">stepQ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:728" class="idref" href="#so_far:728"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:721"><span class="id" title="variable">A</span></a>) (<a id="index:729" class="idref" href="#index:729"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:722"><span class="id" title="variable">I</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;each&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="finalQ:731" class="idref" href="#finalQ:731"><span class="id" title="binder">finalQ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:721"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;all&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indexes:732" class="idref" href="#indexes:732"><span class="id" title="binder">indexes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:722"><span class="id" title="variable">I</span></a>) (<a id="acc:733" class="idref" href="#acc:733"><span class="id" title="binder">acc</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:721"><span class="id" title="variable">A</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#indexes:732"><span class="id" title="variable">indexes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:731"><span class="id" title="variable">finalQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:733"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">indexes'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#15f142e7804471e44c8794fcac52b45f"><span class="id" title="variable">γ</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Singleton:724"><span class="id" title="variable">Singleton</span></a> <span class="id" title="var">hd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:730"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:733"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requesters_seq:734"><span class="id" title="definition">singleton_requesters_seq</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#15f142e7804471e44c8794fcac52b45f"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Singleton:724"><span class="id" title="variable">Singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:727"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:730"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:731"><span class="id" title="variable">finalQ</span></a> <span class="id" title="var">indexes'</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:727"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:733"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requesters_seq"><span class="id" title="definition">singleton_requesters_seq</span></a> : <span class="id" title="var">br_opacity</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app"><span class="id" title="section">with_app</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> : <span class="id" title="var">br_opacity</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> : <span class="id" title="var">br_opacity</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> : <span class="id" title="var">br_opacity</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> : <span class="id" title="var">br_opacity</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="singleton_with_ref" class="idref" href="#singleton_with_ref"><span class="id" title="section">singleton_with_ref</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:737" class="idref" href="#H:737"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:736" class="idref" href="#PROP:736"><span class="id" title="binder"><span id="H:737" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:738" class="idref" href="#BiFUpd0:738"><span class="id" title="binder">!</span></a><a id="BiFUpd0:738" class="idref" href="#BiFUpd0:738"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:738" class="idref" href="#BiFUpd0:738"><span class="id" title="binder">PROP</span></a>} `{<a id="BiBUpdFUpd0:739" class="idref" href="#BiBUpdFUpd0:739"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:739" class="idref" href="#BiBUpdFUpd0:739"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:739" class="idref" href="#BiBUpdFUpd0:739"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="R:740" class="idref" href="#R:740"><span class="id" title="binder">R</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_transport_singleton" class="idref" href="#gen_transport_singleton"><span class="id" title="lemma">gen_transport_singleton</span></a> <a id="comp:741" class="idref" href="#comp:741"><span class="id" title="binder">comp</span></a> <a id="9da8e3e5bd1732d01719e878a6b779ec" class="idref" href="#9da8e3e5bd1732d01719e878a6b779ec"><span class="id" title="binder">γ</span></a> <a id="nl:743" class="idref" href="#nl:743"><span class="id" title="binder">nl</span></a> <a id="nr:744" class="idref" href="#nr:744"><span class="id" title="binder">nr</span></a> <a id="m:745" class="idref" href="#m:745"><span class="id" title="binder">m</span></a> <a id="Q:746" class="idref" href="#Q:746"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:747" class="idref" href="#STEPl:747"><span class="id" title="binder">STEPl</span></a> : <span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:743"><span class="id" title="variable">nl</span></a>)) (<a id="STEPr:748" class="idref" href="#STEPr:748"><span class="id" title="binder">STEPr</span></a> : <span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:744"><span class="id" title="variable">nr</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:743"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:744"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">Compose.cancel_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:743"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:744"><span class="id" title="variable">nr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:747"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:748"><span class="id" title="variable">STEPr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#comp:741"><span class="id" title="variable">comp</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#9da8e3e5bd1732d01719e878a6b779ec"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_requester"><span class="id" title="definition">gen_singleton_requester</span></a> (<span class="id" title="var">app</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:743"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:745"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#9da8e3e5bd1732d01719e878a6b779ec"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:743"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:747"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:746"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_committer"><span class="id" title="definition">gen_singleton_committer</span></a> (<span class="id" title="var">app</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:744"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:745"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#9da8e3e5bd1732d01719e878a6b779ec"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:744"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:748"><span class="id" title="variable">STEPr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:746"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hdiff</span> <span class="id" title="var">Hcancel</span>) "#T R".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_requester_equiv"><span class="id" title="lemma">gen_singleton_requester_equiv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_singleton_committer_equiv"><span class="id" title="lemma">gen_singleton_committer_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_alt_gen_committer"><span class="id" title="lemma">Step.gen_committer_alt_gen_committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_proper_strong"><span class="id" title="lemma">Step.gen_committer_proper_strong</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">last</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"T" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">nl</span> <span class="id" title="var">nr</span> <span class="id" title="var">Hdiff</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[%] R"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<span class="id" title="lemma">Compose.dual_sets_singletons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">_</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="id" title="var">iIntros</span> "$ !% /=". <span class="id" title="var">set_solver</span>. } <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (? ?) "$".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_with_ref"><span class="id" title="section">singleton_with_ref</span></a>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
