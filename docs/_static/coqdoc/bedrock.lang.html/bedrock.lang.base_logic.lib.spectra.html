<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index for the theory </a>
      <a href="./toc.html"> Table of contents for the theory </a>
      <a href="../../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.lang.base_logic.lib.spectra</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(C)&nbsp;BedRock&nbsp;Systems&nbsp;Inc.&nbsp;2020-2024<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>

<br/>
<span class="comment">(***&nbsp;The&nbsp;Spectra&nbsp;Framework&nbsp;*)</span><br/>
</div>

<div class="doc">
<ul class="doclist">
<li> v1 developed by Gregory Malecha and Jonas Kastberg Hinrichsen.

</li>
<li> v2 developed by Gordon Stewart.

</li>
<li> further development by Abhishek Anand, Paolo G. Giarrusso, Yoichi Hirai,
  Hoang-Hai Dang.

</li>
</ul>

<div class="paragraph"> </div>

See the documentation in spectra.md for more details.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#"><span class="id" title="library">stdpp.namespaces</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.base</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">bedrock.prelude.sts</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.finite</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.sets</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">bedrock.prelude.propset</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.fin_sets</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.bytestring</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.tactics.proper</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.prelude.html#"><span class="id" title="library">bedrock.lang.bi.prelude</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.observe.html#"><span class="id" title="library">bedrock.lang.bi.observe</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.big_op.html#"><span class="id" title="library">bedrock.lang.bi.big_op</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#"><span class="id" title="library">bedrock.lang.bi.atomic_commit</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.atomic_update_properties.html#"><span class="id" title="library">bedrock.lang.bi.atomic_update_properties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#"><span class="id" title="library">bedrock.lang.bi.spec.knowledge</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.prop_constraints.html#"><span class="id" title="library">bedrock.lang.bi.prop_constraints</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.invariants.html#"><span class="id" title="library">bedrock.lang.bi.invariants</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#"><span class="id" title="library">bedrock.lang.base_logic.lib.auth_set</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.proofmode.fancy_updates.html#"><span class="id" title="library">bedrock.lang.proofmode.fancy_updates</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.proofmode.proofmode.html#"><span class="id" title="library">bedrock.lang.proofmode.proofmode</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.prelude.html#ChargeNotation"><span class="id" title="module">ChargeNotation</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Belongs&nbsp;to&nbsp;stdpp&nbsp;to&nbsp;support&nbsp;<span class="inlinecode"><span class="id" title="var">cbn</span></span>,&nbsp;same&nbsp;as&nbsp;we&nbsp;did&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">gset</span></span>.&nbsp;*)</span><br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset_difference"><span class="id" title="instance">coPset_difference</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#difference"><span class="id" title="definition">stdpp.base.difference</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="refinement_rootNS" class="idref" href="#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#nroot"><span class="id" title="definition">nroot</span></a><span class="id" title="notation">.@@</span>"refinement".<br/>

<br/>
<span class="comment">(***&nbsp;Refinement&nbsp;Namespace&nbsp;*)</span><br/>
</div>

<div class="doc">
This class manages the namespaces used by decompose invariants. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="refinement" class="idref" href="#refinement"><span class="id" title="record">refinement</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="refinement_root" class="idref" href="#refinement_root"><span class="id" title="projection">refinement_root</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="abbreviation">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;The&nbsp;current&nbsp;root.&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;; <a id="refinement_mkns" class="idref" href="#refinement_mkns"><span class="id" title="projection">refinement_mkns</span></a> (<a id="ss:3" class="idref" href="#ss:3"><span class="id" title="binder">ss</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="abbreviation">bs</span>) := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#e79e436c08f66d063bd17fb4bcd1cac6"><span class="id" title="notation">.@</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ss:3"><span class="id" title="variable">ss</span></a><br/>
&nbsp;&nbsp;; <a id="refinement_ns" class="idref" href="#refinement_ns"><span class="id" title="projection">refinement_ns</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_mkns:4"><span class="id" title="method">refinement_mkns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root:2"><span class="id" title="method">refinement_root</span></a><br/>
&nbsp;&nbsp;; <a id="refinement_cur" class="idref" href="#refinement_cur"><span class="id" title="projection">refinement_cur</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns:5"><span class="id" title="method">refinement_ns</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;The&nbsp;current&nbsp;refinement&nbsp;namespace&nbsp;has&nbsp;form:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nroot.@@"refinement".@refinement_root.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;lower&nbsp;levels,&nbsp;the&nbsp;root&nbsp;is&nbsp;extended&nbsp;by&nbsp;list&nbsp;append&nbsp;rather<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;<span class="inlinecode"><span class="id" title="var">ndot</span></span>.&nbsp;This&nbsp;ensures&nbsp;that&nbsp;lower&nbsp;levels&nbsp;have&nbsp;disjoint&nbsp;namespaces<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;current&nbsp;root.*)</span><br/>
<br/>
&nbsp;&nbsp;; <a id="refinement_up" class="idref" href="#refinement_up"><span class="id" title="projection">refinement_up</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;All&nbsp;the&nbsp;namespaces&nbsp;above&nbsp;the&nbsp;current&nbsp;point.&nbsp;*)</span><br/>
&nbsp;&nbsp;; <a id="refinement_up_sub" class="idref" href="#refinement_up_sub"><span class="id" title="projection">refinement_up_sub</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up:7"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a><br/>
<br/>
&nbsp;&nbsp;; <a id="refinement_disj" class="idref" href="#refinement_disj"><span class="id" title="projection">refinement_disj</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="ss:9" class="idref" href="#ss:9"><span class="id" title="binder">ss</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="abbreviation">bs</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_mkns:4"><span class="id" title="method">refinement_mkns</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root:2"><span class="id" title="method">refinement_root</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ss:9"><span class="id" title="variable">ss</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up:7"><span class="id" title="method">refinement_up</span></a> }.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;<span class="inlinecode"><span class="id" title="var">refinement_up</span></span>&nbsp;is&nbsp;disjoint&nbsp;from&nbsp;all&nbsp;list-app&nbsp;extensions&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;root.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="record">refinement</span></a></span> is instantiatable. 
</div>
<div class="code">
#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="start_refinement" class="idref" href="#start_refinement"><span class="id" title="definition">start_refinement</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">set_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Go down a level (indexed by bytestring <span class="inlinecode"><span class="id" title="var">arg</span></span>): 
</div>
<div class="code">
#[<span class="id" title="var">program</span>] <span class="id" title="keyword">Definition</span> <a id="go_down" class="idref" href="#go_down"><span class="id" title="definition">go_down</span></a> (<a id="arg:11" class="idref" href="#arg:11"><span class="id" title="binder">arg</span></a> : <span class="id" title="abbreviation">bs</span>) (<a id="cur:12" class="idref" href="#cur:12"><span class="id" title="binder">cur</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> := @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cur:12"><span class="id" title="variable">cur</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#arg:11"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> := @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cur:12"><span class="id" title="variable">cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cur:12"><span class="id" title="variable">cur</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;^|&nbsp;<span class="inlinecode"><span class="id" title="var">refinement_up</span></span>&nbsp;is&nbsp;the&nbsp;union&nbsp;of&nbsp;the&nbsp;current&nbsp;level&nbsp;and&nbsp;those&nbsp;above.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_disj"><span class="id" title="method">refinement_disj</span></a> := <span class="id" title="var">_</span> |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">_</span> <span class="id" title="var">cur</span>. <span class="id" title="var">have</span> ? := @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up_sub"><span class="id" title="method">refinement_up_sub</span></a> <span class="id" title="var">cur</span>. <span class="id" title="var">solve_ndisj</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">arg</span> <span class="id" title="var">cur</span> <span class="id" title="var">ns</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#disjoint_union_r"><span class="id" title="lemma">disjoint_union_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>. { <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_disj"><span class="id" title="method">refinement_disj</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#ndot_ne_disjoint"><span class="id" title="lemma">ndot_ne_disjoint</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">elim</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_root"><span class="id" title="method">refinement_root</span></a> =&gt; // <span class="id" title="var">x</span> <span class="id" title="var">l'</span> <span class="id" title="var">IH</span> [].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Section</span> <a id="with_refinement" class="idref" href="#with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="R:13" class="idref" href="#R:13"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refinement_cur_up_disj" class="idref" href="#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">move</span>: (@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_disj"><span class="id" title="method">refinement_disj</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_refinement.R"><span class="id" title="variable">R</span></a>); <span class="id" title="tactic">move</span>/(<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> =&gt; //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="up_go_left" class="idref" href="#up_go_left"><span class="id" title="lemma">up_go_left</span></a> <a id="bs:14" class="idref" href="#bs:14"><span class="id" title="binder">bs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#go_down"><span class="id" title="definition">go_down</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bs:14"><span class="id" title="variable">bs</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_refinement.R"><span class="id" title="variable">R</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> []. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="masks" class="idref" href="#masks"><span class="id" title="module">masks</span></a>.<br/>
</div>

<div class="doc">
  A consistent choice of masks.
  When proving requesters, clients can use their own invariants with mask <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.expr.html#E"><span class="id" title="module">E</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="library">coPset</span></span>,
  such that <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.expr.html#E"><span class="id" title="module">E</span></a></span> <span class="inlinecode">⊆</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a></span> <span class="inlinecode">\</span> <span class="inlinecode">↑<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a></span> and <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">I</span></a></span> <span class="inlinecode">⊆</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a></span> <span class="inlinecode">\</span> <span class="inlinecode">↑<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a></span> <span class="inlinecode">\</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.expr.html#E"><span class="id" title="module">E</span></a></span>.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="masks.t" class="idref" href="#masks.t"><span class="id" title="record">t</span></a> : <span class="id" title="keyword">Set</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.O" class="idref" href="#masks.O"><span class="id" title="projection">O</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>; </div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a></span>uter mask 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.I" class="idref" href="#masks.I"><span class="id" title="projection">I</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>; </div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">I</span></a></span>nner mask 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.order" class="idref" href="#masks.order"><span class="id" title="projection">order</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:17"><span class="id" title="method">I</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O:16"><span class="id" title="method">O</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="masks.RinO" class="idref" href="#masks.RinO"><span class="id" title="projection">RinO</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_rootNS"><span class="id" title="definition">refinement_rootNS</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O:16"><span class="id" title="method">O</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="masks.default" class="idref" href="#masks.default"><span class="id" title="definition">default</span></a> := {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">O</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">I</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> ;<br/>
&nbsp;&nbsp;|}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="masks.t_inh" class="idref" href="#masks.t_inh"><span class="id" title="instance">t_inh</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Inhabited"><span class="id" title="class">Inhabited</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.t"><span class="id" title="record">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">exact</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#populate"><span class="id" title="constructor">populate</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">default</span></a>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="masks.hints" class="idref" href="#masks.hints"><span class="id" title="module">hints</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">order</span> <span class="id" title="var">RinO</span> : <span class="id" title="var">ndisj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.hints"><span class="id" title="module">hints</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks"><span class="id" title="module">masks</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.hints"><span class="id" title="module">masks.hints</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Type</span> (<span class="id" title="var">m</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#t"><span class="id" title="record">masks.t</span></a>).<br/>

<br/>
<span class="comment">(***&nbsp;Apps&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="App" class="idref" href="#App"><span class="id" title="module">App</span></a>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a></span>s bundle an LTS with its event type.
  <span class="inlinecode"><span class="id" title="var">AuthSet.inG</span></span> <span class="inlinecode">...</span> asserts that Σ has an auth set over the type of the LTS. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="5708e05d69a78c7c9bc39a82b007386a" class="idref" href="#5708e05d69a78c7c9bc39a82b007386a"><span class="id" title="module">Σ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="eb60a19c2eb608167c17bc436e967bcf" class="idref" href="#eb60a19c2eb608167c17bc436e967bcf"><span class="id" title="record">app</span></a> {<a id="f8cd4500ff4fee5cd966dfeb97ee3847" class="idref" href="#f8cd4500ff4fee5cd966dfeb97ee3847"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="d3a9bd6ee4c10e7cb434b664c334c435" class="idref" href="#d3a9bd6ee4c10e7cb434b664c334c435"><span class="id" title="projection">evt</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="2725be836e6282bac9070dd3973f8702" class="idref" href="#2725be836e6282bac9070dd3973f8702"><span class="id" title="projection">lts</span></a> : <span class="id" title="abbreviation">LTS</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:22"><span class="id" title="method">evt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="edcb7e13f8ee4356e6cb796b3802e0a1" class="idref" href="#edcb7e13f8ee4356e6cb796b3802e0a1"><span class="id" title="projection">inG</span></a> :: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f8cd4500ff4fee5cd966dfeb97ee3847"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts:23"><span class="id" title="method">lts</span></a>.(<span class="id" title="abbreviation">lts_state</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eb60a19c2eb608167c17bc436e967bcf"><span class="id" title="class">app</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#012b9960fbb371378bdb3b6aff0b3a5a"><span class="id" title="constructor">mk</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">evt</span> <span class="id" title="var">lts</span> {<span class="id" title="var">_</span>} : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d3a9bd6ee4c10e7cb434b664c334c435"><span class="id" title="method">evt</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2725be836e6282bac9070dd3973f8702"><span class="id" title="method">lts</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#edcb7e13f8ee4356e6cb796b3802e0a1"><span class="id" title="method">inG</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5708e05d69a78c7c9bc39a82b007386a"><span class="id" title="module">Σ</span></a>.<br/>

<br/>
</div>

<div class="doc">
BI-general version of Σ.app 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="App.app" class="idref" href="#App.app"><span class="id" title="record">app</span></a> `{<a id="H:26" class="idref" href="#H:26"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:25" class="idref" href="#PROP:25"><span class="id" title="binder"><span id="H:26" class="id">PROP</span></span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="App.evt" class="idref" href="#App.evt"><span class="id" title="projection">evt</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="App.lts" class="idref" href="#App.lts"><span class="id" title="projection">lts</span></a> : <span class="id" title="abbreviation">LTS</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:28"><span class="id" title="method">evt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="App.inG" class="idref" href="#App.inG"><span class="id" title="projection">inG</span></a> :: <a class="idref" href="bedrock.lang.bi.prop_constraints.html#HasUsualOwn"><span class="id" title="class">HasUsualOwn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#PROP:25"><span class="id" title="variable">PROP</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts:29"><span class="id" title="method">lts</span></a>.(<span class="id" title="abbreviation">lts_state</span>));<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.mk"><span class="id" title="constructor">mk</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">evt</span> <span class="id" title="var">lts</span> {<span class="id" title="var">_</span>} : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.inG"><span class="id" title="method">inG</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>

<br/>
<span class="comment">(***&nbsp;Steps&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="Step" class="idref" href="#Step"><span class="id" title="module">Step</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*<span class="inlinecode"><span class="id" title="var">NOTE</span>:</span> <span class="inlinecode"><span class="id" title="var">tau_safe</span></span>&nbsp;is&nbsp;vacuous&nbsp;if&nbsp;<span class="inlinecode"><span class="id" title="var">sset</span></span>&nbsp;is&nbsp;empty.&nbsp;The&nbsp;toplevel<br/>
&nbsp;&nbsp;&nbsp;&nbsp;invariant&nbsp;holding&nbsp;the&nbsp;whole&nbsp;system-state&nbsp;auth&nbsp;should&nbsp;record&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">sset</span></span>&nbsp;is&nbsp;nonempty.&nbsp;&nbsp;Nonemptiness&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">sset</span></span>&nbsp;is&nbsp;preserved&nbsp;by<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">updater</span></span>.&nbsp;Nonemptiness&nbsp;is&nbsp;established&nbsp;initially&nbsp;by&nbsp;starting&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;system&nbsp;in&nbsp;a&nbsp;state&nbsp;related&nbsp;to&nbsp;the&nbsp;initial&nbsp;state&nbsp;of&nbsp;the&nbsp;whole-system<br/>
&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;<span class="inlinecode"><span class="id" title="var">AuthSet.auth_exact</span></span> <span class="inlinecode"><span class="id" title="var">γ</span></span> <span class="inlinecode">{[</span> <span class="inlinecode"><span class="id" title="var">wholesystem_init</span></span> <span class="inlinecode">]}</span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="Step.tau_safe" class="idref" href="#Step.tau_safe"><span class="id" title="abbreviation">tau_safe</span></a> <span class="id" title="var">lts</span> <span class="id" title="var">sset</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:31" class="idref" href="#s:31"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:31"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':32" class="idref" href="#s':32"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">lts</span>.(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:31"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':32"><span class="id" title="variable">s'</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="Step.with_app" class="idref" href="#Step.with_app"><span class="id" title="section">with_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:34" class="idref" href="#H:34"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:33" class="idref" href="#PROP:33"><span class="id" title="binder"><span id="H:34" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:35" class="idref" href="#BiFUpd0:35"><span class="id" title="binder">!</span></a><a id="BiFUpd0:35" class="idref" href="#BiFUpd0:35"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:35" class="idref" href="#BiFUpd0:35"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="x:36" class="idref" href="#x:36"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.app"><span class="id" title="class">App.app</span></a>) (<a id="E:37" class="idref" href="#E:37"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Type</span> (<span class="id" title="var">γ</span> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "All".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;avoids&nbsp;duplicate&nbsp;reasoning&nbsp;to&nbsp;establish&nbsp;a&nbsp;property&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;typically&nbsp;about&nbsp;the&nbsp;final&nbsp;state:&nbsp;once&nbsp;to&nbsp;prove&nbsp;the&nbsp;atomic_pre,&nbsp;then&nbsp;in&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;learn&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;during&nbsp;the&nbsp;atomic_pre&nbsp;proof&nbsp;and&nbsp;you&nbsp;get&nbsp;to&nbsp;use&nbsp;it&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.&nbsp;Use&nbsp;the&nbsp;lemma<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">requester_learn_implies</span></span>&nbsp;with&nbsp;an&nbsp;appropriate&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;before&nbsp;proving&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="var">requester</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.gen_requester_learn" class="idref" href="#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a id="m:38" class="idref" href="#m:38"><span class="id" title="binder">m</span></a> <a id="53c4cb77ec0f68b3b6fc377e98c1716b" class="idref" href="#53c4cb77ec0f68b3b6fc377e98c1716b"><span class="id" title="binder">γ</span></a> (<a id="STEP:40" class="idref" href="#STEP:40"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="learn:41" class="idref" href="#learn:41"><span class="id" title="binder">learn</span></a> : <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Q:42" class="idref" href="#Q:42"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">AC</span></a>  <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∀</span></a> <a id="sset:43" class="idref" href="#sset:43"><span class="id" title="binder"><span id="sset:45" class="id"><span id="sset:46" class="id"><span id="sset:51" class="id"><span id="sset:52" class="id"><span id="sset:57" class="id"><span id="sset:58" class="id">sset</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#53c4cb77ec0f68b3b6fc377e98c1716b"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:46"><span class="id" title="variable">sset</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:47" class="idref" href="#s:47"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:47"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:46"><span class="id" title="variable">sset</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="comment">(*The&nbsp;model&nbsp;is&nbsp;safe&nbsp;to&nbsp;step&nbsp;any&nbsp;event&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">STEP</span></span>.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:48" class="idref" href="#s:48"><span class="id" title="binder">s</span></a> <a id="e:49" class="idref" href="#e:49"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:48"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:46"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:49"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:40"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':50" class="idref" href="#s':50"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:48"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:49"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':50"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:41"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:48"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:49"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':50"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">@</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:38"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:38"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.I"><span class="id" title="projection">masks.I</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∃</span></a> <a id="e:44" class="idref" href="#e:44"><span class="id" title="binder"><span id="e:53" class="id"><span id="e:54" class="id"><span id="e:59" class="id"><span id="e:60" class="id">e</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:54"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:40"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#53c4cb77ec0f68b3b6fc377e98c1716b"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':55" class="idref" href="#s':55"><span class="id" title="binder">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:56" class="idref" href="#s:56"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:56"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:52"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:56"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:54"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':55"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:41"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:56"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:54"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':55"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:42"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:60"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a requester /proves/ in order to perform its
        own <span class="inlinecode"><span class="id" title="var">STEP</span></span> action. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.gen_requester" class="idref" href="#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a id="m:61" class="idref" href="#m:61"><span class="id" title="binder">m</span></a> <a id="a26d7b06cd612539594d0bd8a3d0cf20" class="idref" href="#a26d7b06cd612539594d0bd8a3d0cf20"><span class="id" title="binder">γ</span></a> (<a id="STEP:63" class="idref" href="#STEP:63"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:64" class="idref" href="#Q:64"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:61"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a26d7b06cd612539594d0bd8a3d0cf20"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:63"><span class="id" title="variable">STEP</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:64"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a committer /assumes/ in order to perform a
        <span class="inlinecode"><span class="id" title="var">STEP</span></span> action. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.gen_committer" class="idref" href="#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a id="m:65" class="idref" href="#m:65"><span class="id" title="binder">m</span></a> <a id="e1ff855a40e5ffdff248631ae80a89d3" class="idref" href="#e1ff855a40e5ffdff248631ae80a89d3"><span class="id" title="binder">γ</span></a> (<a id="STEP:67" class="idref" href="#STEP:67"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:68" class="idref" href="#Q:68"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">AU</span></a>  <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∃∃</span></a> <a id="sset:69" class="idref" href="#sset:69"><span class="id" title="binder"><span id="sset:72" class="id"><span id="sset:73" class="id"><span id="sset:79" class="id">sset</span></span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1ff855a40e5ffdff248631ae80a89d3"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:72"><span class="id" title="variable">sset</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">@</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:65"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:65"><span class="id" title="variable">m</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.O"><span class="id" title="projection">masks.O</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∀∀</span></a> <a id="sset':70" class="idref" href="#sset':70"><span class="id" title="binder"><span id="sset':74" class="id"><span id="sset':80" class="id">sset'</span></span></span></a> <a id="e:71" class="idref" href="#e:71"><span class="id" title="binder"><span id="e:75" class="id"><span id="e:81" class="id">e</span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:75"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:67"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:76" class="idref" href="#s:76"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:76"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':74"><span class="id" title="variable">sset'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="s':77" class="idref" href="#s':77"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':77"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':74"><span class="id" title="variable">sset'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:78" class="idref" href="#s:78"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:78"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:73"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:78"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:75"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':77"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1ff855a40e5ffdff248631ae80a89d3"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset':74"><span class="id" title="variable">sset'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:68"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:81"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a requester /proves/ in order to perform its
        own <span class="inlinecode"><span class="id" title="var">STEP</span></span> action.
    TODO: requester := requester_learn γ STEP (λ _  , True) Q.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.requester" class="idref" href="#Step.requester"><span class="id" title="definition">requester</span></a> <a id="0bc8c758408752acb835d1d92add2a8d" class="idref" href="#0bc8c758408752acb835d1d92add2a8d"><span class="id" title="binder">γ</span></a> (<a id="STEP:83" class="idref" href="#STEP:83"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:84" class="idref" href="#Q:84"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">AC</span></a>  <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∀</span></a> <a id="s:85" class="idref" href="#s:85"><span class="id" title="binder"><span id="s:87" class="id"><span id="s:88" class="id"><span id="s:91" class="id"><span id="s:92" class="id"><span id="s:96" class="id"><span id="s:97" class="id">s</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0bc8c758408752acb835d1d92add2a8d"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:88"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="comment">(*The&nbsp;model&nbsp;is&nbsp;safe&nbsp;to&nbsp;step&nbsp;any&nbsp;event&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">STEP</span></span>.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:89" class="idref" href="#e:89"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:89"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:83"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':90" class="idref" href="#s':90"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:88"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:89"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':90"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∃</span></a> <a id="e:86" class="idref" href="#e:86"><span class="id" title="binder"><span id="e:93" class="id"><span id="e:94" class="id"><span id="e:98" class="id"><span id="e:99" class="id">e</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:94"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:83"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0bc8c758408752acb835d1d92add2a8d"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':95" class="idref" href="#s':95"><span class="id" title="binder">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:92"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:94"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':95"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:84"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:99"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;avoids&nbsp;duplicate&nbsp;reasoning&nbsp;to&nbsp;establish&nbsp;a&nbsp;property&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;typically&nbsp;about&nbsp;the&nbsp;final&nbsp;state:&nbsp;once&nbsp;to&nbsp;prove&nbsp;the&nbsp;atomic_pre,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;in&nbsp;the&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;can&nbsp;learn&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;during&nbsp;the&nbsp;atomic_pre&nbsp;proof&nbsp;and&nbsp;you&nbsp;get&nbsp;to&nbsp;use&nbsp;it<br/>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;proof&nbsp;of&nbsp;the&nbsp;public&nbsp;postcondition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Use&nbsp;the&nbsp;lemma&nbsp;<span class="inlinecode"><span class="id" title="var">requester_learn_implies</span></span>&nbsp;with&nbsp;an&nbsp;appropriate&nbsp;<span class="inlinecode"><span class="id" title="var">learn</span></span>&nbsp;before&nbsp;proving&nbsp;a&nbsp;<span class="inlinecode"><span class="id" title="var">requester</span></span>&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.requester_learn" class="idref" href="#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> <a id="cb5cf219c0c095091b7921572a2faef0" class="idref" href="#cb5cf219c0c095091b7921572a2faef0"><span class="id" title="binder">γ</span></a> (<a id="STEP:101" class="idref" href="#STEP:101"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="learn:102" class="idref" href="#learn:102"><span class="id" title="binder">learn</span></a> : <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Q:103" class="idref" href="#Q:103"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">AC</span></a>  <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∀</span></a> <a id="s:104" class="idref" href="#s:104"><span class="id" title="binder"><span id="s:106" class="id"><span id="s:107" class="id"><span id="s:110" class="id"><span id="s:111" class="id"><span id="s:115" class="id"><span id="s:116" class="id">s</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cb5cf219c0c095091b7921572a2faef0"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:107"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="comment">(*The&nbsp;model&nbsp;is&nbsp;safe&nbsp;to&nbsp;step&nbsp;any&nbsp;event&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">STEP</span></span>.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:108" class="idref" href="#e:108"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:108"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:101"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s':109" class="idref" href="#s':109"><span class="id" title="binder">s'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:107"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:108"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':109"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:102"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:107"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:108"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':109"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">∃</span></a> <a id="e:105" class="idref" href="#e:105"><span class="id" title="binder"><span id="e:112" class="id"><span id="e:113" class="id"><span id="e:117" class="id"><span id="e:118" class="id">e</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:113"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:101"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="s':114" class="idref" href="#s':114"><span class="id" title="binder">s'</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:111"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:113"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':114"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#learn:102"><span class="id" title="variable">learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:111"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:113"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':114"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cb5cf219c0c095091b7921572a2faef0"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':114"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:103"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:118"><span class="id" title="variable">e</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#c39d3af89df1b2dac525e9f45488a620"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
This is the AC a committer /assumes/ in order to perform a
        <span class="inlinecode"><span class="id" title="var">STEP</span></span> action. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.committer" class="idref" href="#Step.committer"><span class="id" title="definition">committer</span></a> <a id="363e9342fb900062fde30410334abd39" class="idref" href="#363e9342fb900062fde30410334abd39"><span class="id" title="binder">γ</span></a> (<a id="STEP:120" class="idref" href="#STEP:120"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) (<a id="Q:121" class="idref" href="#Q:121"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">AU</span></a>  <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∃∃</span></a> <a id="sset:122" class="idref" href="#sset:122"><span class="id" title="binder"><span id="sset:126" class="id"><span id="sset:127" class="id"><span id="sset:131" class="id">sset</span></span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#363e9342fb900062fde30410334abd39"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:126"><span class="id" title="variable">sset</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∀∀</span></a> <a id="s:123" class="idref" href="#s:123"><span class="id" title="binder"><span id="s:128" class="id"><span id="s:132" class="id">s</span></span></span></a> <a id="e:124" class="idref" href="#e:124"><span class="id" title="binder"><span id="e:129" class="id"><span id="e:133" class="id">e</span></span></span></a> <a id="s':125" class="idref" href="#s':125"><span class="id" title="binder"><span id="s':130" class="id"><span id="s':134" class="id">s'</span></span></span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:128"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:127"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:129"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:120"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:128"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:129"><span class="id" title="variable">e</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':130"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#363e9342fb900062fde30410334abd39"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':130"><span class="id" title="variable">s'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:121"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:133"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
Updaters grant the right to make silent (tau) steps. They're justified
        by opening the decompose invariants of the framework. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.updater_def" class="idref" href="#Step.updater_def"><span class="id" title="definition">updater_def</span></a> <a id="2d1c97d88082cb122b11ea8c2595f478" class="idref" href="#2d1c97d88082cb122b11ea8c2595f478"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="sset:136" class="idref" href="#sset:136"><span class="id" title="binder">sset</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_state</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:137" class="idref" href="#s:137"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:137"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:136"><span class="id" title="variable">sset</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.tau_safe"><span class="id" title="abbreviation">tau_safe</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:136"><span class="id" title="variable">sset</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2d1c97d88082cb122b11ea8c2595f478"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:136"><span class="id" title="variable">sset</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.E"><span class="id" title="variable">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2d1c97d88082cb122b11ea8c2595f478"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':138" class="idref" href="#s':138"><span class="id" title="binder">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:139" class="idref" href="#s:139"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:139"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:136"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:139"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':138"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Iris-style&nbsp;sealing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Definition</span> <a id="Step.updater_aux" class="idref" href="#Step.updater_aux"><span class="id" title="definition">updater_aux</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#seal"><span class="id" title="record">seal</span></a> (@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_def"><span class="id" title="definition">updater_def</span></a>). <span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.updater" class="idref" href="#Step.updater"><span class="id" title="definition">updater</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_aux"><span class="id" title="definition">updater_aux</span></a>.(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#unseal"><span class="id" title="projection">unseal</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Step.updater_unseal" class="idref" href="#Step.updater_unseal"><span class="id" title="definition">updater_unseal</span></a> : @<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_aux"><span class="id" title="definition">updater_aux</span></a>.(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#seal_eq"><span class="id" title="projection">seal_eq</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.updater_persistent" class="idref" href="#Step.updater_persistent"><span class="id" title="instance">updater_persistent</span></a> <a id="c5b799c6a6a6e4061f0b2bf4c98956ce" class="idref" href="#c5b799c6a6a6e4061f0b2bf4c98956ce"><span class="id" title="binder">γ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#Persistent"><span class="id" title="class">Persistent</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c5b799c6a6a6e4061f0b2bf4c98956ce"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_unseal"><span class="id" title="definition">updater_unseal</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.updater_affine" class="idref" href="#Step.updater_affine"><span class="id" title="instance">updater_affine</span></a> <a id="92e203497d2e1b39e78f373881c9de95" class="idref" href="#92e203497d2e1b39e78f373881c9de95"><span class="id" title="binder">γ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#Affine"><span class="id" title="class">Affine</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#92e203497d2e1b39e78f373881c9de95"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater_unseal"><span class="id" title="definition">updater_unseal</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We have the following relations:

<div class="paragraph"> </div>

          GRL ---------&gt; GR ---------&gt; GC
          ^             ^              |
          |             |              ∨
          RL ----------&gt; R  ---------&gt; C

<div class="paragraph"> </div>

      + C  : committer
      + GC : gen_committer
      + GRL: gen_requester_learn
      + RL : requester_learn
      + GR : gen_requester
      + R  : requester
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_learn_implies" class="idref" href="#Step.requester_learn_implies"><span class="id" title="lemma">requester_learn_implies</span></a> `{<a id="BiBUpdFUpd0:142" class="idref" href="#BiBUpdFUpd0:142"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:142" class="idref" href="#BiBUpdFUpd0:142"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:142" class="idref" href="#BiBUpdFUpd0:142"><span class="id" title="binder">PROP</span></a>} <a id="P:143" class="idref" href="#P:143"><span class="id" title="binder">P</span></a> <a id="d4a6ad2f0cfffde8197f087f77d69553" class="idref" href="#d4a6ad2f0cfffde8197f087f77d69553"><span class="id" title="binder">γ</span></a> <a id="STEP:145" class="idref" href="#STEP:145"><span class="id" title="binder">STEP</span></a> <a id="Q:146" class="idref" href="#Q:146"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d4a6ad2f0cfffde8197f087f77d69553"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:145"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:146"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d4a6ad2f0cfffde8197f087f77d69553"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:145"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:146"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">t</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">t</span>. <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HI</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "?"; [<span class="id" title="var">set_solver</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "W"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_learn_gen_requester_learn" class="idref" href="#Step.requester_learn_gen_requester_learn"><span class="id" title="lemma">requester_learn_gen_requester_learn</span></a> `{<a id="BiBUpdFUpd0:147" class="idref" href="#BiBUpdFUpd0:147"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:147" class="idref" href="#BiBUpdFUpd0:147"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:147" class="idref" href="#BiBUpdFUpd0:147"><span class="id" title="binder">PROP</span></a>} <a id="P:148" class="idref" href="#P:148"><span class="id" title="binder">P</span></a> <a id="617702b280ac3e62312f7881e5b63753" class="idref" href="#617702b280ac3e62312f7881e5b63753"><span class="id" title="binder">γ</span></a> <a id="STEP:150" class="idref" href="#STEP:150"><span class="id" title="binder">STEP</span></a> <a id="Q:151" class="idref" href="#Q:151"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#617702b280ac3e62312f7881e5b63753"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:150"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:148"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:151"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">masks.default</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#617702b280ac3e62312f7881e5b63753"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:150"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:148"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:151"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester_learn"><span class="id" title="definition">requester_learn</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">s0</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s0</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a>. <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">HI</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "?"; [<span class="id" title="var">set_solver</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "W"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_learn_mono" class="idref" href="#Step.gen_requester_learn_mono"><span class="id" title="lemma">gen_requester_learn_mono</span></a> <a id="m:152" class="idref" href="#m:152"><span class="id" title="binder">m</span></a> <a id="c0cf1192a15b70a4d629eff36d8e0c8c" class="idref" href="#c0cf1192a15b70a4d629eff36d8e0c8c"><span class="id" title="binder">γ</span></a> <a id="STEP:154" class="idref" href="#STEP:154"><span class="id" title="binder">STEP</span></a> `{<a id="BiBUpdFUpd0:155" class="idref" href="#BiBUpdFUpd0:155"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:155" class="idref" href="#BiBUpdFUpd0:155"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:155" class="idref" href="#BiBUpdFUpd0:155"><span class="id" title="binder">PROP</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>  (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Program.Basics.html#impl"><span class="id" title="definition">impl</span></a>)))<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:152"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c0cf1192a15b70a4d629eff36d8e0c8c"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:154"><span class="id" title="variable">STEP</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> =&gt; <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">HP</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">t</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HI</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">IN0</span> &amp; <span class="id" title="var">HI</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">t</span>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">IN0</span>) "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"W" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[&gt;-]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$"; <span class="id" title="var">last</span> <span class="id" title="var">done</span>. <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_learn_gen_requester" class="idref" href="#Step.gen_requester_learn_gen_requester"><span class="id" title="lemma">gen_requester_learn_gen_requester</span></a> `{<a id="BiBUpdFUpd0:156" class="idref" href="#BiBUpdFUpd0:156"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:156" class="idref" href="#BiBUpdFUpd0:156"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:156" class="idref" href="#BiBUpdFUpd0:156"><span class="id" title="binder">PROP</span></a>} <a id="P:157" class="idref" href="#P:157"><span class="id" title="binder">P</span></a> <a id="m:158" class="idref" href="#m:158"><span class="id" title="binder">m</span></a> <a id="bc18fe419a95dc0d41e679a7a208ebc5" class="idref" href="#bc18fe419a95dc0d41e679a7a208ebc5"><span class="id" title="binder">γ</span></a> <a id="STEP:160" class="idref" href="#STEP:160"><span class="id" title="binder">STEP</span></a> <a id="Q:161" class="idref" href="#Q:161"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:158"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bc18fe419a95dc0d41e679a7a208ebc5"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:160"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:157"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:161"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:158"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bc18fe419a95dc0d41e679a7a208ebc5"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:160"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:161"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn_mono"><span class="id" title="lemma">gen_requester_learn_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_gen_requester" class="idref" href="#Step.requester_gen_requester"><span class="id" title="lemma">requester_gen_requester</span></a> <a id="246ecb9c96cdf986fce284b8feeaf1b7" class="idref" href="#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="binder">γ</span></a> <a id="STEP:163" class="idref" href="#STEP:163"><span class="id" title="binder">STEP</span></a> <a id="Q:164" class="idref" href="#Q:164"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:163"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:164"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">masks.default</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#246ecb9c96cdf986fce284b8feeaf1b7"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:163"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:164"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "ac".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "ac" <span class="id" title="keyword">as</span> (<span class="id" title="var">s0</span>) "((F &amp; %HI) &amp; W) /="; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s0</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a>. <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>. { <span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "%ev [%Hin F]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "W". <span class="id" title="var">iFrame</span> (<span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">_</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':165" class="idref" href="#s':165"><span class="id" title="binder"><span id="s':168" class="id"><span id="s':171" class="id">s'</span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:166" class="idref" href="#s:166"><span class="id" title="binder"><span id="s:169" class="id"><span id="s:172" class="id">s</span></span></span></a> : <span class="id" title="abbreviation">lts_state</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:166"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><span class="id" title="var">s0</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:166"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">ev</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':165"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>)%<span class="id" title="keyword">type</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':167" class="idref" href="#s':167"><span class="id" title="binder"><span id="s':170" class="id"><span id="s':173" class="id">s'</span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>) <span class="id" title="var">s0</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">ev</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':167"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_committer_committer" class="idref" href="#Step.gen_committer_committer"><span class="id" title="lemma">gen_committer_committer</span></a> <a id="4fba15adc009266a11756ec045a4c24f" class="idref" href="#4fba15adc009266a11756ec045a4c24f"><span class="id" title="binder">γ</span></a> <a id="STEP:175" class="idref" href="#STEP:175"><span class="id" title="binder">STEP</span></a> <a id="Q:176" class="idref" href="#Q:176"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#masks.default"><span class="id" title="definition">masks.default</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4fba15adc009266a11756ec045a4c24f"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:175"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:176"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4fba15adc009266a11756ec045a4c24f"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:175"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:176"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "AU".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">sset</span>) "[A Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">sset</span>. <span class="id" title="var">iFrame</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;abort&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[Close _]". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Close". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[_ Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">s'</span>) "[%HI A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a>. <span class="id" title="var">iFrame</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!%". <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.committer_proper" class="idref" href="#Step.committer_proper"><span class="id" title="instance">committer_proper</span></a> <a id="d3619922e9ded78cca017f7b15aea92e" class="idref" href="#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d3619922e9ded78cca017f7b15aea92e"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;AUTO:&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_tidy</span></span>&nbsp;calls&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_prepare</span></span>&nbsp;twice&nbsp;hence&nbsp;unfolds&nbsp;sealing&nbsp;wrappers.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>; <span class="id" title="var">solve_proper_tidy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.requester_proper" class="idref" href="#Step.requester_proper"><span class="id" title="instance">requester_proper</span></a> <a id="63746e9ae9dd2a610df7c0e78237d0c3" class="idref" href="#63746e9ae9dd2a610df7c0e78237d0c3"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#63746e9ae9dd2a610df7c0e78237d0c3"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">f_equiv_tidy</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">iff_forall</span> =&gt; <span class="id" title="var">i</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.gen_committer_proper" class="idref" href="#Step.gen_committer_proper"><span class="id" title="instance">gen_committer_proper</span></a> <a id="m:179" class="idref" href="#m:179"><span class="id" title="binder">m</span></a> <a id="ea19553467b4c02f0e7da36e690ad466" class="idref" href="#ea19553467b4c02f0e7da36e690ad466"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:179"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ea19553467b4c02f0e7da36e690ad466"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;AUTO:&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_tidy</span></span>&nbsp;calls&nbsp;<span class="inlinecode"><span class="id" title="var">solve_proper_prepare</span></span>&nbsp;twice&nbsp;hence&nbsp;unfolds&nbsp;sealing&nbsp;wrappers.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>; <span class="id" title="var">solve_proper_tidy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.gen_requester_learn_proper" class="idref" href="#Step.gen_requester_learn_proper"><span class="id" title="instance">gen_requester_learn_proper</span></a> <a id="m:181" class="idref" href="#m:181"><span class="id" title="binder">m</span></a> <a id="2d1269e75de3d72eeccd22010bccd25b" class="idref" href="#2d1269e75de3d72eeccd22010bccd25b"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a>  (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:181"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2d1269e75de3d72eeccd22010bccd25b"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> =&gt; <span class="id" title="var">S1</span> <span class="id" title="var">S2</span> <span class="id" title="var">HS</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">HP</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="var">f_equiv_tidy</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="Step.gen_requester_proper" class="idref" href="#Step.gen_requester_proper"><span class="id" title="instance">gen_requester_proper</span></a> <a id="m:183" class="idref" href="#m:183"><span class="id" title="binder">m</span></a> <a id="4019b6e1f30efcdf84daff668519c4ff" class="idref" href="#4019b6e1f30efcdf84daff668519c4ff"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:183"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4019b6e1f30efcdf84daff668519c4ff"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a>. <span class="id" title="var">solve_proper</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Stronger than the "obvious" statement thanks to the extra <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">STEP</span></span>
    assumption in the hypothesis. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.requester_proper_strong" class="idref" href="#Step.requester_proper_strong"><span class="id" title="lemma">requester_proper_strong</span></a> <a id="d654f527b008107ec81f37201cd05c5b" class="idref" href="#d654f527b008107ec81f37201cd05c5b"><span class="id" title="binder">γ</span></a> (<a id="STEP:186" class="idref" href="#STEP:186"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:187" class="idref" href="#f:187"><span class="id" title="binder">f</span></a> <a id="g:188" class="idref" href="#g:188"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:189" class="idref" href="#e:189"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:189"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:186"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:187"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:189"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:188"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:189"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d654f527b008107ec81f37201cd05c5b"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:186"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> =&gt; <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_eq"><span class="id" title="definition">atomic_commit_eq</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_def"><span class="id" title="definition">atomic_commit_def</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 6 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>. <span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Stronger than the "obvious" statement thanks to the extra <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">STEP</span></span>
    assumption in the hypothesis. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.committer_proper_strong" class="idref" href="#Step.committer_proper_strong"><span class="id" title="lemma">committer_proper_strong</span></a> <a id="ed86ab8696b1fa98f4913338d098b551" class="idref" href="#ed86ab8696b1fa98f4913338d098b551"><span class="id" title="binder">γ</span></a> (<a id="STEP:191" class="idref" href="#STEP:191"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:192" class="idref" href="#f:192"><span class="id" title="binder">f</span></a> <a id="g:193" class="idref" href="#g:193"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:194" class="idref" href="#e:194"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:194"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:191"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:192"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:194"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:193"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:194"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ed86ab8696b1fa98f4913338d098b551"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:191"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> =&gt; <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_unseal"><span class="id" title="definition">atomic.atomic_update_unseal</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_def"><span class="id" title="definition">atomic.atomic_update_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_pre"><span class="id" title="definition">atomic_update_pre</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 14 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>; <span class="id" title="var">iIntros</span> ([? []]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_learn_proper_strong" class="idref" href="#Step.gen_requester_learn_proper_strong"><span class="id" title="lemma">gen_requester_learn_proper_strong</span></a> <a id="m:195" class="idref" href="#m:195"><span class="id" title="binder">m</span></a> <a id="a3fab110de5a3bfd3bddad02a4299fae" class="idref" href="#a3fab110de5a3bfd3bddad02a4299fae"><span class="id" title="binder">γ</span></a> (<a id="STEP:197" class="idref" href="#STEP:197"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>))<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:198" class="idref" href="#f:198"><span class="id" title="binder">f</span></a> <a id="g:199" class="idref" href="#g:199"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:200" class="idref" href="#e:200"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:200"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:197"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:198"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:200"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:199"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:200"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:195"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a3fab110de5a3bfd3bddad02a4299fae"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:197"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn"><span class="id" title="definition">gen_requester_learn</span></a> =&gt; <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">HP</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_eq"><span class="id" title="definition">atomic_commit_eq</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_def"><span class="id" title="definition">atomic_commit_def</span></a> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 6 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">f_equiv</span>. <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>. <span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">f_equiv</span>. <span class="id" title="var">f_equiv_tidy</span>. <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">f_equiv</span>. <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_requester_proper_strong" class="idref" href="#Step.gen_requester_proper_strong"><span class="id" title="lemma">gen_requester_proper_strong</span></a> <a id="m:201" class="idref" href="#m:201"><span class="id" title="binder">m</span></a> <a id="1c5a00c0069b8c8624e7ed68d4238bbf" class="idref" href="#1c5a00c0069b8c8624e7ed68d4238bbf"><span class="id" title="binder">γ</span></a> (<a id="STEP:203" class="idref" href="#STEP:203"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:204" class="idref" href="#f:204"><span class="id" title="binder">f</span></a> <a id="g:205" class="idref" href="#g:205"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:206" class="idref" href="#e:206"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:206"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:203"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:204"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:206"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:205"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:206"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:201"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1c5a00c0069b8c8624e7ed68d4238bbf"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:203"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester_learn_proper_strong"><span class="id" title="lemma">gen_requester_learn_proper_strong</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Stronger than the "obvious" statement thanks to the extra <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">STEP</span></span>
    assumption in the hypothesis. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_committer_proper_strong" class="idref" href="#Step.gen_committer_proper_strong"><span class="id" title="lemma">gen_committer_proper_strong</span></a> <a id="m:207" class="idref" href="#m:207"><span class="id" title="binder">m</span></a> <a id="54101c55ec4bca0a8db9fc367c7c8564" class="idref" href="#54101c55ec4bca0a8db9fc367c7c8564"><span class="id" title="binder">γ</span></a> (<a id="STEP:209" class="idref" href="#STEP:209"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app.x"><span class="id" title="variable">x</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="f:210" class="idref" href="#f:210"><span class="id" title="binder">f</span></a> <a id="g:211" class="idref" href="#g:211"><span class="id" title="binder">g</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="e:212" class="idref" href="#e:212"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:212"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:209"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:210"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:212"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:211"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:212"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:207"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#54101c55ec4bca0a8db9fc367c7c8564"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:209"><span class="id" title="variable">STEP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> =&gt; <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_unseal"><span class="id" title="definition">atomic.atomic_update_unseal</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_def"><span class="id" title="definition">atomic.atomic_update_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_update_pre"><span class="id" title="definition">atomic_update_pre</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 12 <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.wand_curry"><span class="id" title="lemma">bi.wand_curry</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="bedrock.lang.bi.derived_laws.html#bi.equiv_wand_iff_l"><span class="id" title="lemma">bi.equiv_wand_iff_l</span></a>. <span class="id" title="var">iIntros</span> (?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.equiv_wand_iff"><span class="id" title="lemma">bi.equiv_wand_iff</span></a>. <span class="id" title="tactic">do</span> 4 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.committer_post_mono" class="idref" href="#Step.committer_post_mono"><span class="id" title="lemma">committer_post_mono</span></a> <a id="g:213" class="idref" href="#g:213"><span class="id" title="binder">g</span></a> <a id="STEP:214" class="idref" href="#STEP:214"><span class="id" title="binder">STEP</span></a> <a id="Q1:215" class="idref" href="#Q1:215"><span class="id" title="binder">Q1</span></a> <a id="Q2:216" class="idref" href="#Q2:216"><span class="id" title="binder">Q2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:213"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:214"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:215"><span class="id" title="variable">Q1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="e:217" class="idref" href="#e:217"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:215"><span class="id" title="variable">Q1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:217"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:216"><span class="id" title="variable">Q2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:217"><span class="id" title="variable">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:213"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:214"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:216"><span class="id" title="variable">Q2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "C W". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.atomic_update_properties.html#aupd_ppost_wand"><span class="id" title="lemma">aupd_ppost_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "C"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> (????). <span class="id" title="var">iApply</span> "W".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Step.gen_committer_post_mono" class="idref" href="#Step.gen_committer_post_mono"><span class="id" title="lemma">gen_committer_post_mono</span></a> <a id="m:218" class="idref" href="#m:218"><span class="id" title="binder">m</span></a> <a id="g:219" class="idref" href="#g:219"><span class="id" title="binder">g</span></a> <a id="STEP:220" class="idref" href="#STEP:220"><span class="id" title="binder">STEP</span></a> <a id="Q1:221" class="idref" href="#Q1:221"><span class="id" title="binder">Q1</span></a> <a id="Q2:222" class="idref" href="#Q2:222"><span class="id" title="binder">Q2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:218"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:219"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:220"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:221"><span class="id" title="variable">Q1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="e:223" class="idref" href="#e:223"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q1:221"><span class="id" title="variable">Q1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:223"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:222"><span class="id" title="variable">Q2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:223"><span class="id" title="variable">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:218"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#g:219"><span class="id" title="variable">g</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:220"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q2:222"><span class="id" title="variable">Q2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "C W". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.atomic_update_properties.html#aupd_ppost_wand"><span class="id" title="lemma">aupd_ppost_wand</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "C"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. <span class="id" title="var">iIntros</span> (???). <span class="id" title="var">iApply</span> "W".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.with_app"><span class="id" title="section">with_app</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Notation</span> <a id="Step.properC" class="idref" href="#Step.properC"><span class="id" title="abbreviation">properC</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer_proper_strong"><span class="id" title="lemma">committer_proper_strong</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.requester"><span class="id" title="definition">requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.committer"><span class="id" title="definition">committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.updater"><span class="id" title="definition">updater</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_requester"><span class="id" title="definition">gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step.gen_committer"><span class="id" title="definition">gen_committer</span></a><br/>
&nbsp;&nbsp;: <span class="id" title="var">br_opacity</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Step"><span class="id" title="module">Step</span></a>.<br/>

<br/>
<span class="comment">(***&nbsp;Root&nbsp;Invariant&nbsp;*)</span><br/>
<span class="id" title="keyword">Section</span> <a id="with_app" class="idref" href="#with_app"><span class="id" title="section">with_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:225" class="idref" href="#H:225"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:224" class="idref" href="#PROP:224"><span class="id" title="binder"><span id="H:225" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:226" class="idref" href="#BiFUpd0:226"><span class="id" title="binder">!</span></a><a id="BiFUpd0:226" class="idref" href="#BiFUpd0:226"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:226" class="idref" href="#BiFUpd0:226"><span class="id" title="binder">PROP</span></a>} `{<a id="BiBUpdFUpd0:227" class="idref" href="#BiBUpdFUpd0:227"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:227" class="idref" href="#BiBUpdFUpd0:227"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:227" class="idref" href="#BiBUpdFUpd0:227"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="root:228" class="idref" href="#root:228"><span class="id" title="binder">root</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a>, <a id="E:229" class="idref" href="#E:229"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="root_inv" class="idref" href="#root_inv"><span class="id" title="definition">root_inv</span></a> <a id="ns:230" class="idref" href="#ns:230"><span class="id" title="binder">ns</span></a> <a id="5fec8ca110ff4c9f33275674f37f8e81" class="idref" href="#5fec8ca110ff4c9f33275674f37f8e81"><span class="id" title="binder">γroot</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.invariants.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:230"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="root_set:232" class="idref" href="#root_set:232"><span class="id" title="binder">root_set</span></a> <a id="init_st:233" class="idref" href="#init_st:233"><span class="id" title="binder">init_st</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5fec8ca110ff4c9f33275674f37f8e81"><span class="id" title="variable">γroot</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_set:232"><span class="id" title="variable">root_set</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:234" class="idref" href="#s:234"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:234"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_set:232"><span class="id" title="variable">root_set</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="projection">Sts._init_state</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#init_st:233"><span class="id" title="variable">init_st</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="s:235" class="idref" href="#s:235"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:235"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_set:232"><span class="id" title="variable">root_set</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="evts:236" class="idref" href="#evts:236"><span class="id" title="binder">evts</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="inductive">reachable</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#init_st:233"><span class="id" title="variable">init_st</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evts:236"><span class="id" title="variable">evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:235"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>.<br/>

<br/>
</div>

<div class="doc">
why is <span class="inlinecode"><span class="id" title="var">inh</span></span> needed even though <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_inv"><span class="id" title="definition">root_inv</span></a></span> already asserts something stronger?
      opening the invariant results in a later. to move the later inside using <span class="inlinecode"><span class="id" title="var">bi.later_exist</span></span>,
      we need that the type is inhabited.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="alloc_updater" class="idref" href="#alloc_updater"><span class="id" title="lemma">alloc_updater</span></a> <a id="ns:237" class="idref" href="#ns:237"><span class="id" title="binder">ns</span></a> <a id="2adf1609d8f50bde9c421cd6375b30dd" class="idref" href="#2adf1609d8f50bde9c421cd6375b30dd"><span class="id" title="binder">γroot</span></a> {<a id="inh:239" class="idref" href="#inh:239"><span class="id" title="binder">inh</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Inhabited"><span class="id" title="class">Inhabited</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="projection">Sts._state</span>))}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#root_inv"><span class="id" title="definition">root_inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:237"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2adf1609d8f50bde9c421cd6375b30dd"><span class="id" title="variable">γroot</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:237"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2adf1609d8f50bde9c421cd6375b30dd"><span class="id" title="variable">γroot</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">sset</span> <span class="id" title="var">nonempty</span> <span class="id" title="var">safe</span>) "frag".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">nonempty</span> =&gt; <span class="id" title="var">s</span> <span class="id" title="var">nonempty</span>; <span class="id" title="tactic">case</span>: (<span class="id" title="var">safe</span> <span class="id" title="var">s</span> <span class="id" title="var">nonempty</span>) =&gt; <span class="id" title="var">s'</span> <span class="id" title="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">sset'</span> <span class="id" title="var">inits</span>) "(&gt;auth &amp; FACTS)" "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">sset</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "frag auth"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "%sub".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_sub"><span class="id" title="lemma">AuthSet.frag_auth_sub</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">sset''</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':240" class="idref" href="#s':240"><span class="id" title="binder"><span id="s':242" class="id">s'</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:241" class="idref" href="#s:241"><span class="id" title="binder"><span id="s:243" class="id">s</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:241"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>).(<span class="id" title="abbreviation">lts_step</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:241"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':240"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">nonempty''</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:244" class="idref" href="#s:244"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:244"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset''</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">split</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> <span class="id" title="var">γroot</span> <span class="id" title="var">sset''</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "frag auth"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "($ &amp; auth')".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[auth' FACTS]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> <span class="id" title="var">sset''</span>. <span class="id" title="var">iModIntro</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "FACTS" <span class="id" title="keyword">as</span> %(? &amp; ? &amp; <span class="id" title="var">reach</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">reach''</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="s:245" class="idref" href="#s:245"><span class="id" title="binder">s</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:245"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset''</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="evts:246" class="idref" href="#evts:246"><span class="id" title="binder">evts</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="inductive">reachable</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.root"><span class="id" title="variable">root</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <span class="id" title="var">inits</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evts:246"><span class="id" title="variable">evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:245"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset''</span> =&gt; <span class="id" title="var">s0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">sx</span> []<span class="id" title="var">Hin</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">sub</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">case</span>: (<span class="id" title="var">reach</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) =&gt; <span class="id" title="var">evts</span> <span class="id" title="var">Hreach</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">evts</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">econstructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iExists</span> <span class="id" title="var">inits</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app"><span class="id" title="section">with_app</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">Sts</span>.<br/>
<span class="comment">(***&nbsp;App&nbsp;Composition&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="ComposeN" class="idref" href="#ComposeN"><span class="id" title="module">ComposeN</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a id="ab8251b775ff59f920b756671e6895f2" class="idref" href="#ab8251b775ff59f920b756671e6895f2"><span class="id" title="module">Σ</span></a>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.lib.dfrac_agree.html#dfrac_agree.G"><span class="id" title="record">G</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.lib.dfrac_agree.html#f52d19196a7328d4103bb35fd990754f"><span class="id" title="definition">Σ</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN.fam"><span class="id" title="projection">fam</span></a></span> bundles the requirements that Σ contains all CMRAs
    all constituent LTSes as well as the composed LTS. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="237fda09389312116df7f7ed8430064d" class="idref" href="#237fda09389312116df7f7ed8430064d"><span class="id" title="record">G</span></a> {<a id="45ad452e18d5a81c71fd6fb580d7a22c" class="idref" href="#45ad452e18d5a81c71fd6fb580d7a22c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a>} (<a id="fam:248" class="idref" href="#fam:248"><span class="id" title="binder">fam</span></a> : <span class="id" title="record">Compose.config</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="25c0b7a4d519bc3f887d2a5f32ce7ff7" class="idref" href="#25c0b7a4d519bc3f887d2a5f32ce7ff7"><span class="id" title="projection">comp_inG</span></a> ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:250" class="idref" href="#n:250"><span class="id" title="binder">n</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:248"><span class="id" title="variable">fam</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#45ad452e18d5a81c71fd6fb580d7a22c"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="projection">_state</span> (<span class="id" title="projection">_sts</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span>  <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:250"><span class="id" title="variable">n</span></a>)))) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="e771e6b7bc3222bc4dbd355ef25ceb03" class="idref" href="#e771e6b7bc3222bc4dbd355ef25ceb03"><span class="id" title="projection">whole_inG</span></a> :: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.own.html#inG"><span class="id" title="class">inG</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#45ad452e18d5a81c71fd6fb580d7a22c"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="definition">Compose.State</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:248"><span class="id" title="variable">fam</span></a>)) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#237fda09389312116df7f7ed8430064d"><span class="id" title="class">G</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
</div>

<div class="doc">
This also bundles the Compose.config itself 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="3e35c61441aab88222a692a09390282e" class="idref" href="#3e35c61441aab88222a692a09390282e"><span class="id" title="record">compose</span></a> {<a id="ef4fce13bea55dc370f904a6127a3097" class="idref" href="#ef4fce13bea55dc370f904a6127a3097"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="record">gFunctors</span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="9cfdcf08c5c378373742d29d21efd75b" class="idref" href="#9cfdcf08c5c378373742d29d21efd75b"><span class="id" title="projection">fam</span></a> : <span class="id" title="record">Compose.config</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="a94b63a8a5327c2f0df839bce46ddb18" class="idref" href="#a94b63a8a5327c2f0df839bce46ddb18"><span class="id" title="projection">allGs</span></a> :: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#237fda09389312116df7f7ed8430064d"><span class="id" title="class">G</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ef4fce13bea55dc370f904a6127a3097"><span class="id" title="variable">Σ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:255"><span class="id" title="method">fam</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="65260284fdebd90bac074ed15093a895" class="idref" href="#65260284fdebd90bac074ed15093a895"><span class="id" title="projection">app</span></a> := {| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2725be836e6282bac9070dd3973f8702"><span class="id" title="method">App.Σ.lts</span></a> := <span class="id" title="definition">Compose.compose_lts</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:255"><span class="id" title="method">fam</span></a>  |} ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3e35c61441aab88222a692a09390282e"><span class="id" title="class">compose</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ab8251b775ff59f920b756671e6895f2"><span class="id" title="module">Σ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;BI-general&nbsp;version&nbsp;of&nbsp;Σ.G&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="ComposeN.G" class="idref" href="#ComposeN.G"><span class="id" title="record">G</span></a> `{<a id="H:259" class="idref" href="#H:259"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:258" class="idref" href="#PROP:258"><span class="id" title="binder"><span id="H:259" class="id">PROP</span></span></a>} (<a id="fam:260" class="idref" href="#fam:260"><span class="id" title="binder">fam</span></a> : <span class="id" title="record">Compose.config</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="ComposeN.inGs" class="idref" href="#ComposeN.inGs"><span class="id" title="projection">inGs</span></a> ::<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="n:262" class="idref" href="#n:262"><span class="id" title="binder">n</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:260"><span class="id" title="variable">fam</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prop_constraints.html#HasUsualOwn"><span class="id" title="class">HasUsualOwn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#PROP:258"><span class="id" title="variable">PROP</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="projection">_state</span> (<span class="id" title="projection">_sts</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span>  <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:262"><span class="id" title="variable">n</span></a>)))) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="ComposeN.inG" class="idref" href="#ComposeN.inG"><span class="id" title="projection">inG</span></a> :: <a class="idref" href="bedrock.lang.bi.prop_constraints.html#HasUsualOwn"><span class="id" title="class">HasUsualOwn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#PROP:258"><span class="id" title="variable">PROP</span></a> (<a class="idref" href="bedrock.lang.algebra.authset.html#auth_setR"><span class="id" title="definition">auth_setR</span></a> (<span class="id" title="definition">Compose.State</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:260"><span class="id" title="variable">fam</span></a>))<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;BI-general&nbsp;version&nbsp;of&nbsp;Σ.compose&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="ComposeN.compose" class="idref" href="#ComposeN.compose"><span class="id" title="record">compose</span></a> `{<a id="H:266" class="idref" href="#H:266"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:265" class="idref" href="#PROP:265"><span class="id" title="binder"><span id="H:266" class="id">PROP</span></span></a>} := <span class="id" title="var">mk</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="ComposeN.fam" class="idref" href="#ComposeN.fam"><span class="id" title="projection">fam</span></a> : <span class="id" title="record">Compose.config</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <a id="ComposeN.ings" class="idref" href="#ComposeN.ings"><span class="id" title="projection">ings</span></a> :: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN.G"><span class="id" title="class">G</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:268"><span class="id" title="method">fam</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="ComposeN.app" class="idref" href="#ComposeN.app"><span class="id" title="projection">app</span></a> := {| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App.lts"><span class="id" title="method">App.lts</span></a> := <span class="id" title="definition">Compose.compose_lts</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:268"><span class="id" title="method">fam</span></a> |} ;<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN.compose"><span class="id" title="class">compose</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ComposeN.nsName" class="idref" href="#ComposeN.nsName"><span class="id" title="definition">nsName</span></a> {<a id="fam:271" class="idref" href="#fam:271"><span class="id" title="binder">fam</span></a> : <span class="id" title="record">Compose.config</span>} (<a id="n:272" class="idref" href="#n:272"><span class="id" title="binder">n</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:271"><span class="id" title="variable">fam</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#list_find"><span class="id" title="definition">list_find</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e:273" class="idref" href="#e:273"><span class="id" title="binder">e</span></a> : <span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:271"><span class="id" title="variable">fam</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:272"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:273"><span class="id" title="variable">e</span></a>) (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> (<span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam:271"><span class="id" title="variable">fam</span></a>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">index</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <span class="id" title="definition">BS.of_N_decimal</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.NArith.BinNat.html#N.of_nat"><span class="id" title="definition">N.of_nat</span></a> <span class="id" title="var">index</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; ("")%<span class="id" title="var">bs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN"><span class="id" title="module">ComposeN</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="updl" class="idref" href="#updl"><span class="id" title="section">updl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations"><span class="id" title="module">EqNotations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:276" class="idref" href="#H:276"><span class="id" title="binder">Finite</span></a> <a id="Nm:274" class="idref" href="#Nm:274"><span class="id" title="binder"><span id="H:276" class="id">Nm</span></span></a>} {<a id="nl:277" class="idref" href="#nl:277"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:274"><span class="id" title="variable">Nm</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="P:278" class="idref" href="#P:278"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:280" class="idref" href="#slr_set:280"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:279" class="idref" href="#x:279"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:278"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:279"><span class="id" title="variable">x</span></a>) (<a id="sl:281" class="idref" href="#sl:281"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:278"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="updl" class="idref" href="#updl"><span class="id" title="definition">updl</span></a> (<a id="n:282" class="idref" href="#n:282"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.Nm"><span class="id" title="variable">Nm</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.P"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:282"><span class="id" title="variable">n</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:282"><span class="id" title="variable">n</span></a>) <span class="id" title="keyword">return</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.P"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:282"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">peq</span> =&gt;  <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations.:::'rew'_x_'in'_x"><span class="id" title="notation">rew</span></a> <span class="id" title="var">peq</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations.:::'rew'_x_'in'_x"><span class="id" title="notation">in</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.sl"><span class="id" title="variable">sl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.slr_set"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:282"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updll" class="idref" href="#updll"><span class="id" title="lemma">updll</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl.sl"><span class="id" title="variable">sl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span> <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#proof_irrel"><span class="id" title="definition">proof_irrel</span></a> <span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="section">updl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="updlr" class="idref" href="#updlr"><span class="id" title="section">updlr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:285" class="idref" href="#H:285"><span class="id" title="binder">Finite</span></a> <a id="Nm:283" class="idref" href="#Nm:283"><span class="id" title="binder"><span id="H:285" class="id">Nm</span></span></a>} {<a id="nl:286" class="idref" href="#nl:286"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:283"><span class="id" title="variable">Nm</span></a>} {<a id="nr:287" class="idref" href="#nr:287"><span class="id" title="binder">nr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:283"><span class="id" title="variable">Nm</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#EqNotations"><span class="id" title="module">EqNotations</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="updlr" class="idref" href="#updlr"><span class="id" title="definition">updlr</span></a> {<a id="P:288" class="idref" href="#P:288"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="slr_set:290" class="idref" href="#slr_set:290"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:289" class="idref" href="#x:289"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:288"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:289"><span class="id" title="variable">x</span></a>) (<a id="sl:291" class="idref" href="#sl:291"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:288"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:292" class="idref" href="#sr:292"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:288"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>) (<a id="n:293" class="idref" href="#n:293"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:288"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:293"><span class="id" title="variable">n</span></a>:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:290"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:292"><span class="id" title="variable">sr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:291"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:293"><span class="id" title="variable">n</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlrl" class="idref" href="#updlrl"><span class="id" title="lemma">updlrl</span></a> {<a id="P:294" class="idref" href="#P:294"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:296" class="idref" href="#slr_set:296"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:295" class="idref" href="#x:295"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:294"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:295"><span class="id" title="variable">x</span></a>) (<a id="sl:297" class="idref" href="#sl:297"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:294"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:298" class="idref" href="#sr:298"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:294"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:296"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:297"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:298"><span class="id" title="variable">sr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:297"><span class="id" title="variable">sl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="updlr.neq" class="idref" href="#updlr.neq"><span class="id" title="section">neq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> (<a id="updlr.neq.neq" class="idref" href="#updlr.neq.neq"><span class="id" title="variable">neq</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlo" class="idref" href="#updlo"><span class="id" title="lemma">updlo</span></a> {<a id="P:300" class="idref" href="#P:300"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:302" class="idref" href="#slr_set:302"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:301" class="idref" href="#x:301"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:300"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:301"><span class="id" title="variable">x</span></a>) (<a id="sl:303" class="idref" href="#sl:303"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:300"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:302"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:303"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:302"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">neq</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>. <span class="id" title="var">case_decide</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlrr" class="idref" href="#updlrr"><span class="id" title="lemma">updlrr</span></a> {<a id="P:304" class="idref" href="#P:304"><span class="id" title="binder">P</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="slr_set:306" class="idref" href="#slr_set:306"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:305" class="idref" href="#x:305"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:304"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:305"><span class="id" title="variable">x</span></a>) (<a id="sl:307" class="idref" href="#sl:307"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:304"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:308" class="idref" href="#sr:308"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:304"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:306"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:307"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:308"><span class="id" title="variable">sr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.nr"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:308"><span class="id" title="variable">sr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">neq</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr.neq"><span class="id" title="section">neq</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="section">updlr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="updlro" class="idref" href="#updlro"><span class="id" title="section">updlro</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:311" class="idref" href="#H:311"><span class="id" title="binder">Finite</span></a> <a id="Nm:309" class="idref" href="#Nm:309"><span class="id" title="binder"><span id="H:311" class="id">Nm</span></span></a>} {<a id="nl:312" class="idref" href="#nl:312"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:309"><span class="id" title="variable">Nm</span></a>} {<a id="nr:313" class="idref" href="#nr:313"><span class="id" title="binder">nr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm:309"><span class="id" title="variable">Nm</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="updlro" class="idref" href="#updlro"><span class="id" title="lemma">updlro</span></a> {<a id="P:314" class="idref" href="#P:314"><span class="id" title="binder">P</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.Nm"><span class="id" title="variable">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="slr_set:316" class="idref" href="#slr_set:316"><span class="id" title="binder">slr_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:315" class="idref" href="#x:315"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.Nm"><span class="id" title="variable">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:314"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:315"><span class="id" title="variable">x</span></a>) (<a id="sl:317" class="idref" href="#sl:317"><span class="id" title="binder">sl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:314"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nl"><span class="id" title="variable">nl</span></a>) (<a id="sr:318" class="idref" href="#sr:318"><span class="id" title="binder">sr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#P:314"><span class="id" title="variable">P</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nr"><span class="id" title="variable">nr</span></a>) (<a id="n:319" class="idref" href="#n:319"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.Nm"><span class="id" title="variable">Nm</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:319"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:319"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro.nr"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:316"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sl:317"><span class="id" title="variable">sl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sr:318"><span class="id" title="variable">sr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:319"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slr_set:316"><span class="id" title="variable">slr_set</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:319"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span> <span class="id" title="var">hr</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="section">updlro</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#App"><span class="id" title="module">App</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ComposeN"><span class="id" title="module">ComposeN</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="with_lts" class="idref" href="#with_lts"><span class="id" title="section">with_lts</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:321" class="idref" href="#H:321"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:320" class="idref" href="#PROP:320"><span class="id" title="binder"><span id="H:321" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:322" class="idref" href="#BiFUpd0:322"><span class="id" title="binder">!</span></a><a id="BiFUpd0:322" class="idref" href="#BiFUpd0:322"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:322" class="idref" href="#BiFUpd0:322"><span class="id" title="binder">PROP</span></a>} `{<a id="BiBUpdFUpd0:323" class="idref" href="#BiBUpdFUpd0:323"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:323" class="idref" href="#BiBUpdFUpd0:323"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:323" class="idref" href="#BiBUpdFUpd0:323"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H0:324" class="idref" href="#H0:324"><span class="id" title="binder">!</span></a><a id="H0:324" class="idref" href="#H0:324"><span class="id" title="binder">ComposeN.compose</span></a>}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="T" class="idref" href="#T"><span class="id" title="abbreviation">T</span></a> := (<span class="id" title="definition">Compose.State</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="Nm" class="idref" href="#Nm"><span class="id" title="abbreviation">Nm</span></a> := (<span class="id" title="projection">Compose.name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a id="dual_evts" class="idref" href="#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> :=  (<span class="id" title="projection">Compose.cancel_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="external_event_sets" class="idref" href="#external_event_sets"><span class="id" title="definition">external_event_sets</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n:325" class="idref" href="#n:325"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>) (<a id="STEP:326" class="idref" href="#STEP:326"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:325"><span class="id" title="variable">n</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:327" class="idref" href="#STEPup:327"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.external_event</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e:328" class="idref" href="#e:328"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:328"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:326"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="eup:329" class="idref" href="#eup:329"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:329"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:327"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:328"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:329"><span class="id" title="variable">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="eup:330" class="idref" href="#eup:330"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:330"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:327"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="e:331" class="idref" href="#e:331"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:331"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:326"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:331"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:330"><span class="id" title="variable">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="appn" class="idref" href="#appn"><span class="id" title="definition">appn</span></a> (<a id="n:332" class="idref" href="#n:332"><span class="id" title="binder">n</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>): <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> := <span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:332"><span class="id" title="variable">n</span></a>); <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a> := <span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:332"><span class="id" title="variable">n</span></a>; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#inG"><span class="id" title="method">App.inG</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#inGs"><span class="id" title="method">inGs</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:332"><span class="id" title="variable">n</span></a> |}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(***&nbsp;Transports&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.with_refinement" class="idref" href="#with_lts.with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="R:333" class="idref" href="#R:333"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="transports" class="idref" href="#transports"><span class="id" title="definition">transports</span></a> <a id="c940f36f7b0fda0dca649fcae2072857" class="idref" href="#c940f36f7b0fda0dca649fcae2072857"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="nl:335" class="idref" href="#nl:335"><span class="id" title="binder">nl</span></a> <a id="nr:336" class="idref" href="#nr:336"><span class="id" title="binder">nr</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>) (<a id="diff:337" class="idref" href="#diff:337"><span class="id" title="binder">diff</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:335"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:336"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:338" class="idref" href="#STEPl:338"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:335"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:339" class="idref" href="#STEPr:339"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:336"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:340" class="idref" href="#dual:340"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:338"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:339"><span class="id" title="variable">STEPr</span></a>) <a id="Q:341" class="idref" href="#Q:341"><span class="id" title="binder">Q</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:335"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c940f36f7b0fda0dca649fcae2072857"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:335"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:338"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:341"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:336"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c940f36f7b0fda0dca649fcae2072857"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:336"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:339"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:342" class="idref" href="#e2:342"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:343" class="idref" href="#e1:343"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:343"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:338"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:343"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:342"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:341"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:343"><span class="id" title="variable">e1</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="transports_knowledge" class="idref" href="#transports_knowledge"><span class="id" title="instance">transports_knowledge</span></a>  : <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#Knowledge1"><span class="id" title="abbreviation">Knowledge1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#transports"><span class="id" title="definition">transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_knowledge</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="gen_transports" class="idref" href="#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a id="eb41c3eda073882c469ac5a04d487034" class="idref" href="#eb41c3eda073882c469ac5a04d487034"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="nl:345" class="idref" href="#nl:345"><span class="id" title="binder">nl</span></a> <a id="nr:346" class="idref" href="#nr:346"><span class="id" title="binder">nr</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>) (<a id="diff:347" class="idref" href="#diff:347"><span class="id" title="binder">diff</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:345"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:346"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:348" class="idref" href="#STEPl:348"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:345"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:349" class="idref" href="#STEPr:349"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:346"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:350" class="idref" href="#dual:350"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:348"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:349"><span class="id" title="variable">STEPr</span></a>) <a id="Q:351" class="idref" href="#Q:351"><span class="id" title="binder">Q</span></a> <a id="m:352" class="idref" href="#m:352"><span class="id" title="binder">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:345"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:352"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eb41c3eda073882c469ac5a04d487034"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:345"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:348"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:351"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:346"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:352"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eb41c3eda073882c469ac5a04d487034"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:346"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:349"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:353" class="idref" href="#e2:353"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:354" class="idref" href="#e1:354"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:354"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:348"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:354"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:353"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:351"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:354"><span class="id" title="variable">e1</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="gen_transports_knowledge" class="idref" href="#gen_transports_knowledge"><span class="id" title="instance">gen_transports_knowledge</span></a> : <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#Knowledge1"><span class="id" title="abbreviation">Knowledge1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_knowledge</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_transports_transports" class="idref" href="#gen_transports_transports"><span class="id" title="lemma">gen_transports_transports</span></a> <a id="7ea14f30469790ed13e4b24d6cb5d915" class="idref" href="#7ea14f30469790ed13e4b24d6cb5d915"><span class="id" title="binder">γ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7ea14f30469790ed13e4b24d6cb5d915"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#transports"><span class="id" title="definition">transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7ea14f30469790ed13e4b24d6cb5d915"><span class="id" title="variable">γ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#T !#" (<span class="id" title="var">nl</span> <span class="id" title="var">nr</span> <span class="id" title="var">diff</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPr</span> <span class="id" title="var">dual</span> <span class="id" title="var">Q</span>) "REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_committer"><span class="id" title="lemma">Step.gen_committer_committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">(</span></a>"T" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">$!</span></a> <span class="id" title="var">nl</span> <span class="id" title="var">nr</span> <span class="id" title="var">diff</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPr</span> <span class="id" title="var">dual</span> <span class="id" title="var">Q</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#bc9fd2481486dc1ddc28ccbc3ddae226"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester_gen_requester"><span class="id" title="lemma">Step.requester_gen_requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="external_requests" class="idref" href="#external_requests"><span class="id" title="definition">external_requests</span></a> <a id="4242ce275a1ca3b39659197cb16aa28a" class="idref" href="#4242ce275a1ca3b39659197cb16aa28a"><span class="id" title="binder">γ</span></a> <a id="e1fda18c4db55435d4abcbe75c514625" class="idref" href="#e1fda18c4db55435d4abcbe75c514625"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="n:358" class="idref" href="#n:358"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:359" class="idref" href="#STEP:359"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:358"><span class="id" title="variable">n</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:360" class="idref" href="#STEPup:360"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.external_event</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="EXT:361" class="idref" href="#EXT:361"><span class="id" title="binder">EXT</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_event_sets"><span class="id" title="definition">external_event_sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:358"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:359"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:360"><span class="id" title="variable">STEPup</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Q:362" class="idref" href="#Q:362"><span class="id" title="binder">Q</span></a> <a id="m:363" class="idref" href="#m:363"><span class="id" title="binder">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:358"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:363"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#4242ce275a1ca3b39659197cb16aa28a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:358"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:359"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:362"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:363"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1fda18c4db55435d4abcbe75c514625"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:360"><span class="id" title="variable">STEPup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="eup:364" class="idref" href="#eup:364"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:365" class="idref" href="#e:365"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:365"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:359"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:365"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:364"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:362"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:365"><span class="id" title="variable">e</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="external_requests_knowledge" class="idref" href="#external_requests_knowledge"><span class="id" title="instance">external_requests_knowledge</span></a> : <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#Knowledge2"><span class="id" title="abbreviation">Knowledge2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_knowledge</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="external_commits" class="idref" href="#external_commits"><span class="id" title="definition">external_commits</span></a> <a id="161ccf595ad181c122a15558797137d2" class="idref" href="#161ccf595ad181c122a15558797137d2"><span class="id" title="binder">γ</span></a> <a id="48deac4b4e0f600c3ee6134a7c3d9e3e" class="idref" href="#48deac4b4e0f600c3ee6134a7c3d9e3e"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">(</span></a><a id="n:368" class="idref" href="#n:368"><span class="id" title="binder">n</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:369" class="idref" href="#STEP:369"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:368"><span class="id" title="variable">n</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:370" class="idref" href="#STEPup:370"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.external_event</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="EXT:371" class="idref" href="#EXT:371"><span class="id" title="binder">EXT</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_event_sets"><span class="id" title="definition">external_event_sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:368"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:369"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:370"><span class="id" title="variable">STEPup</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="Q:372" class="idref" href="#Q:372"><span class="id" title="binder">Q</span></a> <a id="m:373" class="idref" href="#m:373"><span class="id" title="binder">m</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:373"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#48deac4b4e0f600c3ee6134a7c3d9e3e"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:370"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:372"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:368"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:373"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#161ccf595ad181c122a15558797137d2"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:368"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:369"><span class="id" title="variable">STEP</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e:374" class="idref" href="#e:374"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="eup:375" class="idref" href="#eup:375"><span class="id" title="binder">eup</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:375"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:370"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:374"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:375"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:372"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:375"><span class="id" title="variable">eup</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="external_commits_knowledge" class="idref" href="#external_commits_knowledge"><span class="id" title="instance">external_commits_knowledge</span></a> : <a class="idref" href="bedrock.lang.bi.spec.knowledge.html#Knowledge2"><span class="id" title="abbreviation">Knowledge2</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_knowledge</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.with_refinement"><span class="id" title="section">with_refinement</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(***&nbsp;Decomposition&nbsp;Invariant&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="with_lts.all_names" class="idref" href="#with_lts.all_names"><span class="id" title="variable">all_names</span></a> := (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decomp_aux" class="idref" href="#decomp_aux"><span class="id" title="definition">decomp_aux</span></a> <a id="sets:376" class="idref" href="#sets:376"><span class="id" title="binder">sets</span></a> (<a id="0410a018d036a01ad2026f06186b7aa7" class="idref" href="#0410a018d036a01ad2026f06186b7aa7"><span class="id" title="binder">γ</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>) <a id="87a3d39d2ddc9d488fa770047380960b" class="idref" href="#87a3d39d2ddc9d488fa770047380960b"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:379" class="idref" href="#n:379"><span class="id" title="binder"><span id="n:380" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0410a018d036a01ad2026f06186b7aa7"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:379"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:376"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:379"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#87a3d39d2ddc9d488fa770047380960b"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:376"><span class="id" title="variable">sets</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:381" class="idref" href="#s:381"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:381"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:376"><span class="id" title="variable">sets</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Decomp_def" class="idref" href="#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> (<a id="cf443269985ab58cfbd626d99b1a00cb" class="idref" href="#cf443269985ab58cfbd626d99b1a00cb"><span class="id" title="binder">γ</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>) <a id="72cfd1be6530f3e801c9d5a9db8c3c8b" class="idref" href="#72cfd1be6530f3e801c9d5a9db8c3c8b"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> := <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="sets:384" class="idref" href="#sets:384"><span class="id" title="binder">sets</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:384"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#cf443269985ab58cfbd626d99b1a00cb"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#72cfd1be6530f3e801c9d5a9db8c3c8b"><span class="id" title="variable">γup</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Decompose" class="idref" href="#Decompose"><span class="id" title="definition">Decompose</span></a> (<a id="ns:385" class="idref" href="#ns:385"><span class="id" title="binder">ns</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a>) <a id="0cf85651f5ee14b929de916d2a318bad" class="idref" href="#0cf85651f5ee14b929de916d2a318bad"><span class="id" title="binder">γ</span></a> (<a id="526dc6706e739c9ce7973689d4f236f8" class="idref" href="#526dc6706e739c9ce7973689d4f236f8"><span class="id" title="binder">γup</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.invariants.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:385"><span class="id" title="variable">ns</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0cf85651f5ee14b929de916d2a318bad"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#526dc6706e739c9ce7973689d4f236f8"><span class="id" title="variable">γup</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="alloc_decomp_aux" class="idref" href="#alloc_decomp_aux"><span class="id" title="lemma">alloc_decomp_aux</span></a> <a id="d20ceadcb817cbacba9056cedf502ea8" class="idref" href="#d20ceadcb817cbacba9056cedf502ea8"><span class="id" title="binder">γup</span></a> <a id="sets:389" class="idref" href="#sets:389"><span class="id" title="binder">sets</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:390" class="idref" href="#s:390"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:390"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:389"><span class="id" title="variable">sets</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d20ceadcb817cbacba9056cedf502ea8"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:389"><span class="id" title="variable">sets</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">(</span></a><a id="7297131c65197416abf78000f8fb6804" class="idref" href="#7297131c65197416abf78000f8fb6804"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:392" class="idref" href="#n:392"><span class="id" title="binder"><span id="n:393" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7297131c65197416abf78000f8fb6804"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:392"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:389"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:392"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:389"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7297131c65197416abf78000f8fb6804"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d20ceadcb817cbacba9056cedf502ea8"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">nd</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#NoDup"><span class="id" title="inductive">NoDup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "/= ? !&gt;". <span class="id" title="var">iExists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">γup</span>). <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#NoDup_cons"><span class="id" title="lemma">NoDup_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">nd</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">ND</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">ND</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<span class="id" title="var">IHl</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">f</span>) "(H1 &amp; H2 &amp; $ &amp; %Hex)". <span class="id" title="var">iFrame</span> (<span class="id" title="var">Hex</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.alloc"><span class="id" title="lemma">AuthSet.alloc</span></a> (<span class="id" title="var">T</span>:=(<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <span class="id" title="var">a</span>).(<span class="id" title="abbreviation">lts_state</span>)) (<span class="id" title="var">sets</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">γa</span>) "(? &amp; ?)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="keyword">fun</span> (<a id="n:394" class="idref" href="#n:394"><span class="id" title="binder"><span id="n:395" class="id">n</span></span></a>:<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>) =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:394"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">a</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="var">γa</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="var">f</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:394"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#decide_True"><span class="id" title="lemma">decide_True</span></a> //. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iCombine</span> "H1 H2" <span class="id" title="keyword">as</span> "H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_sep"><span class="id" title="lemma">big_sepL_sep</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_mono"><span class="id" title="lemma">big_sepL_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">Hin</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#decide_False"><span class="id" title="lemma">decide_False</span></a>; [<span class="id" title="var">done</span>|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(***&nbsp;Internal&nbsp;Lemmas&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.comp" class="idref" href="#with_lts.comp"><span class="id" title="section">comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Inhabited"><span class="id" title="class">Inhabited</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:396" class="idref" href="#x:396"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:396"><span class="id" title="variable">x</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#populate"><span class="id" title="constructor">populate</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="nl:397" class="idref" href="#nl:397"><span class="id" title="binder">nl</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="with_lts.comp.left" class="idref" href="#with_lts.comp.left"><span class="id" title="variable">left</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">!</span></a><a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">Timeless</span></a> <a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">(</span></a><a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">emp</span></a><a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">%</span></a><a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">I</span></a> <a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">:</span></a> <a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">PROP</span></a><a id="Timeless0:398" class="idref" href="#Timeless0:398"><span class="id" title="binder">)</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> /.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Opaque</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Transparent</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Turning&nbsp;a&nbsp;subcomponent's&nbsp;requester&nbsp;into&nbsp;the&nbsp;parent's&nbsp;requester&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;makes&nbsp;an&nbsp;event&nbsp;externally&nbsp;visible&nbsp;outside&nbsp;the&nbsp;parent&nbsp;component.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;allows&nbsp;a&nbsp;request&nbsp;to&nbsp;bubble&nbsp;up.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_requester_visible" class="idref" href="#gen_requester_visible"><span class="id" title="lemma">gen_requester_visible</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:399" class="idref" href="#STEP:399"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:400" class="idref" href="#STEPup:400"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:401" class="idref" href="#ns:401"><span class="id" title="binder">ns</span></a> (<a id="E:402" class="idref" href="#E:402"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) <a id="m:403" class="idref" href="#m:403"><span class="id" title="binder">m</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:401"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:402"><span class="id" title="variable">E</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:401"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:403"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="up_events:408" class="idref" href="#up_events:408"><span class="id" title="binder">up_events</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="l:404" class="idref" href="#l:404"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:404"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:399"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lup:405" class="idref" href="#lup:405"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:405"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:400"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:404"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:405"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="lup:406" class="idref" href="#lup:406"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:406"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:400"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="l:407" class="idref" href="#l:407"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:407"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:399"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:407"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:406"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="fcc91f4413931e5db5d193208bd8646a" class="idref" href="#fcc91f4413931e5db5d193208bd8646a"><span class="id" title="binder">γ</span></a> <a id="c69f34e9588c523277dad1af7ce4d928" class="idref" href="#c69f34e9588c523277dad1af7ce4d928"><span class="id" title="binder">γup</span></a> (<a id="Q:411" class="idref" href="#Q:411"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Decompose&nbsp;invariant:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:401"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fcc91f4413931e5db5d193208bd8646a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c69f34e9588c523277dad1af7ce4d928"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Subcomponent&nbsp;Requester&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:401"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:402"><span class="id" title="variable">E</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:403"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fcc91f4413931e5db5d193208bd8646a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:399"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:411"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Whole&nbsp;component&nbsp;Requester&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:402"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:403"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c69f34e9588c523277dad1af7ce4d928"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:400"><span class="id" title="variable">STEPup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="eup:412" class="idref" href="#eup:412"><span class="id" title="binder">eup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="e:413" class="idref" href="#e:413"><span class="id" title="binder">e</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:413"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:399"><span class="id" title="variable">STEP</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:413"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:412"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:411"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:413"><span class="id" title="variable">e</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_set</span>) "(&gt;A &amp; &gt;Fup &amp; &gt;%NEup)" "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "REQ" <span class="id" title="keyword">as</span> (<span class="id" title="var">ssl</span>) "((Fl &amp; %NEl &amp; %STEPl) &amp; Q)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>); [|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> "[Al A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">slr_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fl Al"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%s1_in_set".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_sub"><span class="id" title="lemma">AuthSet.frag_auth_sub</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset</span> := <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NEsset</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:414" class="idref" href="#s:414"><span class="id" title="binder"><span id="s:415" class="id">s</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:414"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">INs</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl</span> <span class="id" title="var">Insl</span>]. <span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> /= <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="var">case_decide</span>; <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">sset</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">s1_in_set</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span>/= !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">INn</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">move</span> : (<span class="id" title="var">INn</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">sset</span>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">NEsset</span>) "Fup".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">up_events</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">UP1</span> <span class="id" title="var">UP2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%" (<span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">Inss</span> <span class="id" title="var">Ine</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">UP2</span> <span class="id" title="var">_</span> <span class="id" title="var">Ine</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">el</span> &amp; <span class="id" title="var">Inel</span> &amp; <span class="id" title="var">Injel</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">STEPl</span> (<span class="id" title="var">s</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> [<span class="id" title="var">stepL</span> <span class="id" title="var">_</span>]]; [|<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Inss</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl'</span>). <span class="id" title="tactic">split</span>; [|<span class="id" title="var">done</span>]. <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;TODO&nbsp;lemma&nbsp;*)</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> =&gt; <span class="id" title="var">NEq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e</span>) "[%INe Fup]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">UP2</span> <span class="id" title="var">_</span> <span class="id" title="var">INe</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">el</span> &amp; <span class="id" title="var">Inel</span> &amp; <span class="id" title="var">Injel</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">ssl'</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':416" class="idref" href="#s':416"><span class="id" title="binder"><span id="s':418" class="id"><span id="s':420" class="id">s'</span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:417" class="idref" href="#s:417"><span class="id" title="binder"><span id="s:419" class="id"><span id="s:421" class="id">s</span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:417"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:417"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">el</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':416"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>)%<span class="id" title="keyword">type</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ssl'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fl Al"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Fl Al]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Q" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$Fl //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Q".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[&gt; A Fup Al]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_"; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset'</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ins</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>). <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">sl</span> &amp; <span class="id" title="var">Insl</span> &amp; <span class="id" title="var">stepL</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqnl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins</span> <span class="id" title="var">d</span>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [|<span class="id" title="var">done</span>]. <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;TODO&nbsp;lemma&nbsp;*)</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> =&gt; <span class="id" title="var">NEq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NEup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">INs</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl</span> <span class="id" title="var">Insl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">STEPl</span> <span class="id" title="var">sl</span> <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> <span class="id" title="var">stepL</span>]; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> =&gt; <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //. <span class="id" title="var">set_solver</span>+<span class="id" title="var">INs</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>); [|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Al".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "Al". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_mono"><span class="id" title="lemma">big_sepL_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "A"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> [<span class="id" title="var">INn</span> <span class="id" title="var">EqL</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EqL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Turning&nbsp;a&nbsp;parent's&nbsp;committer&nbsp;into&nbsp;a&nbsp;subcomponent's&nbsp;committer&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;makes&nbsp;an&nbsp;event&nbsp;externally&nbsp;visible&nbsp;outside&nbsp;the&nbsp;parent&nbsp;component.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;allows&nbsp;a&nbsp;commiter&nbsp;to&nbsp;flow&nbsp;down.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_committer_visible" class="idref" href="#gen_committer_visible"><span class="id" title="lemma">gen_committer_visible</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEP:422" class="idref" href="#STEP:422"><span class="id" title="binder">STEP</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPup:423" class="idref" href="#STEPup:423"><span class="id" title="binder">STEPup</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:424" class="idref" href="#ns:424"><span class="id" title="binder">ns</span></a> (<a id="E:425" class="idref" href="#E:425"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) <a id="m:426" class="idref" href="#m:426"><span class="id" title="binder">m</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:424"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:425"><span class="id" title="variable">E</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:424"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:426"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="up_events:431" class="idref" href="#up_events:431"><span class="id" title="binder">up_events</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="l:427" class="idref" href="#l:427"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:427"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:422"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="lup:428" class="idref" href="#lup:428"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:428"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:423"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:427"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:428"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="lup:429" class="idref" href="#lup:429"><span class="id" title="binder">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:429"><span class="id" title="variable">lup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:423"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="l:430" class="idref" href="#l:430"><span class="id" title="binder">l</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:430"><span class="id" title="variable">l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:422"><span class="id" title="variable">STEP</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#l:430"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lup:429"><span class="id" title="variable">lup</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="8e885f5a42df0b75c4773320c5dceb12" class="idref" href="#8e885f5a42df0b75c4773320c5dceb12"><span class="id" title="binder">γ</span></a> <a id="d2fe3d1d84d97700b2a218fb417c63c7" class="idref" href="#d2fe3d1d84d97700b2a218fb417c63c7"><span class="id" title="binder">γup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Q:434" class="idref" href="#Q:434"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Decompose&nbsp;invariant:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:424"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8e885f5a42df0b75c4773320c5dceb12"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d2fe3d1d84d97700b2a218fb417c63c7"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Parent&nbsp;committer&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:425"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:426"><span class="id" title="variable">m</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d2fe3d1d84d97700b2a218fb417c63c7"><span class="id" title="variable">γup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:423"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:434"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Child&nbsp;committer&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:424"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:425"><span class="id" title="variable">E</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:426"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8e885f5a42df0b75c4773320c5dceb12"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEP:422"><span class="id" title="variable">STEP</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e:435" class="idref" href="#e:435"><span class="id" title="binder">e</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="eup:436" class="idref" href="#eup:436"><span class="id" title="binder">eup</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:436"><span class="id" title="variable">eup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPup:423"><span class="id" title="variable">STEPup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="projection">Compose.inj_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:435"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:436"><span class="id" title="variable">eup</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:434"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eup:436"><span class="id" title="variable">eup</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv COM".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "COM" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_frag</span>) "[Aup Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_set</span>) "(&gt;A &amp; &gt;Fup &amp; &gt;%NEup)" "CloseI".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>); [|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "A" <span class="id" title="keyword">as</span> "[Al A]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#difference_difference_l_L"><span class="id" title="lemma">difference_difference_l_L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#union_comm_L"><span class="id" title="instance">union_comm_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">slr_set</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">slr_frag</span> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup Aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%SUBsup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_sub"><span class="id" title="lemma">AuthSet.frag_auth_sub</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> "Al". <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;abort&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Al".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"CloseI" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[A Fup Al]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span> (<span class="id" title="var">NEup</span>) "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[Close _]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;commit&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">ssl'</span> <span class="id" title="var">el</span>) "(%Inel &amp; %NEl' &amp; %stepL' &amp; Al)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Close" <span class="id" title="keyword">as</span> "[_ Close]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset'</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Fup Aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Fup Aup]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">up_events</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">UP1</span> <span class="id" title="var">UP2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">UP1</span> <span class="id" title="var">_</span> <span class="id" title="var">Inel</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">eup</span> &amp; <span class="id" title="var">Ineup</span> &amp; <span class="id" title="var">Injel</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">NE'</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:437" class="idref" href="#s:437"><span class="id" title="binder"><span id="s:438" class="id">s</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:437"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> <span class="id" title="var">Insl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NEup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Ins</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s</span> <span class="id" title="var">sl'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //. <span class="id" title="var">set_solver</span> +<span class="id" title="var">Ins</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"CloseI" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[A Fup Al]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iFrame</span> (<span class="id" title="var">NE'</span>) "Fup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitL</span> "Al". { <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="var">iFrame</span> "Al". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_mono"><span class="id" title="lemma">big_sepL_mono</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "A"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> [<span class="id" title="var">INn</span> <span class="id" title="var">EqL</span>]%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">EqL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">sset'</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="var">eup</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$Aup]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Q".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%"; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">s'</span> <span class="id" title="var">Ins'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">stepL'</span> (<span class="id" title="var">s'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">sl</span> &amp; <span class="id" title="var">Insl</span> &amp; <span class="id" title="var">stepL</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">s'</span> <span class="id" title="var">sl</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">SUBsup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) =&gt; <span class="id" title="var">Eqd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> : (<span class="id" title="var">Ins'</span> <span class="id" title="var">d</span>). <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset'</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;TODO&nbsp;lemma&nbsp;*)</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_singleton"><span class="id" title="lemma">elem_of_list_singleton</span></a> =&gt; <span class="id" title="var">NEq</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">case_decide</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">el</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">eup</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "Q %".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Transporting&nbsp;a&nbsp;requester&nbsp;to&nbsp;a&nbsp;canceling&nbsp;committer.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_transport1l" class="idref" href="#gen_transport1l"><span class="id" title="lemma">gen_transport1l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="nr:439" class="idref" href="#nr:439"><span class="id" title="binder">nr</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:440" class="idref" href="#STEPl:440"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:441" class="idref" href="#STEPr:441"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:439"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="neq:442" class="idref" href="#neq:442"><span class="id" title="binder">neq</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:439"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:443" class="idref" href="#ns:443"><span class="id" title="binder">ns</span></a> (<a id="E:444" class="idref" href="#E:444"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) <a id="m:445" class="idref" href="#m:445"><span class="id" title="binder">m</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:443"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:444"><span class="id" title="variable">E</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:443"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:445"><span class="id" title="variable">m</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:444"><span class="id" title="variable">E</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#O"><span class="id" title="projection">masks.O</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:445"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:446" class="idref" href="#dual:446"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:440"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:441"><span class="id" title="variable">STEPr</span></a>) <a id="2e2e2de3e119847830b4e81ae805f139" class="idref" href="#2e2e2de3e119847830b4e81ae805f139"><span class="id" title="binder">γ</span></a> <a id="d92826edaa2b7bb7d78accd924ad34e8" class="idref" href="#d92826edaa2b7bb7d78accd924ad34e8"><span class="id" title="binder">γup</span></a> <a id="Q:449" class="idref" href="#Q:449"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="right:450" class="idref" href="#right:450"><span class="id" title="binder">right</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:439"><span class="id" title="variable">nr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Decompose&nbsp;invariant:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:443"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2e2e2de3e119847830b4e81ae805f139"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d92826edaa2b7bb7d78accd924ad34e8"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:444"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d92826edaa2b7bb7d78accd924ad34e8"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Requester&nbsp;AC:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:443"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:445"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2e2e2de3e119847830b4e81ae805f139"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:440"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:449"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Committer&nbsp;AU:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#right:450"><span class="id" title="variable">right</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:443"><span class="id" title="variable">ns</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#m:445"><span class="id" title="variable">m</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#2e2e2de3e119847830b4e81ae805f139"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:439"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:441"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:451" class="idref" href="#e2:451"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:452" class="idref" href="#e1:452"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:452"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:440"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:452"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:451"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:449"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:452"><span class="id" title="variable">e1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="tactic">right</span>) "#inv #updater REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer"><span class="id" title="definition">Step.gen_committer</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester"><span class="id" title="definition">Step.gen_requester</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#decomp_aux"><span class="id" title="definition">decomp_aux</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">slr_set</span>) "(&gt;aleftr &amp; &gt;up &amp; &gt;%nonempty)" "Close"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="var">slr_set</span> <span class="id" title="var">nr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a> <span class="id" title="var">nr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">elem_of_enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_two"><span class="id" title="lemma">big_sepL_difference_two</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:= <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) (<span class="id" title="var">y</span>:=<span class="id" title="var">nr</span>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "aleftr" <span class="id" title="keyword">as</span> "[authl [$ authlist]]"; <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "authr". <span class="id" title="var">iFrame</span> "REQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[authlist authr up authl]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_two"><span class="id" title="lemma">big_sepL_difference_two</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">nr</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">ssr'</span> <span class="id" title="var">er</span>) "(%evt &amp; [(%sr' &amp; %sr'_in_set) [%step_right authrf]])".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;right&nbsp;side&nbsp;has&nbsp;already&nbsp;transitioned&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">dual</span> =&gt; <span class="id" title="var">duall</span> <span class="id" title="var">dualr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<span class="id" title="var">dualr</span> <span class="id" title="var">er</span> <span class="id" title="var">evt</span>) =&gt; <span class="id" title="var">el</span> []<span class="id" title="var">elin</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "REQ" <span class="id" title="keyword">as</span> (<span class="id" title="var">ssl</span>) "((fragl &amp; %step_left) &amp; Q)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">step_left</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">NEl</span> <span class="id" title="var">step_left</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">slr_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%s1_in_set".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_sub"><span class="id" title="lemma">AuthSet.frag_auth_sub</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">ssl'</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':453" class="idref" href="#s':453"><span class="id" title="binder"><span id="s':455" class="id"><span id="s':457" class="id">s'</span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s:454" class="idref" href="#s:454"><span class="id" title="binder"><span id="s:456" class="id"><span id="s:458" class="id">s</span></span></span></a> : <span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:454"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">ssl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:454"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">el</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':453"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#::type_scope:'True'"><span class="id" title="notation">True</span></a>)%<span class="id" title="keyword">type</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> (<span class="id" title="var">γ</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">ssl'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "(fraglf &amp; authlf)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Q" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">el</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$fraglf //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "M".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">ssr</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s:459" class="idref" href="#s:459"><span class="id" title="binder"><span id="s:461" class="id"><span id="s:463" class="id">s</span></span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:459"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">nr</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="s':460" class="idref" href="#s':460"><span class="id" title="binder"><span id="s':462" class="id"><span id="s':464" class="id">s'</span></span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':460"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">ssr'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="abbreviation">lts_step</span> (<span class="id" title="projection">Compose.sts_name</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">fam</span></a> <span class="id" title="var">nr</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:459"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">er</span>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':460"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">sset</span> := <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl</span> <span class="id" title="var">ssr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">sset</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "up"; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">s1_in_set</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span>/= !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">INn</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">move</span> : (<span class="id" title="var">INn</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">set_solver</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">nonempty</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s0</span> <span class="id" title="var">NEs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NEl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sl0</span> <span class="id" title="var">NEl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_right</span> <span class="id" title="var">_</span> <span class="id" title="var">sr'_in_set</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">sr0</span> &amp; <span class="id" title="var">NEr1</span> &amp; <span class="id" title="var">NEr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;rewrite&nbsp;/π_set&nbsp;elem_of_PropSet&nbsp;in&nbsp;nonempty.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">NONEMPTY_aux</span> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">sl0</span> <span class="id" title="var">sr0</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">sset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">NONEMPTY</span>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s0:465" class="idref" href="#s0:465"><span class="id" title="binder">s0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s0:465"><span class="id" title="variable">s0</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">(</span></a><span class="id" title="var">sset</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> <span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">)</span></a>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">NONEMPTY_aux</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">SAFE</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#tau_safe"><span class="id" title="abbreviation">Step.tau_safe</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a>).(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <span class="id" title="var">sset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">sc</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="var">Hin</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hl</span> := <span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_left</span> (<span class="id" title="var">sc</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sll</span> [<span class="id" title="var">STEPl'</span> <span class="id" title="var">_</span>]]; [<span class="id" title="var">done</span>..|].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hr</span> := <span class="id" title="var">Hin</span> <span class="id" title="var">nr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hr</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hr</span> &amp; <span class="id" title="var">srr</span> &amp; <span class="id" title="var">Hr'</span> &amp; <span class="id" title="var">STEPr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">sc</span> <span class="id" title="var">sll</span> <span class="id" title="var">srr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>, <span class="id" title="var">nr</span>, <span class="id" title="var">el</span>, <span class="id" title="var">er</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_and</span>!; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nn</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a>; [<span class="id" title="var">done</span>|..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">set_solver</span> + <span class="id" title="var">Hn</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"updater" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">_</span> <span class="id" title="var">NONEMPTY</span> <span class="id" title="var">SAFE</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "up".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">slrf</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">slr_set</span> <span class="id" title="var">ssl'</span> <span class="id" title="var">ssr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">slrf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <span class="id" title="var">slrf</span>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "up".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">scf</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hl</span> := <span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hl</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">sl1</span> &amp; <span class="id" title="var">INsl1</span> &amp; <span class="id" title="var">STEPl1</span> &amp; <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hr</span> := <span class="id" title="var">Hin</span> <span class="id" title="var">nr</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_right</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">sr1</span> &amp; <span class="id" title="var">Insr1</span> &amp; <span class="id" title="var">STEPr1</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">scf</span> <span class="id" title="var">sl1</span> <span class="id" title="var">sr1</span>). <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">sset</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hin</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">auto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>, <span class="id" title="var">nr</span>, <span class="id" title="var">el</span>, <span class="id" title="var">er</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">split_and</span>!; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nn</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a>; [<span class="id" title="var">done</span>|..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">set_solver</span> + <span class="id" title="var">Hn</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">el</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#comm_L"><span class="id" title="lemma">comm_L</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#union"><span class="id" title="definition">union</span></a> <span class="id" title="var">E</span>) (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#difference_union_L"><span class="id" title="lemma">difference_union_L</span></a> <span class="id" title="var">_</span> <span class="id" title="var">E</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[authlf authrf up authlist]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_"; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">slrf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iEval</span> (<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_two"><span class="id" title="lemma">big_sepL_difference_two</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:= <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) (<span class="id" title="var">y</span>:=<span class="id" title="var">nr</span>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">slrf</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrl"><span class="id" title="lemma">updlrl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlrr"><span class="id" title="lemma">updlrr</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Opaque</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_mono_elem"><span class="id" title="lemma">big_sepL_mono_elem</span></a>; [<span class="id" title="var">iFrame</span>|]; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlro"><span class="id" title="lemma">updlro</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!%".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">step_left</span> <span class="id" title="var">sl0</span> <span class="id" title="var">el</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">sl'</span> <span class="id" title="var">STEPl'</span>]; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> <span class="id" title="var">s0</span> <span class="id" title="var">sl'</span> <span class="id" title="var">sr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlr"><span class="id" title="definition">updlr</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>. <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transport1l" class="idref" href="#transport1l"><span class="id" title="lemma">transport1l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="nr:466" class="idref" href="#nr:466"><span class="id" title="binder">nr</span></a>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:467" class="idref" href="#STEPl:467"><span class="id" title="binder">STEPl</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPr:468" class="idref" href="#STEPr:468"><span class="id" title="binder">STEPr</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="neq:469" class="idref" href="#neq:469"><span class="id" title="binder">neq</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ns:470" class="idref" href="#ns:470"><span class="id" title="binder">ns</span></a> (<a id="E:471" class="idref" href="#E:471"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:471"><span class="id" title="variable">E</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="dual:472" class="idref" href="#dual:472"><span class="id" title="binder">dual</span></a> : <span class="id" title="definition">Compose.dual_sets</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:467"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:468"><span class="id" title="variable">STEPr</span></a>) <a id="8e6ffd1d8554b352b791a3ef212ba75f" class="idref" href="#8e6ffd1d8554b352b791a3ef212ba75f"><span class="id" title="binder">γ</span></a> <a id="aa91472021222750d709da7e1bdf35b1" class="idref" href="#aa91472021222750d709da7e1bdf35b1"><span class="id" title="binder">γup</span></a> <a id="Q:475" class="idref" href="#Q:475"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="right:476" class="idref" href="#right:476"><span class="id" title="binder">right</span></a> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*Decompose&nbsp;invariant:*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8e6ffd1d8554b352b791a3ef212ba75f"><span class="id" title="variable">γ</span></a>  <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#aa91472021222750d709da7e1bdf35b1"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:471"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#aa91472021222750d709da7e1bdf35b1"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*Requester&nbsp;AC:*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8e6ffd1d8554b352b791a3ef212ba75f"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:467"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:475"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*Committer&nbsp;AU:*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#right:476"><span class="id" title="variable">right</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:470"><span class="id" title="variable">ns</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8e6ffd1d8554b352b791a3ef212ba75f"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:466"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:468"><span class="id" title="variable">STEPr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e2:477" class="idref" href="#e2:477"><span class="id" title="binder">e2</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="e1:478" class="idref" href="#e1:478"><span class="id" title="binder">e1</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:478"><span class="id" title="variable">e1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:467"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#dual_evts"><span class="id" title="abbreviation">dual_evts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:478"><span class="id" title="variable">e1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e2:477"><span class="id" title="variable">e2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:475"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e1:478"><span class="id" title="variable">e1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="tactic">right</span>) "#inv #updater ac1". <span class="comment">(*&nbsp;rename&nbsp;ac1&nbsp;to&nbsp;requester&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_committer"><span class="id" title="lemma">Step.gen_committer_committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transport1l"><span class="id" title="lemma">gen_transport1l</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "inv updater"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; [<span class="id" title="var">done</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester_gen_requester"><span class="id" title="lemma">Step.requester_gen_requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="left_updater" class="idref" href="#left_updater"><span class="id" title="lemma">left_updater</span></a> <a id="ns:479" class="idref" href="#ns:479"><span class="id" title="binder">ns</span></a> <a id="E:480" class="idref" href="#E:480"><span class="id" title="binder">E</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:479"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#3866d0c63613c88d80a7220a09df936b"><span class="id" title="notation">##</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:480"><span class="id" title="variable">E</span></a>) <a id="3eb7c323705a4c5f9c90483f98e96fda" class="idref" href="#3eb7c323705a4c5f9c90483f98e96fda"><span class="id" title="binder">γ</span></a> <a id="62353d9c78fbef1aa67f31502bc7464d" class="idref" href="#62353d9c78fbef1aa67f31502bc7464d"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:479"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3eb7c323705a4c5f9c90483f98e96fda"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#62353d9c78fbef1aa67f31502bc7464d"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:480"><span class="id" title="variable">E</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#62353d9c78fbef1aa67f31502bc7464d"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#dd9f1db366d5503b67fa5e258849f459"><span class="id" title="notation">↑</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:479"><span class="id" title="variable">ns</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:480"><span class="id" title="variable">E</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#3eb7c323705a4c5f9c90483f98e96fda"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#inv #upd". <span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!#" (<span class="id" title="var">setl</span> <span class="id" title="var">nonemptyl</span> <span class="id" title="var">safe</span>) "fragl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> "inv" <span class="id" title="keyword">as</span> (<span class="id" title="var">setlr</span>) "(&gt;aleftr &amp; &gt;up &amp; &gt;%nonempty)" "Close".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">union_minus_l_L</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.sets.html#difference_disjoint_L"><span class="id" title="lemma">difference_disjoint_L</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#elem_of_enum"><span class="id" title="method">finite.elem_of_enum</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -&gt; <a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:= <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "aleftr" <span class="id" title="keyword">as</span> "[authl authlist]".<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.observe.html#observe_2"><span class="id" title="definition">observe_2</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="var">setl</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">setlr</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "%sl_in_set".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_sub"><span class="id" title="lemma">AuthSet.frag_auth_sub</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">setle</span> := (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">setlr</span> <span class="id" title="var">setl</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">setle</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "up"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "fragup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {}/<span class="id" title="var">setle</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; /<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#d18bf1e242aa8006719f115a8f44092e"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#d18bf1e242aa8006719f115a8f44092e"><span class="id" title="notation">swap</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.ssr.ssreflect.html#d18bf1e242aa8006719f115a8f44092e"><span class="id" title="notation">]</span></a> <span class="id" title="var">d</span> /(<span class="id" title="var">_</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span>/=; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">sl_in_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">nonemptyl</span> =&gt; <span class="id" title="var">slne</span> <span class="id" title="var">nonemptyl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">NONEMPTY</span>: <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:483" class="idref" href="#s:483"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:483"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">setle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">case</span>: <span class="id" title="var">nonempty</span> =&gt; <span class="id" title="var">snonempty</span> <span class="id" title="var">nonempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">snonempty</span> <span class="id" title="var">slne</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">setle</span>, <span class="id" title="definition">π</span><span class="id" title="definition">_set</span>, <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">nonempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; <span class="id" title="var">simplify_eq</span> =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">SAFE</span>: <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#tau_safe"><span class="id" title="abbreviation">Step.tau_safe</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a>).(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a>) <span class="id" title="var">setle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sc</span> <span class="id" title="var">Hin</span>%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">safe</span> (<span class="id" title="var">sc</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">slf</span> <span class="id" title="var">stepl</span>]; <span class="id" title="tactic">auto</span>;[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">sc</span> <span class="id" title="var">slf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Transparent</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[ | <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"upd" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">setle</span> <span class="id" title="var">NONEMPTY</span> <span class="id" title="var">SAFE</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "fragup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "fragup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">setlf</span> := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="slf:484" class="idref" href="#slf:484"><span class="id" title="binder"><span id="slf:486" class="id">slf</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s1:485" class="idref" href="#s1:485"><span class="id" title="binder"><span id="s1:487" class="id">s1</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:485"><span class="id" title="variable">s1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">setl</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.left"><span class="id" title="variable">left</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:485"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#slf:484"><span class="id" title="variable">slf</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_auth_upd"><span class="id" title="lemma">AuthSet.frag_auth_upd</span></a> (<span class="id" title="var">γ</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="var">setlf</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragl authl"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> "(fragl &amp; authl)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <span class="id" title="var">γup</span> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">setlr</span> <span class="id" title="var">setlf</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "fragup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "fragup".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">sc</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<span class="id" title="var">setlf</span> /= !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hin</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sll</span> <span class="id" title="var">Hinl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">sc</span> <span class="id" title="var">sll</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Transparent</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">setle</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hin</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_decide</span>; [ | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [ | <span class="id" title="tactic">tauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nn</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>; <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[authl fragup authlist]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "_"; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">setlr</span> <span class="id" title="var">setlf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Opaque</span> <span class="id" title="projection">lts_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_difference_singleton"><span class="id" title="lemma">big_sepL_difference_singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp.nl"><span class="id" title="variable">nl</span></a> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a>); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#NoDup_enum"><span class="id" title="method">NoDup_enum</span></a>..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updll"><span class="id" title="lemma">updll</span></a>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iSplitL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.big_op.html#big_sepL_mono_elem"><span class="id" title="lemma">big_sepL_mono_elem</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#elem_of_list_difference"><span class="id" title="lemma">elem_of_list_difference</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">set_solver</span>+ <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">NONEMPTY</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sne</span> <span class="id" title="var">NONEMPTY</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">safe</span> <span class="id" title="var">slne</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">slf</span> <span class="id" title="var">stepl</span>]; <span class="id" title="tactic">auto</span>;[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> <span class="id" title="var">sne</span> <span class="id" title="var">slf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">setle</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> /<span class="id" title="var">setlf</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updl"><span class="id" title="definition">updl</span></a> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /<span class="id" title="var">setlf</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span>. <span class="id" title="var">case_decide</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> /=. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#elem_of_PropSet"><span class="id" title="lemma">elem_of_PropSet</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">NONEMPTY</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">NONEMPTY</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updlo"><span class="id" title="lemma">updlo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">NONEMPTY</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.comp"><span class="id" title="section">comp</span></a>.<br/>

<br/>
</div>

<div class="doc">
Decompose invariant is sufficient 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.refine_inv" class="idref" href="#with_lts.refine_inv"><span class="id" title="section">refine_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">!</span></a><a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">Timeless</span></a> <a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">(</span></a><a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">emp</span></a><a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">%</span></a><a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">I</span></a> <a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">:</span></a> <a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">PROP</span></a><a id="Timeless0:488" class="idref" href="#Timeless0:488"><span class="id" title="binder">)</span></a>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="R:489" class="idref" href="#R:489"><span class="id" title="binder">R</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refine_inv_gen_transports" class="idref" href="#refine_inv_gen_transports"><span class="id" title="lemma">refine_inv_gen_transports</span></a> <a id="d6a190e0e3ebbb79fa976b8622b5d1dd" class="idref" href="#d6a190e0e3ebbb79fa976b8622b5d1dd"><span class="id" title="binder">γ</span></a> <a id="7f155a2722d9950aea0543879578a62b" class="idref" href="#7f155a2722d9950aea0543879578a62b"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d6a190e0e3ebbb79fa976b8622b5d1dd"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7f155a2722d9950aea0543879578a62b"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7f155a2722d9950aea0543879578a62b"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#d6a190e0e3ebbb79fa976b8622b5d1dd"><span class="id" title="variable">γ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#INV #UPD !#" (<span class="id" title="var">nl</span> <span class="id" title="var">nr</span> <span class="id" title="var">NE</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPr</span> <span class="id" title="var">DUAL</span> <span class="id" title="var">Q</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transport1l"><span class="id" title="lemma">gen_transport1l</span></a>; [<span class="id" title="var">done</span>|..|<span class="id" title="var">done</span>|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up_sub"><span class="id" title="method">refinement_up_sub</span></a>|]. <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refine_inv_requests" class="idref" href="#refine_inv_requests"><span class="id" title="lemma">refine_inv_requests</span></a> <a id="51115b848b18123e35a5377847f0f9c2" class="idref" href="#51115b848b18123e35a5377847f0f9c2"><span class="id" title="binder">γ</span></a> <a id="7f6a6c554e4e6c18c2d3431c0d6df337" class="idref" href="#7f6a6c554e4e6c18c2d3431c0d6df337"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#51115b848b18123e35a5377847f0f9c2"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7f6a6c554e4e6c18c2d3431c0d6df337"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#51115b848b18123e35a5377847f0f9c2"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7f6a6c554e4e6c18c2d3431c0d6df337"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#INV !#" (<span class="id" title="var">n</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPup</span> <span class="id" title="var">UP</span> <span class="id" title="var">Q</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_requester_visible"><span class="id" title="lemma">gen_requester_visible</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="refine_inv_commits" class="idref" href="#refine_inv_commits"><span class="id" title="lemma">refine_inv_commits</span></a> <a id="fc8d7a9caa656ee5eb74928ea4670e92" class="idref" href="#fc8d7a9caa656ee5eb74928ea4670e92"><span class="id" title="binder">γ</span></a> <a id="14414d88760b7ba875a95a1c324a81cb" class="idref" href="#14414d88760b7ba875a95a1c324a81cb"><span class="id" title="binder">γup</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fc8d7a9caa656ee5eb74928ea4670e92"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#14414d88760b7ba875a95a1c324a81cb"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fc8d7a9caa656ee5eb74928ea4670e92"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#14414d88760b7ba875a95a1c324a81cb"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#INV !#" (<span class="id" title="var">n</span> <span class="id" title="var">STEPl</span> <span class="id" title="var">STEPup</span> <span class="id" title="var">UP</span> <span class="id" title="var">Q</span> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_committer_visible"><span class="id" title="lemma">gen_committer_visible</span></a> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_ndisj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(***&nbsp;Decomposition<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;requires&nbsp;allocation&nbsp;of&nbsp;the&nbsp;decompose&nbsp;invariant,&nbsp;and&nbsp;the&nbsp;allocation<br/>
&nbsp;&nbsp;&nbsp;&nbsp;lemmas&nbsp;are&nbsp;not&nbsp;bi-polymorphic.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;we&nbsp;assume&nbsp;a&nbsp;bi-specific&nbsp;<span class="inlinecode"><span class="id" title="var">inv_alloc</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="with_lts.refine_inv.with_inv_alloc" class="idref" href="#with_lts.refine_inv.with_inv_alloc"><span class="id" title="section">with_inv_alloc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a id="with_lts.refine_inv.with_inv_alloc.inv_alloc" class="idref" href="#with_lts.refine_inv.with_inv_alloc.inv_alloc"><span class="id" title="variable">inv_alloc</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="1f2872904f844079c9e3c1e9e645056c" class="idref" href="#1f2872904f844079c9e3c1e9e645056c"><span class="id" title="binder">γ</span></a> <a id="b49373db6b1bd3f50c7b73293ab9d097" class="idref" href="#b49373db6b1bd3f50c7b73293ab9d097"><span class="id" title="binder">γup</span></a> (<a id="N:498" class="idref" href="#N:498"><span class="id" title="binder">N</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.namespaces.html#namespace"><span class="id" title="definition">namespace</span></a>) (<a id="E:499" class="idref" href="#E:499"><span class="id" title="binder">E</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1f2872904f844079c9e3c1e9e645056c"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b49373db6b1bd3f50c7b73293ab9d097"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">|={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E:499"><span class="id" title="variable">E</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#7500ef6d8f565186818a5daedd71bf2a"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.invariants.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#N:498"><span class="id" title="variable">N</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decomp_def"><span class="id" title="definition">Decomp_def</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#1f2872904f844079c9e3c1e9e645056c"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b49373db6b1bd3f50c7b73293ab9d097"><span class="id" title="variable">γup</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="alloc_decompose_bi" class="idref" href="#alloc_decompose_bi"><span class="id" title="lemma">alloc_decompose_bi</span></a> <a id="ns:501" class="idref" href="#ns:501"><span class="id" title="binder">ns</span></a> <a id="eb28e74b2d96f31f852ee9648bbd313b" class="idref" href="#eb28e74b2d96f31f852ee9648bbd313b"><span class="id" title="binder">γup</span></a> <a id="sets:503" class="idref" href="#sets:503"><span class="id" title="binder">sets</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:504" class="idref" href="#s:504"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:504"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:503"><span class="id" title="variable">sets</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eb28e74b2d96f31f852ee9648bbd313b"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:503"><span class="id" title="variable">sets</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#032e8f60cf4c8d85414301b1e227a9cb"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#032e8f60cf4c8d85414301b1e227a9cb"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">(</span></a><a id="72d7befe677b8e0e0427e7695429fe7a" class="idref" href="#72d7befe677b8e0e0427e7695429fe7a"><span class="id" title="binder">γ</span></a>:<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:506" class="idref" href="#n:506"><span class="id" title="binder"><span id="n:507" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#72d7befe677b8e0e0427e7695429fe7a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:506"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:503"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:506"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Decompose"><span class="id" title="definition">Decompose</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ns:501"><span class="id" title="variable">ns</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#72d7befe677b8e0e0427e7695429fe7a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#eb28e74b2d96f31f852ee9648bbd313b"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>* <span class="id" title="var">inv_alloc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alloc_decomp_aux"><span class="id" title="lemma">alloc_decomp_aux</span></a>; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "&gt;(%γ &amp; S &amp; R)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv.with_inv_alloc.inv_alloc"><span class="id" title="variable">inv_alloc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ns</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[$R //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "Inv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span> "S Inv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h1 class="section">Top-level theorem</h1>


<div class="paragraph"> </div>

      The following top-level theorem shows how to spawn apps in γ
      from a composed app γup. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="gen_decompose_bi" class="idref" href="#gen_decompose_bi"><span class="id" title="lemma">gen_decompose_bi</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="68dc77059f36e8eebabf42bd97e297bb" class="idref" href="#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="binder">γup</span></a> <a id="sets:509" class="idref" href="#sets:509"><span class="id" title="binder">sets</span></a> (<a id="nonempty:511" class="idref" href="#nonempty:511"><span class="id" title="binder">nonempty</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:510" class="idref" href="#s:510"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:510"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:509"><span class="id" title="variable">sets</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Assume&nbsp;that&nbsp;the&nbsp;composed&nbsp;app&nbsp;is&nbsp;in&nbsp;state&nbsp;(π_set&nbsp;sets)&nbsp;...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:509"><span class="id" title="variable">sets</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;...&nbsp;and&nbsp;updater&nbsp;for&nbsp;the&nbsp;composed&nbsp;app&nbsp;(the&nbsp;composed&nbsp;app&nbsp;can&nbsp;take<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tau&nbsp;steps).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="25558c7c23e9d3d24f1aa35f8f3c11ed" class="idref" href="#25558c7c23e9d3d24f1aa35f8f3c11ed"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Nm"><span class="id" title="abbreviation">Nm</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:513" class="idref" href="#n:513"><span class="id" title="binder"><span id="n:514" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;frag&nbsp;tokens&nbsp;for&nbsp;each&nbsp;constituent&nbsp;LTS&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#25558c7c23e9d3d24f1aa35f8f3c11ed"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:513"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:509"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:513"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;and&nbsp;updater&nbsp;so&nbsp;it&nbsp;can&nbsp;make&nbsp;tau&nbsp;steps.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:513"><span class="id" title="variable">n</span></a>) (@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#go_down"><span class="id" title="definition">go_down</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nsName"><span class="id" title="definition">ComposeN.nsName</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:513"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv.R"><span class="id" title="variable">R</span></a>)) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#25558c7c23e9d3d24f1aa35f8f3c11ed"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:513"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;and&nbsp;proofs&nbsp;for&nbsp;making&nbsp;communication&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;internal&nbsp;communication&nbsp;steps:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;proof&nbsp;that&nbsp;for&nbsp;all&nbsp;sets&nbsp;of&nbsp;dual&nbsp;events&nbsp;<span class="inlinecode"><span class="id" title="var">STEPr</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">STEPc</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requester&nbsp;ACs&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">STEPr</span></span>&nbsp;imply&nbsp;committer&nbsp;AUs&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">STEPc</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#25558c7c23e9d3d24f1aa35f8f3c11ed"><span class="id" title="variable">γ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;external&nbsp;communication&nbsp;requests:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;proof&nbsp;that&nbsp;an&nbsp;external&nbsp;request&nbsp;from&nbsp;a&nbsp;constituent&nbsp;LTS&nbsp;can&nbsp;be&nbsp;turned&nbsp;into<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;external&nbsp;request&nbsp;by&nbsp;the&nbsp;composed&nbsp;LTS.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#25558c7c23e9d3d24f1aa35f8f3c11ed"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="variable">γup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;external&nbsp;communication&nbsp;commits:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;proof&nbsp;that&nbsp;an&nbsp;external&nbsp;commit&nbsp;of&nbsp;the&nbsp;composed&nbsp;LTS&nbsp;can&nbsp;be&nbsp;turned&nbsp;into<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;external&nbsp;commit&nbsp;of&nbsp;the&nbsp;receiving&nbsp;constituent&nbsp;LTS.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#25558c7c23e9d3d24f1aa35f8f3c11ed"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#68dc77059f36e8eebabf42bd97e297bb"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>* <span class="id" title="var">inv_alloc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "aup #upd".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#alloc_decompose_bi"><span class="id" title="lemma">alloc_decompose_bi</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_ns"><span class="id" title="method">refinement_ns</span></a> <span class="id" title="var">γup</span> <span class="id" title="var">sets</span> <span class="id" title="var">nonempty</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "aup"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(fr &amp; #Inv)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#big_sepL_sep"><span class="id" title="lemma">big_sepL_sep</span></a>. <span class="id" title="var">iFrame</span> "fr". <span class="id" title="var">iSplitL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInduction</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a> <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">xs</span>] "IHl"; <span class="id" title="tactic">simpl</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "IHl".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#left_updater"><span class="id" title="lemma">left_updater</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv upd"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur_up_disj"><span class="id" title="lemma">refinement_cur_up_disj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refine_inv_gen_transports"><span class="id" title="lemma">refine_inv_gen_transports</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv upd"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refine_inv_requests"><span class="id" title="lemma">refine_inv_requests</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refine_inv_commits"><span class="id" title="lemma">refine_inv_commits</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Inv"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Although&nbsp;this&nbsp;lemma&nbsp;holds,&nbsp;<span class="inlinecode"><span class="id" title="var">external_requests</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">external_commits</span></span>&nbsp;are&nbsp;not<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useful&nbsp;because&nbsp;they&nbsp;use&nbsp;<span class="inlinecode"><span class="id" title="var">gen_requesters</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">gen_committers</span></span>&nbsp;which&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;incompatible&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">transports</span></span>.&nbsp;Use&nbsp;<span class="inlinecode"><span class="id" title="var">gen_decompose</span></span>&nbsp;instead.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="decompose_bi" class="idref" href="#decompose_bi"><span class="id" title="lemma">decompose_bi</span></a> <a id="e178db32246f35056a5d664664a23828" class="idref" href="#e178db32246f35056a5d664664a23828"><span class="id" title="binder">γup</span></a> <a id="sets:516" class="idref" href="#sets:516"><span class="id" title="binder">sets</span></a> (<a id="nonempty:518" class="idref" href="#nonempty:518"><span class="id" title="binder">nonempty</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:517" class="idref" href="#s:517"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:517"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:516"><span class="id" title="variable">sets</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Assume&nbsp;that&nbsp;the&nbsp;composed&nbsp;app&nbsp;is&nbsp;in&nbsp;state&nbsp;(s1,&nbsp;s2)&nbsp;...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e178db32246f35056a5d664664a23828"><span class="id" title="variable">γup</span></a> (<span class="id" title="definition">π</span><span class="id" title="definition">_set</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:516"><span class="id" title="variable">sets</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;...&nbsp;and&nbsp;updater&nbsp;for&nbsp;the&nbsp;composed&nbsp;app&nbsp;(the&nbsp;composed&nbsp;app&nbsp;can&nbsp;take<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tau&nbsp;steps).&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="method">ComposeN.app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e178db32246f35056a5d664664a23828"><span class="id" title="variable">γup</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">={</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="707d5ef4d17e08962b2f58a33b101c72" class="idref" href="#707d5ef4d17e08962b2f58a33b101c72"><span class="id" title="binder">γ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">[∗</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">list</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">]</span></a> <a id="n:520" class="idref" href="#n:520"><span class="id" title="binder"><span id="n:521" class="id">n</span></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.all_names"><span class="id" title="variable">all_names</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.big_op.html#88a237193263423c6f71923f692f12af"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#707d5ef4d17e08962b2f58a33b101c72"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:520"><span class="id" title="variable">n</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sets:516"><span class="id" title="variable">sets</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:520"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:520"><span class="id" title="variable">n</span></a>) (@<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_up"><span class="id" title="method">refinement_up</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#go_down"><span class="id" title="definition">go_down</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nsName"><span class="id" title="definition">ComposeN.nsName</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:520"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv.R"><span class="id" title="variable">R</span></a>)) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#707d5ef4d17e08962b2f58a33b101c72"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#n:520"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#transports"><span class="id" title="definition">transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#707d5ef4d17e08962b2f58a33b101c72"><span class="id" title="variable">γ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#707d5ef4d17e08962b2f58a33b101c72"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e178db32246f35056a5d664664a23828"><span class="id" title="variable">γup</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#707d5ef4d17e08962b2f58a33b101c72"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e178db32246f35056a5d664664a23828"><span class="id" title="variable">γup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>* <span class="id" title="var">inv_alloc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "aup #upd".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_decompose_bi"><span class="id" title="lemma">gen_decompose_bi</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "aup upd"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(All &amp; T &amp; R &amp; C)"; [<span class="id" title="tactic">assumption</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports_transports"><span class="id" title="lemma">gen_transports_transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv.with_inv_alloc"><span class="id" title="section">with_inv_alloc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts.refine_inv"><span class="id" title="section">refine_inv</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_lts"><span class="id" title="section">with_lts</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#transports"><span class="id" title="definition">transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_requests"><span class="id" title="definition">external_requests</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#external_commits"><span class="id" title="definition">external_commits</span></a><br/>
: <span class="id" title="var">br_opacity</span> <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#transports"><span class="id" title="definition">transports</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">comp</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">rename</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#gen_transports"><span class="id" title="definition">gen_transports</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">comp</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">rename</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h1 class="section">Singleton and Constructor Requesters/Committers</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="updater_singleton" class="idref" href="#updater_singleton"><span class="id" title="lemma">updater_singleton</span></a> `{<a id="H:523" class="idref" href="#H:523"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:522" class="idref" href="#PROP:522"><span class="id" title="binder"><span id="H:523" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:524" class="idref" href="#BiFUpd0:524"><span class="id" title="binder">!</span></a><a id="BiFUpd0:524" class="idref" href="#BiFUpd0:524"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:524" class="idref" href="#BiFUpd0:524"><span class="id" title="binder">PROP</span></a>} `{<a id="BiBUpdFUpd0:525" class="idref" href="#BiBUpdFUpd0:525"><span class="id" title="binder">!</span></a><a id="BiBUpdFUpd0:525" class="idref" href="#BiBUpdFUpd0:525"><span class="id" title="binder">BiBUpdFUpd</span></a> <a id="BiBUpdFUpd0:525" class="idref" href="#BiBUpdFUpd0:525"><span class="id" title="binder">PROP</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="app:526" class="idref" href="#app:526"><span class="id" title="binder">app</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a>} <a id="E1:527" class="idref" href="#E1:527"><span class="id" title="binder">E1</span></a> <a id="E2:528" class="idref" href="#E2:528"><span class="id" title="binder">E2</span></a> <a id="7c83378134cbbdbc3a53f531a74b1227" class="idref" href="#7c83378134cbbdbc3a53f531a74b1227"><span class="id" title="binder">γ</span></a> (<a id="s1:530" class="idref" href="#s1:530"><span class="id" title="binder">s1</span></a> <a id="s2:531" class="idref" href="#s2:531"><span class="id" title="binder">s2</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:526"><span class="id" title="variable">app</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E1:527"><span class="id" title="variable">E1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E2:528"><span class="id" title="variable">E2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:526"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:530"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s2:531"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater"><span class="id" title="definition">Step.updater</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:526"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E1:527"><span class="id" title="variable">E1</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c83378134cbbdbc3a53f531a74b1227"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:526"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c83378134cbbdbc3a53f531a74b1227"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s1:530"><span class="id" title="variable">s1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">={</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#E2:528"><span class="id" title="variable">E2</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#ada11c6f9621d156e3a91a6391304349"><span class="id" title="notation">}=∗</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> (<span class="id" title="var">T</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app:526"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#7c83378134cbbdbc3a53f531a74b1227"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s2:531"><span class="id" title="variable">s2</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HE</span> <span class="id" title="var">Hstep</span>) "#U R". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#updater_unseal"><span class="id" title="definition">Step.updater_unseal</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"U" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[%] [%] R"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "R"; [<span class="id" title="var">set_solver</span>..|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_upd"><span class="id" title="lemma">AuthSet.frag_upd</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "R"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$"; [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">set_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="with_app" class="idref" href="#with_app"><span class="id" title="section">with_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:533" class="idref" href="#H:533"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:532" class="idref" href="#PROP:532"><span class="id" title="binder"><span id="H:533" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:534" class="idref" href="#BiFUpd0:534"><span class="id" title="binder">!</span></a><a id="BiFUpd0:534" class="idref" href="#BiFUpd0:534"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:534" class="idref" href="#BiFUpd0:534"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="app:535" class="idref" href="#app:535"><span class="id" title="binder">app</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#app"><span class="id" title="class">App.app</span></a>, <a id="R:536" class="idref" href="#R:536"><span class="id" title="binder">R</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*Specializes&nbsp;<span class="inlinecode"><span class="id" title="var">Step.requester</span></span>&nbsp;to&nbsp;events&nbsp;<span class="inlinecode"><span class="id" title="var">e</span></span>&nbsp;built&nbsp;by&nbsp;<span class="inlinecode"><span class="id" title="var">Ctor</span></span>*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ctor_requester" class="idref" href="#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> (<a id="5dfd68db8ec51b5eff3d82031433c1c9" class="idref" href="#5dfd68db8ec51b5eff3d82031433c1c9"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:538" class="idref" href="#A:538"><span class="id" title="binder">A</span></a>} (<a id="Ctor:539" class="idref" href="#Ctor:539"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:538"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:540" class="idref" href="#Q:540"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:538"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#5dfd68db8ec51b5eff3d82031433c1c9"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="e:541" class="idref" href="#e:541"><span class="id" title="binder">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:542" class="idref" href="#x:542"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:541"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:539"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:542"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e:543" class="idref" href="#e:543"><span class="id" title="binder">e</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="x:544" class="idref" href="#x:544"><span class="id" title="binder">x</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:543"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:539"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:544"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:540"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:544"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="singleton_requester" class="idref" href="#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> (<a id="bbe704454668ef9b00188b987c9d3e26" class="idref" href="#bbe704454668ef9b00188b987c9d3e26"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="evt:546" class="idref" href="#evt:546"><span class="id" title="binder">evt</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:547" class="idref" href="#Q:547"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#bbe704454668ef9b00188b987c9d3e26"><span class="id" title="variable">γ</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:546"><span class="id" title="variable">evt</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:547"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ctor_committer" class="idref" href="#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> (<a id="b30641787ed7b967fbaf0efa8b11b8bb" class="idref" href="#b30641787ed7b967fbaf0efa8b11b8bb"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="A:549" class="idref" href="#A:549"><span class="id" title="binder">A</span></a>} (<a id="Ctor:550" class="idref" href="#Ctor:550"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:549"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:551" class="idref" href="#Q:551"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:549"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#b30641787ed7b967fbaf0efa8b11b8bb"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="e:552" class="idref" href="#e:552"><span class="id" title="binder">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:553" class="idref" href="#x:553"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:552"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:550"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:553"><span class="id" title="variable">x</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e:554" class="idref" href="#e:554"><span class="id" title="binder">e</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="x:555" class="idref" href="#x:555"><span class="id" title="binder">x</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:554"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:550"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:555"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:551"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:555"><span class="id" title="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="singleton_committer" class="idref" href="#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> (<a id="86557f62210a16f28cfa6f25d56b56dd" class="idref" href="#86557f62210a16f28cfa6f25d56b56dd"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="evt:557" class="idref" href="#evt:557"><span class="id" title="binder">evt</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) (<a id="Q:558" class="idref" href="#Q:558"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#86557f62210a16f28cfa6f25d56b56dd"><span class="id" title="variable">γ</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:557"><span class="id" title="variable">evt</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:558"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ctor_requester_wand" class="idref" href="#ctor_requester_wand"><span class="id" title="lemma">ctor_requester_wand</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> {<a id="A:559" class="idref" href="#A:559"><span class="id" title="binder">A</span></a>} <a id="0bd2d15c770774170c63c99e64247451" class="idref" href="#0bd2d15c770774170c63c99e64247451"><span class="id" title="binder">γ</span></a> (<a id="K:561" class="idref" href="#K:561"><span class="id" title="binder">K</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:559"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) (<a id="Q:562" class="idref" href="#Q:562"><span class="id" title="binder">Q</span></a> <a id="Q':563" class="idref" href="#Q':563"><span class="id" title="binder">Q'</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:559"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">Forall</span></a> <a id="a:564" class="idref" href="#a:564"><span class="id" title="binder">a</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c4d2389a489ed3709578030625aa8744"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:562"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a:564"><span class="id" title="variable">a</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':563"><span class="id" title="variable">Q'</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#a:564"><span class="id" title="variable">a</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0bd2d15c770774170c63c99e64247451"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#K:561"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:562"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#0bd2d15c770774170c63c99e64247451"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#K:561"><span class="id" title="variable">K</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':563"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">A</span> <span class="id" title="var">γ</span> <span class="id" title="var">K</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span>) "HQ I"; <span class="id" title="tactic">unfold</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a>, <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#atomic_commit_ppost_wand"><span class="id" title="lemma">atomic_commit.atomic_commit_ppost_wand</span></a>; <span class="id" title="var">iApply</span> "I".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">_</span> <span class="id" title="var">x</span>) "H"; <span class="id" title="var">iDestruct</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">a</span>) "[%HK Q]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">a</span>; <span class="id" title="var">iFrame</span> "%".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HQ".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_requester_wand" class="idref" href="#singleton_requester_wand"><span class="id" title="lemma">singleton_requester_wand</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="73be4bfc25699ae798a9fa1170184dd5" class="idref" href="#73be4bfc25699ae798a9fa1170184dd5"><span class="id" title="binder">γ</span></a> <a id="x:566" class="idref" href="#x:566"><span class="id" title="binder">x</span></a> (<a id="Q:567" class="idref" href="#Q:567"><span class="id" title="binder">Q</span></a> <a id="Q':568" class="idref" href="#Q':568"><span class="id" title="binder">Q'</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:567"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':568"><span class="id" title="variable">Q'</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#73be4bfc25699ae798a9fa1170184dd5"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:566"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:567"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#73be4bfc25699ae798a9fa1170184dd5"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#x:566"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q':568"><span class="id" title="variable">Q'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">γ</span> <span class="id" title="var">x</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span>) "HQ"; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester_wand"><span class="id" title="lemma">ctor_requester_wand</span></a>; <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> (<span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="simpl_cont" class="idref" href="#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a> {<a id="A:569" class="idref" href="#A:569"><span class="id" title="binder">A</span></a>} (<a id="Q:570" class="idref" href="#Q:570"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) (<a id="evt:571" class="idref" href="#evt:571"><span class="id" title="binder">evt</span></a> <a id="e:572" class="idref" href="#e:572"><span class="id" title="binder">e</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:569"><span class="id" title="variable">A</span></a>)  :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:572"><span class="id" title="variable">e</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#32bdf1c61a13e8cb0e6ac97c698c267c"><span class="id" title="notation">∈@{</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:569"><span class="id" title="variable">A</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#32bdf1c61a13e8cb0e6ac97c698c267c"><span class="id" title="notation">}</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a><a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:571"><span class="id" title="variable">evt</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Program.Syntax.html#fbbfb55f1ee0a61e0473fa0799e34e17"><span class="id" title="notation">()</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#e:572"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:571"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:570"><span class="id" title="variable">Q</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:570"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.exist_unit"><span class="id" title="lemma">bi.exist_unit</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#only_provable_True"><span class="id" title="lemma">only_provable_True</span></a> ?(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id"><span class="id" title="definition">left_id</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#::stdpp_scope:'emp'"><span class="id" title="notation">emp</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#bi_sep"><span class="id" title="projection">bi_sep</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_requester_equiv" class="idref" href="#singleton_requester_equiv"><span class="id" title="lemma">singleton_requester_equiv</span></a> {<a id="evt:573" class="idref" href="#evt:573"><span class="id" title="binder">evt</span></a>} <a id="490ee07d8f70fcbc7ed7eb9b83d20674" class="idref" href="#490ee07d8f70fcbc7ed7eb9b83d20674"><span class="id" title="binder">γ</span></a> <a id="Q:575" class="idref" href="#Q:575"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#490ee07d8f70fcbc7ed7eb9b83d20674"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:573"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:575"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#490ee07d8f70fcbc7ed7eb9b83d20674"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:573"><span class="id" title="variable">evt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:575"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <span class="id" title="lemma">propset_singleton_equiv_unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester_proper_strong"><span class="id" title="lemma">Step.requester_proper_strong</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_requester_intro" class="idref" href="#singleton_requester_intro"><span class="id" title="lemma">singleton_requester_intro</span></a> {<a id="evt:576" class="idref" href="#evt:576"><span class="id" title="binder">evt</span></a>} <a id="6b26f0d429361b6ffc9c01859a6616e8" class="idref" href="#6b26f0d429361b6ffc9c01859a6616e8"><span class="id" title="binder">γ</span></a> (<a id="Q:578" class="idref" href="#Q:578"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">AC</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">∀</span></a> <a id="s:579" class="idref" href="#s:579"><span class="id" title="binder"><span id="s:580" class="id"><span id="s:581" class="id"><span id="s:583" class="id"><span id="s:584" class="id"><span id="s:586" class="id"><span id="s:587" class="id">s</span></span></span></span></span></span></span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="s':582" class="idref" href="#s':582"><span class="id" title="binder">s'</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:581"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:576"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':582"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag_exact"><span class="id" title="definition">AuthSet.frag_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6b26f0d429361b6ffc9c01859a6616e8"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:581"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&lt;&lt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.frag"><span class="id" title="definition">AuthSet.frag</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6b26f0d429361b6ffc9c01859a6616e8"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">{[</span></a> <a id="s':585" class="idref" href="#s':585"><span class="id" title="binder">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">|</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:584"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:576"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':585"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#9ca50c1ca5bed9ed3d04e2842e7d7905"><span class="id" title="notation">]}</span></a><a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:578"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.bi.atomic_commit.html#9c6fe36634500ff6844dc7dc98611b8b"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#6b26f0d429361b6ffc9c01859a6616e8"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:576"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:578"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester_equiv"><span class="id" title="lemma">singleton_requester_equiv</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#requester"><span class="id" title="definition">Step.requester</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAcIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.bi.atomic_commit.html#commit_acc"><span class="id" title="definition">commit_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span>) "/= [(%s' &amp; %Hstep &amp; F) Fc]"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">s</span>; <span class="id" title="var">iFrame</span> "F".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplitR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iIntros</span> "!%" (<span class="id" title="var">e</span> -&gt;%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a>); <span class="id" title="tactic">by</span> <span class="id" title="tactic">eexists</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">e</span>) "[%Hin F]". <span class="id" title="tactic">move</span>: <span class="id" title="var">Hin</span> =&gt; /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Fc" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "F"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_committer_equiv" class="idref" href="#singleton_committer_equiv"><span class="id" title="lemma">singleton_committer_equiv</span></a> {<a id="evt:588" class="idref" href="#evt:588"><span class="id" title="binder">evt</span></a>} <a id="65cba3b3c5589691af9455298de16573" class="idref" href="#65cba3b3c5589691af9455298de16573"><span class="id" title="binder">γ</span></a> <a id="Q:590" class="idref" href="#Q:590"><span class="id" title="binder">Q</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#65cba3b3c5589691af9455298de16573"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:588"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:590"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#65cba3b3c5589691af9455298de16573"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">{[</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:588"><span class="id" title="variable">evt</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#bb8184054cdbc2cb76438a0b028fc3e8"><span class="id" title="notation">]}</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:590"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a>/<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> <span class="id" title="lemma">propset_singleton_equiv_unit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer_proper_strong"><span class="id" title="lemma">Step.committer_proper_strong</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#simpl_cont"><span class="id" title="lemma">simpl_cont</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Consider&nbsp;using&nbsp;<span class="inlinecode"><span class="id" title="var">transport_singleton</span></span>&nbsp;instead&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="singleton_committer_intro" class="idref" href="#singleton_committer_intro"><span class="id" title="lemma">singleton_committer_intro</span></a> {<a id="evt:591" class="idref" href="#evt:591"><span class="id" title="binder">evt</span></a>} <a id="ca1533a51cc9ee373641f43cae3fdbba" class="idref" href="#ca1533a51cc9ee373641f43cae3fdbba"><span class="id" title="binder">γ</span></a> (<a id="Q:593" class="idref" href="#Q:593"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">AU</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∃∃</span></a> <a id="sset:594" class="idref" href="#sset:594"><span class="id" title="binder"><span id="sset:597" class="id"><span id="sset:598" class="id"><span id="sset:601" class="id">sset</span></span></span></span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.propset.html#propset"><span class="id" title="record">propset</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>)<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth"><span class="id" title="definition">AuthSet.auth</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ca1533a51cc9ee373641f43cae3fdbba"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:597"><span class="id" title="variable">sset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">@</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#6fa969a5703669b9015488eb9949c7f4"><span class="id" title="notation">∖</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement_cur"><span class="id" title="method">refinement_cur</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">∀∀</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">(</span></a><a id="s:595" class="idref" href="#s:595"><span class="id" title="binder"><span id="s:599" class="id"><span id="s:602" class="id">s</span></span></span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) (<a id="s':596" class="idref" href="#s':596"><span class="id" title="binder"><span id="s':600" class="id"><span id="s':603" class="id">s'</span></span></span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:599"><span class="id" title="variable">s</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#sset:598"><span class="id" title="variable">sset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="abbreviation">lts_step</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#lts"><span class="id" title="method">App.lts</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s:599"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:591"><span class="id" title="variable">evt</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':600"><span class="id" title="variable">s'</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.auth_exact"><span class="id" title="definition">AuthSet.auth_exact</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ca1533a51cc9ee373641f43cae3fdbba"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#s':600"><span class="id" title="variable">s'</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:593"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#371ddf8d5992abff9bd4e7fde7019058"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ca1533a51cc9ee373641f43cae3fdbba"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt:591"><span class="id" title="variable">evt</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:593"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H". <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer_equiv"><span class="id" title="lemma">singleton_committer_equiv</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer"><span class="id" title="definition">Step.committer</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAuIntro</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.lib.atomic.html#atomic_acc"><span class="id" title="definition">atomic_acc</span></a>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H" <span class="id" title="keyword">as</span> (<span class="id" title="var">sset</span>) "/= [A Ac]"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">sset</span>; <span class="id" title="var">iFrame</span> "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.derived_laws.html#bi.and_parallel"><span class="id" title="lemma">bi.and_parallel</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Ac"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">iIntros</span> "$".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Ac" (<span class="id" title="var">s</span> <span class="id" title="var">e</span> <span class="id" title="var">s'</span>). <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> ((? &amp; -&gt;%<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> &amp; ?)) "A".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Ac" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$A //]"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="ctor_requesters_seq" class="idref" href="#ctor_requesters_seq"><span class="id" title="definition">ctor_requesters_seq</span></a> (<a id="c04bda13baf5e5dec70705de941c91cb" class="idref" href="#c04bda13baf5e5dec70705de941c91cb"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>) {<a id="X:605" class="idref" href="#X:605"><span class="id" title="binder">X</span></a> <a id="A:606" class="idref" href="#A:606"><span class="id" title="binder">A</span></a> <a id="I:607" class="idref" href="#I:607"><span class="id" title="binder">I</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ctor:610" class="idref" href="#Ctor:610"><span class="id" title="binder">Ctor</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="index:608" class="idref" href="#index:608"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:607"><span class="id" title="variable">I</span></a>) (<a id="input:609" class="idref" href="#input:609"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:605"><span class="id" title="variable">X</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) <span class="comment">(*&nbsp;e.g.&nbsp;MemRead&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:614" class="idref" href="#f:614"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:611" class="idref" href="#so_far:611"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:606"><span class="id" title="variable">A</span></a>) (<a id="index:612" class="idref" href="#index:612"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:607"><span class="id" title="variable">I</span></a>) (<a id="input:613" class="idref" href="#input:613"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:605"><span class="id" title="variable">X</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:606"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="stepQ:618" class="idref" href="#stepQ:618"><span class="id" title="binder">stepQ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:615" class="idref" href="#so_far:615"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:606"><span class="id" title="variable">A</span></a>) (<a id="index:616" class="idref" href="#index:616"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:607"><span class="id" title="variable">I</span></a>) (<a id="input:617" class="idref" href="#input:617"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:605"><span class="id" title="variable">X</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;each&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="finalQ:619" class="idref" href="#finalQ:619"><span class="id" title="binder">finalQ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:606"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;all&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indexes:620" class="idref" href="#indexes:620"><span class="id" title="binder">indexes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:607"><span class="id" title="variable">I</span></a>) (<a id="acc:621" class="idref" href="#acc:621"><span class="id" title="binder">acc</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:606"><span class="id" title="variable">A</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#indexes:620"><span class="id" title="variable">indexes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:619"><span class="id" title="variable">finalQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:621"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">indexes'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c04bda13baf5e5dec70705de941c91cb"><span class="id" title="variable">γ</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:610"><span class="id" title="variable">Ctor</span></a> <span class="id" title="var">hd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="input:624" class="idref" href="#input:624"><span class="id" title="binder">input</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#X:605"><span class="id" title="variable">X</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:618"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:621"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#input:624"><span class="id" title="variable">input</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requesters_seq:622"><span class="id" title="definition">ctor_requesters_seq</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#c04bda13baf5e5dec70705de941c91cb"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Ctor:610"><span class="id" title="variable">Ctor</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:614"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:618"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:619"><span class="id" title="variable">finalQ</span></a> <span class="id" title="var">indexes'</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:614"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:621"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#input:624"><span class="id" title="variable">input</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requesters_seq"><span class="id" title="definition">ctor_requesters_seq</span></a> : <span class="id" title="var">br_opacity</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="singleton_requesters_seq" class="idref" href="#singleton_requesters_seq"><span class="id" title="definition">singleton_requesters_seq</span></a> (<a id="8c0d409818cffab2bd4a4b2570aecdd8" class="idref" href="#8c0d409818cffab2bd4a4b2570aecdd8"><span class="id" title="binder">γ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.auth_set.html#AuthSet.gname"><span class="id" title="record">AuthSet.gname</span></a>) {<a id="A:626" class="idref" href="#A:626"><span class="id" title="binder">A</span></a> <a id="I:627" class="idref" href="#I:627"><span class="id" title="binder">I</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Singleton:629" class="idref" href="#Singleton:629"><span class="id" title="binder">Singleton</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="index:628" class="idref" href="#index:628"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:627"><span class="id" title="variable">I</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.app"><span class="id" title="variable">app</span></a>.(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#evt"><span class="id" title="method">App.evt</span></a>)) <span class="comment">(*&nbsp;e.g.&nbsp;MemWrite&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:632" class="idref" href="#f:632"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:630" class="idref" href="#so_far:630"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:626"><span class="id" title="variable">A</span></a>) (<a id="index:631" class="idref" href="#index:631"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:627"><span class="id" title="variable">I</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:626"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="stepQ:635" class="idref" href="#stepQ:635"><span class="id" title="binder">stepQ</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">(</span></a><a id="so_far:633" class="idref" href="#so_far:633"><span class="id" title="binder">so_far</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:626"><span class="id" title="variable">A</span></a>) (<a id="index:634" class="idref" href="#index:634"><span class="id" title="binder">index</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:627"><span class="id" title="variable">I</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;each&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="finalQ:636" class="idref" href="#finalQ:636"><span class="id" title="binder">finalQ</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:626"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a>) <span class="comment">(*&nbsp;expectation&nbsp;after&nbsp;all&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="indexes:637" class="idref" href="#indexes:637"><span class="id" title="binder">indexes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#I:627"><span class="id" title="variable">I</span></a>) (<a id="acc:638" class="idref" href="#acc:638"><span class="id" title="binder">acc</span></a> : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#A:626"><span class="id" title="variable">A</span></a>) : <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#indexes:637"><span class="id" title="variable">indexes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:636"><span class="id" title="variable">finalQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:638"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">indexes'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8c0d409818cffab2bd4a4b2570aecdd8"><span class="id" title="variable">γ</span></a> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Singleton:629"><span class="id" title="variable">Singleton</span></a> <span class="id" title="var">hd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:635"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:638"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requesters_seq:639"><span class="id" title="definition">singleton_requesters_seq</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#8c0d409818cffab2bd4a4b2570aecdd8"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Singleton:629"><span class="id" title="variable">Singleton</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:632"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#stepQ:635"><span class="id" title="variable">stepQ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#finalQ:636"><span class="id" title="variable">finalQ</span></a> <span class="id" title="var">indexes'</span> (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#f:632"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#acc:638"><span class="id" title="variable">acc</span></a> <span class="id" title="var">hd</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requesters_seq"><span class="id" title="definition">singleton_requesters_seq</span></a> : <span class="id" title="var">br_opacity</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#with_app"><span class="id" title="section">with_app</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_requester"><span class="id" title="definition">ctor_requester</span></a> : <span class="id" title="var">br_opacity</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> : <span class="id" title="var">br_opacity</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#ctor_committer"><span class="id" title="definition">ctor_committer</span></a> : <span class="id" title="var">br_opacity</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Opaque</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> : <span class="id" title="var">br_opacity</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="singleton_with_ref" class="idref" href="#singleton_with_ref"><span class="id" title="section">singleton_with_ref</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:642" class="idref" href="#H:642"><span class="id" title="binder">Ghostly</span></a> <a id="PROP:641" class="idref" href="#PROP:641"><span class="id" title="binder"><span id="H:642" class="id">PROP</span></span></a>} `{<a id="BiFUpd0:643" class="idref" href="#BiFUpd0:643"><span class="id" title="binder">!</span></a><a id="BiFUpd0:643" class="idref" href="#BiFUpd0:643"><span class="id" title="binder">BiFUpd</span></a> <a id="BiFUpd0:643" class="idref" href="#BiFUpd0:643"><span class="id" title="binder">PROP</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="R:644" class="idref" href="#R:644"><span class="id" title="binder">R</span></a> : !<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#refinement"><span class="id" title="class">refinement</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transport_singleton" class="idref" href="#transport_singleton"><span class="id" title="lemma">transport_singleton</span></a> <a id="comp:645" class="idref" href="#comp:645"><span class="id" title="binder">comp</span></a> <a id="39b2b9a9554b5915a4ca99bca608595a" class="idref" href="#39b2b9a9554b5915a4ca99bca608595a"><span class="id" title="binder">γ</span></a> <a id="nl:647" class="idref" href="#nl:647"><span class="id" title="binder">nl</span></a> <a id="nr:648" class="idref" href="#nr:648"><span class="id" title="binder">nr</span></a> <a id="Q:649" class="idref" href="#Q:649"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="STEPl:650" class="idref" href="#STEPl:650"><span class="id" title="binder">STEPl</span></a> : <span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:647"><span class="id" title="variable">nl</span></a>)) (<a id="STEPr:651" class="idref" href="#STEPr:651"><span class="id" title="binder">STEPr</span></a> : <span class="id" title="projection">Label</span> (<span class="id" title="projection">Compose.sts_name</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:648"><span class="id" title="variable">nr</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:647"><span class="id" title="variable">nl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:648"><span class="id" title="variable">nr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">Compose.cancel_evt</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#fam"><span class="id" title="method">ComposeN.fam</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:647"><span class="id" title="variable">nl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:648"><span class="id" title="variable">nr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:650"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:651"><span class="id" title="variable">STEPr</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#transports"><span class="id" title="definition">transports</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#comp:645"><span class="id" title="variable">comp</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#39b2b9a9554b5915a4ca99bca608595a"><span class="id" title="variable">γ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester"><span class="id" title="definition">singleton_requester</span></a> (<span class="id" title="var">app</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:647"><span class="id" title="variable">nl</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#39b2b9a9554b5915a4ca99bca608595a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nl:647"><span class="id" title="variable">nl</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPl:650"><span class="id" title="variable">STEPl</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:649"><span class="id" title="variable">Q</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer"><span class="id" title="definition">singleton_committer</span></a> (<span class="id" title="var">app</span> := <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#appn"><span class="id" title="definition">appn</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:648"><span class="id" title="variable">nr</span></a>) (<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#39b2b9a9554b5915a4ca99bca608595a"><span class="id" title="variable">γ</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#nr:648"><span class="id" title="variable">nr</span></a>) <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#STEPr:651"><span class="id" title="variable">STEPr</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#Q:649"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hdiff</span> <span class="id" title="var">Hcancel</span>) "#T R".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_requester_equiv"><span class="id" title="lemma">singleton_requester_equiv</span></a> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_committer_equiv"><span class="id" title="lemma">singleton_committer_equiv</span></a> /<a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#transports"><span class="id" title="definition">transports</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#committer_proper_strong"><span class="id" title="lemma">Step.committer_proper_strong</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">last</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"T" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <span class="id" title="var">nl</span> <span class="id" title="var">nr</span> <span class="id" title="var">Hdiff</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[%] R"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> /<span class="id" title="lemma">Compose.dual_sets_singletons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; <span class="id" title="var">_</span> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#elem_of_singleton"><span class="id" title="method">elem_of_singleton</span></a> -&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSplit</span>. { <span class="id" title="var">iIntros</span> "$ !% /=". <span class="id" title="var">set_solver</span>. } <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (? ?) "$".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.base_logic.lib.spectra.html#singleton_with_ref"><span class="id" title="section">singleton_with_ref</span></a>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
