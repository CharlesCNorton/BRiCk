<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index for the theory </a>
      <a href="./toc.html"> Table of contents for the theory </a>
      <a href="../../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.lang.cpp.logic.atomics</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2020&nbsp;BedRock&nbsp;Systems,&nbsp;Inc.<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.proofmode.proofmode.html#"><span class="id" title="library">bedrock.lang.proofmode.proofmode</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.ChargeCompat.html#"><span class="id" title="library">bedrock.lang.bi.ChargeCompat</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.bi.atomic1.html#"><span class="id" title="library">bedrock.lang.bi.atomic1</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.ast.html#"><span class="id" title="library">bedrock.lang.cpp.ast</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.semantics.html#"><span class="id" title="library">bedrock.lang.cpp.semantics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.logic.pred.html#"><span class="id" title="library">bedrock.lang.cpp.logic.pred</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#"><span class="id" title="library">bedrock.lang.cpp.logic.path_pred</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#"><span class="id" title="library">bedrock.lang.cpp.logic.heap_pred</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#"><span class="id" title="library">bedrock.lang.cpp.logic.wp</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.logic.call.html#"><span class="id" title="library">bedrock.lang.cpp.logic.call</span></a>.<br/>

<br/>
<span class="id" title="keyword">Export</span> <a class="idref" href="bedrock.lang.bi.atomic1.html#"><span class="id" title="module">bedrock.lang.bi.atomic1</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="106674b72acf13fb9e22a04f2639dc9f" class="idref" href="#106674b72acf13fb9e22a04f2639dc9f"><span class="id" title="section">with_Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="bedrock.lang.cpp.logic.mpred.html#LC.cpp_logic"><span class="id" title="class">cpp_logic</span></a>} {<a id="5cb38bbd72b208fd6307b5703a7862b6" class="idref" href="#5cb38bbd72b208fd6307b5703a7862b6"><span class="id" title="variable">resolve</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a>} (<a id="b7e09fc2860e68dfb067e4ca7c97c3ad" class="idref" href="#b7e09fc2860e68dfb067e4ca7c97c3ad"><span class="id" title="variable">tu</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.translation_unit.html#translation_unit"><span class="id" title="record">translation_unit</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<a id="d7e84064488809e2b0c7677e935d0cfc" class="idref" href="#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a>) (<a id="db7274d6a12b734e4006da8622053bdf" class="idref" href="#db7274d6a12b734e4006da8622053bdf"><span class="id" title="variable">ρ</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.wp.html#region"><span class="id" title="inductive">region</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Type</span> (<span class="id" title="var">Q</span> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>). <span class="comment">(*&nbsp;atomics&nbsp;do&nbsp;not&nbsp;throw&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="wp_operand" class="idref" href="#wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.wp_operand"><span class="id" title="axiom">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b7e09fc2860e68dfb067e4ca7c97c3ad"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#db7274d6a12b734e4006da8622053bdf"><span class="id" title="variable">ρ</span></a>).<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="wp_args" class="idref" href="#wp_args"><span class="id" title="abbreviation">wp_args</span></a> := (<a class="idref" href="bedrock.lang.cpp.logic.call.html#wp_args"><span class="id" title="definition">wp_args</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b7e09fc2860e68dfb067e4ca7c97c3ad"><span class="id" title="variable">tu</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#db7274d6a12b734e4006da8622053bdf"><span class="id" title="variable">ρ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Builtins&nbsp;for&nbsp;Atomic&nbsp;operations.&nbsp;We&nbsp;follow&nbsp;those&nbsp;provided&nbsp;by&nbsp;GCC.<br/>
&nbsp;&nbsp;&nbsp;*&nbsp;https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html<br/>
&nbsp;&nbsp;&nbsp;*&nbsp;LLVM&nbsp;also&nbsp;provides&nbsp;similar&nbsp;builtins.<br/>
&nbsp;&nbsp;&nbsp;*&nbsp;http://llvm.org/docs/Atomics.htmllibcalls-atomic
   *)</span><br/>
&nbsp;&nbsp;<span class="comment">(******&nbsp;Wp&nbsp;Semantics&nbsp;for&nbsp;atomic&nbsp;operations<br/>
&nbsp;&nbsp;&nbsp;*&nbsp;These&nbsp;are&nbsp;given&nbsp;in&nbsp;the&nbsp;style&nbsp;of&nbsp;function&nbsp;call&nbsp;axioms<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a id="f5fea3ddc4c3f6be26f7aa7c8c3f6fe7" class="idref" href="#f5fea3ddc4c3f6be26f7aa7c8c3f6fe7"><span class="id" title="variable">wp_atom</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">{</span></a><a id="resolve:10" class="idref" href="#resolve:10"><span class="id" title="binder">resolve</span></a>:<a class="idref" href="bedrock.lang.cpp.semantics.genv.html#genv"><span class="id" title="class">genv</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">},</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.coPset.html#coPset"><span class="id" title="definition">coPset</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AtomicOp"><span class="id" title="inductive">AtomicOp</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> <span class="comment">(*&nbsp;the&nbsp;access&nbsp;type&nbsp;of&nbsp;the&nbsp;atomic&nbsp;operation&nbsp;*)</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pointee_type" class="idref" href="#pointee_type"><span class="id" title="definition">pointee_type</span></a> (<a id="t:13" class="idref" href="#t:13"><span class="id" title="binder">t</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#t:13"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tpointer"><span class="id" title="abbreviation">Tpointer</span></a> <span class="id" title="var">t</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#t:13"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="get_acc_type" class="idref" href="#get_acc_type"><span class="id" title="definition">get_acc_type</span></a> (<a id="ao:15" class="idref" href="#ao:15"><span class="id" title="binder">ao</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AtomicOp"><span class="id" title="inductive">AtomicOp</span></a>) (<a id="ret:16" class="idref" href="#ret:16"><span class="id" title="binder">ret</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="ts:17" class="idref" href="#ts:17"><span class="id" title="binder">ts</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ts:17"><span class="id" title="variable">ts</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#pointee_type"><span class="id" title="definition">pointee_type</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#erase_qualifiers"><span class="id" title="definition">erase_qualifiers</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;note(hai)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;allows&nbsp;opening&nbsp;general&nbsp;Iris&nbsp;invariants&nbsp;around&nbsp;atomic&nbsp;operations.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;means&nbsp;resource&nbsp;trading&nbsp;can&nbsp;happen&nbsp;around&nbsp;atomic&nbsp;accesses.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;does&nbsp;not&nbsp;hold&nbsp;for&nbsp;non-SC&nbsp;accesses:&nbsp;in&nbsp;general,&nbsp;non-SC&nbsp;accesses&nbsp;can&nbsp;only<br/>
&nbsp;&nbsp;&nbsp;&nbsp;trade&nbsp;objective&nbsp;resources:&nbsp;those&nbsp;whose&nbsp;meaning&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;a&nbsp;thread's<br/>
&nbsp;&nbsp;&nbsp;&nbsp;view.&nbsp;This&nbsp;is&nbsp;because&nbsp;non-SC&nbsp;accesses&nbsp;may&nbsp;not&nbsp;provide&nbsp;enough&nbsp;synchronization.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Arbitrary&nbsp;resource&nbsp;trading&nbsp;holds&nbsp;for&nbsp;sequential&nbsp;consistency,&nbsp;but&nbsp;sequential<br/>
&nbsp;&nbsp;&nbsp;&nbsp;consistency&nbsp;is&nbsp;only&nbsp;guaranteed&nbsp;if&nbsp;all&nbsp;accesses&nbsp;in&nbsp;a&nbsp;program&nbsp;are&nbsp;also&nbsp;SC.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;conjecture&nbsp;that&nbsp;if&nbsp;arbitrary&nbsp;resource&nbsp;trading&nbsp;holds&nbsp;for&nbsp;SC-only&nbsp;locations<br/>
&nbsp;&nbsp;&nbsp;&nbsp;even&nbsp;in&nbsp;the&nbsp;present&nbsp;of&nbsp;other&nbsp;non-SC&nbsp;locations.&nbsp;Intuitively,&nbsp;this&nbsp;is&nbsp;because,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;assuming&nbsp;that&nbsp;there&nbsp;is&nbsp;no&nbsp;location&nbsp;that&nbsp;has&nbsp;mixed&nbsp;SC&nbsp;and&nbsp;non-SC&nbsp;accesses,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;total&nbsp;order&nbsp;S&nbsp;among&nbsp;accesses&nbsp;to&nbsp;SC&nbsp;locations&nbsp;must&nbsp;be&nbsp;consistent&nbsp;with&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;happens-before&nbsp;relation,&nbsp;so&nbsp;every&nbsp;access&nbsp;is&nbsp;synchronized&nbsp;with&nbsp;the&nbsp;next&nbsp;one<br/>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;S&nbsp;and&nbsp;thus&nbsp;can&nbsp;observe&nbsp;any&nbsp;previous&nbsp;changes&nbsp;made&nbsp;to&nbsp;the&nbsp;invariant.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;hardware,&nbsp;the&nbsp;synchonization&nbsp;is&nbsp;backed&nbsp;up&nbsp;by&nbsp;the&nbsp;fact&nbsp;that&nbsp;SC&nbsp;accesses<br/>
&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;compiled&nbsp;such&nbsp;that&nbsp;there&nbsp;is&nbsp;at&nbsp;least&nbsp;a&nbsp;full&nbsp;barrier&nbsp;betwen&nbsp;an&nbsp;SC&nbsp;load<br/>
&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;an&nbsp;SC&nbsp;store.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;https://www.cl.cam.ac.uk/~pes20/cpp/cpp0xmappings.html&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="889bb9d1b292bdfc53fe6bb8fe4e0177" class="idref" href="#889bb9d1b292bdfc53fe6bb8fe4e0177"><span class="id" title="variable">wp_operand_atomic</span></a>: <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="ao:19" class="idref" href="#ao:19"><span class="id" title="binder">ao</span></a> <a id="es:20" class="idref" href="#es:20"><span class="id" title="binder">es</span></a> <a id="ty:21" class="idref" href="#ty:21"><span class="id" title="binder">ty</span></a> (<a id="Q:22" class="idref" href="#Q:22"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#FreeTemps"><span class="id" title="abbreviation">FreeTemps</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#epred"><span class="id" title="definition">epred</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> <a id="targs:23" class="idref" href="#targs:23"><span class="id" title="binder">targs</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#es:20"><span class="id" title="variable">es</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#get_acc_type"><span class="id" title="definition">get_acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:19"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:21"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#targs:23"><span class="id" title="variable">targs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#::bi_scope:'False'"><span class="id" title="notation">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">acc_type</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">letI</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">*</span></a> <a id="vs:24" class="idref" href="#vs:24"><span class="id" title="binder">vs</span></a>, <a id="free:25" class="idref" href="#free:25"><span class="id" title="binder">free</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.eval"><span class="id" title="definition">eval</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#evaluation_order.nd"><span class="id" title="constructor">evaluation_order.nd</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#es:20"><span class="id" title="variable">es</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#c221b9dad79b2807ca5890fdbaa6e59d"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom"><span class="id" title="axiom">wp_atom</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#top"><span class="id" title="definition">top</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:19"><span class="id" title="variable">ao</span></a> <span class="id" title="var">acc_type</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#vs:24"><span class="id" title="variable">vs</span></a> (<span class="id" title="keyword">fun</span> <a id="v:26" class="idref" href="#v:26"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:22"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:26"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#free:25"><span class="id" title="variable">free</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_operand"><span class="id" title="abbreviation">wp_operand</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eatomic"><span class="id" title="constructor">Eatomic</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:19"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#es:20"><span class="id" title="variable">es</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:21"><span class="id" title="variable">ty</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:22"><span class="id" title="variable">Q</span></a>.<br/>
</div>

<div class="doc">
^ TODO the calling convention for atomics should change to be
      more uniform. e.g. atomics should be treated more like builtin
      functions.
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="wp_atom'" class="idref" href="#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> := (@<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom"><span class="id" title="axiom">wp_atom</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#5cb38bbd72b208fd6307b5703a7862b6"><span class="id" title="variable">resolve</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Memory&nbsp;Ordering&nbsp;Patterns:&nbsp;Now&nbsp;we&nbsp;only&nbsp;have&nbsp;_SEQ_CST&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="_SEQ_CST" class="idref" href="#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> := <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> 5.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;note:&nbsp;the&nbsp;following&nbsp;axioms&nbsp;have&nbsp;laters&nbsp;earlier&nbsp;than&nbsp;they&nbsp;should&nbsp;be.<br/>
&nbsp;&nbsp;&nbsp;*&nbsp;it&nbsp;is&nbsp;ok,&nbsp;because&nbsp;these&nbsp;are&nbsp;provable&nbsp;given&nbsp;the&nbsp;timelessness&nbsp;of&nbsp;points<br/>
&nbsp;&nbsp;&nbsp;*&nbsp;to,&nbsp;but&nbsp;in&nbsp;truth,&nbsp;these&nbsp;should&nbsp;be&nbsp;proven&nbsp;from&nbsp;more&nbsp;primitive&nbsp;axioms.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;note(gmm):&nbsp;these&nbsp;are&nbsp;used&nbsp;for&nbsp;reading&nbsp;and&nbsp;writing&nbsp;values&nbsp;shared&nbsp;between<br/>
&nbsp;&nbsp;&nbsp;*&nbsp;threads.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;note(hai)&nbsp;Semantics&nbsp;of&nbsp;SEQ_CST&nbsp;(SC)&nbsp;accesses:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;SC&nbsp;load&nbsp;has&nbsp;at&nbsp;least&nbsp;ACQUIRE&nbsp;load&nbsp;semantics.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;SC&nbsp;store&nbsp;has&nbsp;at&nbsp;least&nbsp;RELEASE&nbsp;store&nbsp;semantics.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Additionally,&nbsp;there&nbsp;exists&nbsp;a&nbsp;total&nbsp;order&nbsp;S&nbsp;among&nbsp;all&nbsp;SC&nbsp;accesses<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(across&nbsp;all&nbsp;locations)&nbsp;and&nbsp;SC&nbsp;fences&nbsp;(REL_ACQ&nbsp;fences).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S&nbsp;needs&nbsp;to&nbsp;respect&nbsp;strong&nbsp;happens-before&nbsp;<span class="inlinecode"><span class="id" title="var">shb</span></span>&nbsp;but&nbsp;not&nbsp;happens-before<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">hb</span></span>.&nbsp;The&nbsp;two&nbsp;coincide&nbsp;when&nbsp;there&nbsp;is&nbsp;no&nbsp;mixing&nbsp;of&nbsp;SC&nbsp;and&nbsp;non-SC&nbsp;accesses<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;same&nbsp;location.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;requiring&nbsp;S&nbsp;to&nbsp;respect&nbsp;hb&nbsp;allows&nbsp;for&nbsp;more&nbsp;optimizations&nbsp;on&nbsp;some<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;architecture&nbsp;(see&nbsp;<span class="inlinecode"><span class="id" title="var">RC11</span></span>,&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">C</span>++<span class="id" title="var">draft</span>,<span class="id" title="var">atomics</span>#6</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">shb</span></span>&nbsp;:&nbsp;https://eel.is/c++draft/intro.races12
      [hb]  : https://eel.is/c++draft/intro.races10<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">C</span>++<span class="id" title="var">draft</span>,</span> <span class="inlinecode"><span class="id" title="var">atomics</span>#6</span>&nbsp;:&nbsp;https://eel.is/c++draft/atomicsorder-6
      [RC11] : https://plv.mpi-sws.org/scfix/

    Mixing SC and non-SC accesses is not recommended, because then the usually
    expected semantics of SC accesses are not guaranteed (see below). *)</span><br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wrap_shift"><span class="id" title="definition">wrap_shift</span></a></span> is used to allow mask-changing fupd for the physically atomic
    operations. Since our semantics is axiomatized, we don't have a intensional
    definition of physical atomicity. Instead, we can encode it logically as
    the ability to make mask-changing fupd, with a later in between to represent
    at most one step.

<div class="paragraph"> </div>

    Note that the notion of physical atomicity is defined informally, depending
    on the level of abstraction. For example, in hardware, these operations are
    atomic in the transanctional sense, where (something like) a lock can be
    used to mantain that no intermediate state is observable to anyone. At the
    language level, we can consider that physically atomic.

<div class="paragraph"> </div>

    Note also that the later is fixed in <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wrap_shift"><span class="id" title="definition">wrap_shift</span></a></span>, and we will use it in
    axioms with the form
      wrap_shift (fun Q, Pre ** (Post -* Q))
    which means that there is a later both before Pre and (Post -* Q). That is,
    when unfolding wrap_shift, we have axioms of the form:
      (∃ mid, |={M, mid}=&gt; ▷ Pre ** ▷ (Post -* |={mid,M} Q)) |-- wp_atom ...
    Having the later before Pre is generally NOT always possible. However, in
    this module, our pre-conditions are always timeless (they are always
    points-tos) so this is OK. Furthermore, having a later in pre-conditions is
    also common in Iris, because while it doesn't make any difference
    soundness-wise, it is convenient for clients to be able strip some laters
    when providing the pre-conditions. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wrap_shift" class="idref" href="#wrap_shift"><span class="id" title="definition">wrap_shift</span></a> (<a id="F:29" class="idref" href="#F:29"><span class="id" title="binder">F</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) (<a id="Q:30" class="idref" href="#Q:30"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="mid:31" class="idref" href="#mid:31"><span class="id" title="binder">mid</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#mid:31"><span class="id" title="variable">mid</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#F:29"><span class="id" title="variable">F</span></a> (<a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">funI</span></a> <a id="result:32" class="idref" href="#result:32"><span class="id" title="binder">result</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#4dc5ea9ff5adf96778673fd78da7179e"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">|={</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#mid:31"><span class="id" title="variable">mid</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">,</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.updates.html#e560f4527e0b12b6e56d578534dc7d94"><span class="id" title="notation">}=&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:30"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#result:32"><span class="id" title="variable">result</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;SC&nbsp;load&nbsp;Ld&nbsp;reads&nbsp;a&nbsp;value&nbsp;that&nbsp;is&nbsp;written&nbsp;by:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;the&nbsp;latest&nbsp;SEQ_CST&nbsp;store&nbsp;that&nbsp;is&nbsp;immediately&nbsp;before&nbsp;Ld&nbsp;in&nbsp;S,&nbsp;*or*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;some&nbsp;non-SC&nbsp;store&nbsp;that&nbsp;is&nbsp;racing&nbsp;with&nbsp;(does&nbsp;not&nbsp;happen-before)&nbsp;any<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stores&nbsp;that&nbsp;is&nbsp;before&nbsp;Ld&nbsp;in&nbsp;S.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;have&nbsp;the&nbsp;expected&nbsp;SC&nbsp;behavior&nbsp;(1),&nbsp;we&nbsp;need&nbsp;to&nbsp;exclude&nbsp;(2).&nbsp;A&nbsp;possible<br/>
&nbsp;&nbsp;&nbsp;&nbsp;restriction&nbsp;is&nbsp;to&nbsp;simply&nbsp;require&nbsp;the&nbsp;location&nbsp;to&nbsp;be&nbsp;used&nbsp;with&nbsp;SC&nbsp;access&nbsp;only.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;other&nbsp;words,&nbsp;the&nbsp;following&nbsp;rule&nbsp;only&nbsp;holds&nbsp;for&nbsp;SC-only&nbsp;locations.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;SC&nbsp;load&nbsp;on&nbsp;the&nbsp;SC-only&nbsp;location&nbsp;p&nbsp;reads&nbsp;the&nbsp;latest&nbsp;value&nbsp;v&nbsp;of&nbsp;p.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;the&nbsp;language&nbsp;level,&nbsp;this&nbsp;should&nbsp;be&nbsp;a&nbsp;physically&nbsp;atomic&nbsp;operation.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="c91f46888506b5770b99df99ef78c27a" class="idref" href="#c91f46888506b5770b99df99ef78c27a"><span class="id" title="variable">wp_atom_load_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="memorder:33" class="idref" href="#memorder:33"><span class="id" title="binder">memorder</span></a> (<a id="acc_type:34" class="idref" href="#acc_type:34"><span class="id" title="binder">acc_type</span></a>:<a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="p:35" class="idref" href="#p:35"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a>) (<a id="Q:36" class="idref" href="#Q:36"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:33"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wrap_shift"><span class="id" title="definition">wrap_shift</span></a> (<span class="id" title="keyword">fun</span> <a id="Q:37" class="idref" href="#Q:37"><span class="id" title="binder">Q</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="v:38" class="idref" href="#v:38"><span class="id" title="binder">v</span></a> <a id="q:39" class="idref" href="#q:39"><span class="id" title="binder">q</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a>  <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:35"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:34"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:39"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:38"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <span class="comment">(*&nbsp;pre&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:35"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:34"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:39"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:38"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:37"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:38"><span class="id" title="variable">v</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:36"><span class="id" title="variable">Q</span></a> <span class="comment">(*&nbsp;post&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_load_n"><span class="id" title="constructor">AO__atomic_load_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:34"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:35"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:33"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:36"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;SC&nbsp;store&nbsp;writes&nbsp;the&nbsp;latest&nbsp;value,&nbsp;unless&nbsp;there&nbsp;are&nbsp;racing&nbsp;(no&nbsp;hb)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;non-SC&nbsp;stores.&nbsp;The&nbsp;following&nbsp;rule&nbsp;only&nbsp;holds&nbsp;for&nbsp;SC-only&nbsp;locations.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;SC&nbsp;store&nbsp;on&nbsp;the&nbsp;SC-only&nbsp;location&nbsp;p&nbsp;writes&nbsp;the&nbsp;latest&nbsp;value&nbsp;v&nbsp;of&nbsp;p.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;the&nbsp;language&nbsp;level,&nbsp;this&nbsp;should&nbsp;be&nbsp;a&nbsp;physically&nbsp;atomic&nbsp;operation.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;switch&nbsp;to&nbsp;has_type&nbsp;here.&nbsp;Maybe&nbsp;even&nbsp;in&nbsp;the&nbsp;axioms&nbsp;about&nbsp;ints.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="c7ebad6e0b50cba4f8eaf47b0ad4c6ff" class="idref" href="#c7ebad6e0b50cba4f8eaf47b0ad4c6ff"><span class="id" title="variable">wp_atom_store_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="memorder:42" class="idref" href="#memorder:42"><span class="id" title="binder">memorder</span></a> <a id="acc_type:43" class="idref" href="#acc_type:43"><span class="id" title="binder">acc_type</span></a> <a id="p:44" class="idref" href="#p:44"><span class="id" title="binder">p</span></a> <a id="Q:45" class="idref" href="#Q:45"><span class="id" title="binder">Q</span></a> <a id="v:46" class="idref" href="#v:46"><span class="id" title="binder">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:42"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:46"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:43"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wrap_shift"><span class="id" title="definition">wrap_shift</span></a> (<span class="id" title="keyword">fun</span> <a id="Q:47" class="idref" href="#Q:47"><span class="id" title="binder">Q</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:44"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#anyR"><span class="id" title="abbreviation">anyR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:43"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <span class="comment">(*&nbsp;pre&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:44"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:43"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:46"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:47"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vundef"><span class="id" title="constructor">Vundef</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:45"><span class="id" title="variable">Q</span></a> <span class="comment">(*&nbsp;post&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_store_n"><span class="id" title="constructor">AO__atomic_store_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:43"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:44"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:42"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:46"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:45"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;following&nbsp;rule&nbsp;holds&nbsp;for&nbsp;SC-only&nbsp;locations,&nbsp;or&nbsp;*no-racing-store*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;locations.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;No-racing-store&nbsp;locations&nbsp;are&nbsp;those&nbsp;whose&nbsp;stores&nbsp;are&nbsp;properly&nbsp;synchronized<br/>
&nbsp;&nbsp;&nbsp;&nbsp;among&nbsp;themselves&nbsp;and&nbsp;with&nbsp;RMWs.&nbsp;For&nbsp;example,&nbsp;RMW-only&nbsp;locations&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;&nbsp;no-racing-store&nbsp;locations.&nbsp;RELEASE-ACQUIRE&nbsp;RMWs&nbsp;on&nbsp;a&nbsp;RMW-only&nbsp;location<br/>
&nbsp;&nbsp;&nbsp;&nbsp;always&nbsp;read&nbsp;and&nbsp;write&nbsp;the&nbsp;latest&nbsp;value.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;SC&nbsp;atomic&nbsp;exchange&nbsp;sets&nbsp;the&nbsp;latest&nbsp;value&nbsp;to&nbsp;v&nbsp;and&nbsp;returns&nbsp;the&nbsp;previous<br/>
&nbsp;&nbsp;&nbsp;&nbsp;latest&nbsp;value&nbsp;w.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;the&nbsp;language&nbsp;level,&nbsp;this&nbsp;should&nbsp;be&nbsp;a&nbsp;physically&nbsp;atomic&nbsp;operation.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="692c34dd6f2e8694a9da01ecbf9cffec" class="idref" href="#692c34dd6f2e8694a9da01ecbf9cffec"><span class="id" title="variable">wp_atom_exchange_n_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="memorder:50" class="idref" href="#memorder:50"><span class="id" title="binder">memorder</span></a> <a id="acc_type:51" class="idref" href="#acc_type:51"><span class="id" title="binder">acc_type</span></a> <a id="p:52" class="idref" href="#p:52"><span class="id" title="binder">p</span></a> <a id="Q:53" class="idref" href="#Q:53"><span class="id" title="binder">Q</span></a> <a id="v:54" class="idref" href="#v:54"><span class="id" title="binder">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:50"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:54"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:51"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wrap_shift"><span class="id" title="definition">wrap_shift</span></a> (<span class="id" title="keyword">fun</span> <a id="Q:55" class="idref" href="#Q:55"><span class="id" title="binder">Q</span></a> =&gt; <a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="w:56" class="idref" href="#w:56"><span class="id" title="binder">w</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:52"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:51"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#w:56"><span class="id" title="variable">w</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <span class="comment">(*&nbsp;pre&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:52"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:51"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:54"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:55"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#w:56"><span class="id" title="variable">w</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:53"><span class="id" title="variable">Q</span></a> <span class="comment">(*&nbsp;post&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_exchange_n"><span class="id" title="constructor">AO__atomic_exchange_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:51"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:52"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:50"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:54"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:53"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Again,&nbsp;all&nbsp;of&nbsp;the&nbsp;RMWs&nbsp;rules&nbsp;only&nbsp;read&nbsp;and&nbsp;write&nbsp;latest&nbsp;values&nbsp;if&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;is&nbsp;SC-only&nbsp;or&nbsp;no-racing-store.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;operation&nbsp;is&nbsp;not&nbsp;physically&nbsp;atomic,&nbsp;because&nbsp;more&nbsp;than&nbsp;one&nbsp;location&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;&nbsp;involved.&nbsp;See&nbsp;https://eel.is/c++draft/atomics.types.operations23.
    However, it is logically atomic w.r.t. the atomic location `p`.
    The points-to of `p` can be provided logically atomically with the AU1, but
    the points-to's of `new_p` and `ret` are assumed to be provided locally. *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="0e1a911dbfa792a28785a8e4bf12b7a0" class="idref" href="#0e1a911dbfa792a28785a8e4bf12b7a0"><span class="id" title="variable">wp_atom_exchange_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="memorder:59" class="idref" href="#memorder:59"><span class="id" title="binder">memorder</span></a> <a id="acc_type:60" class="idref" href="#acc_type:60"><span class="id" title="binder">acc_type</span></a> <a id="p:61" class="idref" href="#p:61"><span class="id" title="binder">p</span></a> <a id="Q:62" class="idref" href="#Q:62"><span class="id" title="binder">Q</span></a> <a id="new_p:63" class="idref" href="#new_p:63"><span class="id" title="binder">new_p</span></a> <a id="q:64" class="idref" href="#q:64"><span class="id" title="binder">q</span></a> <a id="ret:65" class="idref" href="#ret:65"><span class="id" title="binder">ret</span></a> <a id="new_v:66" class="idref" href="#new_v:66"><span class="id" title="binder">new_v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:59"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">(</span></a><span class="comment">(*&nbsp;local&nbsp;pre-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;new&nbsp;value&nbsp;new_v&nbsp;for&nbsp;p&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#new_p:63"><span class="id" title="variable">new_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:60"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:64"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#new_v:66"><span class="id" title="variable">new_v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;placeholder&nbsp;for&nbsp;the&nbsp;original&nbsp;value&nbsp;of&nbsp;p&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ret:65"><span class="id" title="variable">ret</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#anyR"><span class="id" title="abbreviation">anyR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:60"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1)<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:67" class="idref" href="#v:67"><span class="id" title="binder"><span id="v:68" class="id"><span id="v:69" class="id"><span id="v:70" class="id"><span id="v:71" class="id"><span id="v:72" class="id"><span id="v:73" class="id">v</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;pre-cond:&nbsp;latest&nbsp;value&nbsp;of&nbsp;p&nbsp;is&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:61"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:60"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:69"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Masks:&nbsp;M&nbsp;is&nbsp;picked&nbsp;by&nbsp;the&nbsp;client,&nbsp;for&nbsp;the&nbsp;invariants&nbsp;that&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;needs&nbsp;to&nbsp;provide&nbsp;the&nbsp;atomic&nbsp;pre/post.&nbsp;The&nbsp;empty&nbsp;mask&nbsp;∅&nbsp;is<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assumed&nbsp;by&nbsp;the&nbsp;prover&nbsp;of&nbsp;the&nbsp;rule,&nbsp;meaning&nbsp;that&nbsp;the&nbsp;prover&nbsp;doesn't<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;need&nbsp;internal&nbsp;invariants.&nbsp;Since&nbsp;we&nbsp;are&nbsp;only&nbsp;axiomatizing&nbsp;the&nbsp;rule<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;not&nbsp;proving&nbsp;it,&nbsp;empty&nbsp;mask&nbsp;is&nbsp;OK.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;</span></a>  <span class="comment">(*&nbsp;atomic&nbsp;post-cond:&nbsp;latest&nbsp;value&nbsp;updated&nbsp;to&nbsp;new_v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:61"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:60"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#new_v:66"><span class="id" title="variable">new_v</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">(</span></a><span class="comment">(*&nbsp;post-cond:&nbsp;the&nbsp;client&nbsp;can&nbsp;assume&nbsp;the&nbsp;local&nbsp;points-to,&nbsp;which<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;returned&nbsp;by&nbsp;the&nbsp;rule,&nbsp;to&nbsp;prove&nbsp;its&nbsp;post&nbsp;condition&nbsp;Q&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#new_p:63"><span class="id" title="variable">new_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:60"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:64"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#new_v:66"><span class="id" title="variable">new_v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;ret&nbsp;stores&nbsp;the&nbsp;previous&nbsp;latest&nbsp;value&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ret:65"><span class="id" title="variable">ret</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:60"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:73"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:62"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:73"><span class="id" title="variable">v</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_exchange"><span class="id" title="constructor">AO__atomic_exchange</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:60"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:61"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:59"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#new_p:63"><span class="id" title="variable">new_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ret:65"><span class="id" title="variable">ret</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:62"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;SC&nbsp;compare&nbsp;and&nbsp;exchange&nbsp;n.&nbsp;This&nbsp;rule&nbsp;combines&nbsp;the&nbsp;postcondition&nbsp;for&nbsp;both<br/>
&nbsp;&nbsp;&nbsp;&nbsp;success&nbsp;and&nbsp;failure&nbsp;case.&nbsp;In&nbsp;the&nbsp;failure&nbsp;case,&nbsp;we&nbsp;know&nbsp;that&nbsp;the&nbsp;values&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;&nbsp;different.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;operation&nbsp;is&nbsp;not&nbsp;physically&nbsp;atomic,&nbsp;because&nbsp;more&nbsp;than&nbsp;one&nbsp;location&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;&nbsp;involved.&nbsp;However,&nbsp;it&nbsp;is&nbsp;logically&nbsp;atomic&nbsp;w.r.t.&nbsp;the&nbsp;atomic&nbsp;location&nbsp;`p`.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;points-to&nbsp;of&nbsp;`p`&nbsp;can&nbsp;be&nbsp;provided&nbsp;logically&nbsp;atomically&nbsp;with&nbsp;the&nbsp;AU1,&nbsp;but<br/>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;points-to&nbsp;of&nbsp;`expected_p`&nbsp;is&nbsp;assumed&nbsp;to&nbsp;be&nbsp;provided&nbsp;locally.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;this&nbsp;rule&nbsp;is&nbsp;currently&nbsp;only&nbsp;available&nbsp;to&nbsp;integers.&nbsp;It&nbsp;should&nbsp;be&nbsp;able<br/>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;support&nbsp;pointers,&nbsp;but&nbsp;pointer&nbsp;comparison&nbsp;is&nbsp;more&nbsp;involved&nbsp;and&nbsp;will&nbsp;be<br/>
&nbsp;&nbsp;&nbsp;&nbsp;handled&nbsp;in&nbsp;the&nbsp;future.&nbsp;Tracked&nbsp;by&nbsp;cpp2v-core306. *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="56ef9ad49fdf9a14f349fd61be458825" class="idref" href="#56ef9ad49fdf9a14f349fd61be458825"><span class="id" title="variable">wp_atom_compare_exchange_n_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:76" class="idref" href="#p:76"><span class="id" title="binder">p</span></a> <a id="expected_p:77" class="idref" href="#expected_p:77"><span class="id" title="binder">expected_p</span></a> <a id="expected_v:78" class="idref" href="#expected_v:78"><span class="id" title="binder">expected_v</span></a> <a id="desired:79" class="idref" href="#desired:79"><span class="id" title="binder">desired</span></a> <a id="weak:80" class="idref" href="#weak:80"><span class="id" title="binder">weak</span></a> <a id="succmemord:81" class="idref" href="#succmemord:81"><span class="id" title="binder">succmemord</span></a> <a id="failmemord:82" class="idref" href="#failmemord:82"><span class="id" title="binder">failmemord</span></a> <a id="Q:83" class="idref" href="#Q:83"><span class="id" title="binder">Q</span></a> <a id="sz:84" class="idref" href="#sz:84"><span class="id" title="binder">sz</span></a> <a id="sgn:85" class="idref" href="#sgn:85"><span class="id" title="binder">sgn</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ty:86" class="idref" href="#ty:86"><span class="id" title="binder">ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:84"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:85"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:80"><span class="id" title="variable">weak</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:81"><span class="id" title="variable">succmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:82"><span class="id" title="variable">failmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;pre-cond&nbsp;:&nbsp;placeholder&nbsp;for&nbsp;the&nbsp;expected&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:77"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:86"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:78"><span class="id" title="variable">expected_v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:87" class="idref" href="#v:87"><span class="id" title="binder"><span id="v:90" class="id"><span id="v:91" class="id"><span id="v:92" class="id"><span id="v:93" class="id"><span id="v:98" class="id"><span id="v:99" class="id">v</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;pre-cond:&nbsp;latest&nbsp;value&nbsp;of&nbsp;p&nbsp;is&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:76"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:86"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:91"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∃</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><a id="b:88" class="idref" href="#b:88"><span class="id" title="binder"><span id="b:94" class="id"><span id="b:96" class="id"><span id="b:100" class="id"><span id="b:102" class="id">b</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="v':89" class="idref" href="#v':89"><span class="id" title="binder"><span id="v':95" class="id"><span id="v':97" class="id"><span id="v':101" class="id"><span id="v':103" class="id">v'</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">),</span></a> <span class="comment">(*&nbsp;atomic&nbsp;post-cond:&nbsp;latest&nbsp;value&nbsp;is&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:76"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:86"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':97"><span class="id" title="variable">v'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;-&nbsp;success&nbsp;case:&nbsp;p&nbsp;has&nbsp;value&nbsp;desired&nbsp;and&nbsp;expected_p&nbsp;unchanged,&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;failed&nbsp;case:&nbsp;p&nbsp;is&nbsp;unchanged,&nbsp;expected_p&nbsp;stores&nbsp;the&nbsp;value&nbsp;read<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v,&nbsp;which&nbsp;is&nbsp;the&nbsp;latest&nbsp;one&nbsp;due&nbsp;to&nbsp;failmemord&nbsp;being&nbsp;SC.&nbsp;Also,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;a&nbsp;strong&nbsp;CMPXCHG&nbsp;we&nbsp;know&nbsp;that&nbsp;the&nbsp;values&nbsp;are&nbsp;different.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a>    <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:96"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':97"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:79"><span class="id" title="variable">desired</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:78"><span class="id" title="variable">expected_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:96"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':97"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:93"><span class="id" title="variable">v</span></a>       <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:93"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:78"><span class="id" title="variable">expected_v</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">COMM</span></a> <span class="comment">(*&nbsp;post-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:77"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:86"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:99"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:83"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:102"><span class="id" title="variable">b</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_compare_exchange_n"><span class="id" title="constructor">AO__atomic_compare_exchange_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:86"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:76"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:81"><span class="id" title="variable">succmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:77"><span class="id" title="variable">expected_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:82"><span class="id" title="variable">failmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:79"><span class="id" title="variable">desired</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:80"><span class="id" title="variable">weak</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:83"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="c3a2ad6e08c6c066c785e1bb16df9ea0" class="idref" href="#c3a2ad6e08c6c066c785e1bb16df9ea0"><span class="id" title="variable">wp_atom_compare_exchange_n_cst_bool</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:106" class="idref" href="#p:106"><span class="id" title="binder">p</span></a> <a id="expected_p:107" class="idref" href="#expected_p:107"><span class="id" title="binder">expected_p</span></a> <a id="expected_v:108" class="idref" href="#expected_v:108"><span class="id" title="binder">expected_v</span></a> <a id="desired:109" class="idref" href="#desired:109"><span class="id" title="binder">desired</span></a> <a id="weak:110" class="idref" href="#weak:110"><span class="id" title="binder">weak</span></a> <a id="succmemord:111" class="idref" href="#succmemord:111"><span class="id" title="binder">succmemord</span></a> <a id="failmemord:112" class="idref" href="#failmemord:112"><span class="id" title="binder">failmemord</span></a> <a id="Q:113" class="idref" href="#Q:113"><span class="id" title="binder">Q</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ty:114" class="idref" href="#ty:114"><span class="id" title="binder">ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tbool"><span class="id" title="constructor">Tbool</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:110"><span class="id" title="variable">weak</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:111"><span class="id" title="variable">succmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:112"><span class="id" title="variable">failmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;pre-cond&nbsp;:&nbsp;placeholder&nbsp;for&nbsp;the&nbsp;expected&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:107"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:114"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:108"><span class="id" title="variable">expected_v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:115" class="idref" href="#v:115"><span class="id" title="binder"><span id="v:118" class="id"><span id="v:119" class="id"><span id="v:120" class="id"><span id="v:121" class="id"><span id="v:126" class="id"><span id="v:127" class="id">v</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;pre-cond:&nbsp;latest&nbsp;value&nbsp;of&nbsp;p&nbsp;is&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:106"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:114"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:119"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∃</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><a id="b:116" class="idref" href="#b:116"><span class="id" title="binder"><span id="b:122" class="id"><span id="b:124" class="id"><span id="b:128" class="id"><span id="b:130" class="id">b</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="v':117" class="idref" href="#v':117"><span class="id" title="binder"><span id="v':123" class="id"><span id="v':125" class="id"><span id="v':129" class="id"><span id="v':131" class="id">v'</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">),</span></a> <span class="comment">(*&nbsp;atomic&nbsp;post-cond:&nbsp;latest&nbsp;value&nbsp;is&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:106"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:114"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':125"><span class="id" title="variable">v'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;-&nbsp;success&nbsp;case:&nbsp;p&nbsp;has&nbsp;value&nbsp;desired&nbsp;and&nbsp;expected_p&nbsp;unchanged,&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;failed&nbsp;case:&nbsp;p&nbsp;is&nbsp;unchanged,&nbsp;expected_p&nbsp;stores&nbsp;the&nbsp;value&nbsp;read<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v,&nbsp;which&nbsp;is&nbsp;the&nbsp;latest&nbsp;one&nbsp;due&nbsp;to&nbsp;failmemord&nbsp;being&nbsp;SC.&nbsp;Also,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;a&nbsp;strong&nbsp;CMPXCHG&nbsp;we&nbsp;know&nbsp;that&nbsp;the&nbsp;values&nbsp;are&nbsp;different.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a>    <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:124"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':125"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:109"><span class="id" title="variable">desired</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:121"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:108"><span class="id" title="variable">expected_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:124"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':125"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:121"><span class="id" title="variable">v</span></a>       <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:121"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:108"><span class="id" title="variable">expected_v</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">COMM</span></a> <span class="comment">(*&nbsp;post-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:107"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:114"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:127"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:113"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:130"><span class="id" title="variable">b</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_compare_exchange_n"><span class="id" title="constructor">AO__atomic_compare_exchange_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:114"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:106"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:111"><span class="id" title="variable">succmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:107"><span class="id" title="variable">expected_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:112"><span class="id" title="variable">failmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:109"><span class="id" title="variable">desired</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:110"><span class="id" title="variable">weak</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:113"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;SC&nbsp;weak&nbsp;compare&nbsp;exchange.&nbsp;This&nbsp;rule&nbsp;combines&nbsp;the&nbsp;postcondition&nbsp;for&nbsp;both<br/>
&nbsp;&nbsp;&nbsp;&nbsp;success&nbsp;and&nbsp;failure&nbsp;case.&nbsp;Since&nbsp;a&nbsp;weak&nbsp;CMPXCHG&nbsp;can&nbsp;fail&nbsp;spuriously,&nbsp;we&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;know&nbsp;that&nbsp;the&nbsp;values&nbsp;are&nbsp;different&nbsp;when&nbsp;it&nbsp;fails.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;operation&nbsp;is&nbsp;not&nbsp;physically&nbsp;atomic,&nbsp;because&nbsp;more&nbsp;than&nbsp;one&nbsp;location&nbsp;are<br/>
&nbsp;&nbsp;&nbsp;&nbsp;involved.&nbsp;However,&nbsp;it&nbsp;is&nbsp;logically&nbsp;atomic&nbsp;w.r.t.&nbsp;the&nbsp;atomic&nbsp;location&nbsp;`p`.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;points-to&nbsp;of&nbsp;`p`&nbsp;can&nbsp;be&nbsp;provided&nbsp;logically&nbsp;atomically&nbsp;with&nbsp;the&nbsp;AU1,&nbsp;but<br/>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;points-to&nbsp;of&nbsp;`expected_p`&nbsp;is&nbsp;assumed&nbsp;to&nbsp;be&nbsp;provided&nbsp;locally.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;support&nbsp;for&nbsp;pointers,&nbsp;see&nbsp;cpp2v-core306. *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="a50e7c6073d0fe75fb2246a15196cedd" class="idref" href="#a50e7c6073d0fe75fb2246a15196cedd"><span class="id" title="variable">wp_atom_compare_exchange_n_cst_weak</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:134" class="idref" href="#p:134"><span class="id" title="binder">p</span></a> <a id="expected_p:135" class="idref" href="#expected_p:135"><span class="id" title="binder">expected_p</span></a> <a id="expected_v:136" class="idref" href="#expected_v:136"><span class="id" title="binder">expected_v</span></a> <a id="desired:137" class="idref" href="#desired:137"><span class="id" title="binder">desired</span></a> <a id="weak:138" class="idref" href="#weak:138"><span class="id" title="binder">weak</span></a> <a id="succmemord:139" class="idref" href="#succmemord:139"><span class="id" title="binder">succmemord</span></a> <a id="failmemord:140" class="idref" href="#failmemord:140"><span class="id" title="binder">failmemord</span></a> <a id="Q:141" class="idref" href="#Q:141"><span class="id" title="binder">Q</span></a> <a id="sz:142" class="idref" href="#sz:142"><span class="id" title="binder">sz</span></a> <a id="sgn:143" class="idref" href="#sgn:143"><span class="id" title="binder">sgn</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ty:144" class="idref" href="#ty:144"><span class="id" title="binder">ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:142"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:143"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:138"><span class="id" title="variable">weak</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:139"><span class="id" title="variable">succmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:140"><span class="id" title="variable">failmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;pre-cond&nbsp;:&nbsp;placeholder&nbsp;for&nbsp;the&nbsp;expected&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:135"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:144"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:136"><span class="id" title="variable">expected_v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:145" class="idref" href="#v:145"><span class="id" title="binder"><span id="v:148" class="id"><span id="v:149" class="id"><span id="v:150" class="id"><span id="v:151" class="id"><span id="v:156" class="id"><span id="v:157" class="id">v</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;pre-cond:&nbsp;latest&nbsp;value&nbsp;of&nbsp;p&nbsp;is&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:134"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:144"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:149"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∃</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><a id="b:146" class="idref" href="#b:146"><span class="id" title="binder"><span id="b:152" class="id"><span id="b:154" class="id"><span id="b:158" class="id"><span id="b:160" class="id">b</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="v':147" class="idref" href="#v':147"><span class="id" title="binder"><span id="v':153" class="id"><span id="v':155" class="id"><span id="v':159" class="id"><span id="v':161" class="id">v'</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;post-cond:&nbsp;latest&nbsp;value&nbsp;is&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:134"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:144"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':155"><span class="id" title="variable">v'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;-&nbsp;success&nbsp;case:&nbsp;p&nbsp;has&nbsp;value&nbsp;desired&nbsp;and&nbsp;expected_p&nbsp;unchanged,&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;failed&nbsp;case:&nbsp;p&nbsp;is&nbsp;unchanged,&nbsp;expected_p&nbsp;stores&nbsp;the&nbsp;value&nbsp;read<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.&nbsp;As&nbsp;a&nbsp;weak&nbsp;CMPXCHG&nbsp;we&nbsp;DO&nbsp;NOT&nbsp;know&nbsp;that&nbsp;the&nbsp;values&nbsp;are&nbsp;different.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a>    <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:154"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':155"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:137"><span class="id" title="variable">desired</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:151"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:136"><span class="id" title="variable">expected_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:154"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':155"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:151"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">COMM</span></a> <span class="comment">(*&nbsp;post-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:135"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:144"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:157"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:141"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:160"><span class="id" title="variable">b</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_compare_exchange_n"><span class="id" title="constructor">AO__atomic_compare_exchange_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:144"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:134"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:139"><span class="id" title="variable">succmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:135"><span class="id" title="variable">expected_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:140"><span class="id" title="variable">failmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:137"><span class="id" title="variable">desired</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:138"><span class="id" title="variable">weak</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:141"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;unify&nbsp;with&nbsp;Tnum&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="5dff4fad9fe66ab3a68190184fce40ba" class="idref" href="#5dff4fad9fe66ab3a68190184fce40ba"><span class="id" title="variable">wp_atom_compare_exchange_n_cst_weak_bool</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:164" class="idref" href="#p:164"><span class="id" title="binder">p</span></a> <a id="expected_p:165" class="idref" href="#expected_p:165"><span class="id" title="binder">expected_p</span></a> <a id="expected_v:166" class="idref" href="#expected_v:166"><span class="id" title="binder">expected_v</span></a> <a id="desired:167" class="idref" href="#desired:167"><span class="id" title="binder">desired</span></a> <a id="weak:168" class="idref" href="#weak:168"><span class="id" title="binder">weak</span></a> <a id="succmemord:169" class="idref" href="#succmemord:169"><span class="id" title="binder">succmemord</span></a> <a id="failmemord:170" class="idref" href="#failmemord:170"><span class="id" title="binder">failmemord</span></a> <a id="Q:171" class="idref" href="#Q:171"><span class="id" title="binder">Q</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ty:172" class="idref" href="#ty:172"><span class="id" title="binder">ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tbool"><span class="id" title="constructor">Tbool</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:168"><span class="id" title="variable">weak</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:169"><span class="id" title="variable">succmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:170"><span class="id" title="variable">failmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;pre-cond&nbsp;:&nbsp;placeholder&nbsp;for&nbsp;the&nbsp;expected&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:165"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:172"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:166"><span class="id" title="variable">expected_v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:173" class="idref" href="#v:173"><span class="id" title="binder"><span id="v:176" class="id"><span id="v:177" class="id"><span id="v:178" class="id"><span id="v:179" class="id"><span id="v:184" class="id"><span id="v:185" class="id">v</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;pre-cond:&nbsp;latest&nbsp;value&nbsp;of&nbsp;p&nbsp;is&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:164"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:172"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:177"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∃</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><a id="b:174" class="idref" href="#b:174"><span class="id" title="binder"><span id="b:180" class="id"><span id="b:182" class="id"><span id="b:186" class="id"><span id="b:188" class="id">b</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="v':175" class="idref" href="#v':175"><span class="id" title="binder"><span id="v':181" class="id"><span id="v':183" class="id"><span id="v':187" class="id"><span id="v':189" class="id">v'</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;post-cond:&nbsp;latest&nbsp;value&nbsp;is&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:164"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:172"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':183"><span class="id" title="variable">v'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;-&nbsp;success&nbsp;case:&nbsp;p&nbsp;has&nbsp;value&nbsp;desired&nbsp;and&nbsp;expected_p&nbsp;unchanged,&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;failed&nbsp;case:&nbsp;p&nbsp;is&nbsp;unchanged,&nbsp;expected_p&nbsp;stores&nbsp;the&nbsp;value&nbsp;read<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v.&nbsp;As&nbsp;a&nbsp;weak&nbsp;CMPXCHG&nbsp;we&nbsp;DO&nbsp;NOT&nbsp;know&nbsp;that&nbsp;the&nbsp;values&nbsp;are&nbsp;different.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a>    <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:182"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':183"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:167"><span class="id" title="variable">desired</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:179"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_v:166"><span class="id" title="variable">expected_v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:182"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':183"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:179"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">COMM</span></a> <span class="comment">(*&nbsp;post-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:165"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:172"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:185"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:171"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:188"><span class="id" title="variable">b</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_compare_exchange_n"><span class="id" title="constructor">AO__atomic_compare_exchange_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:172"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:164"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:169"><span class="id" title="variable">succmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:165"><span class="id" title="variable">expected_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:170"><span class="id" title="variable">failmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:167"><span class="id" title="variable">desired</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:168"><span class="id" title="variable">weak</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:171"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;support&nbsp;for&nbsp;pointers,&nbsp;see&nbsp;cpp2v-core306. *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="66fa47341b86abbe06203d97ed7530a0" class="idref" href="#66fa47341b86abbe06203d97ed7530a0"><span class="id" title="variable">wp_atom_compare_exchange_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="q:192" class="idref" href="#q:192"><span class="id" title="binder">q</span></a> <a id="p:193" class="idref" href="#p:193"><span class="id" title="binder">p</span></a> <a id="expected_p:194" class="idref" href="#expected_p:194"><span class="id" title="binder">expected_p</span></a> <a id="desired_p:195" class="idref" href="#desired_p:195"><span class="id" title="binder">desired_p</span></a> <a id="weak:196" class="idref" href="#weak:196"><span class="id" title="binder">weak</span></a> <a id="succmemord:197" class="idref" href="#succmemord:197"><span class="id" title="binder">succmemord</span></a> <a id="failmemord:198" class="idref" href="#failmemord:198"><span class="id" title="binder">failmemord</span></a> <a id="Q:199" class="idref" href="#Q:199"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="sz:200" class="idref" href="#sz:200"><span class="id" title="binder">sz</span></a> <a id="sgn:201" class="idref" href="#sgn:201"><span class="id" title="binder">sgn</span></a> <a id="expected:202" class="idref" href="#expected:202"><span class="id" title="binder">expected</span></a> <a id="desired:203" class="idref" href="#desired:203"><span class="id" title="binder">desired</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ty:204" class="idref" href="#ty:204"><span class="id" title="binder">ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:200"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:201"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:196"><span class="id" title="variable">weak</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:197"><span class="id" title="variable">succmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:198"><span class="id" title="variable">failmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">(</span></a><span class="comment">(*&nbsp;local&nbsp;pre-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:194"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:204"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected:202"><span class="id" title="variable">expected</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired_p:195"><span class="id" title="variable">desired_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:204"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:192"><span class="id" title="variable">q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:203"><span class="id" title="variable">desired</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:205" class="idref" href="#v:205"><span class="id" title="binder"><span id="v:208" class="id"><span id="v:209" class="id"><span id="v:210" class="id"><span id="v:211" class="id"><span id="v:216" class="id"><span id="v:217" class="id">v</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;pre-cond:&nbsp;latest&nbsp;value&nbsp;of&nbsp;p&nbsp;is&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:193"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:204"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:209"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∃</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><a id="b:206" class="idref" href="#b:206"><span class="id" title="binder"><span id="b:212" class="id"><span id="b:214" class="id"><span id="b:218" class="id"><span id="b:220" class="id">b</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="v':207" class="idref" href="#v':207"><span class="id" title="binder"><span id="v':213" class="id"><span id="v':215" class="id"><span id="v':219" class="id"><span id="v':221" class="id">v'</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;post-cond:&nbsp;latest&nbsp;value&nbsp;is&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:193"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:204"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':215"><span class="id" title="variable">v'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;-&nbsp;success&nbsp;case:&nbsp;p&nbsp;has&nbsp;value&nbsp;desired&nbsp;and&nbsp;expected_p&nbsp;unchanged,&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;failed&nbsp;case:&nbsp;p&nbsp;is&nbsp;unchanged,&nbsp;expected_p&nbsp;stores&nbsp;the&nbsp;value&nbsp;read&nbsp;v.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a>    <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:214"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':215"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:203"><span class="id" title="variable">desired</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:211"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected:202"><span class="id" title="variable">expected</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:214"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':215"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:211"><span class="id" title="variable">v</span></a>       <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:211"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected:202"><span class="id" title="variable">expected</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><span class="comment">(*&nbsp;post-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:194"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:204"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:217"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired_p:195"><span class="id" title="variable">desired_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:204"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:192"><span class="id" title="variable">q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:203"><span class="id" title="variable">desired</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:199"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:220"><span class="id" title="variable">b</span></a>)<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_compare_exchange"><span class="id" title="constructor">AO__atomic_compare_exchange</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:204"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:193"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:197"><span class="id" title="variable">succmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:194"><span class="id" title="variable">expected_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:198"><span class="id" title="variable">failmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired_p:195"><span class="id" title="variable">desired_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:196"><span class="id" title="variable">weak</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:199"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;support&nbsp;for&nbsp;pointers,&nbsp;see&nbsp;cpp2v-core306. *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="2db2f31957120daf94d5d42945f4f8d2" class="idref" href="#2db2f31957120daf94d5d42945f4f8d2"><span class="id" title="variable">wp_atom_compare_exchange_cst_weak</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="q:224" class="idref" href="#q:224"><span class="id" title="binder">q</span></a> <a id="p:225" class="idref" href="#p:225"><span class="id" title="binder">p</span></a> <a id="expected_p:226" class="idref" href="#expected_p:226"><span class="id" title="binder">expected_p</span></a> <a id="desired_p:227" class="idref" href="#desired_p:227"><span class="id" title="binder">desired_p</span></a> <a id="weak:228" class="idref" href="#weak:228"><span class="id" title="binder">weak</span></a> <a id="succmemord:229" class="idref" href="#succmemord:229"><span class="id" title="binder">succmemord</span></a> <a id="failmemord:230" class="idref" href="#failmemord:230"><span class="id" title="binder">failmemord</span></a> <a id="Q:231" class="idref" href="#Q:231"><span class="id" title="binder">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="sz:232" class="idref" href="#sz:232"><span class="id" title="binder">sz</span></a> <a id="sgn:233" class="idref" href="#sgn:233"><span class="id" title="binder">sgn</span></a> <a id="expected:234" class="idref" href="#expected:234"><span class="id" title="binder">expected</span></a> <a id="desired:235" class="idref" href="#desired:235"><span class="id" title="binder">desired</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ty:236" class="idref" href="#ty:236"><span class="id" title="binder">ty</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:232"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:233"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:228"><span class="id" title="variable">weak</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:229"><span class="id" title="variable">succmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:230"><span class="id" title="variable">failmemord</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">(</span></a><span class="comment">(*&nbsp;local&nbsp;pre-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:226"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:236"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected:234"><span class="id" title="variable">expected</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired_p:227"><span class="id" title="variable">desired_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:236"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:224"><span class="id" title="variable">q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:235"><span class="id" title="variable">desired</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#3100380cbf7f520075624a1979df30b0"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:237" class="idref" href="#v:237"><span class="id" title="binder"><span id="v:240" class="id"><span id="v:241" class="id"><span id="v:242" class="id"><span id="v:243" class="id"><span id="v:248" class="id"><span id="v:249" class="id">v</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;pre-cond:&nbsp;latest&nbsp;value&nbsp;of&nbsp;p&nbsp;is&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:225"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:236"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:241"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&lt;&lt;∃</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><a id="b:238" class="idref" href="#b:238"><span class="id" title="binder"><span id="b:244" class="id"><span id="b:246" class="id"><span id="b:250" class="id"><span id="b:252" class="id">b</span></span></span></span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="v':239" class="idref" href="#v':239"><span class="id" title="binder"><span id="v':245" class="id"><span id="v':247" class="id"><span id="v':251" class="id"><span id="v':253" class="id">v'</span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a> <span class="comment">(*&nbsp;atomic&nbsp;post-cond:&nbsp;latest&nbsp;value&nbsp;is&nbsp;v'&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:225"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:236"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':247"><span class="id" title="variable">v'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;-&nbsp;success&nbsp;case:&nbsp;p&nbsp;has&nbsp;value&nbsp;desired&nbsp;and&nbsp;expected_p&nbsp;unchanged,&nbsp;or<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;failed&nbsp;case:&nbsp;p&nbsp;is&nbsp;unchanged,&nbsp;expected_p&nbsp;stores&nbsp;the&nbsp;value&nbsp;read&nbsp;v.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a>    <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:246"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':247"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:235"><span class="id" title="variable">desired</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:243"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected:234"><span class="id" title="variable">expected</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:246"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v':247"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:243"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">(</span></a><span class="comment">(*&nbsp;post-cond&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:226"><span class="id" title="variable">expected_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:236"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:249"><span class="id" title="variable">v</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired_p:227"><span class="id" title="variable">desired_p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:236"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:224"><span class="id" title="variable">q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired:235"><span class="id" title="variable">desired</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:231"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vbool"><span class="id" title="definition">Vbool</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:252"><span class="id" title="variable">b</span></a>)<a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">)</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#9299ebe2837ba7b85c0ebbbac6adae84"><span class="id" title="notation">&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_compare_exchange"><span class="id" title="constructor">AO__atomic_compare_exchange</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:236"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:225"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#succmemord:229"><span class="id" title="variable">succmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#expected_p:226"><span class="id" title="variable">expected_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#failmemord:230"><span class="id" title="variable">failmemord</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#desired_p:227"><span class="id" title="variable">desired_p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#weak:228"><span class="id" title="variable">weak</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:231"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
Atomic operations use two's complement arithmetic. This
  definition presupposes that the <span class="inlinecode"><span class="id" title="var">n_i</span></span> satisfy <span class="inlinecode"><span class="id" title="var">n_i</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n_i</span></span> <span class="inlinecode">`<span class="id" title="var">mod</span>`</span> <span class="inlinecode">2</span> <span class="inlinecode">^</span>
  <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.arith.types.html#bitsZ"><span class="id" title="definition">bitsZ</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.object_repr.html#with_rawable.sz"><span class="id" title="variable">sz</span></a></span>, which the following axioms ensure via typing
  side-conditions. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="atomic_eval" class="idref" href="#atomic_eval"><span class="id" title="definition">atomic_eval</span></a> (<a id="sz:256" class="idref" href="#sz:256"><span class="id" title="binder">sz</span></a> : <a class="idref" href="bedrock.lang.cpp.arith.types.html#bitsize"><span class="id" title="inductive">bitsize</span></a>) (<a id="sgn:257" class="idref" href="#sgn:257"><span class="id" title="binder">sgn</span></a> : <a class="idref" href="bedrock.lang.cpp.arith.types.html#signed"><span class="id" title="inductive">signed</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="op:258" class="idref" href="#op:258"><span class="id" title="binder">op</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="n1:259" class="idref" href="#n1:259"><span class="id" title="binder">n1</span></a> <a id="n2:260" class="idref" href="#n2:260"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="r:261" class="idref" href="#r:261"><span class="id" title="binder">r</span></a> := <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:258"><span class="id" title="variable">op</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n1:259"><span class="id" title="variable">n1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n2:260"><span class="id" title="variable">n2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:257"><span class="id" title="variable">sgn</span></a> <span class="id" title="keyword">is</span> <a class="idref" href="bedrock.lang.cpp.arith.types.html#Signed"><span class="id" title="constructor">Signed</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="bedrock.lang.cpp.arith.operator.html#to_signed"><span class="id" title="definition">to_signed</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:256"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#r:261"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="bedrock.lang.cpp.arith.operator.html#to_unsigned"><span class="id" title="abbreviation">to_unsigned</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:256"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#r:261"><span class="id" title="variable">r</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="at_eval" class="idref" href="#at_eval"><span class="id" title="abbreviation">at_eval</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">sgn</span> <span class="id" title="var">op</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="abbreviation">Unfold</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#atomic_eval"><span class="id" title="definition">atomic_eval</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#atomic_eval"><span class="id" title="definition">atomic_eval</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">sgn</span> <span class="id" title="var">op</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;atomic&nbsp;fetch&nbsp;and&nbsp;xxx&nbsp;rule&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_fetch_xxx_cst" class="idref" href="#wp_fetch_xxx_cst"><span class="id" title="definition">wp_fetch_xxx_cst</span></a> (<a id="ao:263" class="idref" href="#ao:263"><span class="id" title="binder">ao</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AtomicOp"><span class="id" title="inductive">AtomicOp</span></a>) (<a id="op:264" class="idref" href="#op:264"><span class="id" title="binder">op</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:265" class="idref" href="#p:265"><span class="id" title="binder">p</span></a> <a id="arg:266" class="idref" href="#arg:266"><span class="id" title="binder">arg</span></a> <a id="memorder:267" class="idref" href="#memorder:267"><span class="id" title="binder">memorder</span></a> <a id="Q:268" class="idref" href="#Q:268"><span class="id" title="binder">Q</span></a> <a id="sz:269" class="idref" href="#sz:269"><span class="id" title="binder">sz</span></a> <a id="sgn:270" class="idref" href="#sgn:270"><span class="id" title="binder">sgn</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="acc_type:271" class="idref" href="#acc_type:271"><span class="id" title="binder">acc_type</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:269"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:270"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:267"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:266"><span class="id" title="variable">arg</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:271"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wrap_shift"><span class="id" title="definition">wrap_shift</span></a> (<span class="id" title="keyword">fun</span> <a id="Q:272" class="idref" href="#Q:272"><span class="id" title="binder">Q</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="n:273" class="idref" href="#n:273"><span class="id" title="binder">n</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:265"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:271"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:273"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> <a id="n':274" class="idref" href="#n':274"><span class="id" title="binder">n'</span></a> := <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#at_eval"><span class="id" title="abbreviation">at_eval</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:269"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:270"><span class="id" title="variable">sgn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:264"><span class="id" title="variable">op</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:273"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:266"><span class="id" title="variable">arg</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:265"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:271"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n':274"><span class="id" title="variable">n'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:272"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:273"><span class="id" title="variable">n</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:268"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:263"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:271"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:265"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:267"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:266"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:268"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="fetch_xxx" class="idref" href="#fetch_xxx"><span class="id" title="abbreviation">fetch_xxx</span></a> <span class="id" title="var">ao</span> <span class="id" title="var">op</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="abbreviation">Unfold</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_fetch_xxx_cst"><span class="id" title="definition">wp_fetch_xxx_cst</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_fetch_xxx_cst"><span class="id" title="definition">wp_fetch_xxx_cst</span></a> <span class="id" title="var">ao</span> <span class="id" title="var">op</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="f6d83382176127a3c287aa8af9c7ccb1" class="idref" href="#f6d83382176127a3c287aa8af9c7ccb1"><span class="id" title="variable">nand</span></a> (<a id="a:275" class="idref" href="#a:275"><span class="id" title="binder">a</span></a> <a id="b:276" class="idref" href="#b:276"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.lnot"><span class="id" title="definition">Z.lnot</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.land"><span class="id" title="definition">Z.land</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#a:275"><span class="id" title="variable">a</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#b:276"><span class="id" title="variable">b</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="e97fd05aa7cd5ec19390a8aae092581d" class="idref" href="#e97fd05aa7cd5ec19390a8aae092581d"><span class="id" title="variable">wp_atom_fetch_add_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#fetch_xxx"><span class="id" title="abbreviation">fetch_xxx</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_fetch_add"><span class="id" title="constructor">AO__atomic_fetch_add</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.add"><span class="id" title="definition">Z.add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="177626a9d3eb29d2995c4f5c657bf15e" class="idref" href="#177626a9d3eb29d2995c4f5c657bf15e"><span class="id" title="variable">wp_atom_fetch_sub_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#fetch_xxx"><span class="id" title="abbreviation">fetch_xxx</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_fetch_sub"><span class="id" title="constructor">AO__atomic_fetch_sub</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.sub"><span class="id" title="definition">Z.sub</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="90980bf31585a44ea3389a746aed5c9b" class="idref" href="#90980bf31585a44ea3389a746aed5c9b"><span class="id" title="variable">wp_atom_fetch_and_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#fetch_xxx"><span class="id" title="abbreviation">fetch_xxx</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_fetch_and"><span class="id" title="constructor">AO__atomic_fetch_and</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.land"><span class="id" title="definition">Z.land</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="cd41bbbecd70c220f70917864a8015ed" class="idref" href="#cd41bbbecd70c220f70917864a8015ed"><span class="id" title="variable">wp_atom_fetch_xor_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#fetch_xxx"><span class="id" title="abbreviation">fetch_xxx</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_fetch_xor"><span class="id" title="constructor">AO__atomic_fetch_xor</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.lxor"><span class="id" title="definition">Z.lxor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="297476a77e27d91bf889e0af95a7e92a" class="idref" href="#297476a77e27d91bf889e0af95a7e92a"><span class="id" title="variable">wp_atom_fetch_or_cst</span></a>   : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#fetch_xxx"><span class="id" title="abbreviation">fetch_xxx</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_fetch_or"><span class="id" title="constructor">AO__atomic_fetch_or</span></a>   <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.lor"><span class="id" title="definition">Z.lor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="257c83651e4001449cfe9d9d8ff955dd" class="idref" href="#257c83651e4001449cfe9d9d8ff955dd"><span class="id" title="variable">wp_atom_fetch_nand_cst</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#fetch_xxx"><span class="id" title="abbreviation">fetch_xxx</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_fetch_nand"><span class="id" title="constructor">AO__atomic_fetch_nand</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#f6d83382176127a3c287aa8af9c7ccb1"><span class="id" title="variable">nand</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;atomic&nbsp;xxx&nbsp;and&nbsp;fetch&nbsp;rule&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wp_xxx_fetch_cst" class="idref" href="#wp_xxx_fetch_cst"><span class="id" title="definition">wp_xxx_fetch_cst</span></a> (<a id="ao:289" class="idref" href="#ao:289"><span class="id" title="binder">ao</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AtomicOp"><span class="id" title="inductive">AtomicOp</span></a>) (<a id="op:290" class="idref" href="#op:290"><span class="id" title="binder">op</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:291" class="idref" href="#p:291"><span class="id" title="binder">p</span></a> <a id="arg:292" class="idref" href="#arg:292"><span class="id" title="binder">arg</span></a> <a id="memorder:293" class="idref" href="#memorder:293"><span class="id" title="binder">memorder</span></a> <a id="Q:294" class="idref" href="#Q:294"><span class="id" title="binder">Q</span></a> <a id="sz:295" class="idref" href="#sz:295"><span class="id" title="binder">sz</span></a> <a id="sgn:296" class="idref" href="#sgn:296"><span class="id" title="binder">sgn</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="acc_type:297" class="idref" href="#acc_type:297"><span class="id" title="binder">acc_type</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:295"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:296"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:293"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:292"><span class="id" title="variable">arg</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:297"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wrap_shift"><span class="id" title="definition">wrap_shift</span></a> (<span class="id" title="keyword">fun</span> <a id="Q:298" class="idref" href="#Q:298"><span class="id" title="binder">Q</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">Exists</span></a> <a id="n:299" class="idref" href="#n:299"><span class="id" title="binder">n</span></a><a class="idref" href="bedrock.lang.bi.prelude.html#3ad7164693adfb9816edb0160af074a6"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:291"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:297"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:299"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> <a id="n':300" class="idref" href="#n':300"><span class="id" title="binder">n'</span></a> := <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#at_eval"><span class="id" title="abbreviation">at_eval</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:295"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:296"><span class="id" title="variable">sgn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:290"><span class="id" title="variable">op</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:299"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:292"><span class="id" title="variable">arg</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:291"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:297"><span class="id" title="variable">acc_type</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n':300"><span class="id" title="variable">n'</span></a>) <a class="idref" href="bedrock.lang.bi.prelude.html#1ceed28b6e47de516f82862d053216fa"><span class="id" title="notation">-*</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:298"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n':300"><span class="id" title="variable">n'</span></a>)<a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">)</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:294"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:289"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:297"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:291"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:293"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:292"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:294"><span class="id" title="variable">Q</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Notation</span> <a id="xxx_fetch" class="idref" href="#xxx_fetch"><span class="id" title="abbreviation">xxx_fetch</span></a> <span class="id" title="var">ao</span> <span class="id" title="var">op</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="abbreviation">Unfold</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_xxx_fetch_cst"><span class="id" title="definition">wp_xxx_fetch_cst</span></a> (<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_xxx_fetch_cst"><span class="id" title="definition">wp_xxx_fetch_cst</span></a> <span class="id" title="var">ao</span> <span class="id" title="var">op</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="c70df6b80c9be3fe29d9b18a61b27e1c" class="idref" href="#c70df6b80c9be3fe29d9b18a61b27e1c"><span class="id" title="variable">wp_atom_add_fetch_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#xxx_fetch"><span class="id" title="abbreviation">xxx_fetch</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_add_fetch"><span class="id" title="constructor">AO__atomic_add_fetch</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.add"><span class="id" title="definition">Z.add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="8e281d8705582f98d747c184c3b57b22" class="idref" href="#8e281d8705582f98d747c184c3b57b22"><span class="id" title="variable">wp_atom_sub_fetch_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#xxx_fetch"><span class="id" title="abbreviation">xxx_fetch</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_sub_fetch"><span class="id" title="constructor">AO__atomic_sub_fetch</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.sub"><span class="id" title="definition">Z.sub</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="6df09d715f13cd3c91e8a1f2040c8e56" class="idref" href="#6df09d715f13cd3c91e8a1f2040c8e56"><span class="id" title="variable">wp_atom_and_fetch_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#xxx_fetch"><span class="id" title="abbreviation">xxx_fetch</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_and_fetch"><span class="id" title="constructor">AO__atomic_and_fetch</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.land"><span class="id" title="definition">Z.land</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="9bf4b49ca0047f3345721cdbc6ab4174" class="idref" href="#9bf4b49ca0047f3345721cdbc6ab4174"><span class="id" title="variable">wp_atom_xor_fetch_cst</span></a>  : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#xxx_fetch"><span class="id" title="abbreviation">xxx_fetch</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_xor_fetch"><span class="id" title="constructor">AO__atomic_xor_fetch</span></a>  <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.lxor"><span class="id" title="definition">Z.lxor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="b4e3f20ef14afe92c3382afc92facced" class="idref" href="#b4e3f20ef14afe92c3382afc92facced"><span class="id" title="variable">wp_atom_or_fetch_cst</span></a>   : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#xxx_fetch"><span class="id" title="abbreviation">xxx_fetch</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_or_fetch"><span class="id" title="constructor">AO__atomic_or_fetch</span></a>   <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ZArith.BinInt.html#Z.lor"><span class="id" title="definition">Z.lor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Axiom</span> <a id="8f0a6a33b682d5d14b0b9d684c9f4c24" class="idref" href="#8f0a6a33b682d5d14b0b9d684c9f4c24"><span class="id" title="variable">wp_atom_nand_fetch_cst</span></a> : <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#xxx_fetch"><span class="id" title="abbreviation">xxx_fetch</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_nand_fetch"><span class="id" title="constructor">AO__atomic_nand_fetch</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#f6d83382176127a3c287aa8af9c7ccb1"><span class="id" title="variable">nand</span></a>.<br/>

<br/>
</div>

<div class="doc">
Derived AU1 specs 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="atom_load_cst_AU1" class="idref" href="#atom_load_cst_AU1"><span class="id" title="definition">atom_load_cst_AU1</span></a> (<a id="ty:313" class="idref" href="#ty:313"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="p:314" class="idref" href="#p:314"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a>) (<a id="Q:315" class="idref" href="#Q:315"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="v:316" class="idref" href="#v:316"><span class="id" title="binder"><span id="v:318" class="id"><span id="v:320" class="id"><span id="v:322" class="id"><span id="v:324" class="id"><span id="v:326" class="id"><span id="v:328" class="id">v</span></span></span></span></span></span></span></a> <a id="q:317" class="idref" href="#q:317"><span class="id" title="binder"><span id="q:319" class="id"><span id="q:321" class="id"><span id="q:323" class="id"><span id="q:325" class="id"><span id="q:327" class="id"><span id="q:329" class="id">q</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:314"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:313"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:321"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:320"><span class="id" title="variable">v</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;</span></a>       <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:314"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:313"><span class="id" title="variable">ty</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#q:325"><span class="id" title="variable">q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:324"><span class="id" title="variable">v</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:315"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:328"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;:&nbsp;generalize&nbsp;with&nbsp;telescopes.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="AU1_atom_load_cst" class="idref" href="#AU1_atom_load_cst"><span class="id" title="lemma">AU1_atom_load_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="memorder:330" class="idref" href="#memorder:330"><span class="id" title="binder">memorder</span></a> <a id="acc_type:331" class="idref" href="#acc_type:331"><span class="id" title="binder">acc_type</span></a> <a id="p:332" class="idref" href="#p:332"><span class="id" title="binder">p</span></a> <a id="Q:333" class="idref" href="#Q:333"><span class="id" title="binder">Q</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:330"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#atom_load_cst_AU1"><span class="id" title="definition">atom_load_cst_AU1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:331"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:332"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:333"><span class="id" title="variable">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_load_n"><span class="id" title="constructor">AO__atomic_load_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:331"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:332"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:330"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:333"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_load_cst"><span class="id" title="axiom">wp_atom_load_cst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[$ AU]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> <span class="id" title="var">q</span>) "[Hp [_ Close]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">v</span>, <span class="id" title="var">q</span>. <span class="id" title="var">iFrame</span> "Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hp". <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="atom_store_cst_AU1" class="idref" href="#atom_store_cst_AU1"><span class="id" title="definition">atom_store_cst_AU1</span></a> (<a id="ty:334" class="idref" href="#ty:334"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="p:335" class="idref" href="#p:335"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a>) (<a id="Q:336" class="idref" href="#Q:336"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) <a id="v:337" class="idref" href="#v:337"><span class="id" title="binder">v</span></a> : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:335"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#anyR"><span class="id" title="abbreviation">anyR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:334"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">&lt;&lt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:335"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:334"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:337"><span class="id" title="variable">v</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:336"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vundef"><span class="id" title="constructor">Vundef</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#2e0819a0771a35d217365493453a46e4"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="AU1_atom_store_cst" class="idref" href="#AU1_atom_store_cst"><span class="id" title="lemma">AU1_atom_store_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="memorder:338" class="idref" href="#memorder:338"><span class="id" title="binder">memorder</span></a> <a id="acc_type:339" class="idref" href="#acc_type:339"><span class="id" title="binder">acc_type</span></a> <a id="p:340" class="idref" href="#p:340"><span class="id" title="binder">p</span></a> <a id="Q:341" class="idref" href="#Q:341"><span class="id" title="binder">Q</span></a> <a id="v:342" class="idref" href="#v:342"><span class="id" title="binder">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:338"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:342"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:339"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#atom_store_cst_AU1"><span class="id" title="definition">atom_store_cst_AU1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:339"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:340"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:341"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:342"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_store_n"><span class="id" title="constructor">AO__atomic_store_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:339"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:340"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:338"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:342"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:341"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_store_cst"><span class="id" title="axiom">wp_atom_store_cst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[$ [$ AU]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> "[$ Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt; Hp". <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="atom_exchange_n_cst_AU1" class="idref" href="#atom_exchange_n_cst_AU1"><span class="id" title="definition">atom_exchange_n_cst_AU1</span></a> (<a id="ty:343" class="idref" href="#ty:343"><span class="id" title="binder">ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#type"><span class="id" title="inductive">type</span></a>) (<a id="p:344" class="idref" href="#p:344"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a>) (<a id="Q:345" class="idref" href="#Q:345"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) <a id="v:346" class="idref" href="#v:346"><span class="id" title="binder">v</span></a> : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="w:347" class="idref" href="#w:347"><span class="id" title="binder"><span id="w:348" class="id"><span id="w:349" class="id"><span id="w:350" class="id"><span id="w:351" class="id"><span id="w:352" class="id"><span id="w:353" class="id">w</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:344"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:343"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#w:349"><span class="id" title="variable">w</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;</span></a>     <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:344"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:343"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:346"><span class="id" title="variable">v</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:345"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#w:353"><span class="id" title="variable">w</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="AU1_atom_exchange_n_cst" class="idref" href="#AU1_atom_exchange_n_cst"><span class="id" title="lemma">AU1_atom_exchange_n_cst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="memorder:354" class="idref" href="#memorder:354"><span class="id" title="binder">memorder</span></a> <a id="acc_type:355" class="idref" href="#acc_type:355"><span class="id" title="binder">acc_type</span></a> <a id="p:356" class="idref" href="#p:356"><span class="id" title="binder">p</span></a> <a id="Q:357" class="idref" href="#Q:357"><span class="id" title="binder">Q</span></a> <a id="v:358" class="idref" href="#v:358"><span class="id" title="binder">v</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:354"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:358"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:355"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#atom_exchange_n_cst_AU1"><span class="id" title="definition">atom_exchange_n_cst_AU1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:355"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:356"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:357"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:358"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#AO__atomic_exchange_n"><span class="id" title="constructor">AO__atomic_exchange_n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:355"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:356"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:354"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#v:358"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:357"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_exchange_n_cst"><span class="id" title="axiom">wp_atom_exchange_n_cst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[$ [$ AU]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span>) "[Hp Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">w</span>. <span class="id" title="var">iFrame</span> "Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hp". <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="atom_fetch_xxx_cst_AU1" class="idref" href="#atom_fetch_xxx_cst_AU1"><span class="id" title="definition">atom_fetch_xxx_cst_AU1</span></a> (<a id="op:359" class="idref" href="#op:359"><span class="id" title="binder">op</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="ty:360" class="idref" href="#ty:360"><span class="id" title="binder">ty</span></a> (<a id="p:361" class="idref" href="#p:361"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a>) (<a id="z:362" class="idref" href="#z:362"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="Q:363" class="idref" href="#Q:363"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) <a id="sz:364" class="idref" href="#sz:364"><span class="id" title="binder">sz</span></a> <a id="sgn:365" class="idref" href="#sgn:365"><span class="id" title="binder">sgn</span></a> : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="n:366" class="idref" href="#n:366"><span class="id" title="binder"><span id="n:367" class="id"><span id="n:368" class="id"><span id="n:369" class="id"><span id="n:370" class="id"><span id="n:372" class="id"><span id="n:373" class="id">n</span></span></span></span></span></span></span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:361"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:360"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:368"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;</span></a>     <span class="id" title="keyword">let</span> <a id="n':371" class="idref" href="#n':371"><span class="id" title="binder">n'</span></a> := <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#at_eval"><span class="id" title="abbreviation">at_eval</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:364"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:365"><span class="id" title="variable">sgn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:359"><span class="id" title="variable">op</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:370"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#z:362"><span class="id" title="variable">z</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:361"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:360"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n':371"><span class="id" title="variable">n'</span></a>)<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:363"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:373"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="AU1_atom_fetch_xxx_cst" class="idref" href="#AU1_atom_fetch_xxx_cst"><span class="id" title="lemma">AU1_atom_fetch_xxx_cst</span></a> <a id="ao:374" class="idref" href="#ao:374"><span class="id" title="binder">ao</span></a> <a id="op:375" class="idref" href="#op:375"><span class="id" title="binder">op</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_fetch_xxx_cst"><span class="id" title="definition">wp_fetch_xxx_cst</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:374"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:375"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:376" class="idref" href="#p:376"><span class="id" title="binder">p</span></a> <a id="arg:377" class="idref" href="#arg:377"><span class="id" title="binder">arg</span></a> <a id="memorder:378" class="idref" href="#memorder:378"><span class="id" title="binder">memorder</span></a> <a id="Q:379" class="idref" href="#Q:379"><span class="id" title="binder">Q</span></a> <a id="sz:380" class="idref" href="#sz:380"><span class="id" title="binder">sz</span></a> <a id="sgn:381" class="idref" href="#sgn:381"><span class="id" title="binder">sgn</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="acc_type:382" class="idref" href="#acc_type:382"><span class="id" title="binder">acc_type</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:380"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:381"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:378"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:377"><span class="id" title="variable">arg</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:382"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#atom_fetch_xxx_cst_AU1"><span class="id" title="definition">atom_fetch_xxx_cst_AU1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:375"><span class="id" title="variable">op</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:382"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:376"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:377"><span class="id" title="variable">arg</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:379"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:380"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:381"><span class="id" title="variable">sgn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:374"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:382"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:376"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:378"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:377"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:379"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">WP</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">WP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[$ [$ AU]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span>) "[Hp Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">w</span>. <span class="id" title="var">iFrame</span> "Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hp". <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_fetch_add_cst" class="idref" href="#AU1_atom_fetch_add_cst"><span class="id" title="definition">AU1_atom_fetch_add_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_fetch_xxx_cst"><span class="id" title="lemma">AU1_atom_fetch_xxx_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_fetch_add_cst"><span class="id" title="axiom">wp_atom_fetch_add_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_fetch_sub_cst" class="idref" href="#AU1_atom_fetch_sub_cst"><span class="id" title="definition">AU1_atom_fetch_sub_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_fetch_xxx_cst"><span class="id" title="lemma">AU1_atom_fetch_xxx_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_fetch_sub_cst"><span class="id" title="axiom">wp_atom_fetch_sub_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_fetch_and_cst" class="idref" href="#AU1_atom_fetch_and_cst"><span class="id" title="definition">AU1_atom_fetch_and_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_fetch_xxx_cst"><span class="id" title="lemma">AU1_atom_fetch_xxx_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_fetch_and_cst"><span class="id" title="axiom">wp_atom_fetch_and_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_fetch_xor_cst" class="idref" href="#AU1_atom_fetch_xor_cst"><span class="id" title="definition">AU1_atom_fetch_xor_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_fetch_xxx_cst"><span class="id" title="lemma">AU1_atom_fetch_xxx_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_fetch_xor_cst"><span class="id" title="axiom">wp_atom_fetch_xor_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_fetch_or_cst" class="idref" href="#AU1_atom_fetch_or_cst"><span class="id" title="definition">AU1_atom_fetch_or_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_fetch_xxx_cst"><span class="id" title="lemma">AU1_atom_fetch_xxx_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_fetch_or_cst"><span class="id" title="axiom">wp_atom_fetch_or_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_fetch_nand_cst" class="idref" href="#AU1_atom_fetch_nand_cst"><span class="id" title="definition">AU1_atom_fetch_nand_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_fetch_xxx_cst"><span class="id" title="lemma">AU1_atom_fetch_xxx_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_fetch_nand_cst"><span class="id" title="axiom">wp_atom_fetch_nand_cst</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="atom_xxx_fetch_cst_AU1" class="idref" href="#atom_xxx_fetch_cst_AU1"><span class="id" title="definition">atom_xxx_fetch_cst_AU1</span></a> (<a id="op:383" class="idref" href="#op:383"><span class="id" title="binder">op</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="ty:384" class="idref" href="#ty:384"><span class="id" title="binder">ty</span></a> (<a id="p:385" class="idref" href="#p:385"><span class="id" title="binder">p</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a>) (<a id="z:386" class="idref" href="#z:386"><span class="id" title="binder">z</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="Q:387" class="idref" href="#Q:387"><span class="id" title="binder">Q</span></a> : <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a>) <a id="sz:388" class="idref" href="#sz:388"><span class="id" title="binder">sz</span></a> <a id="sgn:389" class="idref" href="#sgn:389"><span class="id" title="binder">sgn</span></a> : <a class="idref" href="bedrock.lang.base_logic.mpred.html#mpred"><span class="id" title="definition">mpred</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">AU1</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;∀</span></a> <a id="n:390" class="idref" href="#n:390"><span class="id" title="binder"><span id="n:392" class="id"><span id="n:394" class="id"><span id="n:396" class="id"><span id="n:398" class="id"><span id="n:400" class="id"><span id="n:402" class="id">n</span></span></span></span></span></span></span></a> (<a id="n':391" class="idref" href="#n':391"><span class="id" title="binder"><span id="n':393" class="id"><span id="n':395" class="id"><span id="n':397" class="id"><span id="n':399" class="id"><span id="n':401" class="id"><span id="n':403" class="id">n'</span></span></span></span></span></span></span></a> := <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#at_eval"><span class="id" title="abbreviation">at_eval</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:388"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:389"><span class="id" title="variable">sgn</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:383"><span class="id" title="variable">op</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:390"><span class="id" title="variable">n</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#z:386"><span class="id" title="variable">z</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:385"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:384"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n:394"><span class="id" title="variable">n</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a> <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">@</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#d7e84064488809e2b0c7677e935d0cfc"><span class="id" title="variable">M</span></a><a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&lt;&lt;</span></a>     <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="bedrock.lang.cpp.logic.path_pred.html#_eqv"><span class="id" title="definition">_eqv</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:385"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.rep_defs.html#62731479375849aa261b6fbaae1406e9"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.heap_pred.html#primR"><span class="id" title="abbreviation">primR</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ty:384"><span class="id" title="variable">ty</span></a> (<a class="idref" href="bedrock.lang.cpp.algebra.cfrac.html#cQp.mut"><span class="id" title="abbreviation">cQp.mut</span></a> 1) (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n':399"><span class="id" title="variable">n'</span></a>)<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">COMM</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:387"><span class="id" title="variable">Q</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#n':403"><span class="id" title="variable">n'</span></a>) <a class="idref" href="bedrock.lang.bi.atomic1.html#8de46068841167987e0ed39f3ae51949"><span class="id" title="notation">&gt;&gt;</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="AU1_atom_xxx_fetch_cst" class="idref" href="#AU1_atom_xxx_fetch_cst"><span class="id" title="lemma">AU1_atom_xxx_fetch_cst</span></a> <a id="ao:404" class="idref" href="#ao:404"><span class="id" title="binder">ao</span></a> <a id="op:405" class="idref" href="#op:405"><span class="id" title="binder">op</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_xxx_fetch_cst"><span class="id" title="definition">wp_xxx_fetch_cst</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:404"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:405"><span class="id" title="variable">op</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">forall</span></a> <a id="p:406" class="idref" href="#p:406"><span class="id" title="binder">p</span></a> <a id="arg:407" class="idref" href="#arg:407"><span class="id" title="binder">arg</span></a> <a id="memorder:408" class="idref" href="#memorder:408"><span class="id" title="binder">memorder</span></a> <a id="Q:409" class="idref" href="#Q:409"><span class="id" title="binder">Q</span></a> <a id="sz:410" class="idref" href="#sz:410"><span class="id" title="binder">sz</span></a> <a id="sgn:411" class="idref" href="#sgn:411"><span class="id" title="binder">sgn</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#a46514f7419edb3d22453078cf7c9fb7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="acc_type:412" class="idref" href="#acc_type:412"><span class="id" title="binder">acc_type</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnum"><span class="id" title="constructor">Tnum</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:410"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:411"><span class="id" title="variable">sgn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:408"><span class="id" title="variable">memorder</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#_SEQ_CST"><span class="id" title="definition">_SEQ_CST</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">[|</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.has_type_prop"><span class="id" title="axiom">has_type_prop</span></a> (<a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:407"><span class="id" title="variable">arg</span></a>) <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:412"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.bi.only_provable.html#d95ff2fe2904cc1067c71e0d017740c6"><span class="id" title="notation">|]</span></a> <a class="idref" href="bedrock.lang.bi.prelude.html#edd4b90f66987f0e4145840adec59ece"><span class="id" title="notation">**</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.logic.atomics.html#atom_xxx_fetch_cst_AU1"><span class="id" title="definition">atom_xxx_fetch_cst_AU1</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#op:405"><span class="id" title="variable">op</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:412"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:406"><span class="id" title="variable">p</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:407"><span class="id" title="variable">arg</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:409"><span class="id" title="variable">Q</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sz:410"><span class="id" title="variable">sz</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#sgn:411"><span class="id" title="variable">sgn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.bi.prelude.html#0582ac70d883d93be3a66ac50f1c9225"><span class="id" title="notation">|--</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom'"><span class="id" title="abbreviation">wp_atom'</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#ao:404"><span class="id" title="variable">ao</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#acc_type:412"><span class="id" title="variable">acc_type</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="bedrock.lang.cpp.logic.atomics.html#p:406"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#memorder:408"><span class="id" title="variable">memorder</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="bedrock.lang.cpp.semantics.values.html#VALUES_INTF_AXIOM.Vint"><span class="id" title="constructor">Vint</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#arg:407"><span class="id" title="variable">arg</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#Q:409"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">WP</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">WP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[$ [$ AU]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation">∅</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span>) "[Hp Close]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; !&gt;". <span class="id" title="var">iExists</span> <span class="id" title="var">w</span>. <span class="id" title="var">iFrame</span> "Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hp". <span class="id" title="tactic">by</span> <span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Close" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris//iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "$".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_add_fetch_cst" class="idref" href="#AU1_atom_add_fetch_cst"><span class="id" title="definition">AU1_atom_add_fetch_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_xxx_fetch_cst"><span class="id" title="lemma">AU1_atom_xxx_fetch_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_add_fetch_cst"><span class="id" title="axiom">wp_atom_add_fetch_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_sub_fetch_cst" class="idref" href="#AU1_atom_sub_fetch_cst"><span class="id" title="definition">AU1_atom_sub_fetch_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_xxx_fetch_cst"><span class="id" title="lemma">AU1_atom_xxx_fetch_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_sub_fetch_cst"><span class="id" title="axiom">wp_atom_sub_fetch_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_and_fetch_cst" class="idref" href="#AU1_atom_and_fetch_cst"><span class="id" title="definition">AU1_atom_and_fetch_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_xxx_fetch_cst"><span class="id" title="lemma">AU1_atom_xxx_fetch_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_and_fetch_cst"><span class="id" title="axiom">wp_atom_and_fetch_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_xor_fetch_cst" class="idref" href="#AU1_atom_xor_fetch_cst"><span class="id" title="definition">AU1_atom_xor_fetch_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_xxx_fetch_cst"><span class="id" title="lemma">AU1_atom_xxx_fetch_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_xor_fetch_cst"><span class="id" title="axiom">wp_atom_xor_fetch_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_or_fetch_cst" class="idref" href="#AU1_atom_or_fetch_cst"><span class="id" title="definition">AU1_atom_or_fetch_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_xxx_fetch_cst"><span class="id" title="lemma">AU1_atom_xxx_fetch_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_or_fetch_cst"><span class="id" title="axiom">wp_atom_or_fetch_cst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="AU1_atom_nand_fetch_cst" class="idref" href="#AU1_atom_nand_fetch_cst"><span class="id" title="definition">AU1_atom_nand_fetch_cst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#AU1_atom_xxx_fetch_cst"><span class="id" title="lemma">AU1_atom_xxx_fetch_cst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#wp_atom_nand_fetch_cst"><span class="id" title="axiom">wp_atom_nand_fetch_cst</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.logic.atomics.html#106674b72acf13fb9e22a04f2639dc9f"><span class="id" title="section">with_Σ</span></a>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
