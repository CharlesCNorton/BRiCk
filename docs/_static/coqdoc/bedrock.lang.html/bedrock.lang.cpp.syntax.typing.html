<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index for the theory </a>
      <a href="./toc.html"> Table of contents for the theory </a>
      <a href="../../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.lang.cpp.syntax.typing</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(c)&nbsp;2020-2024&nbsp;BedRock&nbsp;Systems,&nbsp;Inc.<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.base</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bedrock.prelude.list_numbers</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.syntax.names.html#"><span class="id" title="library">bedrock.lang.cpp.syntax.names</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#"><span class="id" title="library">bedrock.lang.cpp.syntax.expr</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#"><span class="id" title="library">bedrock.lang.cpp.syntax.types</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_to_exprtype"><span class="id" title="definition">decltype_to_exprtype</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span> computes the value category and expression
type of an expression with declaration type <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="decltype_to_exprtype" class="idref" href="#decltype_to_exprtype"><span class="id" title="definition">decltype_to_exprtype</span></a> (<a id="t:1" class="idref" href="#t:1"><span class="id" title="binder">t</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decltype"><span class="id" title="definition">decltype</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#exprtype"><span class="id" title="definition">exprtype</span></a> :=<br/>
&nbsp;&nbsp;</div>

<div class="doc">
  TODO: This repeats some case distinctions that are also relevant to
  <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of"><span class="id" title="definition">valcat_of</span></a></span>. We could eliminate the duplication by deriving
  <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a></span>, <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of"><span class="id" title="definition">valcat_of</span></a></span> from <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a></span> (rather than the
  other way around).
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_qualifiers"><span class="id" title="definition">drop_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:1"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <span class="id" title="var">u</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> <span class="id" title="var">u</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_qualifiers"><span class="id" title="definition">drop_qualifiers</span></a> <span class="id" title="var">u</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| @<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="keyword">as</span> <span class="id" title="var">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
      NOTE: We return the function type without qualifiers in light of
      "A function or reference type is always cv-unqualified."
      &lt;https://www.eel.is/c++draft/basic.type.qualifier1>
      
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">f</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Xvalue"><span class="id" title="constructor">Xvalue</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">u</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:1"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>	</div>

<div class="doc">
Promote sharing, rather than normalize qualifiers 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">type_of_member</span></span> <span class="inlinecode"><span class="id" title="var">obj_ty</span></span> <span class="inlinecode"><span class="id" title="var">mut</span></span> <span class="inlinecode"><span class="id" title="var">mem_type</span></span>&nbsp;is&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">exprtype</span></span>&nbsp;of&nbsp;a&nbsp;member&nbsp;access<br/>
&nbsp;&nbsp;&nbsp;given&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;object,&nbsp;the&nbsp;mutability&nbsp;of&nbsp;the&nbsp;member,&nbsp;and&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">decltype</span></span><br/>
&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;member.<br/>
<br/>
&nbsp;&nbsp;&nbsp;Examples&nbsp;on&nbsp;decltypes&nbsp;of&nbsp;members&nbsp;(<span class="inlinecode"><span class="id" title="var">valcat_of</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">type_of_member</span></span>):<br/>
<br/>
&nbsp;&nbsp;&nbsp;&lt;&lt;<br/>
&nbsp;&nbsp;&nbsp;struct&nbsp;C&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&amp;y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&amp;&amp;z;<br/>
&nbsp;&nbsp;&nbsp;};<br/>
<br/>
&nbsp;&nbsp;&nbsp;void&nbsp;test()&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;x;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&amp;r{x};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&amp;&amp;rr{...};<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;exprtype&nbsp;valcat<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rr;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C&nbsp;c;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.x;&nbsp;&nbsp;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.y;&nbsp;&nbsp;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c.z;&nbsp;&nbsp;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C{}.x;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C{}.y;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C{}.z;&nbsp;//&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L<br/>
&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&gt;&gt;<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="type_of_member" class="idref" href="#type_of_member"><span class="id" title="definition">type_of_member</span></a> (<a id="obj_ty:2" class="idref" href="#obj_ty:2"><span class="id" title="binder">obj_ty</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#exprtype"><span class="id" title="definition">exprtype</span></a>) (<a id="mut:3" class="idref" href="#mut:3"><span class="id" title="binder">mut</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="mem_type:4" class="idref" href="#mem_type:4"><span class="id" title="binder">mem_type</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decltype"><span class="id" title="definition">decltype</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#exprtype"><span class="id" title="definition">exprtype</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="ref:5" class="idref" href="#ref:5"><span class="id" title="binder">ref</span></a>, <a id="ty:6" class="idref" href="#ty:6"><span class="id" title="binder">ty</span></a>) := <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_to_exprtype"><span class="id" title="definition">decltype_to_exprtype</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#mem_type:4"><span class="id" title="variable">mem_type</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#ref:5"><span class="id" title="variable">ref</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a> | <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Xvalue"><span class="id" title="constructor">Xvalue</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#ty:6"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="qual:8" class="idref" href="#qual:8"><span class="id" title="binder">qual</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ocv</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decompose_type"><span class="id" title="definition">decompose_type</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#obj_ty:2"><span class="id" title="variable">obj_ty</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;C++&nbsp;forbids&nbsp;&lt;&lt;mutable&nbsp;const&nbsp;int&nbsp;x&gt;&gt;&nbsp;even&nbsp;by<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;substitution&nbsp;&amp;&nbsp;template&nbsp;instantiation,&nbsp;e.g.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;mutable&nbsp;T&nbsp;mt&gt;&gt;&nbsp;with&nbsp;&lt;&lt;T&nbsp;=&nbsp;const&nbsp;int&gt;&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;arbitrary&nbsp;pick&nbsp;that&nbsp;&lt;&lt;mutable&gt;&gt;&nbsp;removes&nbsp;the&nbsp;effect<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;object&nbsp;qualifiers,&nbsp;but&nbsp;does&nbsp;not&nbsp;override&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qualifiers&nbsp;of&nbsp;the&nbsp;type&nbsp;(&lt;&lt;T&gt;&gt;&nbsp;above).&nbsp;This&nbsp;is&nbsp;in&nbsp;line<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;our&nbsp;definition&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">wp_const</span></span>,&nbsp;where&nbsp;&lt;&lt;mutable&gt;&gt;&nbsp;simply<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stops&nbsp;the&nbsp;&lt;&lt;const&gt;&gt;&nbsp;operation.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;does&nbsp;*not*&nbsp;introduce&nbsp;any&nbsp;soundness&nbsp;issue&nbsp;because&nbsp;it&nbsp;is<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compile-time&nbsp;rejected&nbsp;by&nbsp;the&nbsp;compiler.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.types.html#CV"><span class="id" title="definition">CV</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#mut:3"><span class="id" title="variable">mut</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_const"><span class="id" title="definition">q_const</span></a> <span class="id" title="var">ocv</span>) (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#q_volatile"><span class="id" title="definition">q_volatile</span></a> <span class="id" title="var">ocv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.types.html#tqualified"><span class="id" title="definition">tqualified</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#qual:8"><span class="id" title="variable">qual</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#ty:6"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.with_cpp.wp_xval.e"><span class="id" title="variable">e</span></a></span> returns the type of the expression <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.with_cpp.wp_xval.e"><span class="id" title="variable">e</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="type_of" class="idref" href="#type_of"><span class="id" title="definition">type_of</span></a> (<a id="e:9" class="idref" href="#e:9"><span class="id" title="binder">e</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#exprtype"><span class="id" title="definition">exprtype</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:9"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Evar"><span class="id" title="constructor">Evar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eglobal"><span class="id" title="constructor">Eglobal</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_reference"><span class="id" title="definition">drop_reference</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eenum_const"><span class="id" title="constructor">Eenum_const</span></a> <span class="id" title="var">gn</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tenum"><span class="id" title="constructor">Tenum</span></a> <span class="id" title="var">gn</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Echar"><span class="id" title="constructor">Echar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Estring"><span class="id" title="constructor">Estring</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Qconst"><span class="id" title="definition">Qconst</span></a> <span class="id" title="var">t</span>) (1 <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.NArith.BinNat.html#64708cc1fcff61c206ed571fe7828ea8"><span class="id" title="notation">+</span></a> <span class="id" title="definition">lengthN</span> <span class="id" title="var">vs</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eint"><span class="id" title="constructor">Eint</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ebool"><span class="id" title="constructor">Ebool</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tbool"><span class="id" title="constructor">Tbool</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eunop"><span class="id" title="constructor">Eunop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ebinop"><span class="id" title="constructor">Ebinop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ederef"><span class="id" title="constructor">Ederef</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eaddrof"><span class="id" title="constructor">Eaddrof</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of:10"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:9"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eassign"><span class="id" title="constructor">Eassign</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eassign_op"><span class="id" title="constructor">Eassign_op</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epreinc"><span class="id" title="constructor">Epreinc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epostinc"><span class="id" title="constructor">Epostinc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epredec"><span class="id" title="constructor">Epredec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epostdec"><span class="id" title="constructor">Epostdec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eseqand"><span class="id" title="constructor">Eseqand</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tbool"><span class="id" title="constructor">Tbool</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eseqor"><span class="id" title="constructor">Eseqor</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tbool"><span class="id" title="constructor">Tbool</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecomma"><span class="id" title="constructor">Ecomma</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of:10"><span class="id" title="definition">type_of</span></a> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecall"><span class="id" title="constructor">Ecall</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecast"><span class="id" title="constructor">Ecast</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Emember"><span class="id" title="constructor">Emember</span></a> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">mut</span> <span class="id" title="var">ty</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of_member"><span class="id" title="definition">type_of_member</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of:10"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:9"><span class="id" title="variable">e</span></a>) <span class="id" title="var">mut</span> <span class="id" title="var">ty</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Emember_call"><span class="id" title="constructor">Emember_call</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eoperator_call"><span class="id" title="constructor">Eoperator_call</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Esubscript"><span class="id" title="constructor">Esubscript</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Esizeof"><span class="id" title="constructor">Esizeof</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ealignof"><span class="id" title="constructor">Ealignof</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eoffsetof"><span class="id" title="constructor">Eoffsetof</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Econstructor"><span class="id" title="constructor">Econstructor</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eimplicit"><span class="id" title="constructor">Eimplicit</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of:10"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:9"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eif"><span class="id" title="constructor">Eif</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eif2"><span class="id" title="constructor">Eif2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ethis"><span class="id" title="constructor">Ethis</span></a> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Enull"><span class="id" title="constructor">Enull</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tnullptr"><span class="id" title="constructor">Tnullptr</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Einitlist"><span class="id" title="constructor">Einitlist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Einitlist_union"><span class="id" title="constructor">Einitlist_union</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eimplicit_init"><span class="id" title="constructor">Eimplicit_init</span></a> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Enew"><span class="id" title="constructor">Enew</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">aty</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <span class="id" title="var">aty</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Edelete"><span class="id" title="constructor">Edelete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eandclean"><span class="id" title="constructor">Eandclean</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of:10"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:9"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ematerialize_temp"><span class="id" title="constructor">Ematerialize_temp</span></a> <span class="id" title="var">e</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of:10"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:9"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eatomic"><span class="id" title="constructor">Eatomic</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eva_arg"><span class="id" title="constructor">Eva_arg</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epseudo_destructor"><span class="id" title="constructor">Epseudo_destructor</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tvoid"><span class="id" title="constructor">Tvoid</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Earrayloop_init"><span class="id" title="constructor">Earrayloop_init</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Earrayloop_index"><span class="id" title="constructor">Earrayloop_index</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eopaque_ref"><span class="id" title="constructor">Eopaque_ref</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eunsupported"><span class="id" title="constructor">Eunsupported</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Import</span> <a id="valcat_of_internal" class="idref" href="#valcat_of_internal"><span class="id" title="module">valcat_of_internal</span></a>.<br/>
</div>

<div class="doc">
  Setting aside uninstantiated template arguments, there's a total
  function from expressions to value categories.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="valcat_of_internal.UNEXPECTED_valcat" class="idref" href="#valcat_of_internal.UNEXPECTED_valcat"><span class="id" title="definition">UNEXPECTED_valcat</span></a> {<a id="A:12" class="idref" href="#A:12"><span class="id" title="binder">A</span></a>} (<a id="tm:13" class="idref" href="#tm:13"><span class="id" title="binder">tm</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#A:12"><span class="id" title="variable">A</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The value category of an explicit cast to type <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span> or a call to a
  function returning type <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span> or a <span class="inlinecode"><span class="id" title="var">__builtin_va_arg</span></span> of type <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span>.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="valcat_of_internal.valcat_from_type" class="idref" href="#valcat_of_internal.valcat_from_type"><span class="id" title="definition">valcat_from_type</span></a> (<a id="t:14" class="idref" href="#t:14"><span class="id" title="binder">t</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decltype"><span class="id" title="definition">decltype</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Dropping&nbsp;qualifiers&nbsp;may&nbsp;not&nbsp;be&nbsp;necessary.&nbsp;Cppreference&nbsp;says<br/>
&nbsp;&nbsp;&nbsp;&nbsp;"Reference&nbsp;types&nbsp;cannot&nbsp;be&nbsp;cv-qualified&nbsp;at&nbsp;the&nbsp;top&nbsp;level".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_qualifiers"><span class="id" title="definition">drop_qualifiers</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:14"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> <span class="id" title="var">u</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_qualifiers"><span class="id" title="definition">drop_qualifiers</span></a> <span class="id" title="var">u</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| @<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
        Both "a function call or an overloaded operator expression,
        whose return type is rvalue reference to function" and "a cast
        expression to rvalue reference to function type" are lvalue
        expressions.

<div class="paragraph"> </div>

        This also applies to <code>__builtin_va_arg</code> (an extension).

<div class="paragraph"> </div>

        https://en.cppreference.com/w/cpp/language/value_categorylvalue
        https://www.eel.is/c++draft/expr.call13
        https://www.eel.is/c++draft/expr.static.cast1
        https://www.eel.is/c++draft/expr.reinterpret.cast1
        https://www.eel.is/c++draft/expr.cast1 (C-style casts)
        
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Xvalue"><span class="id" title="constructor">Xvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;See&nbsp;&lt;https://eel.is/c++draft/expr.call13> *)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="valcat_of_internal.valcat_from_function_type" class="idref" href="#valcat_of_internal.valcat_from_function_type"><span class="id" title="definition">valcat_from_function_type</span></a> (<a id="t:15" class="idref" href="#t:15"><span class="id" title="binder">t</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#functype"><span class="id" title="definition">functype</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:15"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| @<a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tfunction"><span class="id" title="constructor">Tfunction</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ret</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of_internal.valcat_from_type"><span class="id" title="definition">valcat_from_type</span></a> <span class="id" title="var">ret</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of_internal.UNEXPECTED_valcat"><span class="id" title="definition">UNEXPECTED_valcat</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:15"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of_internal"><span class="id" title="module">valcat_of_internal</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="valcat_of" class="idref" href="#valcat_of"><span class="id" title="definition">valcat_of</span></a> (<a id="e:17" class="idref" href="#e:17"><span class="id" title="binder">e</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:17"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Evar"><span class="id" title="constructor">Evar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eglobal"><span class="id" title="constructor">Eglobal</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eenum_const"><span class="id" title="constructor">Eenum_const</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Echar"><span class="id" title="constructor">Echar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Estring"><span class="id" title="constructor">Estring</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eint"><span class="id" title="constructor">Eint</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ebool"><span class="id" title="constructor">Ebool</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eunop"><span class="id" title="constructor">Eunop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ebinop"><span class="id" title="constructor">Ebinop</span></a> <span class="id" title="var">op</span> <span class="id" title="var">e1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">op</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Bdotp"><span class="id" title="constructor">Bdotp</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
      The value category of <span class="inlinecode"><span class="id" title="var">e1</span>.*<span class="id" title="var">e2</span></span> is (i) that of <span class="inlinecode"><span class="id" title="var">e1</span></span> (xvalue or
      lvalue) when <span class="inlinecode"><span class="id" title="var">e2</span></span> points to a field and (ii) prvalue when <span class="inlinecode"><span class="id" title="var">e2</span></span>
      points to a method.

<div class="paragraph"> </div>

      We need only address (i) here because when <span class="inlinecode"><span class="id" title="var">e2</span></span> is a method, the
      result of <span class="inlinecode"><span class="id" title="var">e1</span>.*<span class="id" title="var">e2</span></span> must be immediately applied, and cpp2v emits
      <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Emember_call"><span class="id" title="constructor">Emember_call</span></a></span> rather than <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ebinop"><span class="id" title="constructor">Ebinop</span></a></span> for indirect method calls.

<div class="paragraph"> </div>

      https://www.eel.is/c++draft/expr.mptr.oper6
      
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of:18"><span class="id" title="definition">valcat_of</span></a> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Bdotip"><span class="id" title="constructor">Bdotip</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a>	<span class="comment">(*&nbsp;derived&nbsp;from&nbsp;<span class="inlinecode"><span class="id" title="var">Bdotp</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ederef"><span class="id" title="constructor">Ederef</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eaddrof"><span class="id" title="constructor">Eaddrof</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eassign"><span class="id" title="constructor">Eassign</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eassign_op"><span class="id" title="constructor">Eassign_op</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epreinc"><span class="id" title="constructor">Epreinc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epostinc"><span class="id" title="constructor">Epostinc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epredec"><span class="id" title="constructor">Epredec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epostdec"><span class="id" title="constructor">Epostdec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eseqand"><span class="id" title="constructor">Eseqand</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eseqor"><span class="id" title="constructor">Eseqor</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecomma"><span class="id" title="constructor">Ecomma</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e2</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of:18"><span class="id" title="definition">valcat_of</span></a> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecast"><span class="id" title="constructor">Ecast</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">vc</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">vc</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecall"><span class="id" title="constructor">Ecall</span></a> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <span class="id" title="var">f</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <span class="id" title="var">t</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_from_function_type"><span class="id" title="definition">valcat_from_function_type</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#UNEXPECTED_valcat"><span class="id" title="definition">UNEXPECTED_valcat</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:17"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Emember"><span class="id" title="constructor">Emember</span></a> <span class="id" title="var">e</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">mty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_qualifiers"><span class="id" title="definition">drop_qualifiers</span></a> <span class="id" title="var">mty</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <span class="id" title="var">_</span> | <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;if&nbsp;the&nbsp;member&nbsp;type&nbsp;is&nbsp;a&nbsp;reference,&nbsp;then&nbsp;the&nbsp;expression&nbsp;is&nbsp;an&nbsp;lvalue&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of:18"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:17"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Emember_call"><span class="id" title="constructor">Emember_call</span></a> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">f</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_from_function_type"><span class="id" title="definition">valcat_from_function_type</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:17"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tmember_pointer"><span class="id" title="constructor">Tmember_pointer</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_from_function_type"><span class="id" title="definition">valcat_from_function_type</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#UNEXPECTED_valcat"><span class="id" title="definition">UNEXPECTED_valcat</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:17"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eoperator_call"><span class="id" title="constructor">Eoperator_call</span></a> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">f</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#operator_impl.Func"><span class="id" title="constructor">operator_impl.Func</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_from_function_type"><span class="id" title="definition">valcat_from_function_type</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#operator_impl.MFunc"><span class="id" title="constructor">operator_impl.MFunc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">ft</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_from_function_type"><span class="id" title="definition">valcat_from_function_type</span></a> <span class="id" title="var">ft</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Esubscript"><span class="id" title="constructor">Esubscript</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
    Neither operand ever has type <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tarray"><span class="id" title="constructor">Tarray</span></a></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> due to implicitly
    inserted array-to-pointer conversions. To compute the right value
    category, we skip over such conversions.
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="valcat_of_array:25" class="idref" href="#valcat_of_array:25"><span class="id" title="binder">valcat_of_array</span></a> (<a id="ar:23" class="idref" href="#ar:23"><span class="id" title="binder"><span id="ar:24" class="id">ar</span></span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of:18"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#ar:23"><span class="id" title="variable">ar</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> | <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Xvalue"><span class="id" title="constructor">Xvalue</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Xvalue"><span class="id" title="constructor">Xvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="valcat_of_base:29" class="idref" href="#valcat_of_base:29"><span class="id" title="binder">valcat_of_base</span></a> (<a id="ei:26" class="idref" href="#ei:26"><span class="id" title="binder"><span id="ei:28" class="id">ei</span></span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#ei:26"><span class="id" title="variable">ei</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ecast"><span class="id" title="constructor">Ecast</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Carray2ptr"><span class="id" title="constructor">Carray2ptr</span></a> <span class="id" title="var">ar</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of_array:25"><span class="id" title="variable">valcat_of_array</span></a> <span class="id" title="var">ar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#drop_qualifiers"><span class="id" title="definition">drop_qualifiers</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <span class="id" title="var">e1</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tptr"><span class="id" title="constructor">Tptr</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of_base:29"><span class="id" title="variable">valcat_of_base</span></a> <span class="id" title="var">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of_base:29"><span class="id" title="variable">valcat_of_base</span></a> <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Esizeof"><span class="id" title="constructor">Esizeof</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ealignof"><span class="id" title="constructor">Ealignof</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eoffsetof"><span class="id" title="constructor">Eoffsetof</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Econstructor"><span class="id" title="constructor">Econstructor</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> <span class="comment">(*&nbsp;init&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eimplicit"><span class="id" title="constructor">Eimplicit</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of:18"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:17"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eif"><span class="id" title="constructor">Eif</span></a> <span class="id" title="var">_</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">vc</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">vc</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eif2"><span class="id" title="constructor">Eif2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">vc</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">vc</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ethis"><span class="id" title="constructor">Ethis</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Enull"><span class="id" title="constructor">Enull</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Einitlist"><span class="id" title="constructor">Einitlist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> <span class="comment">(*&nbsp;operand&nbsp;|&nbsp;init&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Einitlist_union"><span class="id" title="constructor">Einitlist_union</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> <span class="comment">(*&nbsp;operand&nbsp;|&nbsp;init&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eimplicit_init"><span class="id" title="constructor">Eimplicit_init</span></a> <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
    "References cannot be value-initialized".

<div class="paragraph"> </div>

    https://en.cppreference.com/w/cpp/language/value_initialization
    
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Enew"><span class="id" title="constructor">Enew</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Edelete"><span class="id" title="constructor">Edelete</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eandclean"><span class="id" title="constructor">Eandclean</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of:18"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:17"><span class="id" title="variable">e</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Ematerialize_temp"><span class="id" title="constructor">Ematerialize_temp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">vc</span> =&gt; <span class="id" title="var">vc</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eatomic"><span class="id" title="constructor">Eatomic</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eva_arg"><span class="id" title="constructor">Eva_arg</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_from_type"><span class="id" title="definition">valcat_from_type</span></a> <span class="id" title="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Epseudo_destructor"><span class="id" title="constructor">Epseudo_destructor</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Earrayloop_init"><span class="id" title="constructor">Earrayloop_init</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> <span class="comment">(*&nbsp;init&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Earrayloop_index"><span class="id" title="constructor">Earrayloop_index</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eopaque_ref"><span class="id" title="constructor">Eopaque_ref</span></a> <span class="id" title="var">_</span> <span class="id" title="var">vc</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">vc</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Eunsupported"><span class="id" title="constructor">Eunsupported</span></a> <span class="id" title="var">_</span> <span class="id" title="var">vc</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">vc</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of"><span class="id" title="definition">valcat_of</span></a> !<span class="id" title="var">_</span> / : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>, <span class="id" title="tactic">assert</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_exprtype"><span class="id" title="definition">decltype_of_exprtype</span></a></span> <span class="inlinecode"><span class="id" title="var">vc</span></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span> computes the declaration type of an
expression with value category <span class="inlinecode"><span class="id" title="var">vc</span></span> and expression type <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="decltype_of_exprtype" class="idref" href="#decltype_of_exprtype"><span class="id" title="definition">decltype_of_exprtype</span></a> (<a id="vc:30" class="idref" href="#vc:30"><span class="id" title="binder">vc</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#ValCat"><span class="id" title="inductive">ValCat</span></a>) (<a id="t:31" class="idref" href="#t:31"><span class="id" title="binder">t</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#exprtype"><span class="id" title="definition">exprtype</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decltype"><span class="id" title="definition">decltype</span></a> :=<br/>
&nbsp;&nbsp;</div>

<div class="doc">
  As <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#float_type.t"><span class="id" title="inductive">t</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#exprtype"><span class="id" title="definition">exprtype</span></a></span>, we do not need <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#tref"><span class="id" title="definition">tref</span></a></span>, <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.types.html#trv_ref"><span class="id" title="definition">trv_ref</span></a></span>.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#vc:30"><span class="id" title="variable">vc</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:31"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Xvalue"><span class="id" title="constructor">Xvalue</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:31"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> =&gt; <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#t:31"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a></span> <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.with_cpp.wp_xval.e"><span class="id" title="variable">e</span></a></span> computes the declaration type of expression <span class="inlinecode"><a class="idref" href="bedrock.lang.cpp.logic.wp.html#WPE.with_cpp.wp_xval.e"><span class="id" title="variable">e</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="decltype_of_expr" class="idref" href="#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a> (<a id="e:33" class="idref" href="#e:33"><span class="id" title="binder">e</span></a> : <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Expr"><span class="id" title="inductive">Expr</span></a>) : <a class="idref" href="bedrock.lang.cpp.syntax.types.html#decltype"><span class="id" title="definition">decltype</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_exprtype"><span class="id" title="definition">decltype_of_exprtype</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:33"><span class="id" title="variable">e</span></a>) (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:33"><span class="id" title="variable">e</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decltype_of_expr_lvalue" class="idref" href="#decltype_of_expr_lvalue"><span class="id" title="lemma">decltype_of_expr_lvalue</span></a> <a id="e:34" class="idref" href="#e:34"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:34"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Lvalue"><span class="id" title="constructor">Lvalue</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:34"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Tref"><span class="id" title="constructor">Tref</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:34"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a>=&gt;-&gt;. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="decltype_of_expr_xvalue" class="idref" href="#decltype_of_expr_xvalue"><span class="id" title="lemma">decltype_of_expr_xvalue</span></a> <a id="e:35" class="idref" href="#e:35"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:35"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Xvalue"><span class="id" title="constructor">Xvalue</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:35"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.types.html#Trv_ref"><span class="id" title="constructor">Trv_ref</span></a> (<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:35"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a>=&gt;-&gt;. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="decltype_of_expr_prvalue" class="idref" href="#decltype_of_expr_prvalue"><span class="id" title="lemma">decltype_of_expr_prvalue</span></a> <a id="e:36" class="idref" href="#e:36"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#valcat_of"><span class="id" title="definition">valcat_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:36"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.expr.html#Prvalue"><span class="id" title="constructor">Prvalue</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:36"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#type_of"><span class="id" title="definition">type_of</span></a> <a class="idref" href="bedrock.lang.cpp.syntax.typing.html#e:36"><span class="id" title="variable">e</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.lang.cpp.syntax.typing.html#decltype_of_expr"><span class="id" title="definition">decltype_of_expr</span></a>=&gt;-&gt;. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
